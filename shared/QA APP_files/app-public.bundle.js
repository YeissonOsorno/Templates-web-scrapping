/*
* This file is subject to the terms and conditions defined in
 * file 'LICENSE.txt', which is part of this source code package.
 */
webpackJsonp([4],{10:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COMPACT_CURRENCY_OPTIONS=t.FK_SYMBOL=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=C([""," second"],[""," second"]),u=C([""," minute"],[""," minute"]);t.numberFormatterForOptions=F,t.formatNumber=z,t.formatCoordinate=G,t.formatRange=H,t.formatDateTimeRangeWithUnit=W,t.formatDateTimeWithUnit=Y,t.formatTime=K,t.formatEmail=J,t.formatUrl=ee,t.formatImage=te,t.formatValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=ae(e,t);if(t.markdown_template){if(t.jsx){var r=m.default.render(t.markdown_template,{value:n,raw:e});return f.default.createElement(h.default,{source:r,renderers:ne})}return console.warn("formatValue: options.markdown_template not supported when options.jsx = false"),n}return t.prefix||t.suffix?t.jsx&&"string"!=typeof n?f.default.createElement("span",null,t.prefix||"",n,t.suffix||""):""+(t.prefix||"")+n+(t.suffix||""):n},t.getRemappedValue=re,t.formatValueRaw=ae,t.formatColumn=function e(t){if(t){if(null!=t.remapped_to_column)return e(t.remapped_to_column);var n=(0,_.getFriendlyName)(t);return t.unit&&"default"!==t.unit&&(n+=": "+ie(t.unit.replace(/-/g," "))),n}return""},t.formatField=function(e){return e?e.dimensions&&e.dimensions.name?e.dimensions.name:e.display_name||e.name:""},t.singularize=function(){return s.default.singularize.apply(s.default,arguments)},t.pluralize=function(){return s.default.pluralize.apply(s.default,arguments)},t.capitalize=ie,t.inflect=function(){return s.default.inflect.apply(s.default,arguments)},t.titleize=function(){return s.default.titleize.apply(s.default,arguments)},t.humanize=function(){return s.default.humanize.apply(s.default,arguments)},t.conjunct=function(e,t){return e.slice(0,-1).join(", ")+(e.length>2?",":"")+(e.length>1?" "+t+" ":"")+(e[e.length-1]||"")},t.duration=function(e){if(e<6e4){var t=Math.round(e/1e3);return(0,p.ngettext)((0,p.msgid)(o,t),t+" seconds",t)}var n=Math.round(e/1e3/60);return(0,p.ngettext)((0,p.msgid)(u,n),n+" minutes",n)},t.stripId=function(e){return e&&e.replace(/ id$/i,"").trim()},t.slugify=function(e){return e&&e.toLowerCase().replace(/[^a-z\u0400-\u04ff0-9_]/g,"_")},t.assignUserColors=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["bg-brand","bg-purple","bg-error","bg-green","bg-gold","bg-medium"],r={},a=n[0],i=n.slice(1),o=0,u=!0,l=!1,s=void 0;try{for(var c,d=e[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var f=c.value;f in r||(f===t?r[f]=a:null!=f&&(r[f]=i[o++%i.length]))}}catch(e){l=!0,s=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw s}}return r},t.formatSQL=function(e){if("string"==typeof e)return e=(e=(e=(e=(e=(e=(e=(e=e.replace(/\sFROM/,"\nFROM")).replace(/\sLEFT JOIN/,"\nLEFT JOIN")).replace(/\sWHERE/,"\nWHERE")).replace(/\sGROUP BY/,"\nGROUP BY")).replace(/\sORDER BY/,"\nORDER BY")).replace(/\sLIMIT/,"\nLIMIT")).replace(/\sAND\s/,"\n   AND ")).replace(/\sOR\s/,"\n    OR ")};var l=S(n(36)),s=S(n(160)),c=S(n(8)),d=S(n(271)),f=S(n(0)),p=n(1),m=S(n(930)),h=S(n(428)),v=S(n(116)),y=n(13),g=n(117),b=n(33),_=n(24),E=n(136),w=n(306),O=n(28);function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.FK_SYMBOL="→";var x={compact:!1,maximumFractionDigits:2};function k(e){var t=i({},x);return"number"!=typeof e.decimals||isNaN(e.decimals)||(t.minimumFractionDigits=e.decimals,t.maximumFractionDigits=e.decimals),t}var A=l.default.format(".2f"),T=l.default.format(",.f"),P=l.default.format(".08f"),j=l.default.format(".02f"),N=function(e,t){return l.default.format(".0"+(0,E.decimalCount)(t)+"f")(e)},M=function(e){return e.compact||e.date_abbreviate?"MMM":"MMMM"},R=function(e){return e.compact||e.date_abbreviate?"ddd":"dddd"},D=" – ",L=/([\+\-])?[^0-9]*([0-9\., ]+)/,I=".,";function F(e){return e=i({},k(e),e),new Intl.NumberFormat("en",{style:e.number_style,currency:e.currency,currencyDisplay:e.currency_style,useGrouping:!0,minimumIntegerDigits:e.minimumIntegerDigits,minimumFractionDigits:e.minimumFractionDigits,maximumFractionDigits:e.maximumFractionDigits,minimumSignificantDigits:e.minimumSignificantDigits,maximumSignificantDigits:e.maximumSignificantDigits})}function z(e){var t,n,r,o,u,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("number"!=typeof(s=i({},k(s),s)).scale||isNaN(s.scale)||(e=s.scale*e),s.compact)return function(e,t){if("percent"===t.number_style)return V(100*e)+"%";if("currency"===t.number_style)try{var n=F(i({},t,U));if(Math.abs(e)<B)return n.format(e);var r=n.formatToParts(e).find(function(e){return"currency"===e.type}),a=r.value;return a+V(e)}catch(t){return V(e)}if("scientific"===t.number_style)return q(e,i({},t,{maximumFractionDigits:void 0,minimumFractionDigits:1}));return V(e)}(e,s);if("scientific"===s.number_style)return q(e,s);try{var c=(e<1&&e>-1&&null==s.decimals?F(i({},s,{maximumSignificantDigits:Math.max(2,s.minimumSignificantDigits||0),maximumFractionDigits:void 0})):s._numberFormatter?s._numberFormatter:F(s)).format(e);if("cell"===s.type&&s.currency_in_header&&"currency"===s.number_style){var d=c.match(L);d&&(c=(d[1]||"").trim()+(d[2]||"").trim())}var f=s.number_separators;return f&&f!==I&&(t=c,n=(f||".,").split(""),r=a(n,2),o=r[0],u={",":r[1]||"",".":o},c=t.replace(/,|\./g,function(e){return u[e]})),c}catch(t){return console.warn("Error formatting number",t),T(l.default.round(e,s.maximumFractionDigits))}}function q(e,t){t.maximumFractionDigits&&(e=l.default.round(e,t.maximumFractionDigits));var n=e.toExponential(t.minimumFractionDigits);if(t.jsx){var r=n.split("e"),i=a(r,2),o=i[0],u=i[1];return f.default.createElement("span",null,o,"×10",f.default.createElement("sup",null,u.replace(/^\+/,"")))}return n}var B=1e3,U=t.COMPACT_CURRENCY_OPTIONS={digits:2,currency_style:"symbol"};function V(e){return 0===e?"0":Math.abs(e)<B?A(e).replace(/\.?0+$/,""):d.default.compactInteger(Math.round(e),1)}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.column&&t.column.binning_info&&t.column.binning_info.bin_width,r="";return(0,y.isLatitude)(t.column)?(r=" "+(e<0?"S":"N"),e=Math.abs(e)):(0,y.isLongitude)(t.column)&&(r=" "+(e<0?"W":"E"),e=Math.abs(e)),(n?N(e,n):t.compact?j(e):P(e))+"°"+r}function H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.map(function(e){return t(e,n)}),i=a(r,2),o=i[0],u=i[1];return n.jsx&&"string"!=typeof o||"string"!=typeof u?f.default.createElement("span",null,o," ",D," ",u):o+" "+D+" "+u}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,g.parseTimestamp)(e,t,n.local);if(!r.isValid())return String(e);var a="tooltip"===n.type?"MMMM":M(n),o=n.compact||"tooltip"===n.type,u=r.clone().locale("en").startOf(t).locale(!1),l=r.clone().locale("en").endOf(t).locale(!1);return u.isValid()&&l.isValid()?o&&u.year()===l.year()?u.month()!==l.month()?u.format(a+" D")+D+l.format(a+" D, YYYY"):u.format(a+" D")+D+l.format("D, YYYY"):u.format(a+" D, YYYY")+D+l.format(a+" D, YYYY"):function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(n=i({jsx:!1,majorWidth:3},n)).jsx?f.default.createElement("span",null,f.default.createElement("span",{style:{minWidth:n.majorWidth+"em"},className:"inline-block text-right text-bold"},e)," - ",f.default.createElement("span",null,t)):e+" - "+t}((e=e.locale("en")).format("wo"),e.format("gggg"),t)}(r,n)}function Q(e,t,n,r){var a=(0,g.parseTimestamp)(e,r.column&&r.column.unit,r.local);if(!a.isValid())return String(e);var i,o=[];return t&&o.push((i=r,t.replace(/\bMMMM\b/g,M(i)).replace(/\bdddd\b/g,R(i)))),n&&r.time_enabled&&o.push(n),a.format(o.join(", "))}function Y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(0,g.parseTimestamp)(e,t,n.local).isValid())return String(e);if("week"===t&&("tooltip"===n.type||"cell"===n.type)&&!n.noRange)return W(e,t,n);var r=(n=i({date_style:w.DEFAULT_DATE_STYLE,time_style:w.DEFAULT_TIME_STYLE,time_enabled:(0,w.hasHour)(t)?"minutes":null},n)).date_format,a=n.time_format;return r||(r=(0,w.getDateFormatFromStyle)(n.date_style,t,n.date_separator)),a||(a=(0,w.getTimeFormatFromStyle)(n.time_style,t,n.time_enabled)),Q(e,r,a,n)}function K(e){var t=(0,g.parseTime)(e);return t.isValid()?t.format("LT"):String(e)}var Z=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/;function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.jsx,r=t.rich,a=t.view_as,i=void 0===a?"auto":a,o=t.link_text,u=String(e);return n&&r&&("email_link"===i||"auto"===i)&&Z.test(u)?f.default.createElement(v.default,{href:"mailto:"+u},o||u):u}function X(e){try{return new URL(e).protocol}catch(e){return}}function $(e){return"http:"===e||"https:"===e||"mailto:"===e}function ee(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.jsx,a=n.rich,i=n.view_as,o=n.column,u=O.PLUGIN_FORMATTING_HELPERS.url(e,n),l=X(u);return r&&a&&l&&("javascript:"!==(t=l)&&"data:"!==t&&"file:"!==t)&&(void 0===i?(0,y.isURL)(o)||$(l):"link"===i||"auto"===i&&$(l))?f.default.createElement(v.default,{className:"link link--wrappable",href:u},O.PLUGIN_FORMATTING_HELPERS.urlText(e,n)):u}function te(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.jsx,r=t.rich,a=t.view_as,i=void 0===a?"auto":a,o=(t.link_text,String(e)),u=X(o);return n&&r&&"image"===i&&("http:"===u||"https:"===u)?f.default.createElement("img",{src:o,style:{height:30}}):o}var ne={link:function(e){var t=e.href,n=e.children;return f.default.createElement(v.default,{href:t},n)}};function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.remap,r=t.column;if(n&&r){if(r.hasRemappedValue&&r.hasRemappedValue(e))return r.remappedValue(e);if(r.remapping instanceof Map&&r.remapping.has(e))return r.remapping.get(e)}}function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t=i({jsx:!1,remap:!0},t)).column,a=re(e,t);if(void 0!==a&&"link"!==t.view_as)return a;if(null==e)return null;if((0,y.isURL)(n)&&null!==t.view_as||"link"===t.view_as)return ee(e,t);if((0,y.isEmail)(n))return J(e,t);if((0,y.isTime)(n))return K(e);if(n&&null!=n.unit)return Y(e,n.unit,t);if((0,y.isDate)(n)||c.default.isDate(e)||c.default.isMoment(e)||(0,c.default)(e,["YYYY-MM-DD'T'HH:mm:ss.SSSZ"],!0).isValid())return Y(e,"minute",t);if("string"==typeof e)return n&&null!=n.special_type?e:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null!==t.view_as&&("string"==typeof(e=ee(e,t))&&(e=J(e,t)),"string"==typeof e&&(e=te(e,t))),e}(e,t);if("number"==typeof e&&(0,y.isCoordinate)(n)){var o=(0,b.rangeForValue)(e,n);return o&&!t.noRange?H(o,G,t):G(e,t)}if("number"==typeof e&&(0,y.isNumber)(n)){var u=(0,b.rangeForValue)(e,n);return u&&!t.noRange?H(u,z,t):z(e,t)}return"object"===(void 0===e?"undefined":r(e))?JSON.stringify(e):String(e)}function ie(){return s.default.capitalize.apply(s.default,arguments)}},100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParametersBySlug=void 0,t.getTemplateTagParameters=function(e){return e.filter(function(e){return null!=e.type&&(e["widget-type"]||"dimension"!==e.type)}).map(function(e){return{id:e.id,type:e["widget-type"]||("date"===e.type?"date/single":"category"),target:"dimension"===e.type?["dimension",["template-tag",e.name]]:["variable",["template-tag",e.name]],name:e["display-name"],slug:e.name,default:e.default}})},t.getParameterTargetFieldId=function(e,t){if(e&&"dimension"===e[0]){var n=e[1];if(!Array.isArray(n)||"template-tag"!==n[0])return o.getFieldTargetId(n);if(t&&"native"===t.type){var r=t.native["template-tags"][String(n[1])];if(r&&"dimension"===r.type)return o.getFieldTargetId(r.dimension)}}return null},t.dateParameterValueToMBQL=s,t.stringParameterValueToMBQL=c,t.numberParameterValueToMBQL=d,t.parameterToMBQLFilter=function(e,t){if(!e.target||"dimension"!==e.target[0]||!Array.isArray(e.target[1])||"template-tag"===e.target[1][0])return null;var n=e.target[1];if(0===e.type.indexOf("date/"))return s(e.value,n);var r=o.getFieldTargetId(n),a=t.field(r);return(0,u.isNumericBaseType)(a)?d(e.value,n):c(e.value,n)},t.getParameterIconName=function(e){return/^date\//.test(e||"")?"calendar":/^location\//.test(e||"")?"location":"label"};var r,a=n(8),i=(r=a)&&r.__esModule?r:{default:r},o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(88)),u=n(13);t.getParametersBySlug=function(e,t){var n={},r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;null!=t[l.id]&&(n[l.slug]=t[l.id])}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n};var l=[{testRegex:/^past([0-9]+)([a-z]+)s(~)?$/,deserialize:function(e,t){return["time-interval",t,-parseInt(e[0]),e[1]].concat(e[2]?[{"include-current":!0}]:[])}},{testRegex:/^next([0-9]+)([a-z]+)s(~)?$/,deserialize:function(e,t){return["time-interval",t,parseInt(e[0]),e[1]].concat(e[2]?[{"include-current":!0}]:[])}},{testRegex:/^this([a-z]+)$/,deserialize:function(e,t){return["time-interval",t,"current",e[0]]}},{testRegex:/^~([0-9-T:]+)$/,deserialize:function(e,t){return["<",t,e[0]]}},{testRegex:/^([0-9-T:]+)~$/,deserialize:function(e,t){return[">",t,e[0]]}},{testRegex:/^(\d{4}-\d{2})$/,deserialize:function(e,t){return["=",["datetime-field",t,"month"],(0,i.default)(e[0],"YYYY-MM").format("YYYY-MM-DD")]}},{testRegex:/^(Q\d-\d{4})$/,deserialize:function(e,t){return["=",["datetime-field",t,"quarter"],(0,i.default)(e[0],"[Q]Q-YYYY").format("YYYY-MM-DD")]}},{testRegex:/^([0-9-T:]+)$/,deserialize:function(e,t){return["=",t,e[0]]}},{testRegex:/^([0-9-T:]+)~([0-9-T:]+)$/,deserialize:function(e,t){return["between",t,e[0],e[1]]}}];function s(e,t){var n=l.find(function(t){return t.testRegex.test(e)});if(n){var r=n.testRegex.exec(e).splice(1);return n.deserialize(r,t)}return null}function c(e,t){return Array.isArray(e)?["=",t].concat(e):["=",t,e]}function d(e,t){return["=",t,parseFloat(e)]}},1e3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=c(i),u=n(6),l=c(n(724)),s=c(n(1001));function c(e){return e&&e.__esModule?e:{default:e}}var d=(0,u.connect)(function(e,t){return{errorPage:e.app.errorPage}})(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.errorPage;return n?404===n.status?o.default.createElement(l.default,null):o.default.createElement(s.default,null):t}}]),t}())||r;d.displayName="PublicApp",t.default=d},1001:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["An error occurred"],a=["An error occurred"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=d(n(0)),u=n(1),l=n(6),s=n(1002),c=d(n(223));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){var t=e.message,n=void 0===t?(0,u.t)(i):t;return o.default.createElement(c.default,{className:"spread"},o.default.createElement("div",{className:"flex layout-centered flex-full flex-column"},o.default.createElement("div",{className:"QueryError-image QueryError-image--noRows"}),o.default.createElement("div",{className:"mt1 h4 sm-h3 md-h2 text-bold"},n)))};f.displayName="PublicError",t.default=(0,l.connect)(function(e,t){return{message:(0,s.getErrorMessage)(e,t)}})(f)},1002:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getErrorMessage=function(e){return e.app.errorPage&&e.app.errorPage.data&&(e.app.errorPage.data.message||e.app.errorPage.data)}},1003:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(723)),i=o(n(166));function o(e){return e&&e.__esModule?e:{default:e}}t.default=r({},a.default,{dashboard:i.default})},101:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=d(["Title"],["Title"]),o=d(["Description"],["Description"]);t.getStoredSettingsForSeries=m,t.getComputedSettingsForSeries=h,t.getPersistableDefaultSettingsForSeries=function(e){var t=p(e),n=h(e);return(0,u.getPersistableDefaultSettings)(t,n)},t.getSettingsWidgetsForSeries=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=p(e),a=m(e),i=h(e);return(0,u.getSettingsWidgets)(r,a,i,e,t).filter(function(e){return void 0===e.dashboard||e.dashboard===n})};var u=n(162),l=n(47),s=n(33),c=n(1);function d(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f={"card.title":{title:(0,c.t)(i),widget:"input",getDefault:function(e){return 1===e.length?e[0].card.name:null},dashboard:!0,useRawSeries:!0},"card.description":{title:(0,c.t)(o),widget:"input",getDefault:function(e){return 1===e.length?e[0].card.description:null},dashboard:!0,useRawSeries:!0}};function p(e){if(!e)return{};var t=(0,l.getVisualizationRaw)(e).visualization,n=a({},f,t.settings||{});for(var r in n)n[r].id=r;return n}function m(e){var t=e&&e[0]&&e[0].card.visualization_settings||{};return t.column_settings&&(t.column_settings=function(e){var t={},n=!0,a=!1,i=void 0;try{for(var o,u=Object.keys(e)[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value,c=JSON.parse(l),d=r(c,2),f=d[0],p=d[1];t["ref"===f?JSON.stringify(["ref",(0,s.normalizeFieldRef)(p)]):l]=e[l]}}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}(t.column_settings)),t}function h(e){if(!e)return{};var t=p(e),n=m(e);return(0,u.getComputedSettings)(t,e,n)}},102:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=h(["Name"],["Name"]),i=h(["Description"],["Description"]),o=h(["It's optional but oh, so helpful"],["It's optional but oh, so helpful"]),u=h(["Collection"],["Collection"]),l=n(11),s=n(1),c=n(34),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(23)),f=n(7),p=n(43),m=n(64);function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v,y,g="metabase/entities/questions/FAVORITE",b="metabase/entities/questions/UNFAVORITE",_=(0,c.createEntity)({name:"questions",path:"/api/card",api:{favorite:(0,m.POST)("/api/card/:id/favorite"),unfavorite:(0,m.DELETE)("/api/card/:id/favorite")},objectActions:{setArchived:function(e,t,n){var r=e.id;return _.actions.update({id:r},{archived:t},(0,c.undo)(n,"question",t?"archived":"unarchived"))},setCollection:function(e,t,n){var r=e.id;return _.actions.update({id:r},{collection_id:(0,p.canonicalCollectionId)(t&&t.id)},(0,c.undo)(n,"question","moved"))},setPinned:function(e,t,n){var r=e.id;return _.actions.update({id:r},{collection_position:"number"==typeof t?t:t?1:null},n)},setFavorited:(v=regeneratorRuntime.mark(function e(t,n){var r=t.id;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,_.api.favorite({id:r});case 3:return e.abrupt("return",{type:g,payload:r});case 6:return e.next=8,_.api.unfavorite({id:r});case 8:return e.abrupt("return",{type:b,payload:r});case 9:case"end":return e.stop()}},e,void 0)}),y=function(){var e=v.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(e,t){return y.apply(this,arguments)})},objectSelectors:{getName:function(e){return e&&e.name},getUrl:function(e){return e&&d.question(e.id)},getColor:function(){return(0,f.color)("text-medium")},getIcon:function(e){return(n(47).default.get(e.display)||{}).iconName||"beaker"}},reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,r=t.payload,a=t.error;return n!==g||a?n!==b||a?e:(0,l.assocIn)(e,[r,"favorite"],!1):(0,l.assocIn)(e,[r,"favorite"],!0)},forms:{details:{fields:[{name:"name",title:(0,s.t)(a)},{name:"description",title:(0,s.t)(i),type:"text",placeholder:(0,s.t)(o)},{name:"collection_id",title:(0,s.t)(u),type:"collection"}]},details_without_collection:{fields:[{name:"name",title:(0,s.t)(a)},{name:"description",title:(0,s.t)(i),type:"text",placeholder:(0,s.t)(o)}]}},writableProperties:["name","dataset_query","display","description","visualization_settings","archived","enable_embedding","embedding_params","collection_id","collection_position","result_metadata","metadata_checksum"],getAnalyticsMetadata:function(e,t,n){var a=r(e,1)[0],i=(t.action,a&&(0,p.getCollectionType)(a.collection_id,n()));return i&&"collection="+i}});t.default=_},103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=v(l),c=v(n(2)),d=v(n(70)),f=n(132),p=n(7),m=v(n(3)),h=v(n(4));function v(e){return e&&e.__esModule?e:{default:e}}var y=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._id=m.default.uniqueId("radio-"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=void 0===t?this._id:t,r=e.value,a=e.options,u=e.onChange,l=e.optionNameFn,c=e.optionValueFn,d=e.optionKeyFn,f=e.vertical,p=e.underlined,m=e.bubble,h=e.xspace,v=e.yspace,y=e.py,g=e.showButtons,b=void 0===g?f&&!m:g,x=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["name","value","options","onChange","optionNameFn","optionValueFn","optionKeyFn","vertical","underlined","bubble","xspace","yspace","py","showButtons"]),k=o(m?[S,C]:p?[w,O]:[_,E],2),A=k[0],T=k[1];return p&&void 0===r&&console.warn("Radio can't underline selected option when no value is given."),s.default.createElement(A,i({},x,{vertical:f,showButtons:b}),a.map(function(e,t){var i=r===c(e),o=t===a.length-1;return s.default.createElement(T,{key:d(e),selected:i,last:o,vertical:f,showButtons:b,py:y,xspace:h,yspace:v,onClick:function(t){return u(c(e))}},s.default.createElement("input",{className:"Form-radio",type:"radio",name:n,value:c(e),checked:i,id:n+"-"+d(e)}),b&&s.default.createElement("label",{htmlFor:n+"-"+d(e)}),s.default.createElement("span",null,l(e)))}))}}]),t}(),r.propTypes={value:c.default.any,options:c.default.array.isRequired,onChange:c.default.func,optionNameFn:c.default.func,optionValueFn:c.default.func,optionKeyFn:c.default.func,vertical:c.default.bool,underlined:c.default.bool,showButtons:c.default.bool,py:c.default.number},r.defaultProps={optionNameFn:function(e){return e.name},optionValueFn:function(e){return e.value},optionKeyFn:function(e){return e.value},vertical:!1,underlined:!1,bubble:!1},a);y.displayName="Radio",t.default=y;var g=d.default.ul.withConfig({displayName:"Radio__BaseList",componentId:"sc-1y1p5xd-0"})(["display:flex;flex-direction:",";"],function(e){return e.vertical?"column":"row"}),b=d.default.li.attrs({mr:function(e){return e.vertical||e.last?null:e.xspace},mb:function(e){return e.vertical&&!e.last?e.yspace:null},"aria-selected":function(e){return e.selected}}).withConfig({displayName:"Radio__BaseItem",componentId:"sc-1y1p5xd-1"})([""," display:flex;align-items:center;cursor:pointer;:hover{color:",";}"],f.space,function(e){return e.showButtons||e.selected?null:(0,p.color)("brand")});b.defaultProps={xspace:3,yspace:1};var _=(0,d.default)(g).attrs({className:function(e){return(0,h.default)(e.className,{"h3 text-bold":!e.showButtons})}}).withConfig({displayName:"Radio__NormalList",componentId:"sc-1y1p5xd-2"})([""]),E=(0,d.default)(b).withConfig({displayName:"Radio__NormalItem",componentId:"sc-1y1p5xd-3"})(["color:",";"],function(e){return e.selected?(0,p.color)("brand"):null}),w=(0,d.default)(_).withConfig({displayName:"Radio__UnderlinedList",componentId:"sc-1y1p5xd-4"})([""]),O=(0,d.default)(E).withConfig({displayName:"Radio__UnderlinedItem",componentId:"sc-1y1p5xd-5"})(["border-bottom:3px solid transparent;border-color:",";"],function(e){return e.selected?(0,p.color)("brand"):null});O.defaultProps={py:2};var S=(0,d.default)(g).withConfig({displayName:"Radio__BubbleList",componentId:"sc-1y1p5xd-6"})([""]),C=(0,d.default)(b).withConfig({displayName:"Radio__BubbleItem",componentId:"sc-1y1p5xd-7"})(["font-weight:700;border-radius:99px;color:",";background-color:",";:hover{background-color:",";transition:background 300ms linear;}"],function(e){return e.selected?(0,p.color)("white"):(0,p.color)("brand")},function(e){return e.selected?(0,p.color)("brand"):(0,p.lighten)("brand")},function(e){return!e.selected&&(0,p.lighten)("brand",.38)});C.defaultProps={xspace:1,py:1,px:2}},104:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.KEYCODE_BACKSPACE=8,t.KEYCODE_TAB=9,t.KEYCODE_ENTER=13,t.KEYCODE_ESCAPE=27,t.KEYCODE_LEFT=37,t.KEYCODE_UP=38,t.KEYCODE_RIGHT=39,t.KEYCODE_DOWN=40,t.KEY_COMMA=",",t.KEYCODE_FORWARD_SLASH=191},106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESEND_INVITE=t.PASSWORD_RESET_MANUAL=t.PASSWORD_RESET_EMAIL=t.REACTIVATE=t.DEACTIVATE=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(11),i=d(n(16)),o=d(n(14)),u=d(n(35)),l=n(34),s=n(17),c=d(n(606));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var p=t.DEACTIVATE="metabase/entities/users/DEACTIVATE",m=t.REACTIVATE="metabase/entities/users/REACTIVATE",h=t.PASSWORD_RESET_EMAIL="metabase/entities/users/PASSWORD_RESET_EMAIL",v=t.PASSWORD_RESET_MANUAL="metabase/entities/users/RESET_PASSWORD_MANUAL",y=t.RESEND_INVITE="metabase/entities/users/RESEND_INVITE";function g(){return n(277).loadMemberships()}var b,_,E,w,O,S=(0,l.createEntity)({name:"users",nameOne:"user",path:"/api/user",objectSelectors:{getName:function(e){return e.common_name||e.first_name+" "+e.last_name}},actionTypes:{DEACTIVATE:p,REACTIVATE:m,PASSWORD_RESET_EMAIL:h,PASSWORD_RESET_MANUAL:v,RESEND_INVITE:y},actionDecorators:{create:function(e){return function(t){return n=f(regeneratorRuntime.mark(function n(a,i){var l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o.default.isEmailConfigured()||(t=r({},t,{password:u.default.generatePassword()})),n.next=3,e(t)(a,i);case 3:return l=n.sent,a(g()),n.abrupt("return",r({id:l.result,password:t.password},l));case 6:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n}},update:function(e){return function(t){return n=f(regeneratorRuntime.mark(function n(r,a){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e(t)(r,a);case 2:return i=n.sent,t.group_ids&&r(g()),n.abrupt("return",i);case 5:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n}}},objectActions:{resentInvite:(O=f(regeneratorRuntime.mark(function e(t){var n=t.id;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.default.trackEvent("People Admin","Resent Invite"),e.next=3,s.UserApi.send_invite({id:n});case 3:return e.abrupt("return",{type:y});case 4:case"end":return e.stop()}},e,void 0)})),function(e){return O.apply(this,arguments)}),passwordResetEmail:(w=f(regeneratorRuntime.mark(function e(t){var n=t.email;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.default.trackEvent("People Admin","Trigger User Password Reset"),e.next=3,s.SessionApi.forgot_password({email:n});case 3:return e.abrupt("return",{type:h});case 4:case"end":return e.stop()}},e,void 0)})),function(e){return w.apply(this,arguments)}),passwordResetManual:(E=f(regeneratorRuntime.mark(function e(t){var n=t.id,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.generatePassword();return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.default.trackEvent("People Admin","Manual Password Reset"),e.next=3,s.UserApi.update_password({id:n,password:r});case 3:return e.abrupt("return",{type:v,payload:{id:n,password:r}});case 4:case"end":return e.stop()}},e,void 0)})),function(e){return E.apply(this,arguments)}),deactivate:(_=f(regeneratorRuntime.mark(function e(t){var n=t.id;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.default.trackEvent("People Admin","User Removed"),e.next=3,s.UserApi.delete({userId:n});case 3:return e.abrupt("return",{type:p,payload:{id:n}});case 4:case"end":return e.stop()}},e,void 0)})),function(e){return _.apply(this,arguments)}),reactivate:(b=f(regeneratorRuntime.mark(function e(t){var n,r=t.id;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.default.trackEvent("People Admin","User Reactivated"),e.next=3,s.UserApi.reactivate({userId:r});case 3:return n=e.sent,e.abrupt("return",{type:m,payload:n});case 5:case"end":return e.stop()}},e,void 0)})),function(e){return b.apply(this,arguments)})},reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,r=t.payload,i=t.error;return n!==p||i?n!==m||i?n!==v||i?e:(0,a.assocIn)(e,[r.id,"password"],r.password):(0,a.assocIn)(e,[r.id,"is_active"],!0):(0,a.assocIn)(e,[r.id,"is_active"],!1)},forms:c.default});t.default=S},109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearExpressions=t.removeExpression=t.updateExpression=t.addExpression=t.getExpressionsList=t.getExpressions=t.clearLimit=t.updateLimit=t.getLimit=t.clearFields=t.removeField=t.updateField=t.addField=t.getFields=t.clearOrderBy=t.removeOrderBy=t.updateOrderBy=t.addOrderBy=t.getOrderBys=t.clearJoins=t.removeJoin=t.updateJoin=t.addJoin=t.getJoins=t.canAddFilter=t.clearFilters=t.removeFilter=t.updateFilter=t.addFilter=t.getFilters=t.clearBreakouts=t.removeBreakout=t.updateBreakout=t.addBreakout=t.getBreakouts=t.hasValidAggregation=t.hasEmptyAggregation=t.isBareRows=t.clearAggregations=t.removeAggregation=t.updateAggregation=t.addAggregation=t.getAggregations=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=y(n(180)),u=y(n(601)),l=y(n(152)),s=y(n(602)),c=y(n(603)),d=y(n(604)),f=y(n(605)),p=y(n(183)),m=y(n(88)),h=n(3),v=(r=h)&&r.__esModule?r:{default:r};function y(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.getAggregations=function(e){return o.getAggregations(e.aggregation)},t.addAggregation=function(e,t){return O(e,o.addAggregation(e.aggregation,t))},t.updateAggregation=function(e,t,n){return O(e,o.updateAggregation(e.aggregation,t,n))},t.removeAggregation=function(e,t){return O(e,o.removeAggregation(e.aggregation,t))},t.clearAggregations=function(e){return O(e,o.clearAggregations(e.aggregation))},t.isBareRows=function(e){return o.isBareRows(e.aggregation)},t.hasEmptyAggregation=function(e){return o.hasEmptyAggregation(e.aggregation)},t.hasValidAggregation=function(e){return o.hasValidAggregation(e.aggregation)},t.getBreakouts=function(e){return u.getBreakouts(e.breakout)},t.addBreakout=function(e,t){return S(e,u.addBreakout(e.breakout,t))},t.updateBreakout=function(e,t,n){return S(e,u.updateBreakout(e.breakout,t,n))},t.removeBreakout=function(e,t){return S(e,u.removeBreakout(e.breakout,t))};var g=t.clearBreakouts=function(e){return S(e,u.clearBreakouts(e.breakout))},b=(t.getFilters=function(e){return l.getFilters(e.filter)},t.addFilter=function(e,t){return C(e,l.addFilter(e.filter,t))},t.updateFilter=function(e,t,n){return C(e,l.updateFilter(e.filter,t,n))},t.removeFilter=function(e,t){return C(e,l.removeFilter(e.filter,t))},t.clearFilters=function(e){return C(e,l.clearFilters(e.filter))},t.canAddFilter=function(e){return l.canAddFilter(e.filter)},t.getJoins=function(e){return s.getJoins(e.joins)},t.addJoin=function(e,t){return x(e,s.addJoin(e.joins,t))},t.updateJoin=function(e,t,n){return x(e,s.updateJoin(e.joins,t,n))},t.removeJoin=function(e,t){return x(e,s.removeJoin(e.joins,t))},t.clearJoins=function(e){return x(e,s.clearJoins(e.joins))},t.getOrderBys=function(e){return d.getOrderBys(e["order-by"])}),_=(t.addOrderBy=function(e,t){return k(e,d.addOrderBy(e["order-by"],t))},t.updateOrderBy=function(e,t,n){return k(e,d.updateOrderBy(e["order-by"],t,n))},t.removeOrderBy=function(e,t){return k(e,d.removeOrderBy(e["order-by"],t))}),E=t.clearOrderBy=function(e){return k(e,d.clearOrderBy(e["order-by"]))},w=(t.getFields=function(e){return p.getFields(e.fields)},t.addField=function(e,t){return A(e,p.addField(e.fields,t))},t.updateField=function(e,t,n){return A(e,p.updateField(e.fields,t,n))},t.removeField=function(e,t){return A(e,p.removeField(e.fields,t))},t.clearFields=function(e){return A(e,p.clearFields(e.fields))});t.getLimit=function(e){return c.getLimit(e.limit)},t.updateLimit=function(e,t){return T(e,c.updateLimit(e.limit,t))},t.clearLimit=function(e){return T(e,c.clearLimit(e.limit))},t.getExpressions=function(e){return f.getExpressions(e.expressions)},t.getExpressionsList=function(e){return f.getExpressionsList(e.expressions)},t.addExpression=function(e,t,n){return P(e,f.addExpression(e.expressions,t,n))},t.updateExpression=function(e,t,n,r){return P(e,f.updateExpression(e.expressions,t,n,r))},t.removeExpression=function(e,t){return P(e,f.removeExpression(e.expressions,t))},t.clearExpressions=function(e){return P(e,f.clearExpressions(e.expressions))};function O(e,t){var n=o.isBareRows(e.aggregation),r=o.isBareRows(t);return r!==n&&(e=w(e),e=E(e)),r&&(e=g(e)),j("aggregation",e,t)}function S(e,t){var n=u.getBreakouts(t).map(function(e){return m.getFieldTargetId(e)}).filter(function(e){return null!=e}),r=!0,a=!1,o=void 0;try{for(var l,s=b(e).entries()[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=i(l.value,2),d=c[0],f=c[1],p=m.getFieldTargetId(f[1]);null==p||v.default.contains(n,p)||(e=_(e,d))}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return j("breakout",e=w(e),t)}function C(e,t){return j("filter",e,t)}function x(e,t){return j("joins",e,t)}function k(e,t){return j("order-by",e,t)}function A(e,t){return j("fields",e,t)}function T(e,t){return j("limit",e,t)}function P(e,t){return t&&0===Object.keys(t).length&&(t=null),j("expressions",e,t)}function j(e,t,n){return t=a({},t),null==n?delete t[e]:t[e]=n,t}},110:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=p(u),s=p(n(2)),c=p(n(4)),d=p(n(5)),f=n(7);function p(e){return e&&e.__esModule?e:{default:e}}var m=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"onClick",value:function(e){this.props.onChange&&this.props.onChange({preventDefault:function(){return e.preventDefault()},target:{checked:!this.props.checked}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.style,a=t.checked,o=t.indeterminate,u=t.color,s=t.padding,p=t.size,m=t.noIcon,h=f.normal[u],v=(0,f.color)("text-light"),y={width:p,height:p,backgroundColor:a?h:"white",border:"2px solid "+(a?h:v)};return l.default.createElement("div",{className:(0,c.default)(n,"flex align-center justify-center rounded cursor-pointer"),style:i({},r,y),onClick:function(t){e.onClick(t)}},(a||o)&&!m&&l.default.createElement(d.default,{style:{color:a?"white":v},name:o?"dash":"check",size:p-2*s}))}}]),t}(),r.propTypes={checked:s.default.bool,indeterminate:s.default.bool,onChange:s.default.func,color:s.default.oneOf(Object.keys(f.normal)),size:s.default.number,padding:s.default.number,noIcon:s.default.bool},r.defaultProps={size:16,padding:2,color:"blue",style:{}},a);m.displayName="CheckBox",t.default=m},112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelable=function(e){var t=!1,n=new Promise(function(n,r){e.then(function(e){return t?r({isCanceled:!0}):n(e)},function(e){return r(t?{isCanceled:!0}:e)})});return n.cancel=function(){t=!0},n},t.timeout=function(e,t,n){return new Promise(function(r,a){e.then(r,a),setTimeout(function(){return a(n||new Error("Operation timed out"))},t)})},t.delay=function(e){return new Promise(function(t,n){return setTimeout(t,e)})},t.defer=function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e}},114:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=p(o),l=p(n(2)),s=p(n(37)),c=p(n(19)),d=n(888),f=n(7);function p(e){return e&&e.__esModule?e:{default:e}}var m=function(e){var t=e.color,n=e.size;return u.default.createElement("div",{style:{width:n,height:n,backgroundColor:t,borderRadius:n/8}})};m.displayName="ColorSquare";var h=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.onChange,r=t.padding,a=t.size,i=t.triggerSize,o=t.value,l=t.fancy,p=this.props.colors||Object.values(f.normal).slice(0,9);return u.default.createElement("div",{className:"inline-block"},u.default.createElement(s.default,{ref:"colorPopover",triggerElement:u.default.createElement("div",{className:"bordered rounded flex align-center",style:{padding:i/4}},u.default.createElement(m,{color:o,size:i}))},l?u.default.createElement("div",null,u.default.createElement("div",{className:"rounded overflow-hidden"},u.default.createElement(d.SketchPicker,{color:o,onChangeComplete:function(e){n(e.hex)}})),u.default.createElement("div",{className:"p1 border-top"},u.default.createElement(c.default,{onClick:function(){return e.refs.colorPopover.close()}},"Done"))):u.default.createElement("div",{className:"p1"},u.default.createElement("ol",{className:"flex flex-wrap",style:{maxWidth:120}},p.map(function(t,i){return u.default.createElement("li",{className:"cursor-pointer",style:{padding:r},key:i,onClick:function(){n(t),e.refs.colorPopover.close()}},u.default.createElement(m,{color:t,size:a}))})))))}}]),t}(),r.defaultProps={size:32,triggerSize:32,padding:4},r.propTypes={colors:l.default.array,onChange:l.default.func.isRequired,size:l.default.number,triggerSize:l.default.number,value:l.default.string},a);h.displayName="ColorPicker",t.default=h},115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clear=t.remove=t.update=t.add=t.args=t.op=t.noNullValues=t.fieldIdsEq=void 0;var r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=n(3),o=(r=i)&&r.__esModule?r:{default:r};function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.fieldIdsEq=function(e,t){return(void 0===e?"undefined":a(e))===(void 0===t?"undefined":a(t))&&("number"==typeof e?e===t:null==e&&null==t||(Array.isArray(e)&&Array.isArray(t)&&3===e.length&&3===t.length&&"field-literal"===e[0]&&"field-literal"===t[0]?e[1]===t[1]:(console.warn("Don't know how to compare these IDs:",e,t),!1)))},t.noNullValues=function(e){return o.default.all(e,function(e){return null!=e})},t.op=function(e){return e[0]},t.args=function(e){return e.slice(1)},t.add=function(e,t){return[].concat(u(e),[t])},t.update=function(e,t,n){return[].concat(u(e.slice(0,t)),[n],u(e.slice(t+1)))},t.remove=function(e,t){return[].concat(u(e.slice(0,t)),u(e.slice(t+1)))},t.clear=function(){return[]}},116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),o=(r=i)&&r.__esModule?r:{default:r},u=n(25);var l=function(e){var t=e.href,n=e.target,r=void 0===n?(0,u.getUrlTarget)(t):n,i=e.className,l=e.children,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["href","target","className","children"]);return o.default.createElement("a",a({href:t,className:i||"link",target:r,rel:"noopener noreferrer",onClickCapture:function(e){return e.stopPropagation()}},s),l)};l.displayName="ExternalLink",t.default=l},117:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTimestamp=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=void 0;r=i.default.isMoment(e)?e:"string"==typeof e&&/(Z|[+-]\d\d:?\d\d)$/.test(e)?i.default.parseZone(e):t in o&&"number"==typeof e?o[t](e):i.default.utc(e);return n?r.local():r},t.parseTime=function(e){return i.default.isMoment(e)?e:"string"==typeof e?i.default.parseZone(e,["HH:mm:SS.sssZZ","HH:mm:SS.sss","HH:mm:SS.sss","HH:mm:SS","HH:mm"]):i.default.utc(e)};var r,a=n(8),i=(r=a)&&r.__esModule?r:{default:r};var o={year:function(e){return(0,i.default)().year(e).startOf("year")},"minute-of-hour":function(e){return(0,i.default)().minute(e).startOf("minute")},"hour-of-day":function(e){return(0,i.default)().hour(e).startOf("hour")},"day-of-week":function(e){return(0,i.default)().day(e-1).startOf("day")},"day-of-month":function(e){return(0,i.default)("2016-01-01").date(e).startOf("day")},"day-of-year":function(e){return(0,i.default)("2016-01-01").dayOfYear(e).startOf("day")},"week-of-year":function(e){return(0,i.default)().week(e).startOf("week")},"month-of-year":function(e){return(0,i.default)().month(e-1).startOf("month")},"quarter-of-year":function(e){return(0,i.default)().quarter(e).startOf("quarter")}}},118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getOptionFromColumn=c,t.metricSetting=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(e,a({fieldFilter:o.isMetric,getDefault:function(e){return(0,u.getDefaultDimensionAndMetric)(e).metric}},t))},t.dimensionSetting=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(e,a({fieldFilter:o.isDimension,getDefault:function(e){return(0,u.getDefaultDimensionAndMetric)(e).dimension}},t))},t.fieldSetting=f;var i,o=n(13),u=n(24),l=n(3),s=(i=l)&&i.__esModule?i:{default:i};function c(e){return{name:(0,u.getFriendlyName)(e),value:e.name}}var d=function(){return!0};function f(e){var t,n,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=o.fieldFilter,f=void 0===l?d:l,p=o.showColumnSetting,m=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(o,["fieldFilter","showColumnSetting"]);return t={},n=e,i=a({widget:"field",isValid:function(t,n){var a=r(t,1)[0],i=a.card,o=a.data;return(0,u.columnsAreValid)(i.visualization_settings[e],o,f)},getDefault:function(e){var t=r(e,1)[0].data;return(s.default.find(t.cols,f)||{}).name},getProps:function(e,t){var n=r(e,1)[0],a=(n.card,n.data);return{options:a.cols.filter(f).map(c),columns:a.cols,showColumnSetting:p}}},m),n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}},119:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=k(["Which fields do you want to use for the X and Y axes?"],["Which fields do you want to use for the X and Y axes?"]),s=k(["Data"],["Data"]),c=k(["Choose fields"],["Choose fields"]),d=n(0),f=x(d),p=x(n(2)),m=n(1),h=x(n(337)),v=x(n(188)),y=n(338);n(649);var g=n(13),b=n(24),_=n(25),E=n(10),w=n(101),O=n(83),S=x(n(3)),C=x(n(4));function x(e){return e&&e.__esModule?e:{default:e}}function k(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}for(var A="opacity: 0.25;",T=0;T<b.MAX_SERIES;T++)(0,_.addCSSRule)(".LineAreaBarChart.mute-"+T+" svg.stacked .stack._"+T+" .area",A),(0,_.addCSSRule)(".LineAreaBarChart.mute-"+T+" svg.stacked .stack._"+T+" .line",A),(0,_.addCSSRule)(".LineAreaBarChart.mute-"+T+" svg.stacked .stack._"+T+" .bar",A),(0,_.addCSSRule)(".LineAreaBarChart.mute-"+T+" svg.stacked .dc-tooltip._"+T+" .dot",A),(0,_.addCSSRule)(".LineAreaBarChart.mute-"+T+" svg:not(.stacked) .sub._"+T+" .bar",A),(0,_.addCSSRule)(".LineAreaBarChart.mute-"+T+" svg:not(.stacked) .sub._"+T+" .line",A),(0,_.addCSSRule)(".LineAreaBarChart.mute-"+T+" svg:not(.stacked) .sub._"+T+" .dot",A),(0,_.addCSSRule)(".LineAreaBarChart.mute-"+T+" svg:not(.stacked) .sub._"+T+" .bubble",A),(0,_.addCSSRule)(".LineAreaBarChart.mute-"+T+" svg:not(.stacked) .row",A);var P=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),u(t,[{key:"getHoverClasses",value:function(){var e=this.props.hovered;if(e&&null!=e.index){var t=S.default.range(0,b.MAX_SERIES).filter(function(t){return t!==e.index}).map(function(e){return"mute-"+e}),n=0===e.axisIndex?"mute-yr":1===e.axisIndex?"mute-yl":null;return t.concat(n)}return null}},{key:"getFidelity",value:function(){var e={x:0,y:0},t=this.props.gridSize||{width:1/0,height:1/0};return t.width>=5?e.x=2:t.width>=4&&(e.x=1),t.height>=5?e.y=2:t.height>=4&&(e.y=1),e}},{key:"getSettings",value:function(){var e=this.getFidelity(),t=o({},this.props.settings);return 0===e.x&&0===e.y&&(t["line.interpolate"]="cardinal"),(e.x<1||e.y<1)&&(t["graph.y_axis.axis_enabled"]=!1),(e.x<2||e.y<2)&&(t["graph.y_axis.labels_enabled"]=!1),t}},{key:"render",value:function(){var e=this.props,t=e.series,n=e.hovered,r=e.showTitle,a=e.actionButtons,i=e.onChangeCardAndRun,u=e.onVisualizationClick,l=e.visualizationIsClickable,s=e.onAddSeries,c=e.onEditSeries,d=e.onRemoveSeries,p=this.getSettings(),m=!!(t.length>1||s||c||d),g=r&&p["card.title"];return f.default.createElement("div",{className:(0,C.default)("LineAreaBarChart flex flex-column p1",this.getHoverClasses(),this.props.className)},g&&f.default.createElement(y.TitleLegendHeader,{series:t,settings:p,onChangeCardAndRun:i,actionButtons:a}),m||!g&&a?f.default.createElement(v.default,{className:"flex-no-shrink",series:m?t:[{card:{name:" "}}],settings:p,hovered:n,onHoverChange:this.props.onHoverChange,actionButtons:g?null:a,onChangeCardAndRun:i,onVisualizationClick:u,visualizationIsClickable:l,onAddSeries:s,onEditSeries:c,onRemoveSeries:d}):null,f.default.createElement(h.default,o({},this.props,{series:t,settings:p,className:"renderer flex-full",maxSeries:b.MAX_SERIES,renderer:this.constructor.renderer})))}}],[{key:"isSensible",value:function(e){var t=e.cols;return e.rows.length>1&&t.length>=2&&t.filter(g.isDimension).length>0&&t.filter(g.isMetric).length>0}},{key:"isLiveResizable",value:function(e){return e.reduce(function(e,t){return e+t.data.rows.length},0)<10}},{key:"checkRenderable",value:function(e,t){if(S.default.every(e,function(e){var t=e.data;t.cols;return t.rows.length<1}))throw new O.MinRowsError(1,0);var n=(t["graph.dimensions"]||[]).filter(function(e){return e}),r=(t["graph.metrics"]||[]).filter(function(e){return e});if(n.length<1||r.length<1)throw new O.ChartSettingsError((0,m.t)(l),{section:(0,m.t)(s)},(0,m.t)(c))}},{key:"seriesAreCompatible",value:function(e,t){var n=(0,w.getComputedSettingsForSeries)([e]),r=(0,w.getComputedSettingsForSeries)([t]),a=j(e.data.cols,n["graph.dimensions"]),i=j(t.data.cols,r["graph.dimensions"]),o=j(t.data.cols,r["graph.metrics"]);return 0!==i.length&&0!==o.length&&(!!S.default.all(o,g.isNumeric)&&((0,g.isDate)(a[0])===(0,g.isDate)(i[0])&&!!((0,g.isNumeric)(a[0])===(0,g.isNumeric)(i[0])||(0,g.isDate)(a[0])&&(0,g.isDate)(i[0]))))}},{key:"transformSeries",value:function(e){var t,n=(t=[]).concat.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.map(function(t,n){return function(e,t,n){var r=e.card,a=e.data;if(a._transformed)return[e];var u=a.cols,l=a.rows,s=(0,w.getComputedSettingsForSeries)([e]),c=(s["graph.dimensions"]||[]).filter(function(e){return null!=e}),d=(s["graph.metrics"]||[]).filter(function(e){return null!=e}),f=c.map(function(e){return S.default.findIndex(u,function(t){return t.name===e})}),p=d.map(function(e){return S.default.findIndex(u,function(t){return t.name===e})}),m=s["scatter.bubble"]&&S.default.findIndex(u,function(e){return e.name===s["scatter.bubble"]}),h=null!=m&&m>=0?[m]:[];if(c.length>1){for(var v=i(f,2),y=v[0],g=v[1],_=[y].concat(p,h),O=[],C=new Map,x=function(e){var t=l[e],r=t[g],a=C.get(r);a||(C.set(r,a=[]),O.push(r));var i=_.map(function(e){return t[e]});i._origin={seriesIndex:n,rowIndex:e,row:t,cols:u},a.push(i)},k=0;k<l.length;k++)x(k);return O.map(function(e){return{card:o({},r,{name:[t.length>1&&r.name,(0,E.formatValue)(e,{column:u[g]})].filter(function(e){return e}).join(": "),_breakoutValue:e,_breakoutColumn:u[g]}),data:{rows:C.get(e),cols:_.map(function(e){return u[e]}),_rawCols:u,_transformed:!0},clicked:{dimensions:[{value:e,column:u[g]}]}}})}var A=f[0];return p.map(function(e){var a=u[e],i=[A].concat(e,h),s=[t.length>1&&r.name,(p.length>1||1===t.length)&&a&&(0,b.getFriendlyName)(a)].filter(function(e){return e}).join(": ");return{card:o({},r,{name:s,_seriesIndex:n,_seriesKey:0===n&&a?a.name:s}),data:{rows:l.map(function(e,t){var r=i.map(function(t){return e[t]});return r._origin={seriesIndex:n,rowIndex:t,row:e,cols:u},r}),cols:i.map(function(e){return u[e]}),_transformed:!0,_rawCols:u}}})}(t,e,n)})));return S.default.isEqual(e,n)||0===n.length?e:n}}]),t}(),r.noHeader=!0,r.supportsSeries=!0,r.minSize={width:4,height:3},r.placeholderSeries=[{card:{display:"line",visualization_settings:{},dataset_query:{type:"null"}},data:{rows:S.default.range(0,11).map(function(e){return[e,e]}),cols:[{name:"x",base_type:"type/Integer"},{name:"y",base_type:"type/Integer"}]}}],r.propTypes={series:p.default.array.isRequired,actionButtons:p.default.node,showTitle:p.default.bool,isDashboard:p.default.bool},r.defaultProps={},a);function j(e,t){return t?t.map(function(t){return S.default.findWhere(e,{name:t})}):[]}P.displayName="LineAreaBarChart",t.default=P},120:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMultiCardSeries=t.isRemappedToString=t.isDimensionTimeseries=t.getFirstNonEmptySeries=t.isNormalized=t.isStacked=t.isHistogramBar=t.isOrdinal=t.isHistogram=t.isQuantitative=t.isTimeseries=void 0;var r,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=(r=["(empty)"],a=["(empty)"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}})));t.initChart=function(e,t){e.width((0,y.getAvailableCanvasWidth)(t)),e.height((0,y.getAvailableCanvasHeight)(t)),e.transitionDuration(0),e.brushOn&&e.brushOn(!1)},t.makeIndexMap=function(e){var t=new Map,n=!0,r=!1,a=void 0;try{for(var i,u=e.entries()[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var l=o(i.value,2),s=l[0],c=l[1];t.set(c,s)}}catch(e){r=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw a}}return t},t.forceSortedGroup=_,t.forceSortedGroupsOfGroups=function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,l=!0,s=!1,c=void 0;try{for(var d,f=u[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;_(p,t)}}catch(e){s=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(s)throw c}}}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}},t.reduceGroup=function(e,t,n){return e.reduce(function(e,r){return null==e&&null==r[t]?null:(null!=e&&null!=r[t]&&n(),(e||0)+(r[t]||0))},function(e,r){return null==e&&null==r[t]?null:(null!=e&&null!=r[t]&&n(),(e||0)-(r[t]||0))},function(){return null})},t.parseXValue=E,t.getDatas=function(e,t){var n=e.settings,r=e.series,a=!T(n);return r.map(function(e){var r=e.data,i=a?r.rows.filter(function(e){var t=o(e,1),n=t[0];return null!==n}):r.rows;i.length<r.rows.length&&t((0,g.nullDimensionWarning)());var u=O({settings:n,data:r});return i.map(function(e){var n,r=(n=e,Array.isArray(n)?n:Array.from(n)),a=r[0],i=r.slice(1),o=[E(a,u,t)].concat(b(i));return o._origin=e._origin,o})})},t.getXValues=function(e){var t=e.settings,n=e.series,r=n._raw,a=void 0===r?n:r,i=!T(t),o=function(){},u=new Set,l=!0,s=!0,d=!0,f=!1,p=void 0;try{for(var m,h=a[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var v=m.value,y=v.data,g=S({settings:t,data:y}),b=O({settings:t,data:y}),_=void 0,w=!0,C=!1,x=void 0;try{for(var k,A=y.rows[Symbol.iterator]();!(w=(k=A.next()).done);w=!0){var P=k.value;if(!i||null!==P[g]){var j=E(P[g],b,o);void 0!==_&&(l=l&&_<=j,s=s&&j<=_),_=j,u.add(j)}}}catch(e){C=!0,x=e}finally{try{!w&&A.return&&A.return()}finally{if(C)throw x}}}}catch(e){f=!0,p=e}finally{try{!d&&h.return&&h.return()}finally{if(f)throw p}}var N=Array.from(u);s?N=c.default.sortBy(N,function(e){return e}).reverse():l&&(N=c.default.sortBy(N,function(e){return e}));return N},t.formatNull=N;var l,s=n(3),c=(l=s)&&l.__esModule?l:{default:l},d=n(11),f=n(1),p=n(33),m=n(117),h=n(136),v=n(192),y=n(24),g=n(242);function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _(e,t){for(var n=e.top(1/0).sort(function(e,n){return t.get(e.key)-t.get(n.key)}),r=0;r<n.length;r++)n[r].index=r;e.all=function(){return n}}function E(e,t,n){var r=w(e,t),a=r.parsedValue,i=r.warning;return void 0!==i&&n(i),a}var w=c.default.memoize(function(e,t){var n=t.isNumeric,r=t.isTimeseries,a=t.isQuantitative,i=t.unit;return r&&!a?function(e,t){if(null==e)return{parsedValue:null,warning:(0,g.nullDimensionWarning)()};var n=(0,m.parseTimestamp)(e,t);if(!n.isValid())return{parsedValue:null,warning:(0,g.invalidDateWarning)(e)};return n.toString=C,{parsedValue:n}}(e,i):{parsedValue:n?e:String(N(e))}},function(e,t){return[e,void 0===e?"undefined":i(e)].concat(b(Object.values(t))).join()});function O(e){var t=e.settings,n=e.data,r=S({settings:t,data:n});return{isNumeric:(0,h.dimensionIsNumeric)(n,r),isTimeseries:x(t)||(0,v.dimensionIsExplicitTimeseries)(n,r),isQuantitative:k(t),unit:n.cols[r].unit}}function S(e){var t=e.settings,n=e.data.cols,r=t["graph.dimensions"]||[],a=o(r,1)[0],i=n.findIndex(function(e){return e.name===a});return-1===i?0:i}function C(){return this._i}var x=t.isTimeseries=function(e){return"timeseries"===e["graph.x_axis.scale"]},k=t.isQuantitative=function(e){return["linear","log","pow"].indexOf(e["graph.x_axis.scale"])>=0},A=t.isHistogram=function(e){return"histogram"===e["graph.x_axis._scale_original"]||"histogram"===e["graph.x_axis.scale"]},T=t.isOrdinal=function(e){return!x(e)&&!A(e)},P=(t.isHistogramBar=function(e){var t=e.settings,n=e.chartType;return A(t)&&"bar"===n},t.isStacked=function(e,t){return e["stackable.stack_type"]},t.isNormalized=function(e,t){return"normalized"===e["stackable.stack_type"]},t.getFirstNonEmptySeries=function(e){return c.default.find(e,function(e){return!(0,p.datasetContainsNoResults)(e.data)})});t.isDimensionTimeseries=function(e){return(0,v.dimensionIsTimeseries)(P(e).data)};t.isRemappedToString=function(e){return function(e){var t=e.cols[arguments.length>1&&void 0!==arguments[1]?arguments[1]:0];return!!(t.remapping&&t.remapping.size>0)&&"string"==typeof t.remapping.values().next().value}(P(e).data)},t.isMultiCardSeries=function(e){return e.length>1&&(0,d.getIn)(e,[0,"card","id"])!==(0,d.getIn)(e,[1,"card","id"])};var j=(0,f.t)(u);function N(e){return null===e?j:e}},121:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GRAPH_AXIS_SETTINGS=t.GRAPH_COLORS_SETTINGS=t.GRAPH_DISPLAY_VALUES_SETTINGS=t.GRAPH_GOAL_SETTINGS=t.STACKABLE_SETTINGS=t.LINE_SETTINGS=t.GRAPH_BUBBLE_SETTINGS=t.GRAPH_DATA_SETTINGS=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=pe(["Data"],["Data"]),o=pe(["X-axis"],["X-axis"]),u=pe(["Add a series breakout..."],["Add a series breakout..."]),l=pe(["Y-axis"],["Y-axis"]),s=pe(["Add another series..."],["Add another series..."]),c=pe(["Bubble size"],["Bubble size"]),d=pe(["Display"],["Display"]),f=pe(["Stacking"],["Stacking"]),p=pe(["Don't stack"],["Don't stack"]),m=pe(["Stack"],["Stack"]),h=pe(["Stack - 100%"],["Stack - 100%"]),v=pe(["Stacked chart type"],["Stacked chart type"]),y=pe(["Area"],["Area"]),g=pe(["Bar"],["Bar"]),b=pe(["Goal line"],["Goal line"]),_=pe(["Goal value"],["Goal value"]),E=pe(["Goal label"],["Goal label"]),w=pe(["Goal"],["Goal"]),O=pe(["Trend line"],["Trend line"]),S=pe(["Show values on data points"],["Show values on data points"]),C=pe(["Values to show"],["Values to show"]),x=pe(["As many as can fit nicely"],["As many as can fit nicely"]),k=pe(["All"],["All"]),A=pe(["Value formatting"],["Value formatting"]),T=pe(["Auto"],["Auto"]),P=pe(["Compact"],["Compact"]),j=pe(["Full"],["Full"]),N=pe(["Axes"],["Axes"]),M=pe(["X-axis scale"],["X-axis scale"]),R=pe(["Timeseries"],["Timeseries"]),D=pe(["Linear"],["Linear"]),L=pe(["Power"],["Power"]),I=pe(["Log"],["Log"]),F=pe(["Histogram"],["Histogram"]),z=pe(["Ordinal"],["Ordinal"]),q=pe(["Y-axis scale"],["Y-axis scale"]),B=pe(["Show x-axis line and marks"],["Show x-axis line and marks"]),U=pe(["Hide"],["Hide"]),V=pe(["Show"],["Show"]),G=pe(["Rotate 45°"],["Rotate 45°"]),H=pe(["Rotate 90°"],["Rotate 90°"]),W=pe(["Show y-axis line and marks"],["Show y-axis line and marks"]),Q=pe(["Auto y-axis range"],["Auto y-axis range"]),Y=pe(["Min"],["Min"]),K=pe(["Max"],["Max"]),Z=pe(["Use a split y-axis when necessary"],["Use a split y-axis when necessary"]),J=pe(["Labels"],["Labels"]),X=pe(["Show label on x-axis"],["Show label on x-axis"]),$=pe(["X-axis label"],["X-axis label"]),ee=pe(["Show label on y-axis"],["Show label on y-axis"]),te=pe(["Y-axis label"],["Y-axis label"]);t.getDefaultColumns=he;var ne,re=n(13),ae=n(1),ie=n(24),oe=n(341),ue=n(53),le=n(118),se=n(136),ce=n(192),de=n(3),fe=(ne=de)&&ne.__esModule?ne:{default:ne};function pe(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var me=new Set([]);function he(e){return"scatter"===e[0].card.display?(n=a(e,1)[0].data,r=n.cols,n.rows,i=r.filter(re.isDimension),o=r.filter(re.isMetric),2===i.length&&o.length<2?{dimensions:[i[0].name],metrics:[i[1].name],bubble:1===o.length?o[0].name:null}:{dimensions:[null],metrics:[null],bubble:null}):(t=e,(0,ie.getDefaultDimensionsAndMetrics)(t));var t,n,r,i,o}t.GRAPH_DATA_SETTINGS=r({},(0,ue.columnSettings)({getColumns:function(e,t){return a(e,1)[0].data.cols},hidden:!0}),{"graph._dimension_filter":{getDefault:function(e){return"scatter"===a(e,1)[0].card.display?re.isAny:re.isDimension},useRawSeries:!0},"graph._metric_filter":{getDefault:function(e){return"scatter"===a(e,1)[0].card.display?re.isNumeric:re.isMetric},useRawSeries:!0},"graph.dimensions":{section:(0,ae.t)(i),title:(0,ae.t)(o),widget:"fields",isValid:function(e,t){return e.some(function(e){var n=e.card,r=e.data;return(0,ie.columnsAreValid)(n.visualization_settings["graph.dimensions"],r,t["graph._dimension_filter"])&&(0,ie.columnsAreValid)(n.visualization_settings["graph.metrics"],r,t["graph._metric_filter"])})},getDefault:function(e,t){return he(e).dimensions},persistDefault:!0,getProps:function(e,t){var n=a(e,1)[0],r=(n.card,n.data),i=t["graph.dimensions"],o=r.cols.filter(t["graph._dimension_filter"]).map(le.getOptionFromColumn);return{options:o,addAnother:o.length>i.length&&i.length<2&&t["graph.metrics"].length<2?(0,ae.t)(u):null,columns:r.cols,showColumnSetting:!0}},readDependencies:["graph._dimension_filter","graph._metric_filter"],writeDependencies:["graph.metrics"],dashboard:!1,useRawSeries:!0},"graph.metrics":{section:(0,ae.t)(i),title:(0,ae.t)(l),widget:"fields",isValid:function(e,t){return e.some(function(e){var n=e.card,r=e.data;return(0,ie.columnsAreValid)(n.visualization_settings["graph.dimensions"],r,t["graph._dimension_filter"])&&(0,ie.columnsAreValid)(n.visualization_settings["graph.metrics"],r,t["graph._metric_filter"])})},getDefault:function(e,t){return he(e).metrics},persistDefault:!0,getProps:function(e,t){var n=a(e,1)[0],r=(n.card,n.data),i=t["graph.dimensions"],o=r.cols.filter(t["graph._metric_filter"]).map(le.getOptionFromColumn);return{options:o,addAnother:o.length>i.length&&t["graph.dimensions"].length<2?(0,ae.t)(s):null,columns:r.cols,showColumnSetting:!0}},readDependencies:["graph._dimension_filter","graph._metric_filter"],writeDependencies:["graph.dimensions"],dashboard:!1,useRawSeries:!0}},(0,oe.seriesSetting)()),t.GRAPH_BUBBLE_SETTINGS={"scatter.bubble":{section:(0,ae.t)(i),title:(0,ae.t)(c),widget:"field",isValid:function(e,t){return e.some(function(e){var t=e.card,n=e.data;return(0,ie.columnsAreValid)([t.visualization_settings["scatter.bubble"]],n,re.isNumeric)})},getDefault:function(e){return he(e).bubble},getProps:function(e,t,n){var r=a(e,1)[0];r.card;return{options:r.data.cols.filter(re.isNumeric).map(le.getOptionFromColumn),onRemove:t["scatter.bubble"]?function(){return n(null)}:null}},writeDependencies:["graph.dimensions"],dashboard:!1,useRawSeries:!0}},t.LINE_SETTINGS={"line.interpolate":{default:"linear"},"line.marker_enabled":{},"line.missing":{default:"interpolate"}};var ve=new Set(["area","bar"]);t.STACKABLE_SETTINGS={"stackable.stack_type":{section:(0,ae.t)(d),title:(0,ae.t)(f),widget:"radio",props:{options:[{name:(0,ae.t)(p),value:null},{name:(0,ae.t)(m),value:"stacked"},{name:(0,ae.t)(h),value:"normalized"}]},isValid:function(e,t){if(null!=t["stackable.stack_type"]){var n=e.map(function(e){return t.series(e).display});return fe.default.any(n,function(e){return ve.has(e)})}return!0},getDefault:function(e,t){var n=a(e,1)[0],r=n.card;n.data;return t["stackable.stacked"]||"area"===r.display&&t["graph.metrics"].length>1?"stacked":null},getHidden:function(e,t){var n=e.map(function(e){return t.series(e).display});return!fe.default.any(n,function(e){return ve.has(e)})},readDependencies:["graph.metrics","series"]},"stackable.stack_display":{section:(0,ae.t)(d),title:(0,ae.t)(v),widget:"buttonGroup",props:{options:[{icon:"area",name:(0,ae.t)(y),value:"area"},{icon:"bar",name:(0,ae.t)(g),value:"bar"}]},getDefault:function(e,t){var n=e.map(function(e){return t.series(e).display}),r=fe.default.find(n,function(e){return ve.has(e)});return r||(ve.has(e[0].card.display)?e[0].card.display:"bar")},getHidden:function(e,t){return null==t["stackable.stack_type"]},readDependencies:["stackable.stack_type","series"]}},t.GRAPH_GOAL_SETTINGS={"graph.show_goal":{section:(0,ae.t)(d),title:(0,ae.t)(b),widget:"toggle",default:!1},"graph.goal_value":{section:(0,ae.t)(d),title:(0,ae.t)(_),widget:"number",default:0,getHidden:function(e,t){return!0!==t["graph.show_goal"]},readDependencies:["graph.show_goal"]},"graph.goal_label":{section:(0,ae.t)(d),title:(0,ae.t)(E),widget:"input",default:(0,ae.t)(w),getHidden:function(e,t){return!0!==t["graph.show_goal"]},readDependencies:["graph.show_goal"]},"graph.show_trendline":{section:(0,ae.t)(d),title:(0,ae.t)(O),widget:"toggle",default:!1,getHidden:function(e,t){var n=e[0].data.insights;return!n||0===n.length},useRawSeries:!0}},t.GRAPH_DISPLAY_VALUES_SETTINGS={"graph.show_values":{section:(0,ae.t)(d),title:(0,ae.t)(S),widget:"toggle",getHidden:function(e,t){return"normalized"===t["stackable.stack_type"]},default:!1},"graph.label_value_frequency":{section:(0,ae.t)(d),title:(0,ae.t)(C),widget:"radio",getHidden:function(e,t){return!0!==t["graph.show_values"]||"normalized"===t["stackable.stack_type"]},props:{options:[{name:(0,ae.t)(x),value:"fit"},{name:(0,ae.t)(k),value:"all"}]},default:"fit",readDependencies:["graph.show_values"]},"graph.label_value_formatting":{section:(0,ae.t)(d),title:(0,ae.t)(A),widget:"radio",getHidden:function(e,t){return!0!==t["graph.show_values"]||"normalized"===t["stackable.stack_type"]},props:{options:[{name:(0,ae.t)(T),value:"auto"},{name:(0,ae.t)(P),value:"compact"},{name:(0,ae.t)(j),value:"full"}]},default:"auto",readDependencies:["graph.show_values"]}},t.GRAPH_COLORS_SETTINGS={"graph.colors":{}},t.GRAPH_AXIS_SETTINGS={"graph.x_axis._is_timeseries":{readDependencies:["graph.dimensions"],getDefault:function(e,t){var n=a(e,1)[0].data;return(0,ce.dimensionIsTimeseries)(n,fe.default.findIndex(n.cols,function(e){return e.name===t["graph.dimensions"].filter(function(e){return e})[0]}))}},"graph.x_axis._is_numeric":{readDependencies:["graph.dimensions"],getDefault:function(e,t){var n=a(e,1)[0].data;return(0,se.dimensionIsNumeric)(n,fe.default.findIndex(n.cols,function(e){return e.name===t["graph.dimensions"].filter(function(e){return e})[0]}))}},"graph.x_axis._is_histogram":{getDefault:function(e,t){var n=a(e,1)[0].data.cols;return null!=n[0].binning_info||me.has(n[0].unit)}},"graph.x_axis.scale":{section:(0,ae.t)(N),title:(0,ae.t)(M),widget:"select",default:"ordinal",readDependencies:["graph.x_axis._is_timeseries","graph.x_axis._is_numeric","graph.x_axis._is_histogram"],getDefault:function(e,t){return t["graph.x_axis._is_histogram"]?"histogram":t["graph.x_axis._is_timeseries"]?"timeseries":t["graph.x_axis._is_numeric"]?"linear":"ordinal"},getProps:function(e,t){var n=[];return t["graph.x_axis._is_timeseries"]&&n.push({name:(0,ae.t)(R),value:"timeseries"}),t["graph.x_axis._is_numeric"]&&(n.push({name:(0,ae.t)(D),value:"linear"}),t["graph.x_axis._is_histogram"]||(n.push({name:(0,ae.t)(L),value:"pow"}),n.push({name:(0,ae.t)(I),value:"log"})),n.push({name:(0,ae.t)(F),value:"histogram"})),n.push({name:(0,ae.t)(z),value:"ordinal"}),{options:n}}},"graph.y_axis.scale":{section:(0,ae.t)(N),title:(0,ae.t)(q),widget:"select",default:"linear",getProps:function(e,t){return{options:[{name:(0,ae.t)(D),value:"linear"},{name:(0,ae.t)(L),value:"pow"},{name:(0,ae.t)(I),value:"log"}]}}},"graph.x_axis.axis_enabled":{section:(0,ae.t)(N),title:(0,ae.t)(B),widget:"select",props:{options:[{name:(0,ae.t)(U),value:!1},{name:(0,ae.t)(V),value:!0},{name:(0,ae.t)(P),value:"compact"},{name:(0,ae.t)(G),value:"rotate-45"},{name:(0,ae.t)(H),value:"rotate-90"}]},default:!0},"graph.y_axis.axis_enabled":{section:(0,ae.t)(N),title:(0,ae.t)(W),widget:"select",props:{options:[{name:(0,ae.t)(U),value:!1},{name:(0,ae.t)(V),value:!0}]},default:!0},"graph.y_axis.auto_range":{section:(0,ae.t)(N),title:(0,ae.t)(Q),widget:"toggle",default:!0},"graph.y_axis.min":{section:(0,ae.t)(N),title:(0,ae.t)(Y),widget:"number",default:0,getHidden:function(e,t){return!1!==t["graph.y_axis.auto_range"]}},"graph.y_axis.max":{section:(0,ae.t)(N),title:(0,ae.t)(K),widget:"number",default:100,getHidden:function(e,t){return!1!==t["graph.y_axis.auto_range"]}},"graph.y_axis.auto_split":{section:(0,ae.t)(N),title:(0,ae.t)(Z),widget:"toggle",default:!0,getHidden:function(e){return e.length<2}},"graph.x_axis.labels_enabled":{section:(0,ae.t)(J),title:(0,ae.t)(X),widget:"toggle",default:!0},"graph.x_axis.title_text":{section:(0,ae.t)(J),title:(0,ae.t)($),widget:"input",getHidden:function(e,t){return!1===t["graph.x_axis.labels_enabled"]},getDefault:function(e,t){return 1===e.length?(0,ie.getFriendlyName)(e[0].data.cols[0]):null}},"graph.y_axis.labels_enabled":{section:(0,ae.t)(J),title:(0,ae.t)(ee),widget:"toggle",default:!0},"graph.y_axis.title_text":{section:(0,ae.t)(J),title:(0,ae.t)(te),widget:"input",getHidden:function(e,t){return!1===t["graph.y_axis.labels_enabled"]},getDefault:function(e,t){if(1===e.length)return t.series(e[0]).title;var n=a(t["graph.metrics"],1)[0],r=Array.from(new Set(e.map(function(e){var t=e.data.cols.find(function(e){return e.name===n});return t&&t.display_name})));return 1===r.length?r[0]:null},readDependencies:["series","graph.metrics"]},"graph.series_labels":{}}},122:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ERROR_MESSAGE_PERMISSION=t.ERROR_MESSAGE_GENERIC=void 0;var r,a,i,o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=H(["There was a problem displaying this chart."],["There was a problem displaying this chart."]),c=H(["Sorry, you don't have permission to see this card."],["Sorry, you don't have permission to see this card."]),d=H(["Data truncated to "," rows."],["Data truncated to "," rows."]),f=H(["Could not find visualization"],["Could not find visualization"]),p=H(["Could not display this chart with this data."],["Could not display this chart with this data."]),m=H(["No results!"],["No results!"]),h=H(["Still Waiting..."],["Still Waiting..."]),v=H(["This usually takes an average of ","."],["This usually takes an average of ","."]),y=H(["(This is a bit long for a dashboard)"],["(This is a bit long for a dashboard)"]),g=H(["This is usually pretty fast but seems to be taking a while right now."],["This is usually pretty fast but seems to be taking a while right now."]),b=G(n(0)),_=G(n(52)),E=G(n(188)),w=G(n(320)),O=G(n(578)),S=G(n(66)),C=G(n(5)),x=G(n(29)),k=n(1),A=n(10),T=G(n(16)),P=n(47),j=n(101),N=n(24),M=n(321),R=G(n(35)),D=n(33),L=n(83),I=G(n(326)),F=n(11),z=G(n(3)),q=G(n(4)),B=G(n(39)),U=G(n(311)),V=(G(n(140)),n(82));function G(e){return e&&e.__esModule?e:{default:e}}function H(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.ERROR_MESSAGE_GENERIC=(0,k.t)(s),t.ERROR_MESSAGE_PERMISSION=(0,k.t)(c);var W,Q,Y,K,Z,J,X=(0,_.default)({selector:".CardVisualization"})((o=i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleHoverChange=function(e){if(e){var t=n.state.yAxisSplit;if(t){var r=z.default.findIndex(t,function(t){return z.default.contains(t,e.index)});e=(0,F.assoc)(e,"axisIndex",r)}n.setState({hovered:e}),null!==n._resetHoverTimer&&(clearTimeout(n._resetHoverTimer),n._resetHoverTimer=null)}else n._resetHoverTimer=setTimeout(function(){n.setState({hovered:null}),n._resetHoverTimer=null},0)},n.visualizationIsClickable=function(e){if(!n.props.onChangeCardAndRun)return!1;try{return n.getClickActions(e).length>0}catch(e){return console.warn(e),!1}},n.handleVisualizationClick=function(e){e&&T.default.trackEvent("Actions","Clicked",(e.column?"column":"")+" "+(e.value?"value":"")+" "+(e.dimensions?"dimensions="+e.dimensions.length:"")),(0,M.performDefaultAction)(n.getClickActions(e),{dispatch:n.props.dispatch,onChangeCardAndRun:n.handleOnChangeCardAndRun})||setTimeout(function(){n.setState({clicked:e})},100)},n.handleOnChangeCardAndRun=function(e){var t=e.nextCard,r=e.seriesIndex,a=n.state,i=a.series,o=a.clicked,u=r||o&&o.seriesIndex||0,l=i&&i[u]&&i[u].card;n.props.onChangeCardAndRun({nextCard:t,previousCard:l})},n.onRender=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.yAxisSplit,r=e.warnings,a=void 0===r?[]:r;n.setState({yAxisSplit:t,warnings:a})},n.onRenderError=function(e){console.error(e),n.setState({error:e})},n.hideActions=function(){null!==n.state.clicked&&n.setState({clicked:null})},n.state={hovered:null,clicked:null,error:null,warnings:[],yAxisSplit:null,series:null,visualization:null,computedSettings:{}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,b.default.PureComponent),l(t,[{key:"componentWillMount",value:function(){this.transform(this.props)}},{key:"componentWillReceiveProps",value:function(e){(0,N.isSameSeries)(e.rawSeries,this.props.rawSeries)&&R.default.equals(e.settings,this.props.settings)||this.transform(e)}},{key:"componentDidMount",value:function(){this.updateWarnings()}},{key:"componentDidUpdate",value:function(e,t){R.default.equals(this.getWarnings(e,t),this.getWarnings())||this.updateWarnings()}},{key:"componentDidCatch",value:function(e,t){console.error("Error caught in <Visualization>",e,t),this.setState({error:new Error("An error occurred displaying this visualization.")})}},{key:"getWarnings",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t.warnings||[];return t.series&&"table"!==t.series[0].card.display&&(n=n.concat(e.rawSeries.filter(function(e){return e.data&&null!=e.data.rows_truncated}).map(function(e){return(0,k.t)(d,(0,A.formatNumber)(e.data.rows_truncated))}))),n}},{key:"updateWarnings",value:function(){this.props.onUpdateWarnings&&this.props.onUpdateWarnings(this.getWarnings()||[])}},{key:"transform",value:function(e){var t=e.rawSeries?(0,P.getVisualizationTransformed)((0,P.extractRemappings)(e.rawSeries)):null,n=t&&t.series,r=t&&t.visualization,a=n?(0,j.getComputedSettingsForSeries)(n):null;this.setState({hovered:null,clicked:null,error:null,warnings:[],yAxisSplit:null,series:n,visualization:r,computedSettings:a})}},{key:"_getQuestionForCardCached",value:function(e,t){return e&&t&&new B.default(t,e)}},{key:"getClickActions",value:function(e){if(!e)return[];var t=this.props,n=t.rawSeries,r=t.metadata,a=n[e.seriesIndex||0].card,i=this._getQuestionForCardCached(r,a),o=this.props.mode?i&&new U.default(i,this.props.mode):i&&i.mode();return o?o.actionsForClick(e,{}):[]}},{key:"render",value:function(){var e=this,t=this.props,n=t.actionButtons,r=t.className,a=t.showTitle,i=t.isDashboard,o=t.width,l=t.height,s=t.errorIcon,c=t.isSlow,d=t.expectedDuration,_=t.replacementContent,T=t.onOpenChartSettings,P=this.state.visualization,N=o<330,M=this.state,R=M.series,B=M.hovered,U=M.clicked,V=this.props.style,G=this.getClickActions(U);G.length>0&&(B=null);var H=this.props.error||this.state.error,W=!(R&&R.length>0&&z.default.every(R,function(e){return e.data||z.default.isObject(e.card.visualization_settings.virtual_card)})),Q=!1,Y=!1,K=this.props.settings||{};if(!W&&!H)if(K=this.props.settings||this.state.computedSettings,P)try{P.checkRenderable&&P.checkRenderable(R,K)}catch(t){H=t.message||(0,k.t)(p),t instanceof L.ChartSettingsError&&P.placeholderSeries&&!i?(H=null,R=P.placeholderSeries,K=(0,j.getComputedSettingsForSeries)(R),Y=!0):t instanceof L.ChartSettingsError&&T?H=b.default.createElement("div",null,b.default.createElement("div",null,H),b.default.createElement("div",{className:"mt2"},b.default.createElement("button",{className:"Button Button--primary Button--medium",onClick:function(){return e.props.onOpenChartSettings(t.initial)}},t.buttonText))):t instanceof L.MinRowsError&&(Q=!0)}else H=(0,k.t)(f);H||(Q=z.default.every(R,function(e){return e&&e.data&&(0,D.datasetContainsNoResults)(e.data)}));var Z=b.default.createElement("span",{className:"flex align-center"},c&&!W&&b.default.createElement(S.default,{size:18,className:(0,q.default)("Visualization-slow-spinner","usually-slow"===c?"text-gold":"text-slate")}),n),J=this.props,X=J.gridSize,$=J.gridUnit,ee=J.classNameWidgets;!X&&$&&null!=o&&null!=l&&(X={width:Math.round(o/(4*$)),height:Math.round(l/(3*$))}),Y&&(B=null,V=u({},V,{opacity:.2,filter:"grayscale()",pointerEvents:"none"}));var te=P;return b.default.createElement("div",{className:(0,q.default)(r,"flex flex-column"),style:V},a&&(K["card.title"]||Z)&&(W||H||Q||!P||!P.noHeader)||_?b.default.createElement("div",{className:"p1 flex-no-shrink"},b.default.createElement(E.default,{classNameWidgets:ee,series:K["card.title"]?(0,F.setIn)(R,[0,"card","name"],K["card.title"]):R,actionButtons:Z,description:K["card.description"],settings:K,onChangeCardAndRun:this.props.onChangeCardAndRun?this.handleOnChangeCardAndRun:null})):null,_||(i&&Q?b.default.createElement("div",{className:"flex-full px1 pb1 text-centered flex flex-column layout-centered "+(i?"text-slate-light":"text-slate")},b.default.createElement(x.default,{tooltip:(0,k.t)(m),isEnabled:N},b.default.createElement("img",{src:I.default})),!N&&b.default.createElement("span",{className:"h4 text-bold"},"No results!")):H?b.default.createElement("div",{className:"flex-full px1 pb1 text-centered flex flex-column layout-centered "+(i?"text-slate-light":"text-slate")},b.default.createElement(x.default,{tooltip:H,isEnabled:N},b.default.createElement(C.default,{className:"mb2",name:s||"warning",size:50})),!N&&b.default.createElement("span",{className:"h4 text-bold"},H)):W?b.default.createElement("div",{className:"flex-full p1 text-centered text-brand flex flex-column layout-centered"},c?b.default.createElement("div",{className:"text-slate"},b.default.createElement("div",{className:"h4 text-bold mb1"},(0,k.t)(h)),"usually-slow"===c?b.default.createElement("div",null,(0,k.jt)(v,b.default.createElement("span",{style:{whiteSpace:"nowrap"}},(0,A.duration)(d))),b.default.createElement("br",null),(0,k.t)(y)):b.default.createElement("div",null,(0,k.t)(g))):b.default.createElement(S.default,{className:"text-slate"})):b.default.createElement(te,u({},this.props,{className:"CardVisualization flex-full flex-basis-none",series:R,settings:K,card:R[0].card,data:R[0].data,hovered:B,onHoverChange:this.handleHoverChange,onVisualizationClick:this.handleVisualizationClick,visualizationIsClickable:this.visualizationIsClickable,onRenderError:this.onRenderError,onRender:this.onRender,onActionDismissal:this.hideActions,gridSize:X,onChangeCardAndRun:this.props.onChangeCardAndRun?this.handleOnChangeCardAndRun:null}))),b.default.createElement(w.default,{series:R,hovered:B,settings:K}),this.props.onChangeCardAndRun&&b.default.createElement(O.default,{clicked:U,clickActions:G,onChangeCardAndRun:this.handleOnChangeCardAndRun,onClose:this.hideActions}))}}]),t}(),i.defaultProps={showTitle:!1,isDashboard:!1,isEditing:!1,isSettings:!1,onUpdateVisualizationSettings:function(){},onChangeLocation:function(e){window.location=e}},W=(a=o).prototype,Q="_getQuestionForCardCached",Y=[V.memoize],K=Object.getOwnPropertyDescriptor(a.prototype,"_getQuestionForCardCached"),Z=a.prototype,J={},Object.keys(K).forEach(function(e){J[e]=K[e]}),J.enumerable=!!J.enumerable,J.configurable=!!J.configurable,("value"in J||J.initializer)&&(J.writable=!0),J=Y.slice().reverse().reduce(function(e,t){return t(W,Q,e)||e},J),Z&&void 0!==J.initializer&&(J.value=J.initializer?J.initializer.call(Z):void 0,J.initializer=void 0),void 0===J.initializer&&(Object.defineProperty(W,Q,J),J=null),r=a))||r;X.displayName="Visualization",t.default=X},124:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),a=u(n(2)),i=u(n(5)),o=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.className,n=e.style,a=e.children,u=e.hasValue,l=void 0===u||u;return r.default.createElement("div",{style:n,className:(0,o.default)(t,"AdminSelect flex align-center",{"text-medium":!l})},r.default.createElement("span",{className:"AdminSelect-content mr1"},a),r.default.createElement(i.default,{className:"AdminSelect-chevron flex-align-right",name:"chevrondown",size:12}))};l.displayName="SelectButton",l.propTypes={className:a.default.string,style:a.default.object,children:a.default.any,hasValue:a.default.any},t.default=l},125:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(["All Users"],["All Users"]),a=u(["Administrators"],["Administrators"]),i=u(["MetaBot"],["MetaBot"]);t.isDefaultGroup=s,t.isAdminGroup=c,t.isMetaBotGroup=d,t.isSpecialGroup=function(e){return s(e)||d(e)},t.canEditPermissions=function(e){return!c(e)},t.canEditMembership=function(e){return!s(e)&&!d(e)},t.getGroupColor=function(e){return c(e)?"text-purple":s(e)?"text-medium":"text-brand"},t.getGroupNameLocalized=function(e){return l.has(e.name)?l.get(e.name):e.name};var o=n(1);function u(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var l=new Map([["All Users",(0,o.t)(r)],["Administrators",(0,o.t)(a)],["MetaBot",(0,o.t)(i)]]);function s(e){return"All Users"===e.name}function c(e){return"Administrators"===e.name}function d(e){return"MetaBot"===e.name}},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadCard=void 0;var r,a;t.loadCard=(r=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.CardApi.get({cardId:t});case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),console.log("error loading card",e.t0),e.t0;case 10:case"end":return e.stop()}},e,this,[[0,6]])}),a=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(e){return a.apply(this,arguments)});t.createCard=f,t.startNewCard=function(e,t,n){var r=f();return r.dataset_query=o.createQuery(e,t,n),r},t.isCardDirty=function(e,t){if(e){if(e.id){var n=t?p(t):null,r=e?p(i.default.omit(e,"original_card_id")):null;return r!==n}return!(!e.dataset_query.query||!e.dataset_query.query["source-table"])||!(!e.dataset_query.native||i.default.isEmpty(e.dataset_query.native.query))}return!1},t.serializeCardForUrl=p,t.deserializeCardFromUrl=function(e){return e=e.replace(/^#/,""),JSON.parse(y(e))},t.utf8_to_b64=m,t.b64_to_utf8=h,t.utf8_to_b64url=v,t.b64url_to_utf8=y,t.urlForCardState=function(e,t){return l.question(e.cardId,e.serializedCard&&t?e.serializedCard:"")},t.cleanCopyCard=function(e){var t={};for(var n in e)"$"!==n.charAt(0)&&(t[n]=e[n]);return t};var i=d(n(3)),o=c(n(129)),u=d(n(35)),l=c(n(23)),s=n(17);function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}function f(){return{name:arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,display:"table",visualization_settings:{},dataset_query:{}}}function p(e){var t=u.default.copy(e.dataset_query);t.query&&(t.query=o.cleanQuery(t.query));var n={name:e.name,description:e.description,dataset_query:t,display:e.display,displayIsLocked:e.displayIsLocked,parameters:e.parameters,visualization_settings:e.visualization_settings,original_card_id:e.original_card_id};return v(JSON.stringify(n))}function m(e){return window.btoa(unescape(encodeURIComponent(e)))}function h(e){return decodeURIComponent(escape(window.atob(e)))}function v(e){return m(e).replace(/\+/g,"-").replace(/\//g,"_")}function y(e){return h(e.replace(/-/g,"+").replace(/_/g,"/"))}},129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NEW_QUERY_TEMPLATES=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(109);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=n(88);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})}),t.createQuery=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"query",t=arguments[1],n=arguments[2],r=u.default.copy(p[e]);t&&(r.database=t);"query"===e&&t&&n&&(r.query["source-table"]=n);return r},t.isStructured=function(e){return e&&"query"===e.type},t.isNative=function(e){return e&&"native"===e.type},t.cleanQuery=function(e){if(!e)return e;e.aggregation=l.getAggregations(e),0===e.aggregation.length&&delete e.aggregation;e.breakout=l.getBreakouts(e),0===e.breakout.length&&delete e.breakout;var t=l.getFilters(e).filter(function(e){return o.default.all(e,function(e){return null!=e})});t.length>0?e.filter=["and"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)):delete e.filter;e["order-by"]&&(e["order-by"]=e["order-by"].map(function(t){var n=r(t,2),a=n[0],i=n[1];if(!s.isValidField(i)||null==a)return null;if(s.isAggregateField(i)){if(function(e,t){if(!m(e))return!1;var n=l.getAggregations(e);return n[t]&&n[t][0]&&c.SORTABLE_AGGREGATION_TYPES.has(n[t][0])}(e,i[1]))return t}else if(m(e)){var o=e.breakout.filter(function(e){return s.isSameField(e,i,!0)});if(o.length>0)return t;var u=e.breakout.filter(function(e){return s.isSameField(e,i,!1)});if(u.length>0)return u.length>1&&console.warn("Sort clause matches more than one breakout field",i,u),[a,u[0]]}else if(l.isBareRows(e))return t;return null}).filter(function(e){return null!=e}),0===e["order-by"].length&&delete e["order-by"]);"number"!=typeof e.limit&&delete e.limit;e.expressions&&delete e.expressions[""];return e};var o=f(n(3)),u=f(n(35)),l=d(a),s=d(i),c=n(180);function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function f(e){return e&&e.__esModule?e:{default:e}}var p=t.NEW_QUERY_TEMPLATES={query:{database:null,type:"query",query:{"source-table":null}},native:{database:null,type:"native",native:{query:""}}};function m(e){return e&&e.breakout&&e.breakout.length>0&&null!==e.breakout[0]}},13:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ICON_MAPPING=t.isImageURL=t.isAvatarURL=t.isEmail=t.isURL=t.isID=t.isDescription=t.isCurrency=t.isLongitude=t.isLatitude=t.isCoordinate=t.isCountry=t.isZipCode=t.isState=t.isCity=t.isAddress=t.isTime=t.isBinnedNumber=t.isNumber=t.isNumericBaseType=t.isAny=t.isEntityName=t.isPK=t.isFK=t.isMetric=t.isDimension=t.isLocation=t.isCategory=t.isSummable=t.isString=t.isBoolean=t.isNumeric=t.isDate=t.UNKNOWN=t.DIMENSION=t.CATEGORY=t.SUMMABLE=t.ENTITY=t.PRIMARY_KEY=t.FOREIGN_KEY=t.COORDINATE=t.LOCATION=t.TEMPORAL=t.BOOLEAN=t.STRING_LIKE=t.STRING=t.NUMBER=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=me(["True"],["True"]),l=me(["False"],["False"]),s=me(["Select longitude field"],["Select longitude field"]),c=me(["Enter upper latitude"],["Enter upper latitude"]),d=me(["Enter left longitude"],["Enter left longitude"]),f=me(["Enter lower latitude"],["Enter lower latitude"]),p=me(["Enter right longitude"],["Enter right longitude"]),m=me(["Is"],["Is"]),h=me(["Is not"],["Is not"]),v=me(["Is empty"],["Is empty"]),y=me(["Not empty"],["Not empty"]),g=me(["Equal to"],["Equal to"]),b=me(["Not equal to"],["Not equal to"]),_=me(["Greater than"],["Greater than"]),E=me(["Less than"],["Less than"]),w=me(["Between"],["Between"]),O=me(["Greater than or equal to"],["Greater than or equal to"]),S=me(["Less than or equal to"],["Less than or equal to"]),C=me(["Contains"],["Contains"]),x=me(["Does not contain"],["Does not contain"]),k=me(["Is null"],["Is null"]),A=me(["Not null"],["Not null"]),T=me(["Starts with"],["Starts with"]),P=me(["Ends with"],["Ends with"]),j=me(["Before"],["Before"]),N=me(["After"],["After"]),M=me(["Inside"],["Inside"]),R=me(["Raw data"],["Raw data"]),D=me(["Just a table with the rows in the answer, no additional operations."],["Just a table with the rows in the answer, no additional operations."]),L=me(["Count of rows"],["Count of rows"]),I=me(["Count"],["Count"]),F=me(["Total number of rows in the answer."],["Total number of rows in the answer."]),z=me(["Sum of ..."],["Sum of ..."]),q=me(["Sum"],["Sum"]),B=me(["Sum of all the values of a column."],["Sum of all the values of a column."]),U=me(["Average of ..."],["Average of ..."]),V=me(["Average"],["Average"]),G=me(["Average of all the values of a column"],["Average of all the values of a column"]),H=me(["Number of distinct values of ..."],["Number of distinct values of ..."]),W=me(["Distinct values"],["Distinct values"]),Q=me(["Number of unique values of a column among all the rows in the answer."],["Number of unique values of a column among all the rows in the answer."]),Y=me(["Cumulative sum of ..."],["Cumulative sum of ..."]),K=me(["Cumulative sum"],["Cumulative sum"]),Z=me(["Additive sum of all the values of a column.\ne.x. total revenue over time."],["Additive sum of all the values of a column.\\ne.x. total revenue over time."]),J=me(["Cumulative count of rows"],["Cumulative count of rows"]),X=me(["Cumulative count"],["Cumulative count"]),$=me(["Additive count of the number of rows.\ne.x. total number of sales over time."],["Additive count of the number of rows.\\ne.x. total number of sales over time."]),ee=me(["Standard deviation of ..."],["Standard deviation of ..."]),te=me(["Standard deviation"],["Standard deviation"]),ne=me(["Number which expresses how much the values of a column vary among all rows in the answer."],["Number which expresses how much the values of a column vary among all rows in the answer."]),re=me(["Minimum of ..."],["Minimum of ..."]),ae=me(["Min"],["Min"]),ie=me(["Minimum value of a column"],["Minimum value of a column"]),oe=me(["Maximum of ..."],["Maximum of ..."]),ue=me(["Max"],["Max"]),le=me(["Maximum value of a column"],["Maximum value of a column"]);t.isFieldType=je,t.getFieldType=Ne,t.getFilterOperators=$e,t.getAggregationOperators=nt,t.getAggregationOperatorsWithFields=rt,t.getAggregationOperator=function(e){return de.default.findWhere(tt,{short:e})},t.isCompatibleAggregationOperatorForField=function(e,t){return e.validFieldsFilters.every(function(e){return 1===e([t]).length})},t.addValidOperatorsToFields=function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e.fields[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.filter_operators=$e(o,e)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}return e.aggregation_operators=rt(e),e},t.hasLatitudeAndLongitudeColumns=function(e){var t=!1,n=!1,r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;Be(l)&&(t=!0),Ue(l)&&(n=!0)}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return t&&n},t.foreignKeyCountsByOriginTable=function(e){if(null===e||!Array.isArray(e))return null;return e.map(function(e){return"origin"in e?e.origin.table.id:null}).reduce(function(e,t,n,r){return t in e?e[t]++:e[t]=1,e},{})},t.getIconForField=function(e){return at[Ne(e)]||"unknown"},t.getFilterArgumentFormatOptions=function(e,t){return e&&e.formatOptions&&e.formatOptions[t]||{}};var se,ce=n(3),de=(se=ce)&&se.__esModule?se:{default:se},fe=n(1),pe=n(41);function me(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve=t.NUMBER="NUMBER",ye=t.STRING="STRING",ge=t.STRING_LIKE="STRING_LIKE",be=t.BOOLEAN="BOOLEAN",_e=t.TEMPORAL="TEMPORAL",Ee=t.LOCATION="LOCATION",we=t.COORDINATE="COORDINATE",Oe=t.FOREIGN_KEY="FOREIGN_KEY",Se=t.PRIMARY_KEY="PRIMARY_KEY",Ce=t.ENTITY="ENTITY",xe=t.SUMMABLE="SUMMABLE",ke=t.CATEGORY="CATEGORY",Ae=t.DIMENSION="DIMENSION",Te=t.UNKNOWN="UNKNOWN",Pe=(he(r={},_e,{base:[pe.TYPE.Temporal],special:[pe.TYPE.Temporal]}),he(r,ve,{base:[pe.TYPE.Number],special:[pe.TYPE.Number]}),he(r,ye,{base:[pe.TYPE.Text],special:[pe.TYPE.Text]}),he(r,ge,{base:[pe.TYPE.TextLike]}),he(r,be,{base:[pe.TYPE.Boolean]}),he(r,we,{special:[pe.TYPE.Coordinate]}),he(r,Ee,{special:[pe.TYPE.Address]}),he(r,Ce,{special:[pe.TYPE.FK,pe.TYPE.PK,pe.TYPE.Name]}),he(r,Oe,{special:[pe.TYPE.FK]}),he(r,Se,{special:[pe.TYPE.PK]}),he(r,xe,{include:[ve],exclude:[Ce,Ee,_e]}),he(r,ke,{base:[pe.TYPE.Boolean],special:[pe.TYPE.Category],include:[Ee]}),he(r,Ae,{include:[_e,ke,Ce]}),r);function je(e,t){if(!t)return!1;for(var n=Pe[e],r=["base","special"],a=0;a<r.length;a++){var i=r[a],o=n[i];if(o){var u=t[i+"_type"],l=!0,s=!1,c=void 0;try{for(var d,f=o[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;if((0,pe.isa)(u,p))return!0}}catch(e){s=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(s)throw c}}}}var m=!0,h=!1,v=void 0;try{for(var y,g=(n.exclude||[])[Symbol.iterator]();!(m=(y=g.next()).done);m=!0){if(je(y.value,t))return!1}}catch(e){h=!0,v=e}finally{try{!m&&g.return&&g.return()}finally{if(h)throw v}}var b=!0,_=!1,E=void 0;try{for(var w,O=(n.include||[])[Symbol.iterator]();!(b=(w=O.next()).done);b=!0){if(je(w.value,t))return!0}}catch(e){_=!0,E=e}finally{try{!b&&O.return&&O.return()}finally{if(_)throw E}}return!1}function Ne(e){for(var t=[_e,Ee,we,Oe,Se,ve,ye,ge,be],n=0;n<t.length;n++){var r=t[n];if(je(r,e))return r}}var Me=t.isDate=je.bind(null,_e),Re=t.isNumeric=je.bind(null,ve),De=t.isBoolean=je.bind(null,be),Le=(t.isString=je.bind(null,ye),t.isSummable=je.bind(null,xe)),Ie=(t.isCategory=je.bind(null,ke),t.isLocation=je.bind(null,Ee),t.isDimension=function(e){return e&&"aggregation"!==e.source&&!Ve(e)},t.isMetric=function(e){return e&&"breakout"!==e.source&&Le(e)},t.isFK=function(e){return e&&(0,pe.isFK)(e.special_type)}),Fe=t.isPK=function(e){return e&&(0,pe.isPK)(e.special_type)},ze=(t.isEntityName=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.Name)},t.isAny=function(e){return!0},t.isNumericBaseType=function(e){return e&&(0,pe.isa)(e.base_type,pe.TYPE.Number)}),qe=t.isNumber=function(e){return e&&ze(e)&&(null==e.special_type||(0,pe.isa)(e.special_type,pe.TYPE.Number))},Be=(t.isBinnedNumber=function(e){return qe(e)&&!!e.binning_info},t.isTime=function(e){return e&&(0,pe.isa)(e.base_type,pe.TYPE.Time)},t.isAddress=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.Address)},t.isCity=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.City)},t.isState=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.State)},t.isZipCode=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.ZipCode)},t.isCountry=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.Country)},t.isCoordinate=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.Coordinate)},t.isLatitude=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.Latitude)}),Ue=t.isLongitude=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.Longitude)},Ve=(t.isCurrency=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.Currency)},t.isDescription=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.Description)});t.isID=function(e){return Ie(e)||Fe(e)},t.isURL=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.URL)},t.isEmail=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.Email)},t.isAvatarURL=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.AvatarURL)},t.isImageURL=function(e){return e&&(0,pe.isa)(e.special_type,pe.TYPE.ImageURL)};function Ge(e,t){return{type:"text"}}function He(e,t){return{type:"number"}}function We(e,t){return Me(e)?{type:"date"}:Re(e)?{type:"number"}:{type:"text"}}function Qe(e,t){return De(e)?{type:"select",values:[{key:!0,name:(0,fe.t)(u)},{key:!1,name:(0,fe.t)(l)}],default:!0}:Me(e)?{type:"date"}:Re(e)?{type:"number"}:{type:"text"}}var Ye={"case-sensitive":{defaultValue:!0}},Ke={"=":{validArgumentsFilters:[Qe],multi:!0},"!=":{validArgumentsFilters:[Qe],multi:!0},"is-empty":{validArgumentsFilters:[]},"not-empty":{validArgumentsFilters:[]},"is-null":{validArgumentsFilters:[]},"not-null":{validArgumentsFilters:[]},"<":{validArgumentsFilters:[We]},"<=":{validArgumentsFilters:[We]},">":{validArgumentsFilters:[We]},">=":{validArgumentsFilters:[We]},inside:{validArgumentsFilters:[function(e,t){var n=t.fields.filter(function(e){return(0,pe.isa)(e.special_type,pe.TYPE.Longitude)}).map(function(e){return{key:e.id,name:e.display_name}});return 1===n.length?{type:"hidden",default:n[0].key}:{type:"select",values:n}},He,He,He,He],placeholders:[(0,fe.t)(s),(0,fe.t)(c),(0,fe.t)(d),(0,fe.t)(f),(0,fe.t)(p)],formatOptions:[{hide:!0},{column:{special_type:pe.TYPE.Latitude},compact:!0},{column:{special_type:pe.TYPE.Longitude},compact:!0},{column:{special_type:pe.TYPE.Latitude},compact:!0},{column:{special_type:pe.TYPE.Longitude},compact:!0}]},between:{validArgumentsFilters:[We,We]},"starts-with":{validArgumentsFilters:[Ge],options:Ye,optionsDefaults:{"case-sensitive":!1}},"ends-with":{validArgumentsFilters:[Ge],options:Ye,optionsDefaults:{"case-sensitive":!1}},contains:{validArgumentsFilters:[Ge],options:Ye,optionsDefaults:{"case-sensitive":!1}},"does-not-contain":{validArgumentsFilters:[Ge],options:Ye,optionsDefaults:{"case-sensitive":!1}}},Ze=[{name:"=",verboseName:(0,fe.t)(m)},{name:"!=",verboseName:(0,fe.t)(h)},{name:"is-null",verboseName:(0,fe.t)(v)},{name:"not-null",verboseName:(0,fe.t)(y)}],Je=(he(a={},ve,[{name:"=",verboseName:(0,fe.t)(g)},{name:"!=",verboseName:(0,fe.t)(b)},{name:">",verboseName:(0,fe.t)(_)},{name:"<",verboseName:(0,fe.t)(E)},{name:"between",verboseName:(0,fe.t)(w)},{name:">=",verboseName:(0,fe.t)(O)},{name:"<=",verboseName:(0,fe.t)(S)},{name:"is-null",verboseName:(0,fe.t)(v)},{name:"not-null",verboseName:(0,fe.t)(y)}]),he(a,ye,[{name:"=",verboseName:(0,fe.t)(m)},{name:"!=",verboseName:(0,fe.t)(h)},{name:"contains",verboseName:(0,fe.t)(C)},{name:"does-not-contain",verboseName:(0,fe.t)(x)},{name:"is-null",verboseName:(0,fe.t)(k)},{name:"not-null",verboseName:(0,fe.t)(A)},{name:"is-empty",verboseName:(0,fe.t)(v)},{name:"not-empty",verboseName:(0,fe.t)(y)},{name:"starts-with",verboseName:(0,fe.t)(T)},{name:"ends-with",verboseName:(0,fe.t)(P)}]),he(a,ge,[{name:"=",verboseName:(0,fe.t)(m)},{name:"!=",verboseName:(0,fe.t)(h)},{name:"is-null",verboseName:(0,fe.t)(k)},{name:"not-null",verboseName:(0,fe.t)(A)},{name:"is-empty",verboseName:(0,fe.t)(v)},{name:"not-empty",verboseName:(0,fe.t)(y)}]),he(a,_e,[{name:"=",verboseName:(0,fe.t)(m)},{name:"<",verboseName:(0,fe.t)(j)},{name:">",verboseName:(0,fe.t)(N)},{name:"between",verboseName:(0,fe.t)(w)},{name:"is-null",verboseName:(0,fe.t)(v)},{name:"not-null",verboseName:(0,fe.t)(y)}]),he(a,Ee,[{name:"=",verboseName:(0,fe.t)(m)},{name:"!=",verboseName:(0,fe.t)(h)},{name:"is-null",verboseName:(0,fe.t)(v)},{name:"not-null",verboseName:(0,fe.t)(y)}]),he(a,we,[{name:"=",verboseName:(0,fe.t)(m)},{name:"!=",verboseName:(0,fe.t)(h)},{name:"inside",verboseName:(0,fe.t)(M)}]),he(a,be,[{name:"=",verboseName:(0,fe.t)(m),multi:!1},{name:"is-null",verboseName:(0,fe.t)(v)},{name:"not-null",verboseName:(0,fe.t)(y)}]),he(a,Oe,Ze),he(a,Se,Ze),he(a,Te,Ze),a),Xe={"equal to":"is equal to","not equal to":"is not equal to",before:"is before",after:"is after","not empty":"is not empty","not null":"is not null","less than":"is less than","greater than":"is greater than","less than or equal to":"is less than or equal to","greater than or equal to":"is greater than or equal to"};function $e(e,t,n){var r=Ne(e)||Te;return Je[r].map(function(n){var r=Ke[n.name],a=n.verboseName.toLowerCase();return o({},r,n,{moreVerboseName:Xe[a]||a,fields:r.validArgumentsFilters.map(function(n){return n(e,t)})})}).filter(function(e){return void 0===n||("STRING"!==r&&"STRING_LIKE"!==r||("is-null"===n?"not-null"!==e.name:"not-null"===n?"is-null"!==e.name:"not-null"!==e.name&&"is-null"!==e.name))})}function et(e){return de.default.filter(e,Le)}var tt=[{short:"rows",name:(0,fe.t)(R),description:(0,fe.t)(D),validFieldsFilters:[],requiresField:!1,requiredDriverFeature:"basic-aggregations"},{short:"count",name:(0,fe.t)(L),columnName:(0,fe.t)(I),description:(0,fe.t)(F),validFieldsFilters:[],requiresField:!1,requiredDriverFeature:"basic-aggregations"},{short:"sum",name:(0,fe.t)(z),columnName:(0,fe.t)(q),description:(0,fe.t)(B),validFieldsFilters:[et],requiresField:!0,requiredDriverFeature:"basic-aggregations"},{short:"avg",name:(0,fe.t)(U),columnName:(0,fe.t)(V),description:(0,fe.t)(G),validFieldsFilters:[et],requiresField:!0,requiredDriverFeature:"basic-aggregations"},{short:"distinct",name:(0,fe.t)(H),columnName:(0,fe.t)(W),description:(0,fe.t)(Q),validFieldsFilters:[function(e){return e}],requiresField:!0,requiredDriverFeature:"basic-aggregations"},{short:"cum-sum",name:(0,fe.t)(Y),columnName:(0,fe.t)(K),description:(0,fe.t)(Z),validFieldsFilters:[et],requiresField:!0,requiredDriverFeature:"basic-aggregations"},{short:"cum-count",name:(0,fe.t)(J),columnName:(0,fe.t)(X),description:(0,fe.t)($),validFieldsFilters:[],requiresField:!1,requiredDriverFeature:"basic-aggregations"},{short:"stddev",name:(0,fe.t)(ee),columnName:(0,fe.t)(te),description:(0,fe.t)(ne),validFieldsFilters:[et],requiresField:!0,requiredDriverFeature:"standard-deviation-aggregations"},{short:"min",name:(0,fe.t)(re),columnName:(0,fe.t)(ae),description:(0,fe.t)(ie),validFieldsFilters:[et],requiresField:!0,requiredDriverFeature:"basic-aggregations"},{short:"max",name:(0,fe.t)(oe),columnName:(0,fe.t)(ue),description:(0,fe.t)(le),validFieldsFilters:[et],requiresField:!0,requiredDriverFeature:"basic-aggregations"}];function nt(e){return tt.filter(function(t){return!(t.requiredDriverFeature&&e.db&&!de.default.contains(e.db.features,t.requiredDriverFeature))}).map(function(t){return n=t,r=e.fields,o({},n,{fields:n.validFieldsFilters.map(function(e){return e(r)})});var n,r})}function rt(e){return nt(e).filter(function(e){return!e.requiresField||e.fields.every(function(e){return e.length>0})})}var at=t.ICON_MAPPING=(he(i={},_e,"calendar"),he(i,Ee,"location"),he(i,we,"location"),he(i,ye,"string"),he(i,ge,"string"),he(i,ve,"int"),he(i,be,"io"),he(i,Oe,"connections"),i)},130:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ADD_FIELDS=t.ADD_PARAM_VALUES=t.ADD_REMAPPINGS=t.UPDATE_FIELD_DIMENSION=t.DELETE_FIELD_DIMENSION=t.UPDATE_FIELD_VALUES=t.FETCH_FIELD_VALUES=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(34),o=n(18),u=n(128),l=n(11),s=n(58),c=n(17),d=n(27),f=n(258),p=n(183),m=n(41);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var y=t.FETCH_FIELD_VALUES="metabase/entities/fields/FETCH_FIELD_VALUES",g=t.UPDATE_FIELD_VALUES="metabase/entities/fields/UPDATE_FIELD_VALUES",b=t.DELETE_FIELD_DIMENSION="metabase/metadata/DELETE_FIELD_DIMENSION",_=t.UPDATE_FIELD_DIMENSION="metabase/metadata/UPDATE_FIELD_DIMENSION",E=t.ADD_REMAPPINGS="metabase/entities/fields/ADD_REMAPPINGS",w=t.ADD_PARAM_VALUES="metabase/entities/fields/ADD_PARAM_VALUES",O=t.ADD_FIELDS="metabase/entities/fields/ADD_FIELDS",S=(0,i.createEntity)({name:"fields",path:"/api/field",schema:s.FieldSchema,selectors:{getObject:function(e,t){var n=t.entityId;return(0,d.getMetadata)(e).field(n)},getObjectUnfiltered:function(e,t){var n=t.entityId,r=e.entities.fields[n];return r&&a({},r,{values:(0,p.getFieldValues)(r),remapping:new Map((0,p.getRemappings)(r)),target:e.entities.fields[r.fk_target_field_id]})}},objectActions:{fetchFieldValues:(0,o.compose)((0,o.withAction)(y),(0,o.withCachedDataAndRequestState)(function(e){var t=e.id;return[].concat(v(S.getObjectStatePath(t)))},function(e){var t=e.id;return[].concat(v(S.getObjectStatePath(t)),["values"])}),(0,o.withNormalize)(s.FieldSchema))(function(e){var t,n,r=e.id;return t=regeneratorRuntime.mark(function e(t,n){var a,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.MetabaseApi.field_values({fieldId:r});case 2:return a=e.sent,i=a.field_id,o=a.values,e.abrupt("return",{id:i,values:o});case 6:case"end":return e.stop()}},e,void 0)}),n=function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(e,t){return n.apply(this,arguments)}}),updateFieldValues:(0,o.createThunkAction)(g,function(e,t){var n=e.id;return function(e,r){return(0,o.updateData)({dispatch:e,getState:r,requestStatePath:["entities","fields",n,"dimension"],existingStatePath:["entities","fields",n],putData:function(){return c.MetabaseApi.field_values_update({fieldId:n,values:t})}})}}),updateFieldDimension:(0,o.createThunkAction)(_,function(e,t){var n=e.id;return function(e,r){return(0,o.updateData)({dispatch:e,getState:r,requestStatePath:["entities","fields",n,"dimension"],existingStatePath:["entities","fields",n],putData:function(){return c.MetabaseApi.field_dimension_update(a({fieldId:n},t))}})}}),deleteFieldDimension:(0,o.createThunkAction)(b,function(e){var t=e.id;return function(e,n){return(0,o.updateData)({dispatch:e,getState:n,requestStatePath:["entities","fields",t,"dimension"],existingStatePath:["entities","fields",t],putData:function(){return c.MetabaseApi.field_dimension_delete({fieldId:t})}})}}),addRemappings:(0,o.createAction)(E,function(e,t){return{fieldId:e.id,remappings:t}})},actions:{addParamValues:(0,o.createAction)(w),addFields:(0,o.createAction)(O,function(e){return(0,u.normalize)(e,[s.FieldSchema])})},reducer:(0,o.handleActions)((r={},h(r,w,{next:function(e,t){var n=t.payload,r=!0,a=!1,i=void 0;try{for(var o,u=Object.values(n)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;e=(0,l.assocIn)(e,[s.field_id,"values"],s)}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return e}}),h(r,E,function(e,t){var n=t.payload,r=n.fieldId,a=n.remappings;return(0,l.updateIn)(e,[r,"remappings"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.from(new Map(e.concat(a)))})}),r),{}),form:{fields:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[{name:"display_name"},{name:"description"},{name:"visibility_type",type:"select",options:f.field_visibility_types.map(function(e){return{name:e.name,value:e.id}})},{name:"special_type",type:"select",options:f.field_special_types.map(function(e){return{name:e.name,value:e.id}})},e.special_type===m.TYPE.FK&&{name:"fk_target_field_id"},{name:"has_field_values",type:"select",options:f.has_field_values_options}].filter(function(e){return e})}}});t.default=S},131:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.SET_ERROR_PAGE=void 0,t.setErrorPage=function(e){return console.error("Error:",e),{type:u,payload:e}};var a=n(18),i=n(30);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=t.SET_ERROR_PAGE="metabase/app/SET_ERROR_PAGE";var l=(0,a.handleActions)((o(r={},u,function(e,t){return t.payload}),o(r,i.LOCATION_CHANGE,function(){return null}),r),null);t.default=(0,a.combineReducers)({errorPage:l})},135:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(0)),i=o(n(73));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.value,n=e.onChange,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value","onChange"]);return a.default.createElement(i.default,r({value:null==t?"":String(t),onBlurChange:function(e){var t=e.target.value;t=t?parseFloat(t):null,isNaN(t)||n(t)}},o))};u.displayName="NumericInput",t.default=u},136:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMultipleOf=void 0,t.dimensionIsNumeric=function(e){var t=e.cols,n=e.rows,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,r.isNumeric)(t[a])||"number"==typeof(n[0]&&n[0][a])},t.precision=i,t.decimalCount=function(e){if(!isFinite(e))return 0;var t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n},t.computeNumericDataInverval=function(e){var t=1/0,n=!0,r=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var l=o.value,s=i(l)||1;s<t&&(t=s)}}catch(e){r=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw a}}return t},t.logTickFormat=function(e){e.tickFormat(function(e){return 10+function(e){return(e+"").split("").map(function(e){return"⁰¹²³⁴⁵⁶⁷⁸⁹"[e]}).join("")}(Math.round(Math.log(e)/Math.LN10))})};var r=n(13);var a=-14;function i(e){if(!isFinite(e))return 0;if(!e)return 0;for(var t=Math.ceil(Math.log10(Math.abs(e)));t>a&&!o(e,Math.pow(10,t));)t--;return Math.pow(10,t)}var o=t.isMultipleOf=function(e,t){var n=Math.pow(10,a);return Math.abs(e-Math.round(e/t)*t)<n}},137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(31);(r=i)&&r.__esModule;function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.count=0,this.dimensions=[],this.fks=[],Object.assign(this,t)}return a(e,[{key:"all",value:function(){var e;return(e=[]).concat.apply(e,[this.dimensions].concat(o(this.fks.map(function(e){return e.dimensions}))))}},{key:"hasDimension",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=this.all()[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;if(e.isSameBaseDimension(o))return!0}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}return!1}},{key:"sections",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).extraItems,t=void 0===e?[]:e,n=this.dimensions[0]&&this.dimensions[0].field().table,r={name:this.name||n&&n.objectName(),icon:this.icon||"table2",items:[].concat(o(t),o(this.dimensions.map(function(e){return{dimension:e}})))},a=this.fks.map(function(e){return{name:e.name||e.field&&e.field.targetObjectName(),icon:e.icon||"connections",items:e.dimensions.map(function(e){return{dimension:e}})}}),i=[];return r.items.length>0&&i.push(r),i.push.apply(i,o(a)),i}}]),e}();t.default=u},138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(307),o=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"tables",value:function(){return null}},{key:"databaseId",value:function(){return null}},{key:"database",value:function(){return null}},{key:"engine",value:function(){return null}}]),t}();t.default=u},139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}var u=function(e){function t(e,n,r){var o;i(this,t);var u=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o=t.__proto__||Object.getPrototypeOf(t)).call.apply(o,[this].concat(a(e))));return l(u,"_index",n),l(u,"_query",r),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o(Array)),r(t,[{key:"set",value:function(e){return new this.constructor(e,this._index,this._query)}},{key:"replace",value:function(e){throw new Error("Abstract method `replace` not implemented")}},{key:"query",value:function(){return this._query}},{key:"setQuery",value:function(e){return new this.constructor(this,this._index,e)}},{key:"index",value:function(){return this._index}},{key:"update",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.replace(this)).update.apply(e,[void 0].concat(a(n)))}},{key:"parent",value:function(){return this.replace(this)}},{key:"metadata",value:function(){return this._query.metadata()}},{key:"raw",value:function(){return[].concat(a(this))}}]),t}();t.default=u;t.MBQLObjectClause=function(){function e(t,n,r){i(this,e),Object.assign(this,t),l(this,"_index",n),l(this,"_query",r)}return r(e,[{key:"set",value:function(e){return new this.constructor(e,this._index,this._query)}},{key:"replace",value:function(e){throw new Error("Abstract method `replace` not implemented")}},{key:"query",value:function(){return this._query}},{key:"setQuery",value:function(e){return new this.constructor(this,this._index,e)}},{key:"index",value:function(){return this._index}},{key:"update",value:function(){for(var e,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.replace(this)).update.apply(e,[void 0].concat(a(n)))}},{key:"parent",value:function(){return this.replace(this)}},{key:"metadata",value:function(){return this._query.metadata()}}]),e}();function l(e,t,n){Object.defineProperty(e,t,{value:n,enumerable:!1})}},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=g([", "],[", "]),o=g(["must be "," and include ","."],["must be "," and include ","."]),u=g(["must be ","."],["must be ","."]),l=g(["must include ","."],["must include ","."]),s=g(["at least "," character long"],["at least "," character long"]),c=g([""," lower case letter"],[""," lower case letter"]),d=g([""," upper case letter"],[""," upper case letter"]),f=g([""," number"],[""," number"]),p=g([""," special character"],[""," special character"]),m=y(n(3)),h=n(1),v=y(n(35));function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settings=t,this._listeners={}}return a(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0!==this._settings[e]?this._settings[e]:t}},{key:"set",value:function(e,t){if(this._settings[e]!==t&&(this._settings[e]=t,this._listeners[e])){var n=!0,r=!1,a=void 0;try{for(var i,o=function(){var e=i.value;setTimeout(function(){return e(t)})},u=this._listeners[e][Symbol.iterator]();!(n=(i=u.next()).done);n=!0)o()}catch(e){r=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw a}}}}},{key:"setAll",value:function(e){var t=!0,n=!1,a=void 0;try{for(var i,o=Object.entries(e)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var u=r(i.value,2),l=u[0],s=u[1];this.set(l,s)}}catch(e){n=!0,a=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw a}}}},{key:"on",value:function(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t)}},{key:"adminEmail",value:function(){return this.get("admin-email")}},{key:"enhancementsEnabled",value:function(){return this.get("enable-enhancements?")}},{key:"isEmailConfigured",value:function(){return this.get("email-configured?")}},{key:"isTrackingEnabled",value:function(){return this.get("anon-tracking-enabled")||!1}},{key:"googleAuthEnabled",value:function(){return null!=this.get("google-auth-client-id")}},{key:"hasSetupToken",value:function(){return null!=this.get("setup-token")}},{key:"ssoEnabled",value:function(){return null!=this.get("google-auth-client-id")}},{key:"ldapEnabled",value:function(){return this.get("ldap-configured?")}},{key:"hideEmbedBranding",value:function(){return this.get("hide-embed-branding?")}},{key:"docsUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.get("version",{}).tag;return n||(n="latest"),e&&(e+=".html"),t&&(t="#"+t),"https://www.metabase.com/docs/"+n+"/"+e+t}},{key:"newVersionAvailable",value:function(){var e=v.default.compareVersions(this.currentVersion(),this.latestVersion());return null!=e&&e<0}},{key:"versionIsLatest",value:function(){var e=v.default.compareVersions(this.currentVersion(),this.latestVersion());return null!=e&&e>=0}},{key:"versionInfo",value:function(){return this.get("version-info",{})}},{key:"currentVersion",value:function(){return this.get("version",{}).tag}},{key:"latestVersion",value:function(){var e=this.versionInfo().latest;return e&&e.version}},{key:"passwordComplexityRequirements",value:function(){return this.get("password-complexity",{})}},{key:"passwordComplexityDescription",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.passwordComplexityRequirements(),n={},a=!0,s=!1,c=void 0;try{for(var d,f=Object.entries(E)[Symbol.iterator]();!(a=(d=f.next()).done);a=!0){var p=r(d.value,2),m=p[0],v=p[1];v.test(t,e)||(n[m]=v.description(t))}}catch(e){s=!0,c=e}finally{try{!a&&f.return&&f.return()}finally{if(s)throw c}}var y=n.total,g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["total"]),b=Object.values(g).join((0,h.t)(i));return y&&b?(0,h.t)(o,y,b):y?(0,h.t)(u,y):b?(0,h.t)(l,b):null}}]),e}(),_=function(e){return v.default.numberToWord(e)},E={total:{test:function(e){var t=e.total,n=void 0===t?0:t;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").length>=n},description:function(e){var t=e.total,n=void 0===t?0:t;return(0,h.ngettext)((0,h.msgid)(s,_(n)),"at least "+_(n)+" characters long",n)}},lower:{test:w("lower",/[a-z]/g),description:function(e){var t=e.lower,n=void 0===t?0:t;return(0,h.ngettext)((0,h.msgid)(c,_(n)),_(n)+" lower case letters",n)}},upper:{test:w("upper",/[A-Z]/g),description:function(e){var t=e.upper,n=void 0===t?0:t;return(0,h.ngettext)((0,h.msgid)(d,_(n)),_(n)+" upper case letters",n)}},digit:{test:w("digit",/[0-9]/g),description:function(e){var t=e.digit,n=void 0===t?0:t;return(0,h.ngettext)((0,h.msgid)(f,_(n)),_(n)+" numbers",n)}},special:{test:w("special",/[^a-zA-Z0-9]/g),description:function(e){var t=e.special,n=void 0===t?0:t;return(0,h.ngettext)((0,h.msgid)(p,_(n)),_(n)+" special characters",n)}}};function w(e,t){return function(n){return((arguments.length>1&&void 0!==arguments[1]?arguments[1]:"").match(t)||[]).length>=(n[e]||0)}}t.default=new b(m.default.clone(window.MetabaseBootstrap))},140:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(3)),i=u(n(96)),o=(u(n(79)),u(n(57)),u(n(182)),u(n(77)),u(n(309)),u(n(310)),u(n(39)));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"databasesList",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).savedQuestions,t=void 0===e||e;return a.default.chain(this.databases).values().filter(function(e){return t||!e.is_saved_questions}).sortBy(function(e){return e.name}).value()}},{key:"tablesList",value:function(){return Object.values(this.tables)}},{key:"metricsList",value:function(){return Object.values(this.metrics)}},{key:"segmentsList",value:function(){return Object.values(this.segments)}},{key:"segment",value:function(e){return null!=e&&this.segments[e]||null}},{key:"metric",value:function(e){return null!=e&&this.metrics[e]||null}},{key:"database",value:function(e){return null!=e&&this.databases[e]||null}},{key:"schema",value:function(e){return null!=e&&this.schemas[e]||null}},{key:"table",value:function(e){return null!=e&&this.tables[e]||null}},{key:"field",value:function(e){return null!=e&&this.fields[e]||null}},{key:"question",value:function(e){return new o.default(e,this)}}]),t}();t.default=l},141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ALL_OPERATORS=t.EMPTINESS_OPERATORS=t.DATE_OPERATORS=void 0;var r,a,i,o,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=D(["All Time"],["All Time"]),d=D(["Previous"],["Previous"]),f=D(["Next"],["Next"]),p=D(["Current"],["Current"]),m=D(["Before"],["Before"]),h=D(["After"],["After"]),v=D(["On"],["On"]),y=D(["Between"],["Between"]),g=D(["Is Empty"],["Is Empty"]),b=D(["Not Empty"],["Not Empty"]);t.getDateTimeFieldTarget=J,t.getOperator=re;var _=n(0),E=R(_),w=R(n(2)),O=n(1),S=R(n(4)),C=R(n(8)),x=R(n(3)),k=R(n(542)),A=n(544),T=R(A),P=R(n(545)),j=R(n(314)),N=R(n(171)),M=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(88));function R(e){return e&&e.__esModule?e:{default:e}}function D(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function L(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var q=function(e){var t=e.className,n=s(e.filter,3),r=n[0],a=n[1],i=n[2],o=e.onFilterChange,u=e.hideTimeSelectors;return E.default.createElement(k.default,{className:t,value:i,onChange:function(e){return o([r,a,e])},hideTimeSelectors:u,calendar:!0})};q.displayName="SingleDatePicker";var B=function(e){var t=e.className,n=s(e.filter,4),r=n[0],a=n[1],i=n[2],o=n[3],u=e.onFilterChange,l=e.hideTimeSelectors;return E.default.createElement("div",{className:t},E.default.createElement("div",{className:"Grid Grid--1of2 Grid--gutters"},E.default.createElement("div",{className:"Grid-cell"},E.default.createElement(k.default,{value:i,hideTimeSelectors:l,onChange:function(e){return u([r,a,e,o])}})),E.default.createElement("div",{className:"Grid-cell"},E.default.createElement(k.default,{value:o,hideTimeSelectors:l,onChange:function(e){return u([r,a,i,e])}}))),E.default.createElement("div",{className:"Calendar--noContext"},E.default.createElement(N.default,{initial:i?(0,C.default)(i):(0,C.default)(),selected:i&&(0,C.default)(i),selectedEnd:o&&(0,C.default)(o),onChange:function(e,t){return u([r,a,e,t])}})))};B.displayName="MultiDatePicker";var U=function(e){return E.default.createElement(T.default,l({},e,{formatter:function(e){return-1*e}}))};U.displayName="PreviousPicker",U.horizontalLayout=!0;var V=function(e){return E.default.createElement(T.default,e)};V.displayName="NextPicker",V.horizontalLayout=!0;var G=(a=r=function(e){function t(){var e,n,r;I(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=F(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={showUnits:!1},F(r,n)}return z(t,_.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=s(t.filter,4),a=r[0],i=r[1],o=r[2],u=r[3],l=t.onFilterChange;return E.default.createElement(j.default,{className:n,value:u,open:this.state.showUnits,onChange:function(t){l([a,i,o,t]),e.setState({showUnits:!1})},togglePicker:function(){return e.setState({showUnits:!e.state.showUnits})},formatter:function(e){return e},periods:A.DATE_PERIODS})}}]),t}(),r.horizontalLayout=!0,a);G.displayName="CurrentPicker";var H=function(e){var t=s(e,4),n=t[0],r=(t[1],t[2]);t[3];return"time-interval"===n&&"number"==typeof r?Math.abs(r):30},W=function(e){var t=s(e,4),n=t[0],r=(t[1],t[2],t[3]);return"time-interval"===n&&r?r:"day"},Q=function(e){var t=s(e,5),n=t[0],r=(t[1],t[2],t[3],t[4]);return"time-interval"===n&&r||{}},Y=function(e){return"string"==typeof e&&(0,C.default)(e).isValid()||(e=(0,C.default)().format("YYYY-MM-DD")),e},K=function(e){return"string"==typeof e&&/T\d{2}:\d{2}:\d{2}$/.test(e)};function Z(e,t){var n=J(e);return t?["datetime-field",n,t]:n}function J(e){return M.isDatetimeField(e)?e[1]:e}function X(e,t){var n=e.slice(2,2+t).map(function(e){return e&&Y(e)}),r=x.default.any(n,K)?"minute":null;return[Z(e[1],r)].concat(L(n))}var $={name:"all",displayName:(0,O.t)(c),init:function(){return null},test:function(e){return null===e}},ee=t.DATE_OPERATORS=[{name:"previous",displayName:(0,O.t)(d),init:function(e){return["time-interval",Z(e[1]),-H(e),W(e),Q(e)]},test:function(e){var t=s(e,3),n=t[0],r=(t[1],t[2]);return"time-interval"===n&&r<0||Object.is(r,-0)},widget:U,options:{"include-current":!0}},{name:"next",displayName:(0,O.t)(f),init:function(e){return["time-interval",Z(e[1]),H(e),W(e),Q(e)]},test:function(e){var t=s(e,3),n=t[0],r=(t[1],t[2]);return"time-interval"===n&&r>=0},widget:V,options:{"include-current":!0}},{name:"current",displayName:(0,O.t)(p),init:function(e){return["time-interval",Z(e[1]),"current",W(e)]},test:function(e){var t=s(e,3),n=t[0],r=(t[1],t[2]);return"time-interval"===n&&"current"===r},widget:G},{name:"before",displayName:(0,O.t)(m),init:function(e){return["<"].concat(L(X(e,1)))},test:function(e){return"<"===s(e,1)[0]},widget:q},{name:"after",displayName:(0,O.t)(h),init:function(e){return[">"].concat(L(X(e,1)))},test:function(e){return">"===s(e,1)[0]},widget:q},{name:"on",displayName:(0,O.t)(v),init:function(e){return["="].concat(L(X(e,1)))},test:function(e){return"="===s(e,1)[0]},widget:q},{name:"between",displayName:(0,O.t)(y),init:function(e){return["between"].concat(L(X(e,2)))},test:function(e){return"between"===s(e,1)[0]},widget:B}],te=t.EMPTINESS_OPERATORS=[{name:"empty",displayName:(0,O.t)(g),init:function(e){return["is-null",Z(e[1])]},test:function(e){return"is-null"===s(e,1)[0]}},{name:"not-empty",displayName:(0,O.t)(b),init:function(e){return["not-null",Z(e[1])]},test:function(e){return"not-null"===s(e,1)[0]}}],ne=t.ALL_OPERATORS=ee.concat(te);function re(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ne;return x.default.find(t,function(t){return t.test(e)})}var ae=(o=i=function(e){function t(){var e,n,r;I(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=F(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={operators:[]},F(r,n)}return z(t,_.Component),u(t,[{key:"componentWillMount",value:function(){var e=this.props.operators||ee;this.props.hideEmptinessOperators||(e=e.concat(te));var t=re(this.props.filter,e)||e[0];this.props.onFilterChange(t.init(this.props.filter)),this.setState({operators:e})}},{key:"render",value:function(){var e=this.props,t=e.filter,n=e.onFilterChange,r=e.includeAllTime,a=e.className,i=this.state.operators;r&&(i=[$].concat(L(i)));var o=re(this.props.filter,i),u=o&&o.widget;return E.default.createElement("div",{className:(0,S.default)(a,{"flex align-center":u&&u.horizontalLayout}),style:{minWidth:300}},E.default.createElement(P.default,{className:(0,S.default)({mr2:u&&u.horizontalLayout,mb2:u&&!u.horizontalLayout}),operator:o&&o.name,operators:i,onOperatorChange:function(e){return n(e.init(t))}}),u&&E.default.createElement(u,l({},this.props,{className:"flex-full",filter:t,hideHoursAndMinutes:this.props.hideTimeSelectors,onFilterChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){o&&o.init?n(o.init(e)):n(e)})})))}}]),t}(),i.propTypes={filter:w.default.array.isRequired,onFilterChange:w.default.func.isRequired,className:w.default.string,hideEmptinessOperators:w.default.bool,hideTimeSelectors:w.default.bool,operators:w.default.array},o);ae.displayName="DatePicker",t.default=ae},142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserDefaultCollectionId=t.getUserPersonalCollectionId=t.getUserIsAdmin=t.getUser=void 0;var r=n(32),a=t.getUser=function(e){return e.currentUser},i=t.getUserIsAdmin=(0,r.createSelector)([a],function(e){return e&&e.is_superuser||!1}),o=t.getUserPersonalCollectionId=(0,r.createSelector)([a],function(e){return e&&e.personal_collection_id||null});t.getUserDefaultCollectionId=(0,r.createSelector)([a,i,o],function(e,t,n){return t?null:n})},144:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scatterRenderer=t.comboRenderer=t.barRenderer=t.areaRenderer=t.lineRenderer=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=M(["This chart type requires at least 2 columns."],["This chart type requires at least 2 columns."]),o=M(["This chart type doesn't support more than "," series of data."],["This chart type doesn't support more than "," series of data."]);t.getDimensionsAndGroupsAndUpdateSeriesDisplayNames=z,t.default=G;var u=P(n(273)),l=P(n(36)),s=P(n(220)),c=P(n(3)),d=n(11),f=n(1),p=n(7),m=P(n(39)),h=n(24),v=n(192),y=n(136),g=n(339),b=n(650),_=n(652),E=P(n(653)),w=n(242),O=n(341),S=n(120),C=P(n(342)),x=n(80),k=n(187),A=n(656),T=n(657);function P(e){return e&&e.__esModule?e:{default:e}}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function M(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var R=.2,D="linear",L=function(e,t){return!(!t||(0,S.isMultiCardSeries)(e)||!(0,x.isStructured)(e[0].card)||(0,S.isRemappedToString)(e))};function I(e,t,n){var r=(0,S.getXValues)(e),a=(0,S.isHistogramBar)(e),i=function(e,t,n){var r=e.settings,a=e.series;if((0,S.isTimeseries)(r)){var i=(0,v.minTimeseriesUnit)(a.map(function(e){return e.data.cols[0].unit})),o=(0,v.getTimezone)(a,n),u=(0,v.computeTimeseriesDataInverval)(t,i);return{count:u.count,interval:u.interval,timezone:o}}if((0,S.isQuantitative)(r)||(0,S.isHistogram)(r)){var l=(0,S.getFirstNonEmptySeries)(a).data.cols[0].binning_info;return l?l.bin_width:(0,y.computeNumericDataInverval)(t)}}(e,r,n),o=a?[].concat(N(r),[Math.max.apply(Math,N(r))+i]):r;return{isHistogramBar:a,xDomain:l.default.extent(o),xInterval:i,xValues:o}}function F(e,t,n){var i,o,l=(0,u.default)(),s=(0,S.isNormalized)(e.settings,t),c={};if(s){var f=!0,p=!1,m=void 0;try{for(var v,y=t[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var g=v.value,b=!0,_=!1,E=void 0;try{for(var O,C=g[Symbol.iterator]();!(b=(O=C.next()).done);b=!0){var x=r(O.value,2),k=x[0],A=x[1];c[k]=(c[k]||0)+A}}catch(e){_=!0,E=e}finally{try{!b&&C.return&&C.return()}finally{if(_)throw E}}}}catch(e){p=!0,m=e}finally{try{!f&&y.return&&y.return()}finally{if(p)throw m}}e.series=e.series.map(function(e){return(0,d.updateIn)(e,["data","cols",1],function(e){return a({},e,{display_name:"% "+(0,h.getFriendlyName)(e)})})});var T=t.flatMap(function(e){return e.map(function(e){var t=r(e,2),n=t[0];return t[1]/c[n]})}),P=(0,h.computeMaxDecimalsForValues)(T,{style:"percent",maximumSignificantDigits:2});e.series=(i=e.series,o=P,i.map(function(e){return(0,d.assocIn)(e,["data","cols",1,"decimals"],o)}))}t.map(function(e,t){return l.add(e.map(function(e){var n;return j(n={},0,e[0]),j(n,t+1,s?e[1]/c[e[0]]:e[1]),n}))});var N=l.dimension(function(e){return e[0]}),M=[t.map(function(t,r){return(0,S.reduceGroup)(N.group(),r+1,function(){return n((0,w.unaggregatedDataWarning)(e.series[r].data.cols[0]))})})];return{dimension:N,groups:M}}function z(e,t,n){var r,a,i,o,s,c,d=e.settings,f="scatter"===e.chartType?(s=t,c=(0,u.default)(),s.map(function(e){return c.add(e)}),{dimension:c.dimension(function(e){return e}),groups:s.map(function(e){return[(0,u.default)(e).dimension(function(e){return e}).group().reduceSum(function(e){return e[2]||1})]})}):(0,S.isStacked)(d,t)?F(e,t,n):(r=t,a=n,i=e.series,o=(0,u.default)(),r.map(function(e){return o.add(e)}),{dimension:o.dimension(function(e){return e[0]}),groups:r.map(function(e,t){e=e.length>0?e:[[null,null]];var n=(0,u.default)(e).dimension(function(e){return e[0]});return e[0].slice(1).map(function(e,r){return(0,S.reduceGroup)(n.group(),r+1,function(){return a((0,w.unaggregatedDataWarning)(i[t].data.cols[0]))})})})}),p=f.groups;return{groups:p,dimension:f.dimension,yExtents:p.map(function(e){var t=new Map,n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,s=!0,c=!1,d=void 0;try{for(var f,p=u.all()[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var m=f.value,h=m.key,v=m.value,y=t.get(h)||0;t.set(h,y+v)}}catch(e){c=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(c)throw d}}}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return l.default.extent(Array.from(t.values()))})}}function q(e,t,n){var a,i,o,u,s,d=function(e,t,n){var a=e.settings,i=e.chartType,o=e.isScalarSeries,u=e.series,l=u.map(function(e){return a.series(e).axis}),s=[],d=[],f=[],p=!0,m=!1,v=void 0;try{for(var y,g=l.entries()[Symbol.iterator]();!(p=(y=g.next()).done);p=!0){var b=r(y.value,2),_=b[0],E=b[1];"left"===E?s.push(_):"right"===E?d.push(_):f.push(_)}}catch(e){m=!0,v=e}finally{try{!p&&g.return&&g.return()}finally{if(m)throw v}}var w=c.default.uniq(u.map(function(e){return JSON.stringify(e.data.cols[1])})).length>1;if(o||"scatter"===i||(0,S.isStacked)(a,t)||!w||!1===a["graph.y_axis.auto_split"])return[[].concat(s,f),d];var O=(0,h.computeSplit)(n),C=r(O,2),x=C[0],k=C[1];return[c.default.uniq([].concat(s,N(x.filter(function(e){return!l[e]})))),c.default.uniq([].concat(d,N(k.filter(function(e){return!l[e]}))))]}(e,n,t),f=(i=e.series,o=t,d.map(function(e){var t;return{series:e.map(function(e){return i[e]}),extent:l.default.extent((t=[]).concat.apply(t,N(e.map(function(e){return o[e]}))))}})),p=r(f,2),m=p[0],v=p[1];return{yExtents:t,yAxisSplit:d,yExtent:l.default.extent((a=[]).concat.apply(a,N(t))),yLeftSplit:m,yRightSplit:v,isSplit:(u=m,s=v,s&&s.series.length&&u&&u.series.length>0)}}function B(e,t){return null!=e["stackable.stack_type"]?e["stackable.stack_display"]:e.series(t).display}function U(e,t,n,r,a,i,o){var u=o.onBrushChange,d=o.onBrushEnd,f=e.settings,p=e.chartType,m=e.series,v=e.onChangeCardAndRun,y=t.yAxisSplit,g=c.default.uniq(m.map(function(e){return B(f,e)})).length>1,b="ordinal"===f["graph.x_axis.scale"]&&g;return b&&n.on("renderlet.shift",function(){var e=n.x(),t=e.domain(),r=e(t[1])-e(t[0]);n.svg().selectAll(".stack, .dc-tooltip").each(function(){this.setAttribute("transform","translate("+r/2+", 0)")})}),a.map(function(o,c){var g,_,E,w,S,C,x,k,P,j,N,M,I,F,z,q,U,V,G,H,W,Q=m[c],Y=f.series(Q),K=B(f,Q)||p,Z=function(e,t){switch(e){case"line":case"area":return(0,A.lineAddons)(s.default.lineChart(t));case"bar":return s.default.barChart(t);case"scatter":return s.default.bubbleChart(t);default:return s.default.barChart(t)}}(K,n);L(m,v)&&(0,T.initBrush)(n,Z,u,d),Z.onClick=function(){},Z.dimension(i).group(o[0]).transitionDuration(0).useRightYAxis(y.length>1&&y[1].includes(c)),"scatter"===p&&(g=Z,_=r,E=c,S=(w=t).yExtent,w.yExtents,g.keyAccessor(function(e){return e.key[0]}).valueAccessor(function(e){return e.key[1]}),g.radiusValueAccessor&&(_[E][0].length>2?g.radiusValueAccessor(function(e){return e.value}).r(l.default.scale.sqrt().domain([0,64*S[1]]).range([0,1])):(g.radiusValueAccessor(function(e){return 1}),g.MIN_RADIUS=3),g.minRadiusWithLabel(1/0))),Z.defined&&Z.defined("none"===Y["line.missing"]?function(e){return null!=e.y}:function(e){return!0}),x=Z,k=a,P=c,j=(C=e).series,N=C.settings,M=C.chartType,I=k[P],F=N["series_settings.colors"]||{},z=(0,O.keyForSingleSeries)(j[P]),q=F[z]||"black",k.length>1||"scatter"===M?I.length>1?x.ordinalColors((0,h.colorShades)(q,I.length)):x.colors(q):x.ordinalColors(j.map(function(e){return F[(0,O.keyForSingleSeries)(e)]}));for(var J=1;J<o.length;J++)Z.stack(o[J]);return V=f,G=K,H=Y,W=b,(U=Z).interpolate&&U.interpolate(H["line.interpolate"]||V["line.interpolate"]||D),U.renderArea&&U.renderArea("area"===G),U.barPadding&&U.barPadding(R).centerBar(W||"ordinal"!==V["graph.x_axis.scale"]),Z})}var V=25;function G(e,t){var n=t.onRender,a=t.isScalarSeries,l=t.settings,d=t.series,h={},v=function(e){var t=e.key,n=e.text;h[t]=h[t]||n};!function(e){var t=e.series,n=e.maxSeries;if((0,S.getFirstNonEmptySeries)(t).data.cols.length<2)throw new Error((0,f.t)(i));if(t.length>n)throw new Error((0,f.t)(o,n))}(t),l["graph.x_axis._scale_original"]=l["graph.x_axis.scale"],(0,S.isHistogram)(l)&&(l["line.missing"]="zero",l["graph.x_axis.scale"]="ordinal");var y=(0,S.getDatas)(t,v),O=I(t,0,v);y=(0,E.default)(t,O,y),O=I(t,0,v),a&&(O.xValues=y.map(function(e){return e[0][0]}));var x=z(t,y,v),A=x.dimension,T=x.groups,P=q(t,x.yExtents,y);(0,S.isTimeseries)(l)||(0,S.isQuantitative)(l)||(0,S.forceSortedGroupsOfGroups)(T,(0,S.makeIndexMap)(O.xValues));var j=s.default.compositeChart(e);(0,S.initChart)(j,e),j.props=t,j.settings=l,j.series=t.series;var N,M,D,L,F,G,H,W,Q,Y,K,Z=(M=(N=t).series,D=N.onChangeCardAndRun,L=!1,{isBrushing:function(){return L},onBrushChange:function(){L=!0},onBrushEnd:function(e){if(L=!1,e){var t=M[0].data.cols[0],n=M[0].card,a=new m.default(n).query(),i=r(e,2),o=i[0],u=i[1];(0,S.isDimensionTimeseries)(M)?D({nextCard:(0,k.updateDateTimeFilter)(a,t,o,u).question().card(),previousCard:n}):D({nextCard:(0,k.updateNumericFilter)(a,t,o,u).question().card(),previousCard:n})}}}),J=U(t,P,j,y,T,A,Z),X=function(e,t,n,r){var a=e.settings,i=e.onHoverChange;if(!a["graph.show_goal"])return function(){};var o=a["graph.goal_value"],l=[[t[0],o],[t[1],o]],c=(0,u.default)(l).dimension(function(e){return e[0]}),d=c.group().reduce(function(e,t){return t[1]},function(e,t){return e},function(){return 0}),f=r.length,p=s.default.lineChart(n).dimension(c).group(d).on("renderlet",function(e){e.select(".sub._"+f).classed("sub",!1).classed("goal",!0)});return r.push(p),function(e){i(e&&{element:e,data:[{key:a["graph.goal_label"],value:o}]})}}(t,O.xDomain,j,J);if(function(e,t,n,r,a){var i=e.series,o=e.settings,l=(e.onHoverChange,t.xDomain),d=n.yAxisSplit;if(o["graph.show_trendline"]){var f=(i._raw||i)[0].data.insights||[],m=!0,h=!1,v=void 0;try{for(var y,g=f[Symbol.iterator]();!(m=(y=g.next()).done);m=!0){var b=y.value;null!=b.slope&&null!=b.offset&&function(){var e,t,n=(e=i,t=b.col,c.default.findIndex(e,function(e){var n=e.data.cols;return c.default.findWhere(n,{name:t})})||0),f=o.series(i[n]),m=(0,p.lighten)(f.color,.25),h=Math.round(r.width()/V),v=(0,_.getTrendDataPointsFromInsight)(b,l,h),y=(0,u.default)(v).dimension(function(e){return e[0]}),g=y.group().reduce(function(e,t){return t[1]},function(e,t){return e},function(){return 0}),E=a.length,w=s.default.lineChart(r).dimension(y).group(g).on("renderlet",function(e){e.select(".sub._"+E).classed("sub",!1).classed("trend",!0)}).colors([m]).useRightYAxis(d.length>1&&d[1].includes(n)).interpolate("cardinal");a.push(w)}()}}catch(e){h=!0,v=e}finally{try{!m&&g.return&&g.return()}finally{if(h)throw v}}}}(t,O,P,j,J),j.compose(J),T.length>1&&!t.isScalarSeries?j.on("renderlet.grouped-bar",function(e){var t=e.selectAll(".sub rect:first-child")[0].map(function(e){return e.parentNode.parentNode.parentNode});if(0!==t.length){var n=t[0].querySelectorAll("rect");if(!(n.length<1)){var r=parseFloat(n[0].getAttribute("width"))/t.length,a=r<4?0:r<8?1:2,i=Math.max(1,r-a);e.selectAll("g.sub rect").attr("width",i),t.forEach(function(e,t){e.setAttribute("transform","translate("+(i+a)*t+", 0)")})}}}):(0,S.isHistogramBar)(t)&&j.on("renderlet.histogram-bar",function(e){var t=e.selectAll(".sub rect:first-child")[0].map(function(e){return e.parentNode.parentNode.parentNode});if(0!==t.length){var n=t[0].querySelectorAll("rect");if(!(n.length<2)){var r=parseFloat(n[0].getAttribute("width")),a=parseFloat(n[1].getAttribute("x"))-parseFloat(n[0].getAttribute("x"))-1;a>r&&e.selectAll("g.sub .bar").attr("width",a);var i=!0,o=!1,u=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)l.value.setAttribute("transform","translate("+r/2+", 0)")}catch(e){o=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}}}}),!(0,S.isHistogram)(t.settings)){var $=c.default.any(d,function(e){return"bar"===B(l,e)});j._rangeBandPadding($?R:1)}return F=j,G=t.series,H=O,(0,S.isTimeseries)(F.settings)?(0,g.applyChartTimeseriesXAxis)(F,G,H):(0,S.isQuantitative)(F.settings)?(0,g.applyChartQuantitativeXAxis)(F,G,H):(0,g.applyChartOrdinalXAxis)(F,G,H),W=j,Y=(Q=P).yLeftSplit,K=Q.yRightSplit,Y&&Y.series.length>0&&(0,g.applyChartYAxis)(W,Y.series,Y.extent,"left"),K&&K.series.length>0&&(0,g.applyChartYAxis)(W,K.series,K.extent,"right"),(0,b.setupTooltips)(t,y,j,Z),j.render(),(0,C.default)(j,{onGoalHover:X,isSplitAxis:P.isSplit,yAxisSplit:P.yAxisSplit,xInterval:O.xInterval,isStacked:(0,S.isStacked)(j.settings,y),formatYValue:(0,g.getYValueFormatter)(j,d,P.yExtent),datas:y}),(0,S.isOrdinal)(j.settings)&&delete h[w.NULL_DIMENSION_WARNING],n&&n({yAxisSplit:P.yAxisSplit,warnings:Object.values(h)}),function(){s.default.chartRegistry.deregister(j)}}t.lineRenderer=function(e,t){return G(e,a({},t,{chartType:"line"}))},t.areaRenderer=function(e,t){return G(e,a({},t,{chartType:"area"}))},t.barRenderer=function(e,t){return G(e,a({},t,{chartType:"bar"}))},t.comboRenderer=function(e,t){return G(e,a({},t,{chartType:"combo"}))},t.scatterRenderer=function(e,t){return G(e,a({},t,{chartType:"scatter"}))}},147:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onReplaceAllVisualizationSettings=t.onUpdateVisualizationSettings=void 0,t.showChartSettings=t.SHOW_CHART_SETTINGS=t.viewPreviousObjectDetail=t.VIEW_PREVIOUS_OBJECT_DETAIL=t.viewNextObjectDetail=t.VIEW_NEXT_OBJECT_DETAIL=t.archiveQuestion=t.ARCHIVE_QUESTION=t.CLEAR_OBJECT_DETAIL_FK_REFERENCES=t.loadObjectDetailFKReferences=t.LOAD_OBJECT_DETAIL_FK_REFERENCES=t.followForeignKey=t.FOLLOW_FOREIGN_KEY=t.cancelQuery=t.CANCEL_QUERY=t.queryErrored=t.QUERY_ERRORED=t.queryCompleted=t.QUERY_COMPLETED=t.clearQueryResult=t.CLEAR_QUERY_RESULT=t.runQuestionQuery=t.RUN_QUERY=t.apiUpdateQuestion=t.API_UPDATE_QUESTION=t.apiCreateQuestion=t.API_CREATE_QUESTION=t.setDatasetQuery=t.updateQuestion=t.UPDATE_QUESTION=t.navigateToNewCardInsideQB=t.NAVIGATE_TO_NEW_CARD=t.setCardAndRun=t.SET_CARD_AND_RUN=t.reloadCard=t.RELOAD_CARD=t.setParameterValue=t.SET_PARAMETER_VALUE=t.updateTemplateTag=t.UPDATE_TEMPLATE_TAG=t.replaceAllCardVisualizationSettings=t.updateCardVisualizationSettings=t.loadMetadataForCard=t.closeQbNewbModal=t.CLOSE_QB_NEWB_MODAL=t.insertSnippet=t.closeSnippetModal=t.openSnippetModalWithSelectedText=t.setSnippetCollectionId=t.SET_SNIPPET_COLLECTION_ID=t.setModalSnippet=t.SET_MODAL_SNIPPET=t.setNativeEditorSelectedRange=t.SET_NATIVE_EDITOR_SELECTED_RANGE=t.setIsNativeEditorOpen=t.setIsPreviewing=t.setIsShowingSnippetSidebar=t.SET_IS_SHOWING_SNIPPET_SIDEBAR=t.toggleSnippetSidebar=t.TOGGLE_SNIPPET_SIDEBAR=t.setIsShowingTemplateTagsEditor=t.SET_IS_SHOWING_TEMPLATE_TAGS_EDITOR=t.toggleTemplateTagsEditor=t.TOGGLE_TEMPLATE_TAGS_EDITOR=t.toggleDataReference=t.TOGGLE_DATA_REFERENCE=t.initializeQB=t.INITIALIZE_QB=t.resetQB=t.RESET_QB=t.redirectToNewQuestionFlow=t.REDIRECT_TO_NEW_QUESTION_FLOW=t.updateUrl=t.UPDATE_URL=t.updateEmbeddingParams=t.UPDATE_EMBEDDING_PARAMS=t.updateEnableEmbedding=t.UPDATE_ENABLE_EMBEDDING=t.deletePublicLink=t.DELETE_PUBLIC_LINK=t.createPublicLink=t.CREATE_PUBLIC_LINK=t.locationChanged=t.popState=t.POP_STATE=t.SET_CURRENT_STATE=t.onCloseSidebars=t.onCloseChartType=t.onOpenChartType=t.onCloseChartSettings=t.onOpenChartSettings=t.onCloseFilter=t.onAddFilter=t.onCloseSummary=t.onEditSummary=t.setQueryBuilderMode=t.resetUIControls=t.RESET_UI_CONTROLS=t.setUIControls=t.SET_UI_CONTROLS=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(318),o=n(127),u=z(n(3)),l=n(11),s=F(n(23)),c=n(18),d=n(30),f=n(131),p=n(21),m=z(n(16)),h=n(319),v=n(126),y=n(25),g=F(n(129)),b=n(41),_=z(n(35)),E=n(112),w=z(n(39)),O=n(80),S=n(217),C=n(17),x=n(378),k=z(n(134)),A=z(n(26)),T=z(n(97)),P=n(47),j=n(24),N=n(101),M=z(n(102)),R=z(n(69)),D=z(n(218)),L=n(27),I=n(176);function F(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function z(e){return e&&e.__esModule?e:{default:e}}function q(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var B=function(e){var t=e.query();return t instanceof T.default?t.templateTagsWithoutSnippets().length:0},U=t.SET_UI_CONTROLS="metabase/qb/SET_UI_CONTROLS",V=t.setUIControls=(0,o.createAction)(U),G=t.RESET_UI_CONTROLS="metabase/qb/RESET_UI_CONTROLS",H=(t.resetUIControls=(0,o.createAction)(G),t.setQueryBuilderMode=function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).shouldUpdateUrl,r=void 0===n||n;return t=q(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(V({queryBuilderMode:e,isShowingChartSettingsSidebar:!1}));case 2:if(!r){t.next=5;break}return t.next=5,n(ae(null,{queryBuilderMode:e}));case 5:"notebook"===e&&n(He());case 6:case"end":return t.stop()}},t,void 0)})),function(e){return t.apply(this,arguments)}}),W=(t.onEditSummary=(0,o.createAction)("metabase/qb/EDIT_SUMMARY"),t.onCloseSummary=(0,o.createAction)("metabase/qb/CLOSE_SUMMARY"),t.onAddFilter=(0,o.createAction)("metabase/qb/ADD_FITLER"),t.onCloseFilter=(0,o.createAction)("metabase/qb/CLOSE_FILTER"),t.onOpenChartSettings=(0,o.createAction)("metabase/qb/OPEN_CHART_SETTINGS"),t.onCloseChartSettings=(0,o.createAction)("metabase/qb/CLOSE_CHART_SETTINGS"),t.onOpenChartType=(0,o.createAction)("metabase/qb/OPEN_CHART_TYPE"),t.onCloseChartType=(0,o.createAction)("metabase/qb/CLOSE_CHART_TYPE"),t.onCloseSidebars=(0,o.createAction)("metabase/qb/CLOSE_SIDEBARS")),Q=t.SET_CURRENT_STATE="metabase/qb/SET_CURRENT_STATE",Y=(0,o.createAction)(Q);function K(e){return e.pathname.endsWith("/notebook")?"notebook":"view"}var Z=t.POP_STATE="metabase/qb/POP_STATE",J=t.popState=(0,c.createThunkAction)(Z,function(e){return t=q(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n(He()),a=(0,S.getCard)(r()),!e.state||!e.state.card){t.next=8;break}if(_.default.equals(a,e.state.card)){t.next=8;break}return t.next=6,n(Te(e.state.card,!1));case 6:return t.next=8,n(Y(e.state));case 8:if((0,S.getQueryBuilderMode)(r())===K(e)){t.next=11;break}return t.next=11,n(H(K(e),{shouldUpdateUrl:!1}));case 11:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t}),X=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).includeMode;return(void 0!==t&&t?e.pathname:e.pathname.replace(/\/(notebook|view)$/,""))+e.search+e.hash},$=(t.locationChanged=function(e,t,n){return function(r,a){e!==t&&("POP"===t.action?X(t,{includeMode:!0})!==X(e,{includeMode:!0})&&r(J(t)):"PUSH"!==t.action&&"REPLACE"!==t.action||void 0!==t.state||r(ce(t,n)))}},t.CREATE_PUBLIC_LINK="metabase/card/CREATE_PUBLIC_LINK"),ee=(t.createPublicLink=(0,o.createAction)($,function(e){var t=e.id;return C.CardApi.createPublicLink({id:t})}),t.DELETE_PUBLIC_LINK="metabase/card/DELETE_PUBLIC_LINK"),te=(t.deletePublicLink=(0,o.createAction)(ee,function(e){var t=e.id;return C.CardApi.deletePublicLink({id:t})}),t.UPDATE_ENABLE_EMBEDDING="metabase/card/UPDATE_ENABLE_EMBEDDING"),ne=(t.updateEnableEmbedding=(0,o.createAction)(te,function(e,t){var n=e.id;return C.CardApi.update({id:n,enable_embedding:t})}),t.UPDATE_EMBEDDING_PARAMS="metabase/card/UPDATE_EMBEDDING_PARAMS"),re=(t.updateEmbeddingParams=(0,o.createAction)(ne,function(e,t){var n=e.id;return C.CardApi.update({id:n,embedding_params:t})}),t.UPDATE_URL="metabase/qb/UPDATE_URL"),ae=t.updateUrl=(0,c.createThunkAction)(re,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.dirty,r=t.replaceState,a=t.preserveParameters,i=void 0===a||a,o=t.queryBuilderMode;return function(t,a){var u=void 0;if(e?u=new w.default(e,(0,L.getMetadata)(a())):(e=(0,S.getCard)(a()),u=(0,S.getQuestion)(a())),null==n){var l=(0,S.getOriginalQuestion)(a());n=!l||l&&u.isDirtyComparedTo(l)}o||(o=(0,S.getQueryBuilderMode)(a()));var s=(0,v.cleanCopyCard)(e),c={card:s,cardId:s.id,serializedCard:(0,v.serializeCardForUrl)(s)},f=a().qb.currentState,p=(0,v.urlForCardState)(c,n),m=(0,x.parse)(p),h={pathname:(m.pathname||"")+("view"===o?"":"/"+o),search:i?window.location.search:"",hash:m.hash,state:c},y=h.pathname===window.location.pathname&&(h.search||"")===(window.location.search||"")&&(h.hash||"")===(window.location.hash||""),g=f&&f.serializedCard===c.serializedCard,b=K(h)===K(window.location);g&&y||(null==r&&(r=g&&b),t(Y(c)),t(r?(0,d.replace)(h):(0,d.push)(h)))}}),ie=t.REDIRECT_TO_NEW_QUESTION_FLOW="metabase/qb/REDIRECT_TO_NEW_QUESTION_FLOW",oe=t.redirectToNewQuestionFlow=(0,c.createThunkAction)(ie,function(){return function(e,t){return e((0,d.replace)("/question/new"))}}),ue=t.RESET_QB="metabase/qb/RESET_QB",le=t.resetQB=(0,o.createAction)(ue),se=t.INITIALIZE_QB="metabase/qb/INITIALIZE_QB",ce=t.initializeQB=function(e,t){return n=q(regeneratorRuntime.mark(function n(r,a){var o,u,s,c,d,p,h,y,g,b,E,S,C,x,A;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r(le()),r(He()),r(R.default.actions.fetchList({include:"tables"})),r(R.default.actions.fetchList({saved:!0})),o=a(),u=o.currentUser,s=void 0,c=void 0,d={isEditing:!1,isShowingTemplateTagsEditor:!1,queryBuilderMode:K(e)},p={},h=void 0,e.hash&&("?"===(y=e.hash.replace(/^#/,"")).charAt(0)?p=k.default.parse(y.substring(1)):h=y),g=!1,b=void 0,!t.cardId&&!h){n.next=50;break}if(n.prev=13,s=h?(0,v.deserializeCardFromUrl)(h):{},!t.cardId){n.next=23;break}return n.next=18,(0,v.loadCard)(t.cardId);case 18:s=n.sent,c=_.default.copy(s),s.original_card_id=s.id,n.next=28;break;case 23:if(!s.original_card_id){n.next=28;break}return n.next=26,(0,v.loadCard)(s.original_card_id);case 26:c=n.sent,(0,O.cardIsEquivalent)(s,c)&&(s=_.default.copy(c));case 28:if(!(Object.values((0,l.getIn)(s,["dataset_query","native","template-tags"])||{}).filter(function(e){return"snippet"===e.type}).length>0)){n.next=36;break}if(E=s.database_id,S=R.default.selectors.getObject(a(),{entityId:E})){n.next=35;break}return n.next=34,r(R.default.actions.fetchList());case 34:S=R.default.selectors.getObject(a(),{entityId:E});case 35:S&&"write"===S.native_permissions&&(b=r(D.default.actions.fetchList()));case 36:m.default.trackEvent("QueryBuilder","Query Loaded",s.dataset_query.type),d.isEditing=!!p.edit,t.cardId&&u.is_qbnewb&&(d.isShowingNewbModal=!0,m.default.trackEvent("QueryBuilder","Show Newb Modal")),s.archived&&(r((0,f.setErrorPage)({data:{error_code:"archived"},context:"query-builder"})),s=null),g=!0,n.next=48;break;case 43:n.prev=43,n.t0=n.catch(13),console.warn("initializeQb failed because of an error:",n.t0),s=null,r((0,f.setErrorPage)(n.t0));case 48:n.next=58;break;case 50:if(p.db||p.table||p.segment||p.metric){n.next=54;break}return n.next=53,r(oe());case 53:return n.abrupt("return");case 54:C=p.db?parseInt(p.db):void 0,(s=(0,v.startNewCard)("query",C)).dataset_query.query&&(null!=p.table&&(s.dataset_query.query["source-table"]=parseInt(p.table)),null!=p.segment&&(s.dataset_query.query.filter=["segment",parseInt(p.segment)]),null!=p.metric&&(d.isShowingSummarySidebar=!0,s.dataset_query.query.aggregation=["metric",parseInt(p.metric)])),m.default.trackEvent("QueryBuilder","Query Started",s.dataset_query.type);case 58:if(s&&null!=s.id&&r((0,i.fetchAlertsForQuestion)(s.id)),!s){n.next=62;break}return n.next=62,r(we(s));case 62:if(x=s&&new w.default(s,(0,L.getMetadata)(a())),t.cardId&&(x=x&&x.lockDisplay()),!(x&&x.isNative()&&b)){n.next=69;break}return n.next=67,b;case 67:A=D.default.selectors.getList(a()),x=x.setQuery(x.query().updateQueryTextWithNewSnippetNames(A));case 69:s=x&&x.card(),r.action(se,{card:s,originalCard:c,uiControls:d}),x&&"notebook"!==d.queryBuilderMode&&(x.canRun()&&setTimeout(function(){return r(Le({shouldUpdateUrl:!1}))},0),r(ae(s,{replaceState:!0,preserveParameters:g})));case 72:case"end":return n.stop()}},n,void 0,[[13,43]])})),function(e,t){return n.apply(this,arguments)};var n},de=t.TOGGLE_DATA_REFERENCE="metabase/qb/TOGGLE_DATA_REFERENCE",fe=(t.toggleDataReference=(0,o.createAction)(de,function(){m.default.trackEvent("QueryBuilder","Toggle Data Reference")}),t.TOGGLE_TEMPLATE_TAGS_EDITOR="metabase/qb/TOGGLE_TEMPLATE_TAGS_EDITOR"),pe=(t.toggleTemplateTagsEditor=(0,o.createAction)(fe,function(){m.default.trackEvent("QueryBuilder","Toggle Template Tags Editor")}),t.SET_IS_SHOWING_TEMPLATE_TAGS_EDITOR="metabase/qb/SET_IS_SHOWING_TEMPLATE_TAGS_EDITOR"),me=t.setIsShowingTemplateTagsEditor=function(e){return{type:pe,isShowingTemplateTagsEditor:e}},he=t.TOGGLE_SNIPPET_SIDEBAR="metabase/qb/TOGGLE_SNIPPET_SIDEBAR",ve=(t.toggleSnippetSidebar=(0,o.createAction)(he,function(){m.default.trackEvent("QueryBuilder","Toggle Snippet Sidebar")}),t.SET_IS_SHOWING_SNIPPET_SIDEBAR="metabase/qb/SET_IS_SHOWING_SNIPPET_SIDEBAR"),ye=(t.setIsShowingSnippetSidebar=function(e){return{type:ve,isShowingSnippetSidebar:e}},t.setIsPreviewing=function(e){return{type:U,payload:{isPreviewing:e}}},t.setIsNativeEditorOpen=function(e){return{type:U,payload:{isNativeEditorOpen:e}}},t.SET_NATIVE_EDITOR_SELECTED_RANGE="metabase/qb/SET_NATIVE_EDITOR_SELECTED_RANGE"),ge=(t.setNativeEditorSelectedRange=(0,o.createAction)(ye),t.SET_MODAL_SNIPPET="metabase/qb/SET_MODAL_SNIPPET"),be=t.setModalSnippet=(0,o.createAction)(ge),_e=t.SET_SNIPPET_COLLECTION_ID="metabase/qb/SET_SNIPPET_COLLECTION_ID",Ee=(t.setSnippetCollectionId=(0,o.createAction)(_e),t.openSnippetModalWithSelectedText=function(){return function(e,t){var n=t(),r=(0,S.getNativeEditorSelectedText)(n),a=(0,S.getSnippetCollectionId)(n);e(be({content:r,collection_id:a}))}},t.closeSnippetModal=function(){return function(e,t){e(be(null))}},t.insertSnippet=function(e){return function(t,n){var r=e.name,a=(0,S.getQuestion)(n()),i=a.query(),o=(0,S.getNativeEditorCursorOffset)(n()),u=o-((0,S.getNativeEditorSelectedText)(n())||"").length,l=i.queryText().slice(0,u)+"{{snippet: "+r+"}}"+i.queryText().slice(o),s=i.setQueryText(l).updateSnippetsWithIds([e]).datasetQuery();t(Ne(a.setDatasetQuery(s)))}},t.CLOSE_QB_NEWB_MODAL="metabase/qb/CLOSE_QB_NEWB_MODAL"),we=(t.closeQbNewbModal=(0,c.createThunkAction)(Ee,function(){return e=q(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n(),a=r.currentUser,e.next=3,C.UserApi.update_qbnewb({id:a.id});case 3:m.default.trackEvent("QueryBuilder","Close Newb Modal");case 4:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e}),t.loadMetadataForCard=function(e){return function(t,n){return t((0,p.loadMetadataForQuery)(new w.default(e,(0,L.getMetadata)(n())).query()))}});var Oe=t.updateCardVisualizationSettings=function(e){return t=q(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,S.getQuestion)(r()),t.next=3,n(Ne(a.updateSettings(e),{run:"auto",shouldUpdateUrl:!0}));case 3:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},Se=t.replaceAllCardVisualizationSettings=function(e){return t=q(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,S.getQuestion)(r()),t.next=3,n(Ne(a.setSettings(e),{run:"auto",shouldUpdateUrl:!0}));case 3:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},Ce=t.UPDATE_TEMPLATE_TAG="metabase/qb/UPDATE_TEMPLATE_TAG",xe=(t.updateTemplateTag=(0,c.createThunkAction)(Ce,function(e){return function(t,n){var r=n().qb,i=r.card,o=r.uiControls,u=_.default.copy(i);return!o.isEditing&&u.id&&(delete u.id,delete u.name,delete u.description),(0,l.updateIn)(u,["dataset_query","native","template-tags"],function(t){var n,r,i,o=e.name,u=t[o]&&t[o].type!==e.type?a({},e,{default:null}):e;return a({},t,(i=u,(r=o)in(n={})?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n))})}}),t.SET_PARAMETER_VALUE="metabase/qb/SET_PARAMETER_VALUE"),ke=(t.setParameterValue=(0,o.createAction)(xe,function(e,t){return{id:e,value:t}}),t.RELOAD_CARD="metabase/qb/RELOAD_CARD"),Ae=(t.reloadCard=(0,c.createThunkAction)(ke,function(){return e=q(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_.default.copy((0,S.getOriginalCard)(n())),t(we(r)),t(Le({overrideWithCard:r,shouldUpdateUrl:!1})),t(ae(r,{dirty:!1})),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e}),t.SET_CARD_AND_RUN="metabase/qb/SET_CARD_AND_RUN"),Te=t.setCardAndRun=function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=q(regeneratorRuntime.mark(function t(r,a){var i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(i=_.default.copy(e)).original_card_id){t.next=7;break}return t.next=4,(0,v.loadCard)(i.original_card_id);case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=i.id?i:null;case 8:o=t.t0,r.action(Ae,{card:i,originalCard:o}),r(Le({shouldUpdateUrl:n})),r(we(i));case 12:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)}},Pe=t.NAVIGATE_TO_NEW_CARD="metabase/qb/NAVIGATE_TO_NEW_CARD",je=(t.navigateToNewCardInsideQB=(0,c.createThunkAction)(Pe,function(e){var t,n=e.nextCard,r=e.previousCard;return t=q(regeneratorRuntime.mark(function e(t,a){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,O.cardIsEquivalent)(r,n)){e.next=10;break}return e.t0=t,e.t1=Te,e.next=5,(0,v.loadCard)(n.id);case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),e.next=13;break;case 10:i=(0,j.getCardAfterVisualizationClick)(n,r),o=s.question(null,i),(0,y.shouldOpenInBlankWindow)(o,{blankOnMetaKey:!0})?(0,y.open)(o):(t(W()),(0,O.cardQueryIsEquivalent)(r,n)||t(Fe()),t(Te(i)));case 13:case"end":return e.stop()}},e,void 0)})),function(e,n){return t.apply(this,arguments)}}),t.UPDATE_QUESTION="metabase/qb/UPDATE_QUESTION"),Ne=t.updateQuestion=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.doNotClearNameAndId,a=void 0!==r&&r,i=n.run,o=void 0!==i&&i,l=n.shouldUpdateUrl,s=void 0!==l&&l;return t=q(regeneratorRuntime.mark(function t(n,r){var i,l,c,d,f,m;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,S.getQuestion)(r()),a||(0,S.getIsEditing)(r())||!e.isSaved()||(e=e.withoutNameAndId()),e=e.syncColumnsAndSettings(i),"auto"===o&&(l=(0,S.getFirstQueryResult)(r()),h=l,v=void 0,void 0,void 0,v=e.query(),y=h&&h.data.cols.map(function(e){return e.name})||[],g=v instanceof A.default?v.columnNames():[],o=u.default.difference(g,y).length>0),e.canAutoRun()||(o=!1),t.next=7,n.action(je,{card:e.card()});case 7:if(s&&n(ae(null,{dirty:!0})),c=B(i),(d=B(e))>c?n(me(!0)):0===d&&(0,S.getIsShowingTemplateTagsEditor)(r())&&n(me(!1)),t.prev=11,u.default.isEqual(i.query().dependentMetadata(),e.query().dependentMetadata())){t.next=15;break}return t.next=15,n((0,p.loadMetadataForQuery)(e.query()));case 15:if(f=(0,S.getQuestion)(r()),(m=f.setDefaultQuery()).isEqual(f)){t.next=20;break}return t.next=20,n.action(je,{card:m.setDefaultDisplay().card()});case 20:t.next=25;break;case 22:t.prev=22,t.t0=t.catch(11),console.warn("Couldn't load metadata",t.t0);case 25:o&&n(Le());case 26:case"end":return t.stop()}var h,v,y,g},t,void 0,[[11,22]])})),function(e,n){return t.apply(this,arguments)}},Me=(t.setDatasetQuery=function(e,t){return function(n,r){var a=(0,S.getQuestion)(r());n(Ne(a.setDatasetQuery(e),t))}},t.API_CREATE_QUESTION="metabase/qb/API_CREATE_QUESTION"),Re=(t.apiCreateQuestion=function(e){return t=q(regeneratorRuntime.mark(function t(n,r){var a,i,o,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,S.getTransformedSeries)(r()),i=a?Be(e,a):e,o=(0,S.getResultsMetadata)(r()),t.next=5,i.setQuery(e.query().clean()).setResultsMetadata(o).reduxCreate(n);case 5:u=t.sent,n((0,I.setRequestUnloaded)(["entities","databases"])),n(ae(u.card(),{dirty:!1})),m.default.trackEvent("QueryBuilder","Create Card",u.query().datasetQuery().type),l=u.lockDisplay().card(),n.action(Me,l);case 11:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},t.API_UPDATE_QUESTION="metabase/qb/API_UPDATE_QUESTION"),De=(t.apiUpdateQuestion=function(e){return t=q(regeneratorRuntime.mark(function t(n,r){var a,o,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=e||(0,S.getQuestion)(r()),a=(0,S.getTransformedSeries)(r()),o=a?Be(e,a):e,u=(0,S.getResultsMetadata)(r()),t.next=6,o.setQuery(e.query().clean()).setResultsMetadata(u).reduxUpdate(n);case 6:return l=t.sent,t.next=9,n((0,i.fetchAlertsForQuestion)(l.id()));case 9:n((0,I.setRequestUnloaded)(["entities","databases"])),n(ae(l.card(),{dirty:!1})),m.default.trackEvent("QueryBuilder","Update Card",l.query().datasetQuery().type),n.action(Re,l.card());case 13:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},t.RUN_QUERY="metabase/qb/RUN_QUERY"),Le=t.runQuestionQuery=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.shouldUpdateUrl,r=void 0===n||n,a=t.ignoreCache,i=void 0!==a&&a,o=t.overrideWithCard;return e=q(regeneratorRuntime.mark(function e(t,n){var a,u,s,c,d,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=o?function(e){return e&&new w.default(e,(0,L.getMetadata)(n()))}(o):(0,S.getQuestion)(n()),u=(0,S.getOriginalQuestion)(n()),s=!u||a.isDirtyComparedTo(u),r&&t(ae(a.card(),{dirty:s})),(0,S.getIsPreviewing)(n())&&(a=a.setDatasetQuery((0,l.assocIn)(a.datasetQuery(),["constraints","max-results"],10))),c=new Date,d=(0,E.defer)(),f=(0,h.startTimer)(),a.apiGetResults({cancelDeferred:d,ignoreCache:i,isDirty:s}).then(function(e){return f(function(e){return m.default.trackEvent("QueryBuilder","Run Query",a.query().datasetQuery().type,e)}),t(qe(a,e))}).catch(function(e){return t(Ve(c,e))});try{ace.edit("id_sql").focus()}catch(e){}t.action(De,{cancelQueryDeferred:d});case 12:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)}},Ie=t.CLEAR_QUERY_RESULT="metabase/query_builder/CLEAR_QUERY_RESULT",Fe=t.clearQueryResult=(0,o.createAction)(Ie),ze=t.QUERY_COMPLETED="metabase/qb/QUERY_COMPLETED",qe=t.queryCompleted=function(e,t){return n=q(regeneratorRuntime.mark(function n(a,i){var o,u,l;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=r(t,1),u=o[0].data,l=(0,S.getOriginalQuestion)(i()),(!l||l&&e.isDirtyComparedTo(l))&&(e=e.maybeUnlockDisplay((0,P.getSensibleDisplays)(u)).setDefaultDisplay().switchTableScalar(u)),a.action(ze,{card:e.card(),queryResults:t});case 5:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n},Be=function(e,t){var n=e.settings(),r=a({},n,(0,N.getPersistableDefaultSettingsForSeries)(t));return u.default.isEqual(n,r)?e:e.setSettings(r)},Ue=t.QUERY_ERRORED="metabase/qb/QUERY_ERRORED",Ve=t.queryErrored=(0,c.createThunkAction)(Ue,function(e,t){return n=q(regeneratorRuntime.mark(function n(r,a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||!t.isCancelled){n.next=4;break}return n.abrupt("return",null);case 4:return n.abrupt("return",{error:t,duration:new Date-e});case 5:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n}),Ge=t.CANCEL_QUERY="metabase/qb/CANCEL_QUERY",He=t.cancelQuery=function(){return function(e,t){if((0,S.getIsRunning)(t())){var n=t().qb.cancelQueryDeferred;return n&&n.resolve(),{type:Ge}}}},We=t.FOLLOW_FOREIGN_KEY="metabase/qb/FOLLOW_FOREIGN_KEY",Qe=(t.followForeignKey=(0,c.createThunkAction)(We,function(e){return t=q(regeneratorRuntime.mark(function t(n,r){var a,i,o,u,l,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r(),i=a.qb.card,(o=(0,S.getFirstQueryResult)(r()))&&e){t.next=4;break}return t.abrupt("return",!1);case 4:for(u=void 0,l=0;l<o.data.cols.length;l++)(0,b.isPK)(o.data.cols[l].special_type)&&(u=o.data.rows[0][l]);(s=(0,v.startNewCard)("query",i.dataset_query.database)).dataset_query.query["source-table"]=e.origin.table.id,s.dataset_query.query.filter=["and",["=",e.origin.id,u]],n(Te(s));case 10:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t}),t.LOAD_OBJECT_DETAIL_FK_REFERENCES="metabase/qb/LOAD_OBJECT_DETAIL_FK_REFERENCES"),Ye=(t.loadObjectDetailFKReferences=(0,c.createThunkAction)(Qe,function(){return e=q(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,u,l,s,c,d,f,p,m=(r=q(regeneratorRuntime.mark(function e(t,n,r){var a,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=g.createQuery("query")).database=t.dataset_query.database,a.query["source-table"]=r.origin.table_id,a.query.aggregation=["count"],a.query.filter=["and",["=",r.origin.id,l(n.data)]],i={status:0,value:null},e.prev=6,e.next=9,C.MetabaseApi.dataset(a);case 9:(o=e.sent)&&"completed"===o.status&&o.data.rows.length>0?i.value=o.data.rows[0][0]:i.value="Unknown",e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error("error getting fk count",e.t0,a);case 16:return e.prev=16,i.status=1,e.finish(16);case 19:return e.abrupt("return",i);case 20:case"end":return e.stop()}},e,this,[[6,13,16,19]])})),function(e,t,n){return r.apply(this,arguments)});return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l=function(e){for(var t=0;t<e.cols.length;t++){var n=e.cols[t];if((0,b.isPK)(n.special_type))return e.rows[0][t]}},t.action(Ye),a=n(),i=a.qb.card,o=(0,S.getFirstQueryResult)(n()),u=(0,S.getTableForeignKeys)(n()),s={},c=0;case 7:if(!(c<u.length)){e.next=16;break}return d=u[c],e.next=11,m(i,o,d);case 11:f=e.sent,s[d.origin.id]=f;case 13:c++,e.next=7;break;case 16:if(p=(0,S.getFirstQueryResult)(n()),l(o.data)===l(p.data)){e.next=19;break}return e.abrupt("return",null);case 19:return e.abrupt("return",s);case 20:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e}),t.CLEAR_OBJECT_DETAIL_FK_REFERENCES="metabase/qb/CLEAR_OBJECT_DETAIL_FK_REFERENCES"),Ke=t.ARCHIVE_QUESTION="metabase/qb/ARCHIVE_QUESTION",Ze=(t.archiveQuestion=(0,c.createThunkAction)(Ke,function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=q(regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=r().qb.card,e.next=3,t(M.default.actions.setArchived({id:a.id},n));case 3:t((0,d.push)(s.collection(a.collection_id)));case 4:case"end":return e.stop()}},e,void 0)})),function(e,n){return t.apply(this,arguments)}}),t.VIEW_NEXT_OBJECT_DETAIL="metabase/qb/VIEW_NEXT_OBJECT_DETAIL"),Je=(t.viewNextObjectDetail=function(){return function(e,t){var n=(0,S.getQuestion)(t()),r=n.query().filters()[0],a=["=",r[1],r[2]+1];e.action(Ze),e(Ne(n.query().updateFilter(0,a).question())),e(Le())}},t.VIEW_PREVIOUS_OBJECT_DETAIL="metabase/qb/VIEW_PREVIOUS_OBJECT_DETAIL"),Xe=(t.viewPreviousObjectDetail=function(){return function(e,t){var n=(0,S.getQuestion)(t()),r=n.query().filters()[0];if(1===r[2])return!1;var a=["=",r[1],r[2]-1];e.action(Je),e(Ne(n.query().updateFilter(0,a).question())),e(Le())}},t.SHOW_CHART_SETTINGS="metabase/query_builder/SHOW_CHART_SETTINGS");t.showChartSettings=(0,o.createAction)(Xe),t.onUpdateVisualizationSettings=Oe,t.onReplaceAllVisualizationSettings=Se},151:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performUndo=t.dismissUndo=t.addUndo=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=t.type,a=t.payload,i=t.error;if(n===s){if(i)return console.warn("ADD_UNDO",a),e;var o=r({},a,{actions:a.action?[a.action]:a.actions||[],action:null,count:a.count||1}),u=e[e.length-1];return u&&null!=o.verb&&o.verb===u.verb?e.slice(0,-1).concat(r({},o,{verb:u.verb,count:u.count+o.count,subject:u.subject===o.subject?o.subject:"item",actions:[].concat(l(u.actions),l(a.actions)),_domId:u._domId})):e.concat(o)}return n===c?i?(console.warn("DISMISS_UNDO",a),e):e.filter(function(e){return e.id!==a}):e};var a=u(n(3)),i=n(18),o=u(n(16));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var s="metabase/questions/ADD_UNDO",c="metabase/questions/DISMISS_UNDO",d=0,f=(t.addUndo=(0,i.createThunkAction)(s,function(e){return function(t,n){var a=d++;return setTimeout(function(){return t(f(a,!1))},5e3),r({},e,{id:a,_domId:a})}}),t.dismissUndo=(0,i.createAction)(c,function(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&o.default.trackEvent("Undo","Dismiss Undo"),e}));t.performUndo=(0,i.createThunkAction)("metabase/questions/PERFORM_UNDO",function(e){return function(t,n){o.default.trackEvent("Undo","Perform Undo");var r=a.default.findWhere(n().undo,{id:e});r&&(r.actions.map(function(e){return t(e)}),t(f(e,!1)))}})},152:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getFilters=l,t.addFilter=function(e,t){return s((0,a.add)(l(e),t))},t.updateFilter=function(e,t,n){return s((0,a.update)(l(e),t,n))},t.removeFilter=function(e,t){return s((0,a.remove)(l(e),t))},t.clearFilters=function(e){return s((0,a.clear)())},t.canAddFilter=function(e){var t=l(e);if(t.length>0)return(0,a.noNullValues)(t[t.length-1]);return!0},t.isStandard=c,t.isSegment=d,t.isCustom=function(e){return!c(e)&&!d(e)},t.isFieldFilter=function(e){return!d(e)&&(0,i.isValidField)(e[1])},t.hasFilterOptions=f,t.getFilterOptions=function(e){var t=e;return f(e)?t[t.length-1]:{}},t.setFilterOptions=function(e,t){var n=e;f(e)&&(n=n.slice(0,-1));Object.keys(t).length>0&&(n=[].concat(u(n),[t]));return n};var a=n(115),i=n(88),o=n(68);function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e){return!e||Array.isArray(e)&&0===e.length?[]:"and"===(0,a.op)(e)?(0,a.args)(e):[e]}function s(e){return 0===e.length?void 0:1===e.length?e[0]:["and"].concat(u(e))}function c(e){return Array.isArray(e)&&(o.STANDARD_FILTERS.has(e[0])||null===e[0])&&(void 0===e[1]||(0,i.isValidField)(e[1]))}function d(e){return Array.isArray(e)&&"segment"===e[0]}function f(e){var t=e[e.length-1];return!!t&&"object"==(void 0===t?"undefined":r(t))&&t.constructor===Object}},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(302)),a=i(n(84));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)(a.default)},154:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.snippets=t.search=t.groups=t.users=t.tasks=t.segments=t.metrics=t.fields=t.tables=t.schemas=t.databases=t.revisions=t.questions=t.pulses=t.dashboards=t.snippetCollections=t.collections=void 0;var r=_(n(43)),a=_(n(204)),i=_(n(163)),o=_(n(380)),u=_(n(102)),l=_(n(438)),s=_(n(69)),c=_(n(232)),d=_(n(99)),f=_(n(130)),p=_(n(184)),m=_(n(185)),h=_(n(381)),v=_(n(106)),y=_(n(190)),g=_(n(240)),b=_(n(218));function _(e){return e&&e.__esModule?e:{default:e}}t.collections=r.default,t.snippetCollections=a.default,t.dashboards=i.default,t.pulses=o.default,t.questions=u.default,t.revisions=l.default,t.databases=s.default,t.schemas=c.default,t.tables=d.default,t.fields=f.default,t.metrics=p.default,t.segments=m.default,t.tasks=h.default,t.users=v.default,t.groups=y.default,t.search=g.default,t.snippets=b.default},16:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerAnalyticsClickListener=function(){document.body.addEventListener("click",function(e){for(var t=e.target;t;){if(t.dataset&&t.dataset.metabaseEvent){var n=t.dataset.metabaseEvent.split(";").map(function(e){return e.trim()});l.trackEvent.apply(l,u(n))}t=t.parentNode}},!0)};var r,a=n(14),i=(r=a)&&r.__esModule?r:{default:r},o=n(300);function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var l={trackPageView:function(e){if(e){e=0===e.lastIndexOf("/q/",0)?"/q/":e;var t=(i.default.get("version")||{}).tag;"function"==typeof ga&&(ga("set","dimension1",t),ga("set","page",e),ga("send","pageview",e))}},trackEvent:function(e,t,n,r){var a=(i.default.get("version")||{}).tag;"function"==typeof ga&&e&&t&&(ga("set","dimension1",a),ga("send","event",e,t,n,r)),o.DEBUG&&console.log("trackEvent",{category:e,action:t,label:n,value:r})}};t.default=l},162:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getComputedSettings=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={};for(var i in e)b(a,e,i,t,n,r);return a},t.getSettingsWidgets=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return Object.keys(e).map(function(u){return function(e,t,n,r,i,o){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=e[t],s=r[t],c=function(e){var n=function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},t,e),a=!0,i=!1,u=void 0;try{for(var s,c=(l.writeDependencies||[])[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value;n[d]=r[d]}}catch(e){i=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(i)throw u}}o(n)};l.useRawSeries&&i._raw&&(i=i._raw);return a({},l,{id:t,value:s,title:l.getTitle?l.getTitle(i,r,u):l.title,hidden:l.getHidden?l.getHidden(i,r,u):l.hidden||!1,disabled:l.getDisabled?l.getDisabled(i,r,u):l.disabled||!1,props:a({},l.props?l.props:{},l.getProps?l.getProps(i,r,c,u):{}),set:t in n,widget:"string"==typeof l.widget?g[l.widget]:l.widget,onChange:c})}(e,u,t,n,r,i,o)}).filter(function(e){return e.widget})},t.getPersistableDefaultSettings=function(e,t){var n={};for(var r in e){var a=e[r];a.persistDefault&&(n[r]=t[r])}return n},t.updateSettings=function(e,t){var n=!0,i=!1,o=void 0;try{for(var u,l=Object.keys(t)[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var s=u.value;v.default.trackEvent("Chart Settings","Change Setting",s)}}catch(e){i=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw o}}var c=a({},e,t),d=!0,f=!1,p=void 0;try{for(var m,h=Object.entries(t)[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var y=r(m.value,2),g=y[0],b=y[1];void 0===b&&delete c[g]}}catch(e){f=!0,p=e}finally{try{!d&&h.return&&h.return()}finally{if(f)throw p}}return c};var i=y(n(579)),o=y(n(580)),u=y(n(581)),l=y(n(582)),s=y(n(322)),c=y(n(583)),d=y(n(584)),f=y(n(324)),p=y(n(585)),m=y(n(325)),h=y(n(586)),v=y(n(16));function y(e){return e&&e.__esModule?e:{default:e}}var g={input:i.default,inputGroup:o.default,number:u.default,radio:l.default,select:s.default,toggle:c.default,buttonGroup:d.default,field:f.default,fields:p.default,color:m.default,colors:h.default};function b(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if(!(n in e)){var u=t[n]||{},l=!0,s=!1,c=void 0;try{for(var d,f=(u.readDependencies||[])[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){b(e,t,d.value,r,i,o)}}catch(e){s=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(s)throw c}}u.useRawSeries&&r._raw&&(r=r._raw);var p=a({},i,e);try{if(u.getValue)return e[n]=u.getValue(r,p,o);if(void 0!==i[n]&&(!u.isValid||u.isValid(r,p,o)))return e[n]=i[n];if(u.getDefault){var m=u.getDefault(r,p,o);return e[n]=m}if("default"in u)return e[n]=u.default}catch(e){console.warn("Error getting setting",n,e)}return e[n]=void 0}}},163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=w(["dashboard"],["dashboard"]),o=w(["dashboards"],["dashboards"]),u=w(["Name"],["Name"]),l=w(["What is the name of your dashboard?"],["What is the name of your dashboard?"]),s=w(["Description"],["Description"]),c=w(["It's optional but oh, so helpful"],["It's optional but oh, so helpful"]),d=w(["Which collection should this go in?"],["Which collection should this go in?"]),f=n(18),p=n(34),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(23)),h=n(7),v=n(11),y=n(1),g=n(151),b=n(64),_=n(43);function E(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function w(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var O,S="metabase/entities/dashboards/FAVORITE",C="metabase/entities/dashboards/UNFAVORITE",x="metabase/entities/dashboards/COPY",k=(0,p.createEntity)({name:"dashboards",path:"/api/dashboard",displayNameOne:(0,y.t)(i),displayNameMany:(0,y.t)(o),api:{favorite:(0,b.POST)("/api/dashboard/:id/favorite"),unfavorite:(0,b.DELETE)("/api/dashboard/:id/favorite"),save:(0,b.POST)("/api/dashboard/save"),copy:(0,b.POST)("/api/dashboard/:id/copy")},objectActions:{setArchived:function(e,t,n){var r=e.id;return k.actions.update({id:r},{archived:t},(0,p.undo)(n,"dashboard",t?"archived":"unarchived"))},setCollection:function(e,t,n){var r=e.id;return k.actions.update({id:r},{collection_id:(0,_.canonicalCollectionId)(t&&t.id)},(0,p.undo)(n,"dashboard","moved"))},setPinned:function(e,t,n){var r=e.id;return k.actions.update({id:r},{collection_position:"number"==typeof t?t:t?1:null},n)},setFavorited:(O=E(regeneratorRuntime.mark(function e(t,n){var r=t.id;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,k.api.favorite({id:r});case 3:return e.abrupt("return",{type:S,payload:r});case 6:return e.next=8,k.api.unfavorite({id:r});case 8:return e.abrupt("return",{type:C,payload:r});case 9:case"end":return e.stop()}},e,void 0)})),function(e,t){return O.apply(this,arguments)}),copy:(0,f.compose)((0,f.withAction)(x),(0,f.withRequestState)(function(e){return["entities","dashboard",e.id,"copy"]}),(0,f.withAnalytics)("entities","dashboard","copy"))(function(e,t){var n,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).notify;return n=E(regeneratorRuntime.mark(function n(i,o){var u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=k,n.next=3,k.api.copy(a({id:e.id},t));case 3:return n.t1=n.sent,u=n.t0.normalize.call(n.t0,n.t1),r&&i((0,g.addUndo)(r)),i({type:k.actionTypes.INVALIDATE_LISTS_ACTION}),n.abrupt("return",u);case 8:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)}})},actions:{save:function(e){return t=E(regeneratorRuntime.mark(function t(n){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.api.save(e);case 2:return r=t.sent,n({type:k.actionTypes.INVALIDATE_LISTS_ACTION}),t.abrupt("return",{type:"metabase/entities/dashboards/SAVE_DASHBOARD",payload:r});case 5:case"end":return t.stop()}},t,void 0)})),function(e){return t.apply(this,arguments)};var t}},reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,r=t.payload,i=t.error;return n!==S||i?n!==C||i?n===x&&!i&&e[""]?a({},e,{"":e[""].concat([r.result])}):e:(0,v.assocIn)(e,[r,"favorite"],!1):(0,v.assocIn)(e,[r,"favorite"],!0)},objectSelectors:{getFavorited:function(e){return e&&e.favorite},getName:function(e){return e&&e.name},getUrl:function(e){return e&&m.dashboard(e.id)},getIcon:function(e){return"dashboard"},getColor:function(){return(0,h.color)("dashboard")}},form:{fields:[{name:"name",title:(0,y.t)(u),placeholder:(0,y.t)(l),validate:function(e){return e?null:"Name is required"}},{name:"description",title:(0,y.t)(s),type:"text",placeholder:(0,y.t)(c)},{name:"collection_id",title:(0,y.t)(d),type:"collection",validate:function(e){return void 0===e?"Collection is required":null}}]},getAnalyticsMetadata:function(e,t,n){var a=r(e,1)[0],i=(t.action,a&&(0,_.getCollectionType)(a.collection_id,n()));return i&&"collection="+i}});t.default=k},164:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=_(["Save"],["Save"]),l=_(["Saving..."],["Saving..."]),s=_(["Save failed"],["Save failed"]),c=_(["Saved"],["Saved"]),d=n(0),f=b(d),p=b(n(2)),m=b(n(5)),h=b(n(19)),v=n(112),y=n(1),g=b(n(4));function b(e){return e&&e.__esModule?e:{default:e}}function _(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var E=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.resetStateOnTimeout=function(){clearTimeout(n.timeout),n.timeout=setTimeout(function(){return n.setState({active:!1,result:null})},5e3)},n.onClick=function(e){e.preventDefault(),n.setState({active:!0,result:null}),n.actionPromise=(0,v.cancelable)(n.props.actionFn()),n.actionPromise.then(function(e){n.setState({active:!1,result:"success"},n.resetStateOnTimeout)},function(e){e.isCanceled||(console.error(e),n.setState({active:!1,result:"failed"},n.resetStateOnTimeout))})},n.state={active:!1,result:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),o(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.actionPromise&&this.actionPromise.cancel()}},{key:"render",value:function(){var e=this.props,t=e.normalText,n=e.activeText,r=e.failedText,a=e.successText,o=(e.actionFn,e.className),u=e.forceActiveStyle,l=e.children,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["normalText","activeText","failedText","successText","actionFn","className","forceActiveStyle","children"]),c=this.state,d=c.active,p=c.result;return f.default.createElement(h.default,i({},s,{className:u?(0,g.default)("Button","Button--waiting"):(0,g.default)(o,{"Button--waiting pointer-events-none":d,"Button--success pointer-events-none":"success"===p,"Button--danger":"failed"===p}),onClick:this.onClick}),d?n:"success"===p?f.default.createElement("span",null,u?null:f.default.createElement(m.default,{name:"check",size:12}),f.default.createElement("span",{className:"ml1"},a)):"failed"===p?r:l||t)}}]),t}(),r.propTypes={actionFn:p.default.func.isRequired},r.defaultProps={className:"Button",normalText:(0,y.t)(u),activeText:(0,y.t)(l),failedText:(0,y.t)(s),successText:(0,y.t)(c),forceActiveStyle:!1},a);E.displayName="ActionButton",t.default=E},165:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logout=t.LOGOUT=t.loginGoogle=t.LOGIN_GOOGLE=t.login=t.LOGIN=void 0;var r,a=n(18),i=n(30),o=n(16),u=(r=o)&&r.__esModule?r:{default:r},l=n(615),s=n(191),c=n(241),d=n(17);function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var p,m,h,v=t.LOGIN="metabase/auth/LOGIN",y=(t.login=(0,a.createThunkAction)(v,function(e,t){return n=f(regeneratorRuntime.mark(function n(r,a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.SessionApi.create(e);case 2:return u.default.trackEvent("Auth","Login"),n.next=5,Promise.all([r((0,c.refreshCurrentUser)()),r((0,s.refreshSiteSettings)())]);case 5:r((0,i.push)(t||"/"));case 6:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n}),t.LOGIN_GOOGLE="metabase/auth/LOGIN_GOOGLE"),g=(t.loginGoogle=(0,a.createThunkAction)(y,function(e,t){return n=f(regeneratorRuntime.mark(function n(r,a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.SessionApi.createWithGoogleAuth({token:e.getAuthResponse().id_token});case 3:return u.default.trackEvent("Auth","Google Auth Login"),n.next=6,Promise.all([r((0,c.refreshCurrentUser)()),r((0,s.refreshSiteSettings)())]);case 6:r((0,i.push)(t||"/")),n.next=18;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,(0,l.clearGoogleAuthCredentials)();case 13:if(428!==n.t0.status){n.next=17;break}r((0,i.push)("/auth/google_no_mb_account")),n.next=18;break;case 17:return n.abrupt("return",n.t0);case 18:case"end":return n.stop()}},n,this,[[0,9]])})),function(e,t){return n.apply(this,arguments)};var n}),t.LOGOUT="metabase/auth/LOGOUT"),b=(t.logout=(0,a.createThunkAction)(g,function(){return e=f(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.SessionApi.delete();case 2:return e.next=4,(0,l.clearGoogleAuthCredentials)();case 4:u.default.trackEvent("Auth","Logout"),t((0,i.push)("/auth/login")),window.location.reload();case 7:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)};var e}),(0,a.handleActions)((h={next:function(e,t){var n=t.payload;return n||null}},(m=y)in(p={})?Object.defineProperty(p,m,{value:h,enumerable:!0,configurable:!0,writable:!0}):p[m]=h,p),null));t.default=(0,a.combineReducers)({loginError:b})},166:function(e,t,n){"use strict";var r,a,i,o,u,l,s,c;Object.defineProperty(t,"__esModule",{value:!0}),t.navigateToNewCardFromDashboard=t.deletePublicLink=t.DELETE_PUBLIC_LINK=t.createPublicLink=t.CREATE_PUBLIC_LINK=t.setParameterValue=t.setParameterIndex=t.setParameterDefaultValue=t.setParameterName=t.removeParameter=t.addParameter=t.setParameterMapping=t.setEditingParameter=t.onReplaceAllDashCardVisualizationSettings=t.onUpdateDashCardVisualizationSettings=t.updateEmbeddingParams=t.updateEnableEmbedding=t.fetchDashboard=t.markCardAsSlow=t.fetchCardData=t.cancelFetchCardData=t.cancelFetchDashboardCardData=t.fetchDashboardCardData=t.fetchDataOrError=t.clearCardData=t.removeCardFromDashboard=t.saveDashboardAndCards=t.addTextDashCardToDashboard=t.addDashCardToDashboard=t.addCardToDashboard=t.setDashCardAttributes=t.setDashboardAttributes=t.markNewCardSeen=t.setEditingDashboard=t.initialize=t.SET_PARAMETER_DEFAULT_VALUE=t.SET_PARAMETER_INDEX=t.SET_PARAMETER_VALUE=t.SET_PARAMETER_NAME=t.SET_PARAMETER_MAPPING=t.REMOVE_PARAMETER=t.ADD_PARAMETER=t.SET_EDITING_PARAMETER_ID=t.MARK_NEW_CARD_SEEN=t.CLEAR_CARD_DATA=t.MARK_CARD_AS_SLOW=t.CANCEL_FETCH_CARD_DATA=t.CANCEL_FETCH_DASHBOARD_CARD_DATA=t.FETCH_CARD_DATA=t.FETCH_DASHBOARD_CARD_DATA=t.UPDATE_DASHCARD_ID=t.REPLACE_ALL_DASHCARD_VISUALIZATION_SETTINGS=t.UPDATE_DASHCARD_VISUALIZATION_SETTINGS=t.SET_DASHCARD_ATTRIBUTES=t.REMOVE_CARD_FROM_DASH=t.ADD_CARD_TO_DASH=t.SET_DASHBOARD_ATTRIBUTES=t.SAVE_DASHBOARD_AND_CARDS=t.FETCH_DASHBOARD=t.SET_EDITING_DASHBOARD=t.INITIALIZE=void 0;var d,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m=t.fetchDataOrError=(d=z(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",{error:e.t0});case 9:case"end":return e.stop()}},e,this,[[0,6]])})),function(e){return d.apply(this,arguments)});t.syncParametersAndEmbeddingParams=ze;var h=n(11),v=L(n(3)),y=n(18),g=n(25),b=n(112),_=n(128),E=L(n(39)),w=L(n(163)),O=L(n(102)),S=n(255),C=n(80),x=n(100),k=L(n(35)),A=n(349),T=n(126),P=n(21),j=n(30),N=n(17),M=n(194),R=n(27),D=n(24);function L(e){return e&&e.__esModule?e:{default:e}}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function z(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var q=new _.schema.Entity("dashcard"),B=new _.schema.Entity("dashboard",{ordered_cards:[q]}),U=t.INITIALIZE="metabase/dashboard/INITIALIZE",V=t.SET_EDITING_DASHBOARD="metabase/dashboard/SET_EDITING_DASHBOARD",G=t.FETCH_DASHBOARD="metabase/dashboard/FETCH_DASHBOARD",H=t.SAVE_DASHBOARD_AND_CARDS="metabase/dashboard/SAVE_DASHBOARD_AND_CARDS",W=t.SET_DASHBOARD_ATTRIBUTES="metabase/dashboard/SET_DASHBOARD_ATTRIBUTES",Q=t.ADD_CARD_TO_DASH="metabase/dashboard/ADD_CARD_TO_DASH",Y=t.REMOVE_CARD_FROM_DASH="metabase/dashboard/REMOVE_CARD_FROM_DASH",K=t.SET_DASHCARD_ATTRIBUTES="metabase/dashboard/SET_DASHCARD_ATTRIBUTES",Z=t.UPDATE_DASHCARD_VISUALIZATION_SETTINGS="metabase/dashboard/UPDATE_DASHCARD_VISUALIZATION_SETTINGS",J=t.REPLACE_ALL_DASHCARD_VISUALIZATION_SETTINGS="metabase/dashboard/REPLACE_ALL_DASHCARD_VISUALIZATION_SETTINGS",X=t.UPDATE_DASHCARD_ID="metabase/dashboard/UPDATE_DASHCARD_ID",$=t.FETCH_DASHBOARD_CARD_DATA="metabase/dashboard/FETCH_DASHBOARD_CARD_DATA",ee=t.FETCH_CARD_DATA="metabase/dashboard/FETCH_CARD_DATA",te=t.CANCEL_FETCH_DASHBOARD_CARD_DATA="metabase/dashboard/CANCEL_FETCH_DASHBOARD_CARD_DATA",ne=t.CANCEL_FETCH_CARD_DATA="metabase/dashboard/CANCEL_FETCH_CARD_DATA",re=t.MARK_CARD_AS_SLOW="metabase/dashboard/MARK_CARD_AS_SLOW",ae=t.CLEAR_CARD_DATA="metabase/dashboard/CLEAR_CARD_DATA",ie=t.MARK_NEW_CARD_SEEN="metabase/dashboard/MARK_NEW_CARD_SEEN",oe=t.SET_EDITING_PARAMETER_ID="metabase/dashboard/SET_EDITING_PARAMETER_ID",ue=t.ADD_PARAMETER="metabase/dashboard/ADD_PARAMETER",le=t.REMOVE_PARAMETER="metabase/dashboard/REMOVE_PARAMETER",se=t.SET_PARAMETER_MAPPING="metabase/dashboard/SET_PARAMETER_MAPPING",ce=t.SET_PARAMETER_NAME="metabase/dashboard/SET_PARAMETER_NAME",de=t.SET_PARAMETER_VALUE="metabase/dashboard/SET_PARAMETER_VALUE",fe=t.SET_PARAMETER_INDEX="metabase/dashboard/SET_PARAMETER_INDEX",pe=t.SET_PARAMETER_DEFAULT_VALUE="metabase/dashboard/SET_PARAMETER_DEFAULT_VALUE";function me(e){return null==e||"object"===(void 0===e?"undefined":p(e))?"inline":k.default.isUUID(e)?"public":k.default.isJWT(e)?"embed":/\/auto\/dashboard/.test(e)?"transient":"normal"}t.initialize=(0,y.createAction)(U),t.setEditingDashboard=(0,y.createAction)(V),t.markNewCardSeen=(0,y.createAction)(ie);var he=t.setDashboardAttributes=(0,y.createAction)(W),ve=t.setDashCardAttributes=(0,y.createAction)(K),ye=(t.addCardToDashboard=function(e){var t,n=e.dashId,r=e.cardId;return t=z(regeneratorRuntime.mark(function e(t,a){var i,o,u,l,s,c,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(O.default.actions.fetch({id:r}));case 2:i=O.default.selectors.getObject(a(),{entityId:r}),o=a().dashboard,u=o.dashboards,l=o.dashcards,s=u[n],c=s.ordered_cards.map(function(e){return l[e]}).filter(function(e){return!e.isRemoved}),d=f({id:Math.random(),dashboard_id:n,card_id:i.id,card:i,series:[]},(0,A.getPositionForNewDashCard)(c),{parameter_mappings:[],visualization_settings:{}}),t((0,y.createAction)(Q)(d)),t(Ce(i,d,{reload:!0,clear:!0})),t(Qe([d]));case 10:case"end":return e.stop()}},e,void 0)})),function(e,n){return t.apply(this,arguments)}},t.addDashCardToDashboard=function(e){var t=e.dashId,n=e.dashcardOverrides;return function(e,r){var a=r().dashboard,i=a.dashboards,o=a.dashcards,u=i[t].ordered_cards.map(function(e){return o[e]}).filter(function(e){return!e.isRemoved}),l=f({id:Math.random(),card_id:null,card:null,dashboard_id:t,series:[]},(0,A.getPositionForNewDashCard)(u),{parameter_mappings:[],visualization_settings:{}});v.default.extend(l,n),e((0,y.createAction)(Q)(l))}}),ge=(t.addTextDashCardToDashboard=function(e){var t=e.dashId,n=(0,T.createCard)();return n.display="text",n.archived=!1,ye({dashId:t,dashcardOverrides:{card:n,visualization_settings:{virtual_card:n}}})},t.saveDashboardAndCards=(0,y.createThunkAction)(H,function(){return e=z(regeneratorRuntime.mark(function e(t,n){var r,a,i,o,u,l,s,c,d,p,m,h,y=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().dashboard,a=r.dashboards,i=r.dashcards,o=r.dashboardId,u=f({},a[o],{ordered_cards:a[o].ordered_cards.map(function(e){return i[e]})}),e.next=4,Promise.all(u.ordered_cards.filter(function(e){return e.isRemoved&&!e.isAdded}).map(function(e){return N.DashboardApi.removecard({dashId:u.id,dashcardId:e.id})}));case 4:return e.next=6,Promise.all(u.ordered_cards.filter(function(e){return!e.isRemoved}).map(function(){var e=z(regeneratorRuntime.mark(function e(n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isAdded){e.next=8;break}return e.next=3,N.DashboardApi.addcard({dashId:u.id,cardId:n.card_id});case 3:return r=e.sent,t(ge(n.id,r.id)),e.abrupt("return",f({},r,{col:n.col,row:n.row,sizeX:n.sizeX,sizeY:n.sizeY,series:n.series,parameter_mappings:n.parameter_mappings,visualization_settings:n.visualization_settings,isAdded:!0}));case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e,y)}));return function(t){return e.apply(this,arguments)}}()));case 6:return l=e.sent,e.next=9,Promise.all(u.ordered_cards.filter(function(e){return e.card.isDirty}).map(function(){var e=z(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.CardApi.update(t.card));case 1:case"end":return e.stop()}},e,y)}));return function(t){return e.apply(this,arguments)}}()));case 9:if(!u.isDirty){e.next=13;break}return s=u.id,c=u.name,d=u.description,p=u.parameters,e.next=13,t(w.default.actions.update({id:s},{name:c,description:d,parameters:p}));case 13:if(!v.default.some(l,function(e){return e.isDirty||e.isAdded})){e.next=20;break}return m=l.map(function(e){var t=e.id,n=e.card_id,r=e.row,a=e.col,i=e.sizeX,o=e.sizeY,l=e.series,s=e.parameter_mappings,c=e.visualization_settings;return{id:t,card_id:n,row:r,col:a,sizeX:i,sizeY:o,series:l,visualization_settings:c,parameter_mappings:s&&s.filter(function(e){return v.default.findWhere(u.parameters,{id:e.parameter_id})&&(n===e.card_id||v.default.findWhere(l,{id:e.card_id}))})}}),e.next=17,N.DashboardApi.reposition_cards({dashId:u.id,cards:m});case 17:if("ok"===(h=e.sent).status){e.next=20;break}throw new Error(h.status);case 20:return e.next=22,t(w.default.actions.update(u));case 22:t(Ae(u.id,null,!0));case 23:case"end":return e.stop()}},e,this)})),function(t,n){return e.apply(this,arguments)};var e}),t.removeCardFromDashboard=(0,y.createAction)(Y),(0,y.createAction)(X,function(e,t){return{oldDashcardId:e,newDashcardId:t}})),be=t.clearCardData=(0,y.createAction)(ae,function(e,t){return{cardId:e,dashcardId:t}});function _e(e){var t=[];if(e){var n=!0,r=!1,a=void 0;try{for(var i,o=function(){var e=i.value,n=[e.card].concat(e.series||[]);t.push.apply(t,F(n.map(function(t){return{card:t,dashcard:e}})))},u=e.ordered_cards[Symbol.iterator]();!(n=(i=u.next()).done);n=!0)o()}catch(e){r=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw a}}}return t}function Ee(e){return v.default.isObject(e.visualization_settings.virtual_card)}t.fetchDashboardCardData=(0,y.createThunkAction)($,function(e){return function(t,n){var r=(0,M.getDashboardComplete)(n()),a=!0,i=!1,o=void 0;try{for(var u,l=_e(r)[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value,c=s.card,d=s.dashcard;Ee(d)||t(Ce(c,d,e))}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}}}),t.cancelFetchDashboardCardData=(0,y.createThunkAction)(te,function(){return function(e,t){var n=(0,M.getDashboardComplete)(t()),r=!0,a=!1,i=void 0;try{for(var o,u=_e(n)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value,s=l.card,c=l.dashcard;e(Oe(s.id,c.id))}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}}});var we={},Oe=t.cancelFetchCardData=(0,y.createAction)(ne,function(e,t){var n=we[t+","+e];return n&&(n.resolve(),we[t+","+e]=null),{dashcard_id:t,card_id:e}});function Se(e,t,n){we[t+","+e]=n}var Ce=t.fetchCardData=(0,y.createThunkAction)(ee,function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.reload,i=r.clear,o=r.ignoreCache;return n=z(regeneratorRuntime.mark(function n(r,u){var l,s,c,d,p,y,g,_,E,w,O,S,A,T;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.dataset_query){n.next=2;break}return n.abrupt("return",{dashcard_id:t.id,card_id:e.id,result:{error:{status:403}}});case 2:if(l=me(t.dashboard_id),s=u().dashboard,c=s.dashboardId,d=s.dashboards,p=s.parameterValues,y=s.dashcardData,g=d[c],_=(0,C.applyParameters)(e,g.parameters,p,t&&t.parameter_mappings),a){n.next=10;break}if(!(E=(0,h.getIn)(y,[t.id,e.id]))||!k.default.equals(v.default.omit(E.json_query,"constraints"),_)){n.next=10;break}return n.abrupt("return",{dashcard_id:t.id,card_id:e.id,result:E});case 10:if(Oe(e.id,t.id),i&&r(be(e.id,t.id)),w=null,O=setTimeout(function(){null===w&&r(xe(e,_))},15e3),S=(0,b.defer)(),Se(e.id,t.id,S),A=!1,S.promise.then(function(){A=!0}),T={cancelled:S.promise},"endpoint"!==_.type){n.next=25;break}return n.next=22,m(N.MetabaseApi.datasetEndpoint({endpoint:_.endpoint,parameters:_.parameters},T));case 22:w=n.sent,n.next=46;break;case 25:if("public"!==l){n.next=31;break}return n.next=28,m(N.PublicApi.dashboardCardQuery({uuid:t.dashboard_id,cardId:e.id,parameters:_.parameters?JSON.stringify(_.parameters):void 0,ignore_cache:o},T));case 28:w=n.sent,n.next=46;break;case 31:if("embed"!==l){n.next=37;break}return n.next=34,m(N.EmbedApi.dashboardCardQuery(f({token:t.dashboard_id,dashcardId:t.id,cardId:e.id},(0,x.getParametersBySlug)(g.parameters,p),{ignore_cache:o}),T));case 34:w=n.sent,n.next=46;break;case 37:if("transient"!==l&&"inline"!==l){n.next=43;break}return n.next=40,m(N.MetabaseApi.dataset(f({},_,{ignore_cache:o}),T));case 40:w=n.sent,n.next=46;break;case 43:return n.next=45,m(N.CardApi.query({cardId:e.id,parameters:_.parameters,ignore_cache:o},T));case 45:w=n.sent;case 46:return Se(e.id,t.id,null),clearTimeout(O),n.abrupt("return",{dashcard_id:t.id,card_id:e.id,result:A?null:w});case 49:case"end":return n.stop()}},n,this)})),function(e,t){return n.apply(this,arguments)}}),xe=t.markCardAsSlow=(0,y.createAction)(re,function(e){return{id:e.id,result:!0}});function ke(e){return f({name:"",visualization_settings:{}},e,{id:v.default.uniqueId("card")})}var Ae=t.fetchDashboard=(0,y.createThunkAction)(G,function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=void 0;return n=z(regeneratorRuntime.mark(function n(i,o){var u,l,s,c,d,p,m,h,y;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("public"!==(u=me(e))){n.next=8;break}return n.next=4,N.PublicApi.dashboard({uuid:e});case 4:a=n.sent,a=f({},a,{id:e,ordered_cards:a.ordered_cards.map(function(t){return f({},t,{dashboard_id:e})})}),n.next=31;break;case 8:if("embed"!==u){n.next=15;break}return n.next=11,N.EmbedApi.dashboard({token:e});case 11:a=n.sent,a=f({},a,{id:e,ordered_cards:a.ordered_cards.map(function(t){return f({},t,{dashboard_id:e})})}),n.next=31;break;case 15:if("transient"!==u){n.next=23;break}return l=e.split("/").slice(3).join("/"),n.next=19,N.AutoApi.dashboard({subPath:l});case 19:a=n.sent,a=f({},a,{id:e,ordered_cards:a.ordered_cards.map(function(t){return f({},t,{dashboard_id:e})})}),n.next=31;break;case 23:if("inline"!==u){n.next=28;break}a=f({name:"",parameters:[]},o=e,{ordered_cards:o.ordered_cards.map(function(e){return f({visualization_settings:{},parameter_mappings:[]},e,{id:v.default.uniqueId("dashcard"),card:ke(e.card),series:(e.series||[]).map(function(e){return ke(e)})})})}),e=a.id=String(e),n.next=31;break;case 28:return n.next=30,N.DashboardApi.get({dashId:e});case 30:a=n.sent;case 31:if(s={},!a.parameters){n.next=52;break}for(c=!0,d=!1,p=void 0,n.prev=36,m=a.parameters[Symbol.iterator]();!(c=(h=m.next()).done);c=!0)y=h.value,t&&null!=t[y.slug]?s[y.id]=t[y.slug]:r&&null!=y.default&&(s[y.id]=y.default);n.next=44;break;case 40:n.prev=40,n.t0=n.catch(36),d=!0,p=n.t0;case 44:n.prev=44,n.prev=45,!c&&m.return&&m.return();case 47:if(n.prev=47,!d){n.next=50;break}throw p;case 50:return n.finish(47);case 51:return n.finish(44);case 52:return"normal"!==u&&"transient"!==u||i(Qe(a.ordered_cards)),a.ordered_cards.forEach(function(e){e.visualization_settings.virtual_card&&(e.card=Object.assign(e.card||{},e.visualization_settings.virtual_card))}),a.param_values&&i((0,P.addParamValues)(a.param_values)),a.param_fields&&i((0,P.addFields)(a.param_fields)),n.abrupt("return",f({},(0,_.normalize)(a,B),{dashboardId:e,parameterValues:s}));case 57:case"end":return n.stop()}var o},n,this,[[36,40,44,52],[45,,47,51]])})),function(e,t){return n.apply(this,arguments)}}),Te="metabase/dashboard/UPDATE_ENABLE_EMBEDDING",Pe=(t.updateEnableEmbedding=(0,y.createAction)(Te,function(e,t){var n=e.id;return N.DashboardApi.update({id:n,enable_embedding:t})}),"metabase/dashboard/UPDATE_EMBEDDING_PARAMS");t.updateEmbeddingParams=(0,y.createAction)(Pe,function(e,t){var n=e.id;return N.DashboardApi.update({id:n,embedding_params:t})}),t.onUpdateDashCardVisualizationSettings=(0,y.createAction)(Z,function(e,t){return{id:e,settings:t}}),t.onReplaceAllDashCardVisualizationSettings=(0,y.createAction)(J,function(e,t){return{id:e,settings:t}}),t.setEditingParameter=(0,y.createAction)(oe),t.setParameterMapping=(0,y.createThunkAction)(se,function(e,t,n,r){return function(a,i){var o=i().dashboard.dashcards[t].parameter_mappings||[];o=o.filter(function(t){return t.card_id!==n||t.parameter_id!==e}),r&&(o=o.concat({parameter_id:e,card_id:n,target:r})),a(ve({id:t,attributes:{parameter_mappings:o}}))}});function je(e,t,n,r){var a=(0,M.getDashboard)(t()),i=v.default.findIndex(a&&a.parameters,function(e){return e.id===n});if(i>=0){var o=(0,h.assoc)(a.parameters,i,r(a.parameters[i]));e(he({id:a.id,attributes:{parameters:o}}))}}function Ne(e,t,n){var r=(0,M.getDashboard)(t());if(r){var a=n(r.parameters||[]);e(he({id:r.id,attributes:{parameters:a}}))}}t.addParameter=(0,y.createThunkAction)(ue,function(e){return function(t,n){var r=void 0;return Ne(t,n,function(t){return r=(0,S.createParameter)(e,t),t.concat(r)}),r}}),t.removeParameter=(0,y.createThunkAction)(le,function(e){return function(t,n){return Ne(t,n,function(t){return t.filter(function(t){return t.id!==e})}),{id:e}}}),t.setParameterName=(0,y.createThunkAction)(ce,function(e,t){return function(n,r){return je(n,r,e,function(e){return(0,S.setParameterName)(e,t)}),{id:e,name:t}}}),t.setParameterDefaultValue=(0,y.createThunkAction)(pe,function(e,t){return function(n,r){return je(n,r,e,function(e){return(0,S.setParameterDefaultValue)(e,t)}),{id:e,defaultValue:t}}}),t.setParameterIndex=(0,y.createThunkAction)(fe,function(e,t){return function(n,r){var a=(0,M.getDashboard)(r()),i=v.default.findIndex(a.parameters,function(t){return t.id===e});if(i>=0){var o=a.parameters.slice();o.splice(t,0,o.splice(i,1)[0]),n(he({id:a.id,attributes:{parameters:o}}))}return{id:e,index:t}}}),t.setParameterValue=(0,y.createThunkAction)(de,function(e,t){return function(n,r){return{id:e,value:t}}});var Me,Re,De=t.CREATE_PUBLIC_LINK="metabase/dashboard/CREATE_PUBLIC_LINK",Le=(t.createPublicLink=(0,y.createAction)(De,(Me=z(regeneratorRuntime.mark(function e(t){var n,r,a=t.id;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.DashboardApi.createPublicLink({id:a});case 2:return n=e.sent,r=n.uuid,e.abrupt("return",{id:a,uuid:r});case 5:case"end":return e.stop()}},e,void 0)})),function(e){return Me.apply(this,arguments)})),t.DELETE_PUBLIC_LINK="metabase/dashboard/DELETE_PUBLIC_LINK"),Ie=(t.deletePublicLink=(0,y.createAction)(Le,(Re=z(regeneratorRuntime.mark(function e(t){var n=t.id;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.DashboardApi.deletePublicLink({id:n});case 2:return e.abrupt("return",{id:n});case 3:case"end":return e.stop()}},e,void 0)})),function(e){return Re.apply(this,arguments)})),t.navigateToNewCardFromDashboard=(0,y.createThunkAction)("metabase/dashboard/NAVIGATE_TO_NEW_CARD",function(e){var t=e.nextCard,n=e.previousCard,r=e.dashcard;return function(e,a){var i=(0,R.getMetadata)(a()),o=a().dashboard,u=o.dashboardId,l=o.dashboards,s=o.parameterValues,c=l[u],d=!v.default.isEqual(n.dataset_query,t.dataset_query),p=(0,D.getCardAfterVisualizationClick)(t,n),m=f({},p,{display:p.display||n.display,visualization_settings:p.visualization_settings||n.visualization_settings}),h=(0,C.questionUrlWithParameters)(m,i,c.parameters,s,r&&r.parameter_mappings,d);(0,g.open)(h,{blankOnMetaKey:!0,openInSameWindow:function(t){return e((0,j.push)(t))}})}}),(0,y.handleActions)((I(r={},U,{next:function(e){return null}}),I(r,G,{next:function(e,t){return t.payload.dashboardId}}),r),null)),Fe=(0,y.handleActions)((I(a={},U,{next:function(e){return!1}}),I(a,V,{next:function(e,t){return t.payload}}),a),!1);function ze(e,t){return t.parameters&&e.embedding_params?Object.keys(e.embedding_params).reduce(function(n,r){var a=v.default.find(e.parameters,function(e){return e.slug===r});if(a){var i=a&&a.id,o=v.default.findWhere(t.parameters,{id:i});o&&(n[o.slug]=e.embedding_params[r])}return n},{}):e.embedding_params}var qe=(0,y.handleActions)((I(i={},G,{next:function(e,t){var n=t.payload;return f({},e,n.entities.dashboard)}}),I(i,W,{next:function(e,t){var n,r,a=t.payload,i=a.id,o=a.attributes;return f({},e,I({},i,(n=e[i],f({},n,r=o,{embedding_params:ze(n,r),isDirty:!0}))))}}),I(i,Q,function(e,t){var n=t.payload;return f({},e,I({},n.dashboard_id,f({},e[n.dashboard_id],{ordered_cards:[].concat(F(e[n.dashboard_id].ordered_cards),[n.id])})))}),I(i,De,{next:function(e,t){var n=t.payload;return(0,h.assocIn)(e,[n.id,"public_uuid"],n.uuid)}}),I(i,Le,{next:function(e,t){var n=t.payload;return(0,h.assocIn)(e,[n.id,"public_uuid"],null)}}),I(i,Pe,{next:function(e,t){var n=t.payload;return(0,h.assocIn)(e,[n.id,"embedding_params"],n.embedding_params)}}),I(i,Te,{next:function(e,t){var n=t.payload;return(0,h.assocIn)(e,[n.id,"enable_embedding"],n.enable_embedding)}}),i),{}),Be=(0,y.handleActions)((I(o={},G,{next:function(e,t){var n=t.payload;return f({},e,n.entities.dashcard)}}),I(o,K,{next:function(e,t){var n=t.payload,r=n.id,a=n.attributes;return f({},e,I({},r,f({},e[r],a,{isDirty:!0})))}}),I(o,Z,{next:function(e,t){var n=t.payload,r=n.id,a=n.settings;return(0,h.chain)(e).updateIn([r,"visualization_settings"],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f({},e,a)}).assocIn([r,"isDirty"],!0).value()}}),I(o,J,{next:function(e,t){var n=t.payload,r=n.id,a=n.settings;return(0,h.chain)(e).assocIn([r,"visualization_settings"],a).assocIn([r,"isDirty"],!0).value()}}),I(o,Q,function(e,t){var n=t.payload;return f({},e,I({},n.id,f({},n,{isAdded:!0,justAdded:!0})))}),I(o,Y,function(e,t){var n=t.payload.dashcardId;return f({},e,I({},n,f({},e[n],{isRemoved:!0})))}),I(o,ie,function(e,t){var n=t.payload;return f({},e,I({},n,f({},e[n],{justAdded:!1})))}),o),{}),Ue=(0,y.handleActions)((I(u={},oe,{next:function(e,t){return t.payload}}),I(u,ue,{next:function(e,t){return t.payload.id}}),u),null),Ve=(0,y.handleActions)((I(l={},U,{next:function(e){return{}}}),I(l,ee,{next:function(e,t){var n=t.payload,r=n.dashcard_id,a=n.card_id,i=n.result;return(0,h.assocIn)(e,[r,a],i)}}),I(l,ae,{next:function(e,t){var n=t.payload,r=n.cardId,a=n.dashcardId;return(0,h.assocIn)(e,[a,r])}}),I(l,X,{next:function(e,t){var n=t.payload,r=n.oldDashcardId,a=n.newDashcardId;return(0,h.chain)(e).assoc(a,e[r]).dissoc(r).value()}}),l),{}),Ge=(0,y.handleActions)(I({},re,{next:function(e,t){var n=t.payload,r=n.id,a=n.result;return f({},e,I({},r,a))}}),{}),He=(0,y.handleActions)((I(s={},U,{next:function(){return{}}}),I(s,de,{next:function(e,t){var n=t.payload,r=n.id,a=n.value;return(0,h.assoc)(e,r,a)}}),I(s,le,{next:function(e,t){var n=t.payload.id;return(0,h.dissoc)(e,n)}}),I(s,G,{next:function(e,t){return t.payload.parameterValues}}),s),{}),We=(0,y.handleActions)((I(c={},G,{next:function(e,t){var n=t.payload;return f({},e,{dashcardIds:Object.values(n.entities.dashcard||{}).filter(function(e){return!Ee(e)}).map(function(e){return e.id})})}}),I(c,$,{next:function(e){return f({},e,{loadingIds:e.dashcardIds,startTime:e.dashcardIds.length>0&&"object"===("undefined"==typeof performance?"undefined":p(performance))?performance.now():null})}}),I(c,ee,{next:function(e,t){var n=t.payload.dashcard_id,r=e.loadingIds.filter(function(e){return e!==n});return f({},e,{loadingIds:r},0===r.length?{startTime:null}:{})}}),I(c,ne,{next:function(e,t){var n=t.payload.dashcard_id,r=e.loadingIds.filter(function(e){return e!==n});return f({},e,{loadingIds:r},0===r.length?{startTime:null}:{})}}),c),{dashcardIds:[],loadingIds:[],startTime:null}),Qe=function(e){return function(t,n){var r=(0,R.getMetadata)(n()),a=e.filter(function(e){return!Ee(e)&&e.card.dataset_query}).flatMap(function(e){return[e.card].concat(e.series||[])}).map(function(e){return new E.default(e,r).query()});return t((0,P.loadMetadataForQueries)(a))}};t.default=(0,y.combineReducers)({dashboardId:Ie,isEditing:Fe,dashboards:qe,dashcards:Be,editingParameterId:Ue,dashcardData:Ve,slowCards:Ge,parameterValues:He,loadingDashCards:We})},169:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.isFitViewportMode=function(){var e=document.getElementById("root");if(e&&e.firstChild)return e.firstChild.classList.contains("spread");return!1};var i,o=n(0),u=(i=o)&&i.__esModule?i:{default:i};t.default=function(e){var t,n;return n=t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.default.Component),a(n,[{key:"componentDidMount",value:function(){var e=document.getElementById("root");e&&e.firstChild&&e.firstChild.classList.add("spread","flex","flex-column")}},{key:"componentWillUnmount",value:function(){var e=document.getElementById("root");e&&e.firstChild&&e.firstChild.classList.remove("spread","flex","flex-column")}},{key:"render",value:function(){return u.default.createElement(e,r({},this.props,{fitClassNames:"relative flex flex-full"}))}}]),n}(),t.displayName="FitViewport",n}},17:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.TaskApi=t.I18NApi=t.GeoJSONApi=t.UtilApi=t.UserApi=t.SetupApi=t.GettingStartedApi=t.PermissionsApi=t.SettingsApi=t.SessionApi=t.RevisionsApi=t.RevisionApi=t.MetricApi=t.SegmentApi=t.AlertApi=t.PulseApi=t.MetabaseApi=t.LdapApi=t.SlackApi=t.EmailApi=t.AutoApi=t.EmbedApi=t.PublicApi=t.CollectionsApi=t.DashboardApi=t.CardApi=t.ActivityApi=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.setPublicQuestionEndpoints=function(e){h("/api/public/card/:uuid",{uuid:e})},t.setPublicDashboardEndpoints=function(e){h("/api/public/dashboard/:uuid",{uuid:e})},t.setEmbedQuestionEndpoints=function(e){o.IS_EMBED_PREVIEW||h("/api/embed/card/:token",{token:e})},t.setEmbedDashboardEndpoints=function(e){o.IS_EMBED_PREVIEW||h("/api/embed/dashboard/:token",{token:e})},t.setFieldEndpoints=h;var a,i=n(64),o=n(226),u=n(485),l=(a=u)&&a.__esModule?a:{default:a};function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c,d,f=o.IS_EMBED_PREVIEW?"/api/preview_embed":"/api/embed",p=(t.ActivityApi={list:(0,i.GET)("/api/activity"),recent_views:(0,i.GET)("/api/activity/recent_views")},t.CardApi={list:(0,i.GET)("/api/card",function(e,t){var n=t.data;return e.filter(function(e){return!n.q||e.name.toLowerCase().indexOf(n.q.toLowerCase())>=0})}),create:(0,i.POST)("/api/card"),get:(0,i.GET)("/api/card/:cardId"),update:(0,i.PUT)("/api/card/:id"),delete:(0,i.DELETE)("/api/card/:cardId"),query:(0,i.POST)("/api/card/:cardId/query"),favorite:(0,i.POST)("/api/card/:cardId/favorite"),unfavorite:(0,i.DELETE)("/api/card/:cardId/favorite"),listPublic:(0,i.GET)("/api/card/public"),listEmbeddable:(0,i.GET)("/api/card/embeddable"),createPublicLink:(0,i.POST)("/api/card/:id/public_link"),deletePublicLink:(0,i.DELETE)("/api/card/:id/public_link"),related:(0,i.GET)("/api/card/:cardId/related"),adHocRelated:(0,i.POST)("/api/card/related")},t.DashboardApi={list:(0,i.GET)("/api/dashboard"),create:(0,i.POST)("/api/dashboard"),save:(0,i.POST)("/api/dashboard/save"),get:(0,i.GET)("/api/dashboard/:dashId"),update:(0,i.PUT)("/api/dashboard/:id"),delete:(0,i.DELETE)("/api/dashboard/:dashId"),addcard:(0,i.POST)("/api/dashboard/:dashId/cards"),removecard:(0,i.DELETE)("/api/dashboard/:dashId/cards"),reposition_cards:(0,i.PUT)("/api/dashboard/:dashId/cards"),favorite:(0,i.POST)("/api/dashboard/:dashId/favorite"),unfavorite:(0,i.DELETE)("/api/dashboard/:dashId/favorite"),listPublic:(0,i.GET)("/api/dashboard/public"),listEmbeddable:(0,i.GET)("/api/dashboard/embeddable"),createPublicLink:(0,i.POST)("/api/dashboard/:id/public_link"),deletePublicLink:(0,i.DELETE)("/api/dashboard/:id/public_link")},t.CollectionsApi={list:(0,i.GET)("/api/collection"),create:(0,i.POST)("/api/collection"),get:(0,i.GET)("/api/collection/:id"),getRoot:(0,i.GET)("/api/collection/root"),update:(0,i.PUT)("/api/collection/:id"),graph:(0,i.GET)("/api/collection/graph"),updateGraph:(0,i.PUT)("/api/collection/graph")},t.PublicApi={card:(0,i.GET)("/api/public/card/:uuid"),cardQuery:(0,i.GET)("/api/public/card/:uuid/query"),dashboard:(0,i.GET)("/api/public/dashboard/:uuid"),dashboardCardQuery:(0,i.GET)("/api/public/dashboard/:uuid/card/:cardId")},t.EmbedApi={card:(0,i.GET)(f+"/card/:token"),cardQuery:(0,i.GET)(f+"/card/:token/query"),dashboard:(0,i.GET)(f+"/dashboard/:token"),dashboardCardQuery:(0,i.GET)(f+"/dashboard/:token/dashcard/:dashcardId/card/:cardId")},t.AutoApi={dashboard:(0,i.GET)("/api/automagic-dashboards/:subPath",{raw:{subPath:!0}}),db_candidates:(0,i.GET)("/api/automagic-dashboards/database/:id/candidates")},t.EmailApi={updateSettings:(0,i.PUT)("/api/email"),sendTest:(0,i.POST)("/api/email/test"),clear:(0,i.DELETE)("/api/email")},t.SlackApi={updateSettings:(0,i.PUT)("/api/slack/settings")},t.LdapApi={updateSettings:(0,i.PUT)("/api/ldap/settings")},t.MetabaseApi={db_list:(0,i.GET)("/api/database"),db_create:(0,i.POST)("/api/database"),db_validate:(0,i.POST)("/api/database/validate"),db_add_sample_dataset:(0,i.POST)("/api/database/sample_dataset"),db_get:(0,i.GET)("/api/database/:dbId"),db_update:(0,i.PUT)("/api/database/:id"),db_delete:(0,i.DELETE)("/api/database/:dbId"),db_metadata:(0,i.GET)("/api/database/:dbId/metadata"),db_schemas:(0,i.GET)("/api/database/:dbId/schemas"),db_schema_tables:(0,i.GET)("/api/database/:dbId/schema/:schemaName"),db_fields:(0,i.GET)("/api/database/:dbId/fields"),db_idfields:(0,i.GET)("/api/database/:dbId/idfields"),db_autocomplete_suggestions:(0,i.GET)("/api/database/:dbId/autocomplete_suggestions?prefix=:prefix"),db_sync_schema:(0,i.POST)("/api/database/:dbId/sync_schema"),db_rescan_values:(0,i.POST)("/api/database/:dbId/rescan_values"),db_discard_values:(0,i.POST)("/api/database/:dbId/discard_values"),table_list:(0,i.GET)("/api/table"),table_update:(0,i.PUT)("/api/table/:id"),table_fks:(0,i.GET)("/api/table/:tableId/fks"),table_query_metadata:(0,i.GET)("/api/table/:tableId/query_metadata",(c=regeneratorRuntime.mark(function e(t){var n,a,i,o,u,c,d,f,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.db||"googleanalytics"!==t.db.engine){e.next=7;break}return e.next=3,(0,l.default)();case 3:i=e.sent,t.fields=t.fields.map(function(e){return r({},e,i.fields[e.name])}),(n=t.metrics).push.apply(n,s(i.metrics.map(function(e){return r({},e,{table_id:t.id,googleAnalyics:!0})}))),(a=t.segments).push.apply(a,s(i.segments.map(function(e){return r({},e,{table_id:t.id,googleAnalyics:!0})})));case 7:if(!t||!t.fields){e.next=27;break}for(o=!0,u=!1,c=void 0,e.prev=11,d=t.fields[Symbol.iterator]();!(o=(f=d.next()).done);o=!0)(p=f.value).dimension_options&&(p.dimension_options=p.dimension_options.map(function(e){return t.dimension_options[e]})),p.default_dimension_option&&(p.default_dimension_option=t.dimension_options[p.default_dimension_option]);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),u=!0,c=e.t0;case 19:e.prev=19,e.prev=20,!o&&d.return&&d.return();case 22:if(e.prev=22,!u){e.next=25;break}throw c;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.abrupt("return",t);case 28:case"end":return e.stop()}},e,void 0,[[11,15,19,27],[20,,22,26]])}),d=function(){var e=c.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(e){return d.apply(this,arguments)})),table_rescan_values:(0,i.POST)("/api/table/:tableId/rescan_values"),table_discard_values:(0,i.POST)("/api/table/:tableId/discard_values"),field_get:(0,i.GET)("/api/field/:fieldId"),field_values:(0,i.GET)("/api/field/:fieldId/values"),field_values_update:(0,i.POST)("/api/field/:fieldId/values"),field_update:(0,i.PUT)("/api/field/:id"),field_dimension_update:(0,i.POST)("/api/field/:fieldId/dimension"),field_dimension_delete:(0,i.DELETE)("/api/field/:fieldId/dimension"),field_rescan_values:(0,i.POST)("/api/field/:fieldId/rescan_values"),field_discard_values:(0,i.POST)("/api/field/:fieldId/discard_values"),field_search:(0,i.GET)("/api/field/:fieldId/search/:searchFieldId"),field_remapping:(0,i.GET)("/api/field/:fieldId/remapping/:remappedFieldId"),dataset:(0,i.POST)("/api/dataset"),dataset_duration:(0,i.POST)("/api/dataset/duration"),native:(0,i.POST)("/api/dataset/native"),datasetEndpoint:(0,i.POST)("/api/:endpoint",{raw:{endpoint:!0}})});t.PulseApi={list:(0,i.GET)("/api/pulse"),create:(0,i.POST)("/api/pulse"),get:(0,i.GET)("/api/pulse/:pulseId"),update:(0,i.PUT)("/api/pulse/:id"),delete:(0,i.DELETE)("/api/pulse/:pulseId"),test:(0,i.POST)("/api/pulse/test"),form_input:(0,i.GET)("/api/pulse/form_input"),preview_card:(0,i.GET)("/api/pulse/preview_card_info/:id")},t.AlertApi={list:(0,i.GET)("/api/alert"),list_for_question:(0,i.GET)("/api/alert/question/:questionId"),create:(0,i.POST)("/api/alert"),update:(0,i.PUT)("/api/alert/:id"),delete:(0,i.DELETE)("/api/alert/:id"),unsubscribe:(0,i.PUT)("/api/alert/:id/unsubscribe")},t.SegmentApi={list:(0,i.GET)("/api/segment"),create:(0,i.POST)("/api/segment"),get:(0,i.GET)("/api/segment/:segmentId"),update:(0,i.PUT)("/api/segment/:id"),delete:(0,i.DELETE)("/api/segment/:segmentId")},t.MetricApi={list:(0,i.GET)("/api/metric"),create:(0,i.POST)("/api/metric"),get:(0,i.GET)("/api/metric/:metricId"),update:(0,i.PUT)("/api/metric/:id"),update_important_fields:(0,i.PUT)("/api/metric/:metricId/important_fields"),delete:(0,i.DELETE)("/api/metric/:metricId")},t.RevisionApi={list:(0,i.GET)("/api/revision"),revert:(0,i.POST)("/api/revision/revert")},t.RevisionsApi={get:(0,i.GET)("/api/:entity/:id/revisions")},t.SessionApi={create:(0,i.POST)("/api/session"),createWithGoogleAuth:(0,i.POST)("/api/session/google_auth"),delete:(0,i.DELETE)("/api/session"),properties:(0,i.GET)("/api/session/properties"),forgot_password:(0,i.POST)("/api/session/forgot_password"),reset_password:(0,i.POST)("/api/session/reset_password"),password_reset_token_valid:(0,i.GET)("/api/session/password_reset_token_valid")},t.SettingsApi={list:(0,i.GET)("/api/setting"),put:(0,i.PUT)("/api/setting/:key"),putAll:(0,i.PUT)("/api/setting")},t.PermissionsApi={groups:(0,i.GET)("/api/permissions/group"),groupDetails:(0,i.GET)("/api/permissions/group/:id"),graph:(0,i.GET)("/api/permissions/graph"),updateGraph:(0,i.PUT)("/api/permissions/graph"),createGroup:(0,i.POST)("/api/permissions/group"),memberships:(0,i.GET)("/api/permissions/membership"),createMembership:(0,i.POST)("/api/permissions/membership"),deleteMembership:(0,i.DELETE)("/api/permissions/membership/:id"),updateGroup:(0,i.PUT)("/api/permissions/group/:id"),deleteGroup:(0,i.DELETE)("/api/permissions/group/:id")},t.GettingStartedApi={get:(0,i.GET)("/api/getting_started")},t.SetupApi={create:(0,i.POST)("/api/setup"),validate_db:(0,i.POST)("/api/setup/validate"),admin_checklist:(0,i.GET)("/api/setup/admin_checklist")},t.UserApi={create:(0,i.POST)("/api/user"),list:(0,i.GET)("/api/user"),current:(0,i.GET)("/api/user/current"),update:(0,i.PUT)("/api/user/:id"),update_password:(0,i.PUT)("/api/user/:id/password"),update_qbnewb:(0,i.PUT)("/api/user/:id/qbnewb"),delete:(0,i.DELETE)("/api/user/:userId"),reactivate:(0,i.PUT)("/api/user/:userId/reactivate"),send_invite:(0,i.POST)("/api/user/:id/send_invite")},t.UtilApi={password_check:(0,i.POST)("/api/util/password_check"),random_token:(0,i.GET)("/api/util/random_token"),logs:(0,i.GET)("/api/util/logs"),bug_report_details:(0,i.GET)("/api/util/bug_report_details")},t.GeoJSONApi={get:(0,i.GET)("/api/geojson/:id")},t.I18NApi={locale:(0,i.GET)("/app/locales/:locale.json")},t.TaskApi={get:(0,i.GET)("/api/task"),getJobsInfo:(0,i.GET)("/api/task/info")};function m(e,t){return function(n,a){return(0,i.GET)(e)(r({},t,n),a)}}function h(e,t){p.field_values=m(e+"/field/:fieldId/values",t),p.field_search=m(e+"/field/:fieldId/search/:searchFieldId",t),p.field_remapping=m(e+"/field/:fieldId/remapping/:remappedFieldId",t)}e.services=t}).call(t,n(89))},170:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=b(s),d=b(n(2)),f=b(n(4)),p=b(n(3)),m=n(7),h=b(n(5)),v=b(n(66)),y=b(n(304)),g=n(257);function b(e){return e&&e.__esModule?e:{default:e}}var _=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));i.call(r);var a=void 0;return void 0!==e.initiallyOpenSection&&(a=e.initiallyOpenSection),void 0===a&&-1===(a=p.default.findIndex(e.sections,function(e,t){return r.sectionIsSelected(e,t)}))&&(a=void 0),void 0===a&&(a=0),r.state={openSection:a,searchText:""},r._cache=new g.CellMeasurerCache({fixedWidth:!0,minHeight:10}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),l(t,[{key:"componentDidMount",value:function(){var e=this;this._forceUpdateList(),setTimeout(function(){var t=e._initialSelectedRowIndex;!e._list||null==t||t>=e._startIndex&&t<=e._stopIndex||e._list.scrollToRow(e._initialSelectedRowIndex)},0)}},{key:"componentDidUpdate",value:function(e,t){this.state.openSection===t.openSection&&this.state.searchText===t.searchText||this._clearRowHeightCache()}},{key:"componentWillUnmount",value:function(){null!=this._forceUpdateTimeout&&(clearTimeout(this._forceUpdateTimeout),this._forceUpdateTimeout=null)}},{key:"_clearRowHeightCache",value:function(){var e=this;this._cache.clearAll(),this._forceUpdateTimeout=setTimeout(function(){e._forceUpdateTimeout=null,e._forceUpdateList()})}},{key:"_forceUpdateList",value:function(){this._list&&(this._list.invalidateCellSizeAfterRender({columnIndex:0,rowIndex:0}),this._list.forceUpdateGrid(),this.forceUpdate())}},{key:"getOpenSection",value:function(){if(1===this.props.sections.length)return 0;var e=this.state.openSection;if(void 0===e){var t=!0,n=!1,r=void 0;try{for(var a,i=this.props.sections.entries()[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=u(a.value,2),l=o[0],s=o[1];if(this.sectionIsSelected(s,l)){e=l;break}}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}return e}},{key:"sectionIsSelected",value:function(e,t){for(var n=this,r=this.props.sections,a=null,i=0;i<r.length;i++)if(p.default.some(r[i].items,function(e){return n.props.itemIsSelected(e)})){a=i;break}return a===t}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.style,a=t.className,i=t.searchable,l=t.searchProp,s=t.searchCaseInsensitive,d=t.searchFuzzy,f=t.sections,p=t.alwaysTogglable,m=t.alwaysExpanded,h=t.hideSingleSectionTitle,v=this.getOpenSection(),y=function(e){return m||v===e},b=function(e){return p||f.length>1},_=this.state.searchText,w=function(){return!0};_&&(w=function(e){var t=String(e[l]||"");return s&&(t=t.toLowerCase(),_=_.toLowerCase()),d?t.indexOf(_)>=0:t.startsWith(_)});var O=!1,S=[],C=!0,x=!1,k=void 0;try{for(var A,T=f.entries()[Symbol.iterator]();!(C=(A=T.next()).done);C=!0){var P=u(A.value,2),j=P[0],N=P[1],M=j===f.length-1;if(N.name&&(!h||f.length>1||p)?S.push({type:"header",section:N,sectionIndex:j,isLastSection:M}):S.push({type:"header-hidden",section:N,sectionIndex:j,isLastSection:M}),i&&("function"!=typeof i||i(f[j]))&&y(j)&&N.items&&N.items.length>0&&!N.loading&&(m?O=!0:S.push({type:"search",section:N,sectionIndex:j,isLastSection:M})),y(j)&&N.items&&N.items.length>0&&!N.loading){var R=!0,D=!1,L=void 0;try{for(var I,F=N.items.entries()[Symbol.iterator]();!(R=(I=F.next()).done);R=!0){var z=u(I.value,2),q=z[0],B=z[1];if(w(B)){var U=q===N.items.length-1;this.props.itemIsSelected(B)&&(this._initialSelectedRowIndex=S.length),S.push({type:"item",section:N,sectionIndex:j,isLastSection:M,item:B,itemIndex:q,isLastItem:U})}}}catch(e){D=!0,L=e}finally{try{!R&&F.return&&F.return()}finally{if(D)throw L}}}y(j)&&N.loading&&S.push({type:"loading",section:N,sectionIndex:j,isLastSection:M})}}catch(e){x=!0,k=e}finally{try{!C&&T.return&&T.return()}finally{if(x)throw k}}if(O&&S.unshift({type:"search",section:{},sectionIndex:0,isLastSection:!1}),this.props.maxHeight===1/0)return c.default.createElement("div",{className:a,style:o({width:this.props.width},r)},S.map(function(t){return c.default.createElement(E,o({},e.props,{row:t,sections:f,onChange:e.handleChange,searchText:e.state.searchText,onChangeSearchText:e.handleChangeSearchText,sectionIsExpanded:y,sectionIsTogglable:b,toggleSection:e.toggleSection}))}));var V=this.props.maxHeight>0&&this.props.maxHeight<1/0?this.props.maxHeight:window.innerHeight,G=this.props.width,H=Math.min(V,S.reduce(function(t,n,r){return t+e._cache.rowHeight({index:r})},0));return c.default.createElement(g.List,{id:n,ref:function(t){return e._list=t},className:a,style:o({},{overflowY:"auto"},r),width:G,height:H,rowCount:S.length,deferredMeasurementCache:this._cache,rowHeight:this._cache.rowHeight,overscanRowCount:100,scrollToAlignment:"start",rowRenderer:function(t){var n=t.key,r=t.index,a=t.parent,i=t.style;return c.default.createElement(g.CellMeasurer,{cache:e._cache,columnIndex:0,key:n,rowIndex:r,parent:a},function(t){t.measure;return c.default.createElement(E,o({},e.props,{style:i,row:S[r],sections:f,onChange:e.handleChange,searchText:e.state.searchText,onChangeSearchText:e.handleChangeSearchText,sectionIsExpanded:y,sectionIsTogglable:b,toggleSection:e.toggleSection}))})},onRowsRendered:function(t){var n=t.startIndex,r=t.stopIndex;e._startIndex=n,e._stopIndex=r}})}}]),t}(),r.propTypes={style:d.default.object,className:d.default.string,id:d.default.string,width:d.default.number,maxHeight:d.default.number,sections:d.default.array.isRequired,initiallyOpenSection:d.default.number,openSection:d.default.number,onChange:d.default.func,onChangeSection:d.default.func,renderSectionIcon:d.default.func,itemIsSelected:d.default.func,itemIsClickable:d.default.func,renderItemName:d.default.func,renderItemDescription:d.default.func,renderItemIcon:d.default.func,renderItemExtra:d.default.func,getItemClassName:d.default.func,alwaysTogglable:d.default.bool,alwaysExpanded:d.default.bool,hideSingleSectionTitle:d.default.bool,showItemArrows:d.default.bool,searchable:d.default.oneOfType([d.default.bool,d.default.func]),searchProp:d.default.string,searchCaseInsensitive:d.default.bool,searchFuzzy:d.default.bool,searchPlaceholder:d.default.string},r.defaultProps={style:{},width:300,searchable:function(e){return e.items&&e.items.length>10},searchProp:"name",searchCaseInsensitive:!0,searchFuzzy:!0,alwaysTogglable:!1,alwaysExpanded:!1,hideSingleSectionTitle:!1,renderSectionIcon:function(e){return e.icon&&c.default.createElement(h.default,{name:e.icon,size:18})},itemIsClickable:function(e){return!0},itemIsSelected:function(e){return!1},renderItemName:function(e){return e.name},renderItemDescription:function(e){return e.description},renderItemExtra:function(e){return null},renderItemIcon:function(e){return e.icon&&c.default.createElement(h.default,{name:e.icon,size:18})},getItemClassName:function(e){return e.className}},i=function(){var e=this;this.toggleSection=function(t){var n=e.props,r=n.sections,a=n.onChangeSection;a&&!1===a(r[t],t)||(e.getOpenSection()===t&&(t=null),e.setState({openSection:t}))},this.handleChange=function(t){e.props.onChange&&e.props.onChange(t)},this.handleChangeSearchText=function(t){e.setState({searchText:t})}},a);_.displayName="AccordionList",t.default=_;var E=function(e){var t=e.style,n=e.sections,r=e.row,a=e.onChange,i=e.itemIsSelected,o=e.itemIsClickable,u=e.sectionIsExpanded,l=e.sectionIsTogglable,s=e.alwaysExpanded,d=e.toggleSection,p=e.renderSectionIcon,g=e.renderItemName,b=e.renderItemDescription,_=e.renderItemIcon,E=e.renderItemExtra,w=e.searchText,O=e.onChangeSearchText,S=e.searchPlaceholder,C=e.showItemArrows,x=e.getItemClassName,k=r.type,A=r.section,T=r.sectionIndex,P=r.item,j=r.itemIndex,N=r.isLastItem,M=void 0;if("header"===k)if(s)M=c.default.createElement("div",{className:"pt2 mb1 mx2 h5 text-uppercase text-bold",style:{color:m.color}},A.name);else{var R=p(A,T),D=A.name;M=c.default.createElement("div",{className:(0,f.default)("List-section-header mx2 py2 flex align-center hover-parent hover--opacity",{"cursor-pointer":l(T),"text-brand":u(T)}),onClick:l(T)&&function(){return d(T)}},R&&c.default.createElement("span",{className:"List-section-icon mr1 flex align-center"},R),D&&c.default.createElement("h3",{className:"List-section-title text-wrap"},D),n.length>1&&A.items&&A.items.length>0&&c.default.createElement("span",{className:"flex-align-right hover-child"},c.default.createElement(h.default,{name:u(T)?"chevronup":"chevrondown",size:12})))}else if("header-hidden"===k)M=c.default.createElement("div",{className:"my1"});else if("loading"===k)M=c.default.createElement("div",{className:"m1 flex layout-centered"},c.default.createElement(v.default,null));else if("search"===k)M=c.default.createElement(y.default,{className:"bg-white m1",onChange:O,searchText:w,placeholder:S,autoFocus:!0});else if("item"===k){var L=i(P,j),I=o(P,j),F=_(P,j,L),z=g(P,j,L),q=b(P,j,L);M=c.default.createElement("div",{className:(0,f.default)("List-item flex mx1",{"List-item--selected":L,"List-item--disabled":!I,mb1:N},x(P,j))},c.default.createElement("a",{className:(0,f.default)("p1 flex-auto flex align-center",I?"cursor-pointer":"cursor-default"),onClick:I?function(){return a(P)}:null},F&&c.default.createElement("span",{className:"List-item-icon text-default flex align-center"},F),c.default.createElement("div",null,z&&c.default.createElement("h4",{className:"List-item-title ml1 text-wrap"},z),q&&c.default.createElement("p",{className:"List-item-description ml1 text-wrap"},q))),E(P,j,L),C&&c.default.createElement("div",{className:"List-item-arrow flex align-center px1"},c.default.createElement(h.default,{name:"chevronright",size:8})))}return c.default.createElement("div",{style:t,className:(0,f.default)("List-section",A.className,{"List-section--expanded":u(T),"List-section--togglable":l(T)})},M)};E.displayName="AccordionListCell"},171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=O(["Su"],["Su"]),s=O(["Mo"],["Mo"]),c=O(["Tu"],["Tu"]),d=O(["We"],["We"]),f=O(["Th"],["Th"]),p=O(["Fr"],["Fr"]),m=O(["Sa"],["Sa"]),h=n(0),v=w(h),y=w(n(2));n(543);var g=w(n(4)),b=w(n(8)),_=n(1),E=w(n(5));function w(e){return e&&e.__esModule?e:{default:e}}function O(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=(a=r=function(e){function t(e){S(this,t);var n=C(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClickDay=function(e){var t=n.props,r=t.selected,a=t.selectedEnd;t.isRangePicker&&r&&!a?a||(e.isAfter(r)?n.props.onChange(r.format("YYYY-MM-DD"),e.format("YYYY-MM-DD")):n.props.onChange(e.format("YYYY-MM-DD"),r.format("YYYY-MM-DD"))):n.props.onChange(e.format("YYYY-MM-DD"),null)},n.previous=function(){n.setState({current:(0,b.default)(n.state.current).add(-1,"M")})},n.next=function(){n.setState({current:(0,b.default)(n.state.current).add(1,"M")})},n.state={current:(0,b.default)(e.initial||void 0)},n}return x(t,h.Component),u(t,[{key:"componentWillReceiveProps",value:function(e){if(null==e.selected!=(null==this.props.selected)||null==e.selectedEnd!=(null==this.props.selectedEnd)||null!=e.selected&&!(0,b.default)(e.selected).isSame(this.props.selected,"day")||null!=e.selectedEnd&&!(0,b.default)(e.selectedEnd).isSame(this.props.selectedEnd,"day")){var t=!1;null!=e.selected&&null!=e.selectedEnd?t=e.selected.isAfter(this.state.current,"month")&&e.selectedEnd.isBefore(this.state.current,"month"):null!=e.selected&&(t=e.selected.isAfter(this.state.current,"month")||e.selected.isBefore(this.state.current,"month")),t&&this.setState({current:e.selected})}}},{key:"renderMonthHeader",value:function(e,t){return v.default.createElement("div",{className:"Calendar-header flex align-center border-bottom"},"right"!==t&&v.default.createElement("div",{className:"cursor-pointer text-brand-hover",onClick:this.previous},v.default.createElement(E.default,{name:"chevronleft",size:10})),v.default.createElement("span",{className:"flex-full"}),v.default.createElement("h4",null,e.format("MMMM YYYY")),v.default.createElement("span",{className:"flex-full"}),"left"!==t&&v.default.createElement("div",{className:"cursor-pointer text-brand-hover",onClick:this.next},v.default.createElement(E.default,{name:"chevronright",size:10})))}},{key:"renderDayNames",value:function(){var e=[(0,_.t)(l),(0,_.t)(s),(0,_.t)(c),(0,_.t)(d),(0,_.t)(f),(0,_.t)(p),(0,_.t)(m)];return v.default.createElement("div",{className:"Calendar-day-names Calendar-week py1"},e.map(function(e){return v.default.createElement("span",{key:e,className:"Calendar-day-name text-centered"},e)}))}},{key:"renderWeeks",value:function(e){for(var t=[],n=(0,b.default)(e).startOf("month").day("Sunday"),r=!1,a=n.month(),i=0;!r;)t.push(v.default.createElement(A,{key:n.toString(),date:(0,b.default)(n),month:e,onClickDay:this.onClickDay,selected:this.props.selected,selectedEnd:this.props.selectedEnd})),n.add(1,"w"),r=i++>2&&a!==n.month(),a=n.month();return v.default.createElement("div",{className:"Calendar-weeks relative"},t)}},{key:"renderCalender",value:function(e,t){return v.default.createElement("div",{className:(0,g.default)("Calendar",{"Calendar--range":this.props.isRangePicker&&this.props.selected&&this.props.selectedEnd})},this.renderMonthHeader(e,t),this.renderDayNames(e),this.renderWeeks(e))}},{key:"render",value:function(){var e=this.state.current;return this.renderCalender(e)}}]),t}(),r.propTypes={selected:y.default.object,selectedEnd:y.default.object,onChange:y.default.func.isRequired,isRangePicker:y.default.bool},r.defaultProps={isRangePicker:!0},a);k.displayName="Calendar",t.default=k;var A=(o=i=function(e){function t(){return S(this,t),C(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return x(t,h.Component),u(t,[{key:"render",value:function(){for(var e=[],t=this.props,n=t.date,r=t.month,a=t.selected,i=t.selectedEnd,o=0;o<7;o++){var u=(0,g.default)("Calendar-day cursor-pointer text-centered",{"Calendar-day--today":n.isSame(new Date,"day"),"Calendar-day--this-month":n.month()===r.month(),"Calendar-day--selected":a&&n.isSame(a,"day"),"Calendar-day--selected-end":i&&n.isSame(i,"day"),"Calendar-day--week-start":0===o,"Calendar-day--week-end":6===o,"Calendar-day--in-range":!(n.isSame(a,"day")||n.isSame(i,"day"))&&(n.isSame(a,"day")||n.isSame(i,"day")||i&&i.isAfter(n,"day")&&n.isAfter(a,"day"))});e.push(v.default.createElement("span",{key:n.toString(),className:u,onClick:this.props.onClickDay.bind(null,n)},n.date())),n=(0,b.default)(n).add(1,"d")}return v.default.createElement("div",{className:"Calendar-week",key:e[0].toString()},e)}}]),t}(),i.propTypes={selected:y.default.object,selectedEnd:y.default.object,onClickDay:y.default.func.isRequired},o);A.displayName="Week"},176:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRequestUnloaded=t.setRequestError=t.setRequestLoaded=t.setRequestLoading=void 0;var r,a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(18),u=n(11);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=t.setRequestLoading=(0,o.createAction)("metabase/requests/SET_REQUEST_LOADING",function(e){return{statePath:e}}),c=t.setRequestLoaded=(0,o.createAction)("metabase/requests/SET_REQUEST_LOADED",function(e){return{statePath:e}}),d=t.setRequestError=(0,o.createAction)("metabase/requests/SET_REQUEST_ERROR",function(e,t){return{statePath:e,error:t}}),f=t.setRequestUnloaded=(0,o.createAction)("metabase/requests/SET_REQUEST_UNLOADED",function(e){return{statePath:e}}),p=(0,o.handleActions)((l(r={},s,{next:function(e){return i({},e,{loading:!0,loaded:!1,error:null})}}),l(r,c,{next:function(e){return i({},e,{loading:!1,loaded:!0,error:null,fetched:!0})}}),l(r,d,{next:function(e,t){var n=t.payload.error;return i({},e,{loading:!1,loaded:!1,error:n})}}),l(r,f,{next:function(e){return i({},e,{loaded:!1,error:null})}}),r),{loading:!1,loaded:!1,fetched:!1,error:null,_isRequestState:!0});t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return t&&t.payload&&t.payload.statePath&&(e=(0,u.updateIn)(e,t.payload.statePath,function(e){return function e(t,n){if(!t||t._isRequestState)return p(t,n);var r=!0,i=!1,o=void 0;try{for(var l,s=Object.entries(t)[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=a(l.value,2),d=c[0],f=c[1];t=(0,u.assoc)(t,d,e(f,n))}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return t}(e,t)})),e}},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMemoizedSelector=t.formDomOnlyProps=t.updateData=t.fetchData=t.resourceListToMap=t.createAction=t.handleActions=t.compose=t.combineReducers=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(150);Object.defineProperty(t,"combineReducers",{enumerable:!0,get:function(){return a.combineReducers}}),Object.defineProperty(t,"compose",{enumerable:!0,get:function(){return a.compose}});var i=n(127);Object.defineProperty(t,"handleActions",{enumerable:!0,get:function(){return i.handleActions}}),Object.defineProperty(t,"createAction",{enumerable:!0,get:function(){return i.createAction}}),t.createThunkAction=function(e,t){return E(e)(t)},t.momentifyTimestamps=y,t.momentifyObjectsTimestamps=function(e,t){return u.default.mapObject(e,function(e){return y(e,t)})},t.momentifyArraysTimestamps=function(e,t){return u.default.map(e,function(e){return y(e,t)})},t.mergeEntities=_,t.handleEntities=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments[1];return e};return function(r,a){void 0===r&&(r={});var i=(0,l.getIn)(a,["payload","entities",t]);return e.test(a.type)&&i&&(r=_(r,i)),n(r,a)}},t.withAction=E,t.withRequestState=w,t.withCachedDataAndRequestState=function(e,t){return(0,a.compose)((n=e,r=t,function(e){return function(){for(var t=arguments.length,a=Array(t),i=0;i<t;i++)a[i]=arguments[i];return function(t,i){var o=a[a.length-1]||{},s=o.reload,c=o.properties,d=n.apply(void 0,a),f=["requests"].concat(h(r.apply(void 0,a))),p=(0,l.getIn)(i(),d),m=(0,l.getIn)(i(),f)||{},v=m.loading,y=m.loaded,g=c&&p&&u.default.all(c,function(e){return void 0!==p[e]});return!s&&(v||y||g)?p:e.apply(void 0,a)(t,i)}}}),w(t));var n,r},t.withAnalytics=function(e,t,n,a){return function(i){return function(){for(var o=arguments.length,u=Array(o),l=0;l<o;l++)u[l]=arguments[l];return function(o,l){function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("function"==typeof e)return e(u,r({},t),l)}try{var c=s(e),d=s(t,{category:c}),p=s(n,{category:c,action:d}),m=s(a,{category:c,action:d,label:p});f.default.trackEvent(c,d,p,m)}catch(e){console.warn("withAnalytics threw an error:",e)}return i.apply(void 0,u)(o,l)}}}},t.withNormalize=function(e){var t=this;return function(n){return function(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return o=v(regeneratorRuntime.mark(function r(i,o){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=p.normalize,t.next=3,n.apply(void 0,a)(i,o);case 3:return t.t1=t.sent,t.t2=e,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},r,t)})),function(e,t){return o.apply(this,arguments)};var o}}};var o=m(n(8)),u=m(n(3)),l=n(11),s=n(176),c=n(32),d=m(n(265)),f=m(n(16)),p=n(128);function m(e){return e&&e.__esModule?e:{default:e}}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["created_at","updated_at"];e=r({},e);var n=!0,a=!1,i=void 0;try{for(var u,l=t[Symbol.iterator]();!(n=(u=l.next()).done);n=!0){var s=u.value;e[s]&&(e[s]=(0,o.default)(e[s]))}}catch(e){a=!0,i=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return e}var g,b;t.resourceListToMap=function(e){return e.reduce(function(e,t){return r({},e,(n={},a=t.id,i=t,a in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n));var n,a,i},{})},t.fetchData=(g=v(regeneratorRuntime.mark(function e(t){var n,r,a,i,o=t.dispatch,c=t.getState,d=t.requestStatePath,f=t.existingStatePath,p=t.getData,m=t.reload,v=void 0!==m&&m,y=t.properties,g=void 0===y?null:y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,l.getIn)(c(),f),v||!n||!g||!u.default.all(g,function(e){return void 0!==n[e]})){e.next=3;break}return e.abrupt("return",n);case 3:if(r=d.concat(["fetch"]),e.prev=4,(a=(0,l.getIn)(c(),["requests"].concat(h(r))))&&!a.error&&!v){e.next=13;break}return o((0,s.setRequestLoading)(r)),e.next=10,p();case 10:return i=e.sent,setTimeout(function(){return o((0,s.setRequestLoaded)(r))}),e.abrupt("return",i);case 13:return e.abrupt("return",n);case 16:return e.prev=16,e.t0=e.catch(4),o((0,s.setRequestError)(r,e.t0)),console.error("fetchData error",e.t0),e.abrupt("return",n);case 21:case"end":return e.stop()}},e,void 0,[[4,16]])})),function(e){return g.apply(this,arguments)}),t.updateData=(b=v(regeneratorRuntime.mark(function e(t){var n,r,a,i=t.dispatch,o=t.getState,u=t.requestStatePath,c=t.existingStatePath,d=t.dependentRequestStatePaths,f=t.putData;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c?(0,l.getIn)(o(),c):null,r=u.concat(["update"]),e.prev=2,i((0,s.setRequestLoading)(r)),e.next=6,f();case 6:return a=e.sent,i((0,s.setRequestLoaded)(r)),(d||[]).forEach(function(e){return i((0,s.setRequestUnloaded)(e))}),e.abrupt("return",a);case 12:return e.prev=12,e.t0=e.catch(2),i((0,s.setRequestError)(r,e.t0)),console.error(e.t0),e.abrupt("return",n);case 17:case"end":return e.stop()}},e,void 0,[[2,12]])})),function(e){return b.apply(this,arguments)});function _(e,t){e=r({},e);for(var n in t)null===t[n]?delete e[n]:e[n]=r({},e[n],t[n]);return e}t.formDomOnlyProps=function(e){e.initialValue,e.autofill,e.onUpdate,e.valid,e.invalid,e.dirty,e.pristine,e.active,e.touched,e.visited,e.autofilled,e.error,e.defaultValue;return function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["initialValue","autofill","onUpdate","valid","invalid","dirty","pristine","active","touched","visited","autofilled","error","defaultValue"])};t.createMemoizedSelector=(0,c.createSelectorCreator)(d.default,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return JSON.stringify(t)});function E(e){return function(t){function n(){var n,r=this,a=t.apply(void 0,arguments);return"function"==typeof a?(n=v(regeneratorRuntime.mark(function t(n,i){var o,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a(n,i);case 3:return o=t.sent,n(u={type:e,payload:o}),t.abrupt("return",u);case 9:throw t.prev=9,t.t0=t.catch(0),n({type:e,payload:t.t0,error:!0}),t.t0;case 13:case"end":return t.stop()}},t,r,[[0,9]])})),function(e,t){return n.apply(this,arguments)}):{type:e,payload:a}}return n.toString=function(){return e},n}}function w(e){var t=this;return function(n){return function(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return o=v(regeneratorRuntime.mark(function r(i,o){var u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=e.apply(void 0,a),t.prev=1,i((0,s.setRequestLoading)(u)),t.next=5,n.apply(void 0,a)(i,o);case 5:return l=t.sent,setTimeout(function(){return i((0,s.setRequestLoaded)(u))}),t.abrupt("return",l);case 10:throw t.prev=10,t.t0=t.catch(1),console.error("Request "+u.join(",")+" failed:",t.t0),i((0,s.setRequestError)(u,t.t0)),t.t0;case 15:case"end":return t.stop()}},r,t,[[1,10]])})),function(e,t){return o.apply(this,arguments)};var o}}}},180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SORTABLE_AGGREGATION_TYPES=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getAggregations=d,t.addAggregation=function(e,t){return f((0,i.add)(d(e),t))},t.updateAggregation=function(e,t,n){return f((0,i.update)(d(e),t,n))},t.removeAggregation=function(e,t){return f((0,i.remove)(d(e),t))},t.clearAggregations=function(e){return f((0,i.clear)())},t.isBareRows=function(e){return 0===d(e).length},t.hasEmptyAggregation=function(e){return s.default.any(d(e),function(e){return!(0,i.noNullValues)(e)})},t.hasValidAggregation=function(e){return s.default.all(d(e),function(e){return(0,i.noNullValues)(e)})},t.isStandard=p,t.isMetric=m,t.isCustom=function(e){return!p(e)&&!m(e)},t.hasOptions=h,t.getOptions=v,t.getContent=y,t.isNamed=function(e){return!!g(e)},t.getName=g,t.setName=function(e,t){return["aggregation-options",y(e),r({"display-name":t},v(e))]},t.setContent=function(e,t){return["aggregation-options",t,v(e)]},t.getMetric=function(e){return m(e)?e[1]:null},t.getOperator=function(e){return p(e)?e[0]:null},t.getField=function(e){return p(e)?e[1]:null},t.setField=function(e,t){return p(e)?[e[0],t]:e},t.isSortable=function(e){return c.has(y(e)[0])};var a,i=n(115),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(88)),u=n(68),l=n(3),s=(a=l)&&a.__esModule?a:{default:a};var c=t.SORTABLE_AGGREGATION_TYPES=new Set(["avg","count","distinct","stddev","sum","min","max"]);function d(e){return(Array.isArray(e)&&Array.isArray(e[0])?e:Array.isArray(e)&&"string"==typeof e[0]?[e]:[]).filter(function(e){return e&&e[0]&&"rows"!==e[0]})}function f(e){return 0===(e=d(e)).length?void 0:e}function p(e){return Array.isArray(e)&&u.STANDARD_AGGREGATIONS.has(e[0])&&(null==e[1]||o.isValidField(e[1]))}function m(e){return Array.isArray(e)&&"metric"===e[0]}function h(e){return Array.isArray(e)&&"aggregation-options"===e[0]}function v(e){return h(e)?e[2]:{}}function y(e){return h(e)?e[1]:e}function g(e){return v(e)["display-name"]}},181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.getFunctionArgType=function(e,t){return e.multiple?e.args[0]:e.args[t]},t.getExpressionName=function(e){return h.get(e)},t.getMBQLName=function(e){return v.get(e.toLowerCase())};t.DISPLAY_QUOTES={identifierQuoteDefault:"",literalQuoteDefault:""},t.EDITOR_QUOTES={characters:{"[":"identifier","'":"literal",'"':"literal"},literalQuoteDefault:'"',identifierQuoteDefault:"[",identifierAlwaysQuoted:!0},t.EDITOR_FK_SYMBOLS={symbols:["."," → "],default:" → "},t.OPERATOR_PRECEDENCE={not:17,"*":15,"/":15,"+":14,"-":14,and:6,or:5},t.EXPRESSION_TYPES=["expression","aggregation","boolean","string","number"];var i=t.EXPRESSION_SUBTYPES={expression:new Set(["string","number"])};t.isExpressionType=function(e,t){return e===t||i[t]&&i[t].has(e)||!1};var o=t.MBQL_CLAUSES={count:{displayName:"Count",type:"aggregation",args:[]},"cum-count":{displayName:"CumulativeCount",type:"aggregation",args:[]},sum:{displayName:"Sum",type:"aggregation",args:["number"]},"cum-sum":{displayName:"CumulativeSum",type:"aggregation",args:["number"]},distinct:{displayName:"Distinct",type:"aggregation",args:["number"]},stddev:{displayName:"StandardDeviation",type:"aggregation",args:["number"],requiresFeature:"standard-deviation-aggregations"},avg:{displayName:"Average",type:"aggregation",args:["number"]},min:{displayName:"Min",type:"aggregation",args:["number"]},max:{displayName:"Max",type:"aggregation",args:["number"]},share:{displayName:"Share",type:"aggregation",args:["boolean"]},"count-where":{displayName:"CountIf",type:"aggregation",args:["boolean"]},"sum-where":{displayName:"SumIf",type:"aggregation",args:["number","boolean"]},var:{displayName:"Variance",type:"aggregation",args:["number"],requiresFeature:"standard-deviation-aggregations"},median:{displayName:"Median",type:"aggregation",args:["number"],requiresFeature:"percentile-aggregations"},percentile:{displayName:"Percentile",type:"aggregation",args:["number"],requiresFeature:"percentile-aggregations"},lower:{displayName:"lower",type:"string",args:["string"]},upper:{displayName:"upper",type:"string",args:["string"]},substring:{displayName:"substring",type:"string",args:["string","number","number"]},"regex-match-first":{displayName:"regexextract",type:"string",args:["string","string"],requiresFeature:"regex"},concat:{displayName:"concat",type:"string",args:["expression"],multiple:!0},replace:{displayName:"replace",type:"string",args:["string","string","string"]},length:{displayName:"length",type:"number",args:["string"]},trim:{displayName:"trim",type:"string",args:["string","string"]},rtrim:{displayName:"rtrim",type:"string",args:["string"]},ltrim:{displayName:"ltrim",type:"string",args:["string"]},abs:{displayName:"abs",type:"number",args:["number"],requiresFeature:"expressions"},floor:{displayName:"floor",type:"number",args:["number"],requiresFeature:"expressions"},ceil:{displayName:"ceil",type:"number",args:["number"],requiresFeature:"expressions"},round:{displayName:"round",type:"number",args:["number"],requiresFeature:"expressions"},sqrt:{displayName:"sqrt",type:"number",args:["number"],requiresFeature:"advanced-math-expressions"},power:{displayName:"power",type:"number",args:["number","number"],requiresFeature:"advanced-math-expressions"},log:{displayName:"log",type:"number",args:["number"],requiresFeature:"advanced-math-expressions"},exp:{displayName:"exp",type:"number",args:["number"],requiresFeature:"advanced-math-expressions"},contains:{displayName:"contains",type:"boolean",args:["string","string"]},"starts-with":{displayName:"startsWith",type:"boolean",args:["string","string"]},"ends-with":{displayName:"endsWith",type:"boolean",args:["string","string"]},between:{displayName:"between",type:"boolean",args:["expression","expression","expression"]},"time-interval":{displayName:"interval",type:"boolean",args:["expression","number","string"]},coalesce:{displayName:"coalesce",type:"expression",args:["expression","expression"],multiple:!0},case:{displayName:"case",type:"expression",args:["expression","expression"],multiple:!0},and:{displayName:"AND",type:"boolean",args:["boolean","boolean"]},or:{displayName:"OR",type:"boolean",args:["boolean","boolean"]},not:{displayName:"NOT",type:"boolean",args:["boolean"]},"*":{displayName:"*",tokenName:"Multi",type:"number",args:["number","number"]},"/":{displayName:"/",tokenName:"Div",type:"number",args:["number","number"]},"-":{displayName:"-",tokenName:"Minus",type:"number",args:["number","number"]},"+":{displayName:"+",tokenName:"Plus",type:"number",args:["number","number"]},"!=":{displayName:"!=",tokenName:"NotEqual",type:"boolean",args:["expression","expression"]},"<=":{displayName:"<=",tokenName:"LessThanEqual",type:"boolean",args:["expression","expression"]},">=":{displayName:">=",tokenName:"GreaterThanEqual",type:"boolean",args:["expression","expression"]},"<":{displayName:"<",tokenName:"LessThan",type:"boolean",args:["expression","expression"]},">":{displayName:">",tokenName:"GreaterThan",type:"boolean",args:["expression","expression"]},"=":{displayName:"=",tokenName:"Equal",type:"boolean",args:["expression","expression"]}},u=!0,l=!1,s=void 0;try{for(var c,d=Object.entries(o)[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var f=r(c.value,2),p=f[0],m=f[1];void 0!==m.name&&m.name!==p&&console.warn("Mismatched name for MBQL_CLAUSES "+p),m.name=p}}catch(e){l=!0,s=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw s}}var h=new Map(Object.entries(o).map(function(e){var t=r(e,2);return[t[0],t[1].displayName]})),v=new Map(Object.entries(o).map(function(e){var t=r(e,2),n=t[0];return[t[1].displayName.toLowerCase(),n]}));var y=t.AGGREGATION_FUNCTIONS=new Set(["count-where","sum-where","count","cum-count","sum","cum-sum","distinct","stddev","avg","min","max","share","var","median","percentile"]),g=t.EXPRESSION_FUNCTIONS=new Set(["lower","upper","substring","regex-match-first","concat","replace","trim","rtrim","ltrim","length","abs","floor","ceil","round","sqrt","power","log","exp","contains","ends-with","starts-with","between","time-interval","coalesce"]),b=t.EXPRESSION_OPERATORS=new Set(["+","-","*","/"]),_=t.FILTER_OPERATORS=new Set(["!=","<=",">=","<",">","="]),E=t.BOOLEAN_UNARY_OPERATORS=new Set(["not"]),w=t.BOOLEAN_BINARY_OPERATORS=new Set(["and","or"]);t.FUNCTIONS=new Set([].concat(a(g),a(y))),t.OPERATORS=new Set([].concat(a(b),a(_),a(E),a(w))),t.STANDARD_FILTERS=new Set(["!=","<=",">=","<",">","=","contains","does-not-contain","ends-with","starts-with","between","time-interval","is-null","not-null","is-empty","not-empty","inside"]),t.STANDARD_AGGREGATIONS=new Set(["count","cum-count","sum","cum-sum","distinct","stddev","avg","min","max"])},182:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=o(n(96)),i=(o(n(79)),o(n(57)),n(10));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"displayName",value:function(){return(0,i.titleize)((0,i.humanize)(this.name))}}]),t}();t.default=u},183:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFields=l,t.getFieldClause=s,t.addField=function(e,t){return s((0,o.add)(l(e),t))},t.updateField=function(e,t,n){return s((0,o.update)(l(e),t,n))},t.removeField=function(e,t){return s((0,o.remove)(l(e),t))},t.clearFields=function(e){return s((0,o.clear)())},t.getFieldValues=c,t.getRemappings=function(e){var t=e&&e.remappings||[],n=c(e);return[].concat(u(n),u(t))},t.getHumanReadableValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=i.default.findWhere(t,function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},0,e));return n&&2===n.length?n[1]:String(e)};var r,a=n(3),i=(r=a)&&r.__esModule?r:{default:r},o=n(115);function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e){return(e||[]).filter(function(e){return null!=e})}function s(e){return 0===(e=l(e)).length?void 0:e}function c(e){var t=e&&e.values;return Array.isArray(t)?0===t.length||Array.isArray(t[0])?t:t.map(function(e){return[e]}):t&&Array.isArray(t.values)?Array.isArray(t.human_readable_values)?i.default.zip(t.values,t.human_readable_values||{}):Array.isArray(t.values)?c(t):[]:[]}},184:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),a=n(58),i=n(7),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(23)),u=n(27);var l=(0,r.createEntity)({name:"metrics",nameOne:"metric",path:"/api/metric",schema:a.MetricSchema,objectActions:{setArchived:function(e,t){var n=e.id,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).revision_message,a=void 0===r?t?"(Archive)":"(Unarchive)":r;return l.actions.update({id:n},{archived:t,revision_message:a})},delete:null},objectSelectors:{getName:function(e){return e&&e.name},getUrl:function(e){return o.tableRowsQuery(e.database_id,e.table_id,e.id)},getColor:function(e){return(0,i.color)("accent1")},getIcon:function(e){return"sum"}},selectors:{getObject:function(e,t){var n=t.entityId;return(0,u.getMetadata)(e).metric(n)}},form:{fields:[{name:"name"},{name:"description",type:"text"}]}});t.default=l},185:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(34),a=n(58),i=n(7),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(23)),u=n(27);var l=(0,r.createEntity)({name:"segments",nameOne:"segment",path:"/api/segment",schema:a.SegmentSchema,objectActions:{setArchived:function(e,t){var n=e.id,r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).revision_message,a=void 0===r?t?"(Archive)":"(Unarchive)":r;return l.actions.update({id:n},{archived:t,revision_message:a})},delete:null},selectors:{getObject:function(e,t){var n=t.entityId;return(0,u.getMetadata)(e).segment(n)}},objectSelectors:{getName:function(e){return e&&e.name},getUrl:function(e){return o.tableRowsQuery(e.database_id,e.table_id,null,e.id)},getColor:function(e){return(0,i.color)("accent7")},getIcon:function(e){return"segment"}},form:{fields:[{name:"name"},{name:"description",type:"text"}]}});t.default=l},186:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionCstVisitor=t.parserWithRecovery=t.parser=t.ExpressionParser=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.parse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.source,n=e.tokenVector,r=e.startRule,a=void 0===r?"expression":r,i=e.recover,u=void 0!==i&&i,l=u?o.lexerWithRecovery:o.lexer,s=u?p:f,c=void 0;if(!n){var d=l.tokenize(t),h=d.tokens,v=d.errors;c=v;var y=!0,g=!1,b=void 0;try{for(var _,E=c[Symbol.iterator]();!(y=(_=E.next()).done);y=!0){var w=_.value;m(w)}}catch(e){g=!0,b=e}finally{try{!y&&E.return&&E.return()}finally{if(g)throw b}}if(c.length>0)throw c;n=h}var O=n.length>0&&(0,o.isTokenType)(n[n.length-1].tokenType,o.RecoveryToken);s.input=n;var S=s[a](),C=s.errors,x=!0,k=!1,A=void 0;try{for(var T,P=C[Symbol.iterator]();!(x=(T=P.next()).done);x=!0){var j=T.value;m(j)}}catch(e){k=!0,A=e}finally{try{!x&&P.return&&P.return()}finally{if(k)throw A}}if(C.length>0&&!u)throw C;var N=!!(S&&C.length>0);return{cst:S,tokenVector:n,lexerRecovered:O,parserRecovered:N,parserErrors:C,lexerErrors:c}};var i=n(376),o=n(234),u=n(68);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var d=t.ExpressionParser=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,o.allTokens,r({maxLookahead:3,recoveryEnabled:!1,tokenRecoveryEnabled:!0},e))),a=n;return a.RULE("any",function(e){a.OR({DEF:[{GATE:function(){return!e||(0,u.isExpressionType)("aggregation",e)},ALT:function(){a.SUBRULE2(a.aggregation,{LABEL:"expression"})}},{GATE:function(){return!e||(0,u.isExpressionType)("number",e)},ALT:function(){a.SUBRULE(a.additionExpression,{LABEL:"expression",ARGS:[e]})}},{GATE:function(){return!e||(0,u.isExpressionType)("string",e)},ALT:function(){a.SUBRULE1(a.string,{LABEL:"expression"})}},{GATE:function(){return!e||(0,u.isExpressionType)("boolean",e)},ALT:function(){a.SUBRULE(a.boolean,{LABEL:"expression"})}}],ERR_MSG:e})}),a.RULE("expression",function(){a.SUBRULE(a.additionExpression,{LABEL:"expression",ARGS:["expression"]})}),a.RULE("number",function(){a.SUBRULE(a.additionExpression,{LABEL:"expression",ARGS:["number"]})}),a.RULE("string",function(){a.SUBRULE(a.atomicExpression,{LABEL:"expression",ARGS:["string"]})}),a.RULE("aggregation",function(){a.SUBRULE(a.additionExpression,{LABEL:"expression",ARGS:["aggregation"]})}),a.RULE("boolean",function(){a.SUBRULE(a.booleanExpression,{LABEL:"expression"})}),a.RULE("additionExpression",function(e){a.SUBRULE(a.multiplicationExpression,{ARGS:[e],LABEL:"operands"}),a.MANY(function(){a.CONSUME(o.AdditiveOperator,{LABEL:"operators"}),a.SUBRULE2(a.multiplicationExpression,{ARGS:[e],LABEL:"operands"})})}),a.RULE("multiplicationExpression",function(e){a.SUBRULE(a.atomicExpression,{ARGS:[e],LABEL:"operands"}),a.MANY(function(){a.CONSUME(o.MultiplicativeOperator,{LABEL:"operators"}),a.SUBRULE2(a.atomicExpression,{ARGS:[e],LABEL:"operands"})})}),a.RULE("booleanExpression",function(){a.SUBRULE(a.atomicExpression,{ARGS:["boolean"],LABEL:"operands"}),a.MANY(function(){a.CONSUME(o.BooleanOperatorBinary,{LABEL:"operators"}),a.SUBRULE2(a.atomicExpression,{ARGS:["boolean"],LABEL:"operands"})})}),a.RULE("booleanUnaryExpression",function(){a.CONSUME(o.BooleanOperatorUnary,{LABEL:"operators"}),a.SUBRULE(a.atomicExpression,{LABEL:"operands",ARGS:["boolean"]})}),a.RULE("comparisonExpression",function(){a.SUBRULE(a.dimensionExpression,{LABEL:"operands"}),a.CONSUME(o.FilterOperator,{LABEL:"operators"}),a.SUBRULE(a.expression,{LABEL:"operands"})}),a.RULE("functionExpression",function(e){a.CONSUME(o.FunctionName,{LABEL:"functionName"}),a.OR1([{GATE:function(){return n._getFnFromToken(n.LA(0)).args.length>0},ALT:function(){var e=n._getFnFromToken(n.LA(0));a.CONSUME(o.LParen);var t=0;a.OPTION(function(){a.SUBRULE(a.any,{LABEL:"arguments",ARGS:[(0,u.getFunctionArgType)(e,t++)]}),a.MANY(function(){a.CONSUME(o.Comma),a.SUBRULE1(a.any,{LABEL:"arguments",ARGS:[(0,u.getFunctionArgType)(e,t++)]})})}),a.CONSUME(o.RParen)}},{GATE:function(){return 0===n._getFnFromToken(n.LA(0)).args.length},ALT:function(){a.OPTION1(function(){a.CONSUME1(o.LParen),a.CONSUME1(o.RParen)})}}])}),a.RULE("caseExpression",function(e){a.CONSUME(o.Case,{LABEL:"functionName"}),a.CONSUME(o.LParen),a.SUBRULE(a.boolean,{LABEL:"arguments"}),a.CONSUME(o.Comma),a.SUBRULE(a.expression,{LABEL:"arguments",ARGS:[e]}),a.MANY(function(){a.CONSUME2(o.Comma),a.SUBRULE2(a.boolean,{LABEL:"arguments"}),a.CONSUME3(o.Comma),a.SUBRULE3(a.expression,{LABEL:"arguments",ARGS:[e]})}),a.OPTION(function(){a.CONSUME4(o.Comma),a.SUBRULE4(a.expression,{LABEL:"arguments",ARGS:[e]})}),a.CONSUME(o.RParen)}),a.RULE("metricExpression",function(){a.OR([{ALT:function(){return a.SUBRULE(a.identifierString,{LABEL:"metricName"})}},{ALT:function(){return a.SUBRULE(a.identifier,{LABEL:"metricName"})}}])}),a.RULE("segmentExpression",function(){a.OR([{ALT:function(){return a.SUBRULE(a.identifierString,{LABEL:"segmentName"})}},{ALT:function(){return a.SUBRULE(a.identifier,{LABEL:"segmentName"})}}])}),a.RULE("dimensionExpression",function(){a.OR([{ALT:function(){return a.SUBRULE(a.identifierString,{LABEL:"dimensionName"})}},{ALT:function(){return a.SUBRULE(a.identifier,{LABEL:"dimensionName"})}}])}),a.RULE("identifier",function(){a.CONSUME(o.Identifier)}),a.RULE("identifierString",function(){a.CONSUME(o.IdentifierString)}),a.RULE("stringLiteral",function(){a.CONSUME(o.StringLiteral)}),a.RULE("numberLiteral",function(){a.OPTION(function(){return a.CONSUME(o.Minus)}),a.CONSUME(o.NumberLiteral)}),a.RULE("atomicExpression",function(e){a.OR({DEF:[{GATE:function(){var t=n._getFnFromToken(n.LA(1));return t&&((0,u.isExpressionType)(t.type,e)||(0,u.isExpressionType)(e,t.type))},ALT:function(){return a.SUBRULE(a.functionExpression,{LABEL:"expression",ARGS:[e]})}},{GATE:function(){return(0,u.isExpressionType)("aggregation",e)},ALT:function(){return a.SUBRULE(a.metricExpression,{LABEL:"expression"})}},{GATE:function(){return(0,u.isExpressionType)("boolean",e)},ALT:function(){return a.SUBRULE(a.comparisonExpression,{LABEL:"expression"})}},{GATE:function(){return(0,u.isExpressionType)("boolean",e)},ALT:function(){return a.SUBRULE(a.booleanUnaryExpression,{LABEL:"expression"})}},{GATE:function(){return(0,u.isExpressionType)("boolean",e)},ALT:function(){return a.SUBRULE(a.segmentExpression,{LABEL:"expression"})}},{GATE:function(){return(0,u.isExpressionType)("string",e)||(0,u.isExpressionType)("number",e)},ALT:function(){return a.SUBRULE(a.caseExpression,{LABEL:"expression",ARGS:[e]})}},{GATE:function(){return(0,u.isExpressionType)("string",e)||(0,u.isExpressionType)("number",e)},ALT:function(){return a.SUBRULE(a.dimensionExpression,{LABEL:"expression"})}},{GATE:function(){return(0,u.isExpressionType)("string",e)},ALT:function(){return a.SUBRULE(a.stringLiteral,{LABEL:"expression"})}},{GATE:function(){return(0,u.isExpressionType)("number",e)||(0,u.isExpressionType)("aggregation",e)},ALT:function(){return a.SUBRULE(a.numberLiteral,{LABEL:"expression"})}},{ALT:function(){return a.SUBRULE(a.parenthesisExpression,{ARGS:[e],LABEL:"expression"})}}],ERR_MSG:e})}),a.RULE("parenthesisExpression",function(e){a.CONSUME(o.LParen),a.SUBRULE(a.any,{LABEL:"expression",ARGS:[e]}),a.CONSUME(o.RParen)}),n.performSelfAnalysis(),n}return c(t,i.CstParser),a(t,[{key:"_getFnFromToken",value:function(e){return this.RECORDING_PHASE?{name:null,type:null,args:[]}:o.CLAUSE_TOKENS.get(e.tokenType)}},{key:"canTokenTypeBeInsertedInRecovery",value:function(){return this.tokenRecoveryEnabled}},{key:"canRecoverWithSingleTokenDeletion",value:function(){return this.tokenRecoveryEnabled}}]),t}(),f=t.parser=new d,p=t.parserWithRecovery=new d({recoveryEnabled:!0});t.ExpressionCstVisitor=function(e){function t(){return l(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,f.getBaseCstVisitorConstructor()),t}();function m(e){e.message=e.message&&e.message.replace(/^Expecting:?\s+/,"Expected ").replace(/--> (.*?) <--/g,"$1").replace(/(\n|\s)*but found:?/," but found ").replace(/\s*but found\s+''$/,"")}},187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drillDownForDimensions=void 0;var r=n(575);Object.defineProperty(t,"drillDownForDimensions",{enumerable:!0,get:function(){return r.drillDownForDimensions}}),t.aggregate=function(e,t){var n=e.query();if(n instanceof l.default)return n.aggregate(t).question().setDefaultDisplay()},t.breakout=function(e,t){var n=e.query();if(n instanceof l.default)return n.breakout(t).question().setDefaultDisplay()},t.filter=function(e,t,n,r){var a=e.query();if(a instanceof l.default)return a.filter([t,(0,i.fieldRefForColumn)(n),r]).question()},t.pivot=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.query();if(r instanceof l.default){var a=!0,o=!1,u=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value;r=d(r,f.value,f.column);for(var p=(0,i.fieldRefForColumn)(f.column),m=0;m<r.breakouts().length;m++){var h=r.breakouts()[m];h.dimension().isSameBaseDimension(p)&&(r=h.remove(),m--)}}}catch(e){o=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw u}}var v=!0,y=!1,g=void 0;try{for(var b,_=t[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var E=b.value;r=r.breakout(E)}}catch(e){y=!0,g=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw g}}return r.question().setDefaultDisplay()}},t.distribution=function(e,t){var n=e.query();if(n instanceof l.default){var r=(0,o.isDate)(t)?["datetime-field",(0,i.fieldRefForColumn)(t),"month"]:(0,o.isNumber)(t)?["binning-strategy",(0,i.fieldRefForColumn)(t),"default"]:(0,i.fieldRefForColumn)(t);return n.clearAggregations().clearBreakouts().clearSort().clearLimit().aggregate(["count"]).breakout(r).question().setDisplay("bar")}},t.toUnderlyingRecords=c,t.drillUnderlyingRecords=function(e,t){var n=e.query();if(n instanceof l.default){var r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var s=o.value;n=d(n,s.value,s.column)}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return c(n.question())}},t.drillFilter=d,t.addOrUpdateFilter=f,t.addOrUpdateBreakout=v,t.updateDateTimeFilter=function(e,t,n,r){var o=(0,i.fieldRefForColumn)(t);if(n=(0,a.default)(n),r=(0,a.default)(r),t.unit){var u=t.unit;for(n=n.add(1,u).startOf(u),r=r.endOf(u);u!==h(u)&&r.diff(n,u)<p;)u=h(u);return e=v(e,["datetime-field",o,u]),n=n.startOf(t.unit),r=r.startOf(t.unit),n.isAfter(r)?e:n.isSame(r,t.unit)?f(e,["=",["datetime-field",o,t.unit],n.format()]):f(e,["between",["datetime-field",o,t.unit],n.format(),r.format()])}return f(e,["between",o,n.format(),r.format()])},t.updateLatLonFilter=function(e,t,n,r){return f(e,["inside",(0,i.fieldRefForColumn)(t),(0,i.fieldRefForColumn)(n),r.getNorth(),r.getWest(),r.getSouth(),r.getEast()])},t.updateNumericFilter=function(e,t,n,r){var a=(0,i.fieldRefForColumn)(t);return f(e,["between",a,n,r])};var a=s(n(8)),i=n(33),o=n(13),u=n(117),l=(s(n(39)),s(n(26)));function s(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.query();if(t instanceof l.default)return t.clearAggregations().clearBreakouts().clearSort().clearLimit().clearFields().question().setDisplay("table")}function d(e,t,n){var r=void 0;if((0,o.isDate)(n))r=["=",["datetime-field",(0,i.fieldRefForColumn)(n),n.unit],(0,u.parseTimestamp)(t,n.unit).format()];else{var a=(0,i.rangeForValue)(t,n);r=a?["between",(0,i.fieldRefForColumn)(n),a[0],a[1]]:["=",(0,i.fieldRefForColumn)(n),t]}return f(e,r)}function f(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=e.filters()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,l=u.dimension();if(l&&l.isSameBaseDimension(t[1]))return u.replace(t)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return e.filter(t)}var p=4,m=["minute","hour","day","week","month","quarter","year"],h=function(e){return m[Math.max(0,m.indexOf(e)-1)]};function v(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=e.breakouts()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;if(u.dimension().isSameBaseDimension(t))return u.replace(t)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return e.breakout(t)}},188:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=y(l),c=y(n(2)),d=y(n(235)),f=y(n(52)),p=y(n(5)),m=y(n(236)),h=y(n(4)),v=n(7);function y(e){return e&&e.__esModule?e:{default:e}}var g=Object.values(v.normal),b=(0,f.default)()((i=a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.series,n=e.hovered,r=e.actionButtons,a=e.onHoverChange,i=e.onChangeCardAndRun,u=e.settings,l=e.description,c=e.onVisualizationClick,f=e.visualizationIsClickable,v=e.classNameWidgets,y=e.width,b=!!t[0].card._breakoutColumn,_=b?{}:this.props,E=_.onAddSeries,w=_.onEditSeries,O=_.onRemoveSeries,S=!!E||t.length>1,C=y<100*t.length,x=!S||!C,k=u.series&&t.map(function(e){return u.series(e)}),A=k?k.map(function(e){return e.color}):g,T=k?k.map(function(e){return e.title}):t.map(function(e){return e.card.name});return s.default.createElement("div",{className:(0,h.default)(d.default.LegendHeader,"Card-title mx1 flex flex-no-shrink flex-row align-center")},t.map(function(e,r){return[s.default.createElement(m.default,{key:r,title:T[r],description:l,color:A[r%A.length],className:(0,h.default)({"text-brand-hover":!b}),showDot:S,showTitle:x,isMuted:n&&null!=n.index&&r!==n.index,onMouseEnter:function(){return a&&a({index:r})},onMouseLeave:function(){return a&&a(null)},onClick:w?function(e){return w(e,r)}:e.clicked&&f(e.clicked)?function(t){return c(o({},e.clicked,{element:t.currentTarget}))}:i?function(){return i({nextCard:e.card,seriesIndex:r})}:null,infoClassName:v}),O&&t.length>1&&s.default.createElement(p.default,{name:"close",className:"text-light text-medium-hover flex-no-shrink mr2 cursor-pointer",width:12,height:12,onClick:function(e){return O(e,r)}})]}),E&&s.default.createElement(p.default,{name:"add",className:"mx1 flex-no-shrink text-medium text-brand-hover bg-medium rounded cursor-pointer",size:12,style:{padding:5},onClick:function(e){return E(e)}}),r&&s.default.createElement("span",{className:(0,h.default)(v,"flex-no-shrink flex-align-right relative")},r))}}]),t}(),a.propTypes={series:c.default.array.isRequired,hovered:c.default.object,onHoverChange:c.default.func,onAddSeries:c.default.func,onEditSeries:c.default.func,onRemoveSeries:c.default.func,onChangeCardAndRun:c.default.func,actionButtons:c.default.node,description:c.default.string,classNameWidgets:c.default.string},a.defaultProps={series:[],settings:{},visualizationIsClickable:function(){return!1}},r=i))||r;b.displayName="LegendHeader",t.default=b},189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i,o=(r=["Category"],a=["Category"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),u=n(1),l=n(13),s=n(237),c=(i=s)&&i.__esModule?i:{default:i};t.default=(0,c.default)((0,u.t)(o),"label",function(e){return(0,l.isCategory)(e)&&!(0,l.isAddress)(e)})},19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=c(n(0)),i=c(n(2)),o=c(n(416)),u=c(n(5)),l=c(n(4)),s=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=["small","medium","large","round","primary","danger","warning","cancel","success","purple","white","borderless","onlyIcon"],p=function(e){var t,n=e.className,i=e.icon,o=e.iconRight,c=e.iconSize,p=e.iconColor,m=e.iconVertical,h=e.labelBreakpoint,v=(e.color,e.children),y=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["className","icon","iconRight","iconSize","iconColor","iconVertical","labelBreakpoint","color","children"]),g=f.filter(function(e){return y[e]}).map(function(e){return"Button--"+e});return a.default.createElement("button",r({},s.default.omit.apply(s.default,[y].concat(f)),{className:(0,l.default)("Button",n,"flex-no-shrink",g,{p1:!v})}),a.default.createElement("div",{className:(0,l.default)("flex layout-centered",{"flex-column":m}),style:m?{minWidth:60}:null},i&&a.default.createElement(u.default,{color:p,name:i,size:c||14}),v&&a.default.createElement("div",{className:(0,l.default)((t={},d(t,m?"mt1":"ml1",i),d(t,m?"mb1":"mr1",o),d(t,"hide "+h+"-show",!!h),t))},v),o&&a.default.createElement(u.default,{color:p,name:o,size:c||14})))};p.displayName="BaseButton",p.propTypes={className:i.default.string,icon:i.default.string,iconSize:i.default.number,children:i.default.any,small:i.default.bool,medium:i.default.bool,large:i.default.bool,primary:i.default.bool,warning:i.default.bool,cancel:i.default.bool,purple:i.default.bool,borderless:i.default.bool};var m=(0,o.default)({is:p},"space","color");m.displayName="Button",t.default=m},190:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(0,n(34).createEntity)({name:"groups",path:"/api/permissions/group",form:{fields:[{name:"name"}]}});t.default=r},191:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.refreshSiteSettings=t.REFRESH_SITE_SETTINGS=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(14),o=(r=i)&&r.__esModule?r:{default:r},u=n(18),l=n(17);var s,c,d,f=t.REFRESH_SITE_SETTINGS="metabase/settings/REFRESH_SITE_SETTINGS",p=(t.refreshSiteSettings=(0,u.createThunkAction)(f,function(){var e,t,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).locale;return e=regeneratorRuntime.mark(function e(t,r){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.SessionApi.properties(null,{headers:n?{"X-Metabase-Locale":n}:{}});case 2:return a=e.sent,o.default.setAll(a),e.abrupt("return",a);case 5:case"end":return e.stop()}},e,void 0)}),t=function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})},function(e,n){return t.apply(this,arguments)}}),(0,u.handleActions)((d={next:function(e,t){var n=t.payload;return a({},e,n)}},(c=f)in(s={})?Object.defineProperty(s,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):s[c]=d,s),window.MetabaseBootstrap));t.default=(0,u.combineReducers)({values:p})},192:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dimensionIsTimeseries=function(e){var t=e.cols,n=e.rows,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c({cols:t,rows:n},a)||(0,r.default)(n[0]&&n[0][a],r.default.ISO_8601).isValid()},t.dimensionIsExplicitTimeseries=c,t.minTimeseriesUnit=function(e){return e.reduce(function(e,t){return null!=t&&(null==e||f[t]<f[e])?t:e},null)},t.computeTimeseriesDataInverval=function(e,t){return d[function(e,t){if(t&&null!=f[t])return f[t];if(1===e.length)return d.findIndex(function(e){return"day"===e.interval});var n=[],r=d.length,a=!0,i=!1,u=void 0;try{for(var l,s=e[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)for(var c=l.value,p=0;p<d.length&&p<r;p++){var m=d[p],h=m.testFn((0,o.parseTimestamp)(c));void 0===n[p]?n[p]=h:n[p]!==h&&(r=p)}}catch(e){i=!0,u=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw u}}return r-1}(e,t)]},t.computeTimeseriesTicksInterval=function(e,t,n,i){return function(e,t,n){var i=a.default.findIndex(d,function(t){var n=t.interval,r=t.count;return n===e.interval&&r===e.count});-1===i&&(i=0);var o=!0,u=!1,l=void 0;try{for(var s,c=a.default.rest(d,i)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var f=s.value;if(m=f,h=t,Math.ceil(h/(p=m,(0,r.default)(0).add(p.count,p.interval).valueOf()))<=n)return f}}catch(e){u=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(u)throw l}}var p;var m,h;return d[d.length-1]}(t,(s=e,c=s[0],s[1]-c),(o=n,u=i,l=7*u(new Date(2019,8,4)).length+20,Math.floor(o/l)));var o,u,l;var s,c},t.getTimezone=function(e,t){e=e._raw||e;var n=Array.from(new Set(e.map(function(e){return e.data.results_timezone})));n.length>1&&t((0,u.multipleTimezoneWarning)(n));var r=e[0].data,a=r.results_timezone,i=r.requested_timezone;i&&i!==a&&t((0,u.unexpectedTimezoneWarning)({results_timezone:a,requested_timezone:i}));return a||p};var r=l(n(444)),a=l(n(3)),i=n(13),o=n(117),u=n(242);function l(e){return e&&e.__esModule?e:{default:e}}var s=new Set(["minute","hour","day","week","month","quarter","year"]);function c(e,t){var n=e.cols;return(0,i.isDate)(n[t])&&(null==n[t].unit||s.has(n[t].unit))}var d=[{interval:"ms",count:1,testFn:function(e){return 0}},{interval:"second",count:1,testFn:function(e){return e.milliseconds()}},{interval:"second",count:5,testFn:function(e){return e.seconds()%5}},{interval:"second",count:15,testFn:function(e){return e.seconds()%15}},{interval:"second",count:30,testFn:function(e){return e.seconds()%30}},{interval:"minute",count:1,testFn:function(e){return e.seconds()}},{interval:"minute",count:5,testFn:function(e){return e.minutes()%5}},{interval:"minute",count:15,testFn:function(e){return e.minutes()%15}},{interval:"minute",count:30,testFn:function(e){return e.minutes()%30}},{interval:"hour",count:1,testFn:function(e){return e.minutes()}},{interval:"hour",count:3,testFn:function(e){return e.hours()%3}},{interval:"hour",count:6,testFn:function(e){return e.hours()%6}},{interval:"hour",count:12,testFn:function(e){return e.hours()%12}},{interval:"day",count:1,testFn:function(e){return e.hours()}},{interval:"week",count:1,testFn:function(e){return e.date()%7}},{interval:"month",count:1,testFn:function(e){return e.date()}},{interval:"month",count:3,testFn:function(e){return e.month()%3}},{interval:"year",count:1,testFn:function(e){return e.month()}},{interval:"year",count:5,testFn:function(e){return e.year()%5}},{interval:"year",count:10,testFn:function(e){return e.year()%10}},{interval:"year",count:50,testFn:function(e){return e.year()%50}},{interval:"year",count:100,testFn:function(e){return e.year()%100}}],f={minute:1,hour:9,day:13,week:14,month:15,quarter:16,year:17};var p="Etc/UTC"},193:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=p(i),u=p(n(15)),l=p(n(14));n(446),n(672);var s=p(n(92));n(960);var c=p(n(3)),d=p(n(39)),f=n(187);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),u=0;u<i;u++)o[u]=arguments[u];return n=a=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.onFilter=function(e){var t=e.layer.getBounds(),n=a.props,i=r(n.series,1)[0],o=i.card,u=i.data.cols,l=n.settings,s=n.onChangeCardAndRun,p=c.default.findWhere(u,{name:l["map.latitude_column"]}),m=c.default.findWhere(u,{name:l["map.longitude_column"]}),h=new d.default(o);h.isStructured()&&s({nextCard:(0,f.updateLatLonFilter)(h.query(),p,m,t).question().card()});a.props.onFiltering(!1)},m(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"componentDidMount",value:function(){var e=this;try{var t=u.default.findDOMNode(this.refs.map),n=this.map=s.default.map(t,{scrollWheelZoom:!1,minZoom:2,drawControlTooltips:!1,zoomSnap:!1}),r=new s.default.FeatureGroup;n.addLayer(r);var a=this.drawControl=new s.default.Control.Draw({draw:{rectangle:!1,polyline:!1,polygon:!1,circle:!1,marker:!1},edit:{featureGroup:r,edit:!1,remove:!1}});n.addControl(a),n.on("draw:created",this.onFilter),n.setView([0,0],8);var i=l.default.get("map-tile-server-url"),o=i.indexOf("openstreetmap.org")>=0?'Map data © <a href="http://openstreetmap.org">OpenStreetMap</a> contributors':null;s.default.tileLayer(i,{attribution:o}).addTo(n),n.on("moveend",function(){var t=n.getCenter(),r=t.lat,a=t.lng;e.props.onMapCenterChange(r,a)}),n.on("zoomend",function(){var t=n.getZoom();e.props.onMapZoomChange(t)})}catch(e){console.error(e),this.props.onRenderError(e.message||e)}}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.bounds,r=t.settings;if(!e||e.points!==this.props.points||e.width!==this.props.width||e.height!==this.props.height)if(this.map.invalidateSize(),null!=r["map.center_latitude"]||null!=r["map.center_longitude"]||null!=r["map.zoom"])this.map.setView([r["map.center_latitude"],r["map.center_longitude"]],r["map.zoom"]);else{var a=this.map.getBoundsZoom(s.default.latLngBounds([[n.getSouth(),0],[n.getNorth(),0]])),i=this.map.getBoundsZoom(s.default.latLngBounds([[0,n.getWest()],[0,n.getEast()]])),o=Math.min(a,i);this.map.fitBounds(n),this.map.setZoom(o),this.map.fitBounds(n)}}},{key:"componentWillUnmount",value:function(){this.map.remove()}},{key:"startFilter",value:function(){this._filter=new s.default.Draw.Rectangle(this.map,this.drawControl.options.rectangle),this._filter.enable(),this.props.onFiltering(!0)}},{key:"stopFilter",value:function(){this._filter&&this._filter.disable(),this.props.onFiltering(!1)}},{key:"render",value:function(){var e=this.props.className;return o.default.createElement("div",{className:e,ref:"map"})}},{key:"_getLatLonIndexes",value:function(){var e=this.props,t=e.settings,n=r(e.series,1)[0].data.cols;return{latitudeIndex:c.default.findIndex(n,function(e){return e.name===t["map.latitude_column"]}),longitudeIndex:c.default.findIndex(n,function(e){return e.name===t["map.longitude_column"]})}}},{key:"_getLatLonColumns",value:function(){var e=r(this.props.series,1)[0].data.cols,t=this._getLatLonIndexes(),n=t.latitudeIndex,a=t.longitudeIndex;return{latitudeColumn:e[n],longitudeColumn:e[a]}}},{key:"_getMetricColumn",value:function(){var e=this.props,t=e.settings,n=r(e.series,1)[0].data.cols;return c.default.findWhere(n,{name:t["map.metric_column"]})}}]),t}();h.displayName="LeafletMap",t.default=h},194:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetParameterMappingOptions=t.getParameters=t.getMappingsByParameter=t.getParameterTarget=t.getIsEditingParameter=t.getEditingParameter=t.getEditingParameterId=t.getIsDirty=t.getDashboardComplete=t.getDashboard=t.getLoadingStartTime=t.getParameterValues=t.getSlowCards=t.getCardData=t.getDashcards=t.getDashboards=t.getIsEditing=t.getDashboardId=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(3),o=(r=i)&&r.__esModule?r:{default:r},u=n(11),l=n(32),s=n(27),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(255)),d=n(100);var f=t.getDashboardId=function(e){return e.dashboard.dashboardId},p=(t.getIsEditing=function(e){return e.dashboard.isEditing},t.getDashboards=function(e){return e.dashboard.dashboards}),m=t.getDashcards=function(e){return e.dashboard.dashcards},h=(t.getCardData=function(e){return e.dashboard.dashcardData},t.getSlowCards=function(e){return e.dashboard.slowCards},t.getParameterValues=function(e){return e.dashboard.parameterValues},t.getLoadingStartTime=function(e){return e.dashboard.loadingDashCards.startTime},t.getDashboard=(0,l.createSelector)([f,p],function(e,t){return t[e]})),v=t.getDashboardComplete=(0,l.createSelector)([h,m],function(e,t){return e&&a({},e,{ordered_cards:e.ordered_cards.map(function(e){return t[e]}).filter(function(e){return!e.isRemoved})})}),y=(t.getIsDirty=(0,l.createSelector)([h,m],function(e,t){return!(!e||!e.isDirty&&!o.default.some(e.ordered_cards,function(e){return!(t[e].isAdded&&t[e].isRemoved)&&(t[e].isDirty||t[e].isAdded||t[e].isRemoved)}))}),t.getEditingParameterId=function(e){return e.dashboard.editingParameterId}),g=t.getEditingParameter=(0,l.createSelector)([h,y],function(e,t){return null!=t?o.default.findWhere(e.parameters,{id:t}):null}),b=(t.getIsEditingParameter=function(e){return null!=e.dashboard.editingParameterId},function(e,t){return t.card}),_=(t.getParameterTarget=(0,l.createSelector)([g,b,function(e,t){return t.dashcard}],function(e,t,n){var r=o.default.findWhere(n.parameter_mappings,{card_id:t.id,parameter_id:e.id});return r&&r.target}),t.getMappingsByParameter=(0,l.createSelector)([s.getMetadata,v],function(e,t){if(!t)return{};var n={},r=[],i={},l=!0,s=!1,c=void 0;try{for(var f,p=t.ordered_cards[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var m=f.value,h=[m.card].concat(m.series),v=!0,y=!1,g=void 0;try{for(var b,_=(m.parameter_mappings||[])[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var E=b.value,w=o.default.findWhere(h,{id:E.card_id}),O=w&&(0,d.getParameterTargetFieldId)(E.target,w.dataset_query),S=e.field(O),C=S&&S.fieldValues()||[];C.length&&(i[E.parameter_id]=i[E.parameter_id]||{});var x=!0,k=!1,A=void 0;try{for(var T,P=C[Symbol.iterator]();!(x=(T=P.next()).done);x=!0){var j=T.value;i[E.parameter_id][j]=(i[E.parameter_id][j]||0)+1}}catch(e){k=!0,A=e}finally{try{!x&&P.return&&P.return()}finally{if(k)throw A}}var N=a({},E,{parameter_id:E.parameter_id,dashcard_id:m.id,card_id:E.card_id,field_id:O,values:C});n=(0,u.setIn)(n,[E.parameter_id,m.id,E.card_id],N),r.push(N)}}catch(e){y=!0,g=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw g}}}}catch(e){s=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(s)throw c}}var M={},R=!0,D=!1,L=void 0;try{for(var I,F=function(){var e=I.value;if(e.values&&e.values.length>0){var t=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.values.map(function(t){return i[e.parameter_id][t]})));n=(0,u.setIn)(n,[e.parameter_id,e.dashcard_id,e.card_id,"overlapMax"],t),M[e.parameter_id]=(M[e.parameter_id]||0)+1}},z=r[Symbol.iterator]();!(R=(I=z.next()).done);R=!0)F()}catch(e){D=!0,L=e}finally{try{!R&&z.return&&z.return()}finally{if(D)throw L}}var q=!0,B=!1,U=void 0;try{for(var V,G=r[Symbol.iterator]();!(q=(V=G.next()).done);q=!0){var H=V.value;n=(0,u.setIn)(n,[H.parameter_id,H.dashcard_id,H.card_id,"mappingsWithValues"],M[H.parameter_id]||0)}}catch(e){B=!0,U=e}finally{try{!q&&G.return&&G.return()}finally{if(B)throw U}}return n}));t.getParameters=(0,l.createSelector)([s.getMetadata,h,_],function(e,t,n){return(t&&t.parameters||[]).map(function(t){var r=o.default.flatten(o.default.map(n[t.id]||{},o.default.values)),i=r.every(function(e){return null!=e.field_id}),u=o.default.chain(r).map(function(e){return e.field_id}).uniq().filter(function(e){return null!=e}).value(),l=o.default.chain(u).map(function(t){return e.field(t)}).filter(function(e){return e}).map(function(e){return(e.target||e).id}).uniq().value();return a({},t,{field_ids:u,field_id:1===l.length?l[0]:null,hasOnlyFieldTargets:i})})}),t.makeGetParameterMappingOptions=function(){return(0,l.createSelector)([s.getMetadata,g,b],function(e,t,n){return c.getParameterMappingOptions(e,t,n)})}},195:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validators=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=d(["required"],["required"]),i=d(["must be a valid email address"],["must be a valid email address"]),o=d(["must be "," characters or less"],["must be "," characters or less"]),u=n(1),l=c(n(35)),s=c(n(14));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=t.validators={required:function(){return function(e){return!e&&(0,u.t)(a)}},email:function(){return function(e){return!l.default.validEmail(e)&&(0,u.t)(i)}},maxLength:function(e){return function(t){return t&&t.length>e&&(0,u.t)(o,e)}},passwordComplexity:function(){return function(e){return s.default.passwordComplexityDescription(e)}}};t.default=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];function n(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.reduce(function(e,t){return e||t.apply(void 0,n)},!1)}function a(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.map(function(e){return e.apply(void 0,n)}).filter(function(e){return e})}n.all=function(){return a};var i=!0,o=!1,u=void 0;try{for(var l,s=function(){var a=r(l.value,2),i=a[0],o=a[1];n[i]=function(){return e([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t),[o.apply(void 0,arguments)]))}},c=Object.entries(f)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)s()}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}return n}()},203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=y(["Unknown Segment"],["Unknown Segment"]),o=y(["Unknown Filter"],["Unknown Filter"]),u=y([""," selection"],[""," selection"]),l=h(n(139)),s=n(78),c=n(152),d=n(68),f=n(13),p=n(1),m=h(n(3));function h(e){return e&&e.__esModule?e:{default:e}}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function y(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),a(t,[{key:"replace",value:function(e){return null!=e?this._query.updateFilter(this._index,e):this._query.updateFilter(this._index,this)}},{key:"add",value:function(){return this._query.filter(this)}},{key:"remove",value:function(){return this._query.removeFilter(this._index)}},{key:"displayName",value:function(){if(this.isSegment()){var e=this.segment();return e?e.displayName():(0,p.t)(i)}if(this.isStandard()){var t=this.dimension(),n=this.operator(),r=t&&t.displayName(),a=n&&n.moreVerboseName,u=this.formattedArguments().join(" ");return(r||"")+" "+(a||"")+" "+u}return this.isCustom()?this._query.formatExpression(this):(0,p.t)(o)}},{key:"isValid",value:function(){if(this.isStandard()){var e=this.dimension();if(!e&&(0,d.isExpression)(this[1]))return!0;var t=this.query();if(!e||!t||!t.filterDimensionOptions().hasDimension(e))return!1;var n=this.operator();if(n){var r=this.arguments();if(r.length<n.fields.length)return!1;if(!m.default.all(r,function(e){return null!=e}))return!1}return!0}return this.isSegment()?!!this.segment():!!this.isCustom()}},{key:"isStandard",value:function(){return(0,c.isStandard)(this)}},{key:"isSegment",value:function(){return(0,c.isSegment)(this)}},{key:"isCustom",value:function(){return(0,c.isCustom)(this)}},{key:"isFieldFilter",value:function(){return(0,c.isFieldFilter)(this)}},{key:"segmentId",value:function(){if(this.isSegment())return this[1]}},{key:"segment",value:function(){if(this.isSegment())return this.metadata().segment(this.segmentId())}},{key:"dimension",value:function(){if(this.isFieldFilter())return this._query.parseFieldReference(this[1])}},{key:"field",value:function(){var e=this.dimension();return e&&e.field()}},{key:"operatorName",value:function(){return this[0]}},{key:"operator",value:function(){var e=this.dimension();return e?e.filterOperator(this.operatorName()):null}},{key:"setOperator",value:function(e){var t=this.dimension(),n=t&&t.filterOperator(e),r=[e,t&&t.mbql()];if(n){for(var a=0;a<n.fields.length;a++)void 0!==n.fields[a].default?r.push(n.fields[a].default):r.push(void 0);n.optionsDefaults&&r.push(n.optionsDefaults);var i=this.operator();if(i)for(var o=0;o<this.length-2;o++){var u=n.multi?n.fields[0]:n.fields[o],l=i.multi?i.fields[0]:i.fields[o];u&&l&&u.type===l.type&&void 0!==this[o+2]&&(r[o+2]=this[o+2])}}return this.set(r)}},{key:"setDimension",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).useDefaultOperator,n=void 0!==t&&t;if(!e)return this.set([]);var r=this._query.parseFieldReference(e);if(r&&(!this.isFieldFilter()||!r.isEqual(this.dimension()))){var a=r.filterOperator(this.operatorName())||n&&r.defaultFilterOperator(),i=a&&a.name,o=this.set(this.isFieldFilter()?[this[0],r.mbql()].concat(v(this.slice(2))):[null,r.mbql()]);return i&&o.operatorName()!==i?o.setOperator(i):o}return this}},{key:"setArgument",value:function(e,t){return this.set([].concat(v(this.slice(0,e+2)),[t],v(this.slice(e+3))))}},{key:"setArguments",value:function(e){return this.set([].concat(v(this.slice(0,2)),v(e)))}},{key:"filterOperators",value:function(e){var t=this.dimension();return t?t.filterOperators(e):null}},{key:"arguments",value:function(){return(0,c.hasFilterOptions)(this)?this.slice(2,-1):this.slice(2)}},{key:"formattedArguments",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this.dimension(),n=this.operator(),a=this.arguments();if(n&&n.multi&&a.length>e){var i=a.length;return[(0,p.ngettext)((0,p.msgid)(u,i),i+" selections",i)]}return t&&t.field().isDate()&&!t.field().isTime()?(0,s.generateTimeFilterValuesDescriptions)(this):a.map(function(e,t){return[e,(0,f.getFilterArgumentFormatOptions)(n,t)]}).filter(function(e){var t=r(e,2),n=t[0],a=t[1];return void 0!==n&&!a.hide}).map(function(e,t){var n=r(e,2),a=n[0];n[1];return a})}},{key:"isDimension",value:function(e){var t=this.dimension();return!!t&&t.isEqual(e)}},{key:"isOperator",value:function(e){var t=this.operator(),n="string"==typeof e?e:e&&e.name;return t&&t.name===n}}]),t}();t.default=g},204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=C(["snippet collection"],["snippet collection"]),o=C(["snippet collections"],["snippet collections"]),u=C(["Give your folder a name"],["Give your folder a name"]),l=C(["Something short but sweet"],["Something short but sweet"]),s=C(["Name is required"],["Name is required"]),c=C(["Name must be 100 characters or less"],["Name must be 100 characters or less"]),d=C(["Add a description"],["Add a description"]),f=C(["It's optional but oh, so helpful"],["It's optional but oh, so helpful"]),p=C(["Color"],["Color"]),m=C(["Color is required"],["Color is required"]),h=C(["Folder this should be in"],["Folder this should be in"]),v=S(n(3)),y=n(1),g=n(32),b=n(7),_=n(34),E=n(58),w=n(43),O=S(w);function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var x=(0,_.createEntity)({name:"snippetCollections",schema:E.SnippetCollectionSchema,api:v.default.mapObject(O.default.api,function(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return e.apply(void 0,[a({},t,{namespace:"snippets"})].concat(r))}}),displayNameOne:(0,y.t)(i),displayNameMany:(0,y.t)(o),objectActions:{setArchived:function(e,t,n){var r=e.id;return x.actions.update({id:r},{archived:t},(0,_.undo)(n,"folder",t?"archived":"unarchived"))},setCollection:function(e,t,n){var r=e.id;return x.actions.update({id:r},{parent_id:(0,w.canonicalCollectionId)(t&&t.id)},(0,_.undo)(n,"folder","moved"))},delete:null},selectors:{getExpandedCollectionsById:(0,g.createSelector)([function(e){return e.entities.snippetCollections},function(e){return e.entities.snippetCollections_list.null||[]}],function(e,t){return(0,w.getExpandedCollectionsById)(t.map(function(t){return e[t]}),null)})},createSelectors:function(e){var t=e.getObject,n=e.getFetched;return{getFetched:function(e,r){return n(e,r)||t(e,r)}}},objectSelectors:{getIcon:function(e){return"folder"}},form:{fields:[{name:"name",title:(0,y.t)(u),placeholder:(0,y.t)(l),validate:function(e){return!e&&(0,y.t)(s)||e&&e.length>100&&(0,y.t)(c)}},{name:"description",title:(0,y.t)(d),type:"text",placeholder:(0,y.t)(f),normalize:function(e){return e||null}},{name:"color",title:(0,y.t)(p),type:"hidden",initial:function(){return(0,b.color)("brand")},validate:function(e){return!e&&(0,y.t)(m)}},{name:"parent_id",title:(0,y.t)(h),type:"snippetCollection",normalize:w.canonicalCollectionId}]},getAnalyticsMetadata:function(e,t,n){r(e,1)[0],t.action}});t.default=x},206:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.warnings=t.updateLdapSettings=t.UPDATE_LDAP_SETTINGS=t.updateSlackSettings=t.UPDATE_SLACK_SETTINGS=t.clearEmailSettings=t.CLEAR_EMAIL_SETTINGS=t.sendTestEmail=t.SEND_TEST_EMAIL=t.updateEmailSettings=t.UPDATE_EMAIL_SETTINGS=t.updateSettings=t.UPDATE_SETTINGS=t.updateSetting=t.UPDATE_SETTING=t.initializeSettings=t.INITIALIZE_SETTINGS=t.refreshSettingsList=t.reloadSettings=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(18),i=n(17),o=n(191);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var s=t.reloadSettings=function(){return e=l(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t(d()),t((0,o.refreshSiteSettings)())]);case 2:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e},c="metabase/admin/settings/REFRESH_SETTINGS_LIST",d=t.refreshSettingsList=(0,a.createAction)(c,l(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.SettingsApi.list();case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return r({},e,{originalValue:e.value})}));case 4:case"end":return e.stop()}},e,void 0)}))),f=t.INITIALIZE_SETTINGS="metabase/admin/settings/INITIALIZE_SETTINGS",p=(t.initializeSettings=(0,a.createThunkAction)(f,function(){return e=l(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(s());case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),console.log("error fetching settings",e.t0),e.t0;case 9:case"end":return e.stop()}},e,void 0,[[0,5]])})),function(t,n){return e.apply(this,arguments)};var e}),t.UPDATE_SETTING="metabase/admin/settings/UPDATE_SETTING"),m=(t.updateSetting=(0,a.createThunkAction)(p,function(e){return t=l(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.SettingsApi.put(e);case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("error updating setting",e,t.t0),t.t0;case 9:return t.prev=9,t.next=12,n(s());case 12:return t.finish(9);case 13:case"end":return t.stop()}},t,this,[[0,5,9,13]])})),function(e,n){return t.apply(this,arguments)};var t}),t.UPDATE_SETTINGS="metabase/admin/settings/UPDATE_SETTINGS"),h=(t.updateSettings=(0,a.createThunkAction)(m,function(e){return t=l(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.SettingsApi.putAll(e);case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("error updating settings",e,t.t0),t.t0;case 9:return t.prev=9,t.next=12,n(s());case 12:return t.finish(9);case 13:case"end":return t.stop()}},t,this,[[0,5,9,13]])})),function(e,n){return t.apply(this,arguments)};var t}),t.UPDATE_EMAIL_SETTINGS="metabase/admin/settings/UPDATE_EMAIL_SETTINGS"),v=(t.updateEmailSettings=(0,a.createThunkAction)(h,function(e){return t=l(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.EmailApi.updateSettings(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),console.log("error updating email settings",e,t.t0),t.t0;case 10:return t.prev=10,t.next=13,n(s());case 13:return t.finish(10);case 14:case"end":return t.stop()}},t,this,[[0,6,10,14]])})),function(e,n){return t.apply(this,arguments)};var t}),t.SEND_TEST_EMAIL="metabase/admin/settings/SEND_TEST_EMAIL"),y=(t.sendTestEmail=(0,a.createThunkAction)(v,function(){return e=l(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.EmailApi.sendTest();case 3:e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),console.log("error sending test email",e.t0),e.t0;case 9:case"end":return e.stop()}},e,this,[[0,5]])})),function(t,n){return e.apply(this,arguments)};var e}),t.CLEAR_EMAIL_SETTINGS="metabase/admin/settings/CLEAR_EMAIL_SETTINGS"),g=(t.clearEmailSettings=(0,a.createAction)(y,function(){return i.EmailApi.clear()}),t.UPDATE_SLACK_SETTINGS="metabase/admin/settings/UPDATE_SLACK_SETTINGS"),b=(t.updateSlackSettings=(0,a.createThunkAction)(g,function(e){return t=l(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.SlackApi.updateSettings(e);case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("error updating slack settings",e,t.t0),t.t0;case 9:return t.prev=9,t.next=12,n(s());case 12:return t.finish(9);case 13:case"end":return t.stop()}},t,this,[[0,5,9,13]])})),function(e,n){return t.apply(this,arguments)};var t},{}),t.UPDATE_LDAP_SETTINGS="metabase/admin/settings/UPDATE_LDAP_SETTINGS"),_=(t.updateLdapSettings=(0,a.createThunkAction)(b,function(e){return t=l(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.LdapApi.updateSettings(e);case 3:t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("error updating LDAP settings",e,t.t0),t.t0;case 9:return t.prev=9,t.next=12,n(s());case 12:return t.finish(9);case 13:case"end":return t.stop()}},t,this,[[0,5,9,13]])})),function(e,n){return t.apply(this,arguments)};var t}),t.warnings=(0,a.handleActions)(u({},h,{next:function(e,t){return t.payload["with-corrections"]}}),{})),E=(0,a.handleActions)(u({},c,{next:function(e,t){return t.payload}}),[]);t.default=(0,a.combineReducers)({settings:E,warnings:_})},207:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),a=o(n(73)),i=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.setting,n=e.onChange,o=(e.disabled,e.autoFocus),u=e.errorMessage,l=e.fireOnChange,s=e.type,c=void 0===s?"text":s;return r.default.createElement(a.default,{className:(0,i.default)("Form-input",{SettingsInput:"password"!==c,SettingsPassword:"password"===c,"border-error bg-error-input":u}),type:c,value:t.value||"",placeholder:t.placeholder,onChange:l?function(e){return n(e.target.value)}:null,onBlurChange:l?null:function(e){return n(e.target.value)},autoFocus:o})};u.displayName="SettingInput",t.default=u},209:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.FormSection=t.FormFooter=t.FormMessage=t.FormSubmit=t.FormField=void 0;var r,a,i,o,u,l,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=(u=["An error occurred"],l=["An error occurred"],Object.freeze(Object.defineProperties(u,{raw:{value:Object.freeze(l)}}))),p=n(299);Object.defineProperty(t,"FormField",{enumerable:!0,get:function(){return p.CustomFormField}}),Object.defineProperty(t,"FormSubmit",{enumerable:!0,get:function(){return p.CustomFormSubmit}}),Object.defineProperty(t,"FormMessage",{enumerable:!0,get:function(){return p.CustomFormMessage}}),Object.defineProperty(t,"FormFooter",{enumerable:!0,get:function(){return p.CustomFormFooter}}),Object.defineProperty(t,"FormSection",{enumerable:!0,get:function(){return p.CustomFormSection}});var m=S(n(0)),h=S(n(2)),v=n(6),y=n(32),g=n(143),b=n(11),_=S(n(3)),E=n(1),w=S(p),O=S(n(614));function S(e){return e&&e.__esModule?e:{default:e}}function C(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var x=0,k=(0,g.reduxForm)()(function(e){var t,n=e.handleSubmit,r=e.submitState,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["handleSubmit","submitState"]),i=a.formComponent||(a.children?w.default:O.default);return m.default.createElement(i,d({},a,{handleSubmit:(t=C(regeneratorRuntime.mark(function e(){var t=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.apply(void 0,t);case 2:if(!r.failed){e.next=6;break}throw r.result;case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}},e,void 0)})),function(){return t.apply(this,arguments)})}))}),A=(0,v.connect)(function(){var e=x++;return function(t,n){var r=n.formName||"form_"+e;return{formName:r,values:(0,g.getValues)(t.form[r])}}})((i=a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.call(n),n.state={inlineFields:{}};var r=(0,y.createSelector)([function(e,t){return t.form},function(e,t){return t.validate},function(e,t){return t.initial},function(e,t){return t.normalize},function(e,t){return t.fields},function(e,t){return e.inlineFields}],function(e,t,n,r,a,i){var o=e||{validate:t,initial:n,normalize:r,fields:a||Object.values(i)};return d({},o,{fields:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return P.apply(void 0,[o.fields].concat(t)).map(function(e){return d({},e,i[e.name])})}})}),a=(0,y.createSelector)([r],function(e){return T(n=d({},t=e,{fields:function(e){return P(t.fields,e)},fieldNames:function(e){return["id"].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.fields(e).map(function(e){return e.name})))}}),"validate",{},function(e,t){return[e,t].filter(function(e){return e}).join(", ")}),T(n,"initial"),T(n,"normalize",function(e){return e}),T(n,"hidden"),n;var t,n}),i=(0,y.createSelector)([a,function(e,t){return t.initialValues||{}},function(e,t){return t.values||{}}],function(e,t,n){var r=e.initial(n),a={},i=!0,o=!1,u=void 0;try{for(var l,c=Object.keys(t)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value;"object"===s(t[f])&&"object"===s(r[f])&&(a[f]=d({},r[f],t[f]))}}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}return d({},t,r,a)}),u=(0,y.createSelector)([a,i,function(e,t){return t.values||{}}],function(e,t,n){return e.fieldNames(d({},t,n))});return n._getFormObject=function(){return a(n.state,n.props)},n._getFormDefinition=function(){return r(n.state,n.props)},n._getInitialValues=function(){return i(n.state,n.props)},n._getFieldNames=function(){return u(n.state,n.props)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.default.Component),c(t,[{key:"componentDidUpdate",value:function(e,t){var n=_.default.difference(Object.keys(this.state.inlineFields),Object.keys(t.inlineFields));n.length>0&&this.props.dispatch((0,g.initialize)(this.props.formName,this._getInitialValues(),n))}},{key:"getChildContext",value:function(){return{registerFormField:this._registerFormField,unregisterFormField:this._unregisterFormField}}},{key:"render",value:function(){var e=this.props.formName,t=this._getFormObject(),n=this._getInitialValues(),r=this._getFieldNames();return m.default.createElement(k,d({},this.props,{overwriteOnInitialValuesChange:!1,formObject:t,form:e,fields:r,initialValues:n,validate:this._validate,onSubmit:this._onSubmit,onChangeField:this._handleChangeField,submitState:this._state}))}}]),t}(),a.propTypes={form:h.default.object,onSubmit:h.default.func.isRequired,initialValues:h.default.object,formName:h.default.string},a.childContextTypes={registerFormField:h.default.func,unregisterFormField:h.default.func,fieldNames:h.default.array},o=function(){var e,t=this;this._state={submitting:!1,failed:!1,result:void 0},this._registerFormField=function(e){_.default.isEqual(t.state.inlineFields[e.name],e)||t.setState(function(t){return(0,b.assocIn)(t,["inlineFields",e.name],e)})},this._unregisterFormField=function(e){t.state.inlineFields[e.name]},this._validate=function(e,n){return!t._state.submitting&&t._state.failed&&(t._state.failed=!1,n.stopSubmit()),t._getFormObject().validate(e,n)},this._onSubmit=(e=C(regeneratorRuntime.mark(function e(n){var r,a,i,o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t._getFormObject(),t._state.submitting=!0,e.prev=2,a=r.normalize(n),e.next=6,t.props.onSubmit(a);case 6:return e.abrupt("return",t._state.result=e.sent);case 9:if(e.prev=9,e.t0=e.catch(2),console.error("Form submission error",e.t0),t._state.failed=!0,t._state.result=e.t0,!(e.t0&&e.t0.data&&e.t0.data.errors)){e.next=22;break}try{document.activeElement.blur()}catch(e){}throw i=new Set(t._getFieldNames()),o=Object.keys(e.t0.data.errors),u=o.some(function(e){return!i.has(e)}),d({_error:u?(0,E.t)(f):null},e.t0.data.errors);case 22:if(!e.t0){e.next=24;break}throw{_error:e.t0.data.message||e.t0.data};case 24:return e.prev=24,setTimeout(function(){return t._state.submitting=!1}),e.finish(24);case 27:case"end":return e.stop()}},e,t,[[2,9,24,27]])})),function(t){return e.apply(this,arguments)}),this._handleChangeField=function(e,n){return t.props.dispatch((0,g.change)(t.props.formName,e,n))}},r=i))||r;function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3],a=e[t];e[t]=function(i){for(var o=arguments.length,u=Array(o>1?o-1:0),l=1;l<o;l++)u[l-1]=arguments[l];var s,c,f=d({},P.apply(void 0,[a,i].concat(u))||P.apply(void 0,[n,i].concat(u))),p=!0,m=!1,h=void 0;try{for(var v,y=e.fields(i)[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var g=v.value,_=P.apply(void 0,[g[t],i&&(s=i,c=g.name,(0,b.getIn)(s,j(c)))].concat(u));void 0!==_&&N(f,g.name,_,r)}}catch(e){m=!0,h=e}finally{try{!p&&y.return&&y.return()}finally{if(m)throw h}}return f}}function P(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"==typeof e?e.apply(void 0,n):e}function j(e){return"string"==typeof e?e.split("."):e}function N(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e,t){return t};t=j(t);for(var a=0;a<t.length;a++)a===t.length-1?e[t[a]]=r(e[t[a]],n):e=e[t[a]]=e[t[a]]||{}}A.displayName="Form",t.default=A},21:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadMetadataForQueries=t.loadMetadataForQuery=t.fetchRealDatabasesWithMetadata=t.fetchRemapping=t.addRemappings=t.fetchSegmentRevisions=t.FETCH_SEGMENT_REVISIONS=t.fetchSegmentTable=t.FETCH_SEGMENT_TABLE=t.fetchSegmentFields=t.FETCH_SEGMENT_FIELDS=t.fetchMetricRevisions=t.FETCH_METRIC_REVISIONS=t.fetchMetricTable=t.FETCH_METRIC_TABLE=t.fetchRevisions=t.FETCH_REVISIONS=t.updateFieldDimension=t.UPDATE_FIELD_DIMENSION=t.deleteFieldDimension=t.DELETE_FIELD_DIMENSION=t.updateField=t.UPDATE_FIELD=t.addFields=t.ADD_FIELDS=t.addParamValues=t.ADD_PARAM_VALUES=t.updateFieldValues=t.UPDATE_FIELD_VALUES=t.fetchFieldValues=t.FETCH_FIELD_VALUES=t.fetchField=t.fetchTableMetadata=t.FETCH_TABLE_METADATA=t.fetchTables=t.updateTable=t.updateDatabase=t.fetchDatabaseMetadata=t.FETCH_DATABASE_METADATA=t.fetchRealDatabases=t.FETCH_REAL_DATABASES=t.updateSegment=t.fetchSegments=t.FETCH_SEGMENTS=t.updateMetricImportantFields=t.updateMetric=t.fetchMetrics=t.FETCH_METRICS=void 0;var r=n(99);Object.defineProperty(t,"FETCH_TABLE_METADATA",{enumerable:!0,get:function(){return r.FETCH_TABLE_METADATA}});var a=n(130);Object.defineProperty(t,"ADD_PARAM_VALUES",{enumerable:!0,get:function(){return a.ADD_PARAM_VALUES}}),Object.defineProperty(t,"ADD_FIELDS",{enumerable:!0,get:function(){return a.ADD_FIELDS}});var i=n(18),o=n(11),u=h(n(3)),l=n(27),s=n(17),c=h(n(69)),d=h(r),f=h(a),p=h(n(185)),m=h(n(184));function h(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var y=function(e){return console.warn("DEPRECATED: "+e)},g=(t.FETCH_METRICS=m.default.actions.fetchList.toString(),t.fetchMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return y("metabase/redux/metadata fetchMetrics"),m.default.actions.fetchList(null,{reload:e})}),b=(t.updateMetric=function(e){return y("metabase/redux/metadata updateMetric"),m.default.actions.update(e)},t.updateMetricImportantFields=(0,i.createThunkAction)("metabase/guide/UPDATE_METRIC_IMPORTANT_FIELDS",function(e,t){var n,r=this;return n=v(regeneratorRuntime.mark(function n(a,o){var u,l,c,d;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return l=u=["reference","guide","metric_important_fields",e],c=[["reference","guide"]],d=function(){var n=v(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.MetricApi.update_important_fields({metricId:e,important_field_ids:t});case 2:case"end":return n.stop()}},n,r)}));return function(){return n.apply(this,arguments)}}(),n.next=6,(0,i.updateData)({dispatch:a,getState:o,requestStatePath:u,existingStatePath:l,dependentRequestStatePaths:c,putData:d});case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}},n,r)})),function(e,t){return n.apply(this,arguments)}}),t.FETCH_SEGMENTS=p.default.actions.fetchList.toString(),t.fetchSegments=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return y("metabase/redux/metadata fetchSegments"),p.default.actions.fetchList(null,{reload:e})}),_=(t.updateSegment=function(e){return y("metabase/redux/metadata updateSegment"),p.default.actions.update(e)},t.FETCH_REAL_DATABASES=c.default.actions.fetchList.toString(),t.fetchRealDatabases=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return y("metabase/redux/metadata fetchRealDatabases"),c.default.actions.fetchList({include:"tables"},{reload:e})}),E=(t.FETCH_DATABASE_METADATA=c.default.actions.fetchDatabaseMetadata.toString(),t.fetchDatabaseMetadata=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y("metabase/redux/metadata fetchDatabaseMetadata"),c.default.actions.fetchDatabaseMetadata({id:e},{reload:t})}),w=(t.updateDatabase=function(e){y("metabase/redux/metadata updateDatabase");var t=u.default.omit(e,"tables","tables_lookup");return c.default.actions.update(t)},t.updateTable=function(e){y("metabase/redux/metadata updateTable");var t=u.default.omit(e,"fields","fields_lookup","aggregation_operators","metrics","segments");return d.default.actions.update(t)},t.fetchTables=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return y("metabase/redux/metadata fetchTables"),d.default.actions.fetchList(null,{reload:e})},t.fetchTableMetadata=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y("metabase/redux/metadata fetchTableMetadata"),d.default.actions.fetchMetadataAndForeignTables({id:e},{reload:t})}),O=(t.fetchField=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y("metabase/redux/metadata fetchField"),f.default.actions.fetch({id:e},{reload:t})},t.FETCH_FIELD_VALUES=f.default.actions.fetchFieldValues.toString(),t.fetchFieldValues=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y("metabase/redux/metadata fetchFieldValues"),f.default.actions.fetchFieldValues({id:e},t)},t.UPDATE_FIELD_VALUES=f.default.actions.updateFieldValues.toString(),t.updateFieldValues=function(e,t){return y("metabase/redux/metadata updateFieldValues"),f.default.actions.updateFieldValues({id:e},t)},t.addParamValues=function(e){return y("metabase/redux/metadata addParamValues"),f.default.actions.addParamValues(e)},t.addFields=function(e){return y("metabase/redux/metadata addFields"),f.default.actions.addFields(e)},t.UPDATE_FIELD=f.default.actions.update.toString(),t.updateField=function(e){y("metabase/redux/metadata updateField");var t=u.default.omit(e,"filter_operators_lookup");return f.default.actions.update(t)},t.DELETE_FIELD_DIMENSION=f.default.actions.deleteFieldDimension.toString(),t.deleteFieldDimension=function(e){return y("metabase/redux/metadata deleteFieldDimension"),f.default.actions.deleteFieldDimension({id:e})},t.UPDATE_FIELD_DIMENSION=f.default.actions.updateFieldDimension.toString(),t.updateFieldDimension=function(e,t){return y("metabase/redux/metadata updateFieldDimension"),f.default.actions.updateFieldDimension({id:e},t)},t.FETCH_REVISIONS="metabase/metadata/FETCH_REVISIONS"),S=t.fetchRevisions=(0,i.createThunkAction)(O,function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n=v(regeneratorRuntime.mark(function n(a,o){var u,l,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u=["revisions",e,t],l=["revisions"],c=function(){var n=v(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=e,n.t1=t,n.next=4,s.RevisionsApi.get({id:t,entity:e});case 4:return n.t2=n.sent,n.abrupt("return",{type:n.t0,id:n.t1,revisions:n.t2});case 6:case"end":return n.stop()}},n,void 0)}));return function(){return n.apply(this,arguments)}}(),n.next=5,(0,i.fetchData)({dispatch:a,getState:o,requestStatePath:u,existingStatePath:l,getData:c,reload:r});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)}}),C=t.FETCH_METRIC_TABLE="metabase/metadata/FETCH_METRIC_TABLE",x=(t.fetchMetricTable=(0,i.createThunkAction)(C,function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=v(regeneratorRuntime.mark(function t(n,r){var a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(g());case 2:return a=(0,o.getIn)(r(),["entities","metrics",e]),i=a.table_id,t.next=6,n(w(i));case 6:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)}}),t.FETCH_METRIC_REVISIONS="metabase/metadata/FETCH_METRIC_REVISIONS"),k=(t.fetchMetricRevisions=(0,i.createThunkAction)(x,function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=v(regeneratorRuntime.mark(function t(n,r){var a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n(S("metric",e)),n(g())]);case 2:return a=(0,o.getIn)(r(),["entities","metrics",e]),i=a.table_id,t.next=6,n(w(i));case 6:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)}}),t.FETCH_SEGMENT_FIELDS="metabase/metadata/FETCH_SEGMENT_FIELDS"),A=(t.fetchSegmentFields=(0,i.createThunkAction)(k,function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=v(regeneratorRuntime.mark(function t(n,r){var a,i,u,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(b());case 2:return a=(0,o.getIn)(r(),["entities","segments",e]),i=a.table_id,t.next=6,n(w(i));case 6:return u=(0,o.getIn)(r(),["entities","tables",i]),l=u.db_id,t.next=10,n(E(l));case 10:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)}}),t.FETCH_SEGMENT_TABLE="metabase/metadata/FETCH_SEGMENT_TABLE"),T=(t.fetchSegmentTable=(0,i.createThunkAction)(A,function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=v(regeneratorRuntime.mark(function t(n,r){var a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(b());case 2:return a=(0,o.getIn)(r(),["entities","segments",e]),i=a.table_id,t.next=6,n(w(i));case 6:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)}}),t.FETCH_SEGMENT_REVISIONS="metabase/metadata/FETCH_SEGMENT_REVISIONS"),P=(t.fetchSegmentRevisions=(0,i.createThunkAction)(T,function(e){var t;arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=v(regeneratorRuntime.mark(function t(n,r){var a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n(S("segment",e)),n(b())]);case 2:return a=(0,o.getIn)(r(),["entities","segments",e]),i=a.table_id,t.next=6,n(w(i));case 6:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)}}),t.addRemappings=function(e,t){return y("metabase/redux/metadata addRemappings"),f.default.actions.addRemappings({id:e},t)}),j=(t.fetchRemapping=(0,i.createThunkAction)("metabase/metadata/FETCH_REMAPPING",function(e,t){return n=v(regeneratorRuntime.mark(function n(r,a){var o,u,c,d,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=(0,l.getMetadata)(a()),u=o.field(t),c=u&&u.remappedField(),u&&c&&!u.hasRemappedValue(e)&&(d=(u.target||u).id,f=c.id,(0,i.fetchData)({dispatch:r,getState:a,requestStatePath:["entities","remapping",d,JSON.stringify(e)],getData:function(){var t=v(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.MetabaseApi.field_remapping({value:e,fieldId:d,remappedFieldId:f});case 2:(n=t.sent)&&r(P(u.id,[n]));case 4:case"end":return t.stop()}},t,void 0)}));return function(){return t.apply(this,arguments)}}()}));case 4:case"end":return n.stop()}},n,void 0)})),function(e,t){return n.apply(this,arguments)};var n}),t.fetchRealDatabasesWithMetadata=(0,i.createThunkAction)("metabase/metadata/FETCH_REAL_DATABASES_WITH_METADATA",function(){var e;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e=v(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(_());case 2:return r=(0,o.getIn)(n(),["entities","databases"]),e.next=5,Promise.all(Object.values(r).map(function(e){return t(E(e.id))}));case 5:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)}}),t.loadMetadataForQuery=function(e){return j([e])},t.loadMetadataForQueries=function(e){return function(t){return Promise.all(u.default.chain(e).map(function(e){return e.dependentMetadata()}).flatten().uniq(!1,function(e){return e.type+e.id}).map(function(e){var t=e.type,n=e.id,r=e.foreignTables;if("table"===t)return(r?d.default.actions.fetchMetadataAndForeignTables:d.default.actions.fetchMetadata)({id:n});console.warn("loadMetadataForQueries: type "+t+" not implemented")}).filter(function(e){return void 0!==e}).map(t).value()).catch(function(e){return console.error("Failed loading metadata for query",e)})}})},214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=d(o),l=d(n(2)),s=d(n(15)),c=n(104);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=[],m=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r._handleClick=function(e){s.default.findDOMNode(r).contains(e.target)||setTimeout(r._handleDismissal,0)},r._handleKeyPress=function(e){e.keyCode===c.KEYCODE_ESCAPE&&(e.preventDefault(),r._handleDismissal())},r._handleDismissal=function(e){r===p[p.length-1]&&r.props.handleDismissal(e)},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentDidMount",value:function(){var e=this;this._timeout=setTimeout(function(){p.push(e),s.default.findDOMNode(e).parentNode.style.zIndex=p.length+2,e.props.dismissOnEscape&&document.addEventListener("keydown",e._handleKeyPress,!1),e.props.dismissOnClickOutside&&window.addEventListener("mousedown",e._handleClick,!0)},0)}},{key:"componentWillUnmount",value:function(){var e=this;document.removeEventListener("keydown",this._handleKeyPress,!1),window.removeEventListener("mousedown",this._handleClick,!0),clearTimeout(this._timeout),setTimeout(function(){var t=p.indexOf(e);t>=0&&p.splice(t,1)},0)}},{key:"render",value:function(){return u.default.Children.only(this.props.children)}}]),t}(),r.propTypes={handleDismissal:l.default.func.isRequired},r.defaultProps={dismissOnClickOutside:!0,dismissOnEscape:!0},a);m.displayName="OnClickOutsideWrapper",t.default=m},217:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIsLiveResizable=t.getIsVisualized=t.getIsPreviewing=t.getIsPreviewable=t.getSnippetCollectionId=t.getModalSnippet=t.getNativeEditorSelectedText=t.getNativeEditorCursorOffset=t.getIsNativeEditorOpen=t.getIsNative=t.getQueryBuilderMode=t.getVisualizationSettings=t.getTransformedVisualization=t.getTransformedSeries=t.getRawSeries=t.getResultsMetadata=t.getQuestionAlerts=t.getIsRunnable=t.getQuery=t.getIsDirty=t.getIsObjectDetail=t.getMode=t.getOriginalQuestion=t.getLastRunQuestion=t.getQuestion=t.getIsResultDirty=t.getParameters=t.getDatabaseFields=t.getSampleDatasetId=t.getTableForeignKeys=t.getTableMetadata=t.getNativeDatabases=t.getTables=t.getDatabasesList=t.getTableForeignKeyReferences=t.getTableId=t.getDatabaseId=t.getQueryStartTime=t.getIsNew=t.getSettings=t.getFirstQueryResult=t.getQueryResults=t.getParameterValues=t.getLastRunCard=t.getOriginalCard=t.getCard=t.getIsRunning=t.getIsEditing=t.getIsShowingRawTable=t.getIsShowingDataReference=t.getIsShowingSnippetSidebar=t.getIsShowingTemplateTagsEditor=t.getUiControls=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(32),i=v(n(3)),o=n(11),u=(v(n(122)),n(47)),l=n(101),s=n(80),c=v(n(35)),d=v(n(39)),f=v(n(97)),p=v(n(69)),m=n(27),h=n(587);function v(e){return e&&e.__esModule?e:{default:e}}var y=t.getUiControls=function(e){return e.qb.uiControls},g=(t.getIsShowingTemplateTagsEditor=function(e){return y(e).isShowingTemplateTagsEditor},t.getIsShowingSnippetSidebar=function(e){return y(e).isShowingSnippetSidebar},t.getIsShowingDataReference=function(e){return y(e).isShowingDataReference},t.getIsShowingRawTable=function(e){return y(e).isShowingRawTable}),b=(t.getIsEditing=function(e){return y(e).isEditing},t.getIsRunning=function(e){return y(e).isRunning},t.getCard=function(e){return e.qb.card}),_=t.getOriginalCard=function(e){return e.qb.originalCard},E=t.getLastRunCard=function(e){return e.qb.lastRunCard},w=t.getParameterValues=function(e){return e.qb.parameterValues},O=t.getQueryResults=function(e){return e.qb.queryResults},S=t.getFirstQueryResult=function(e){return e.qb.queryResults&&e.qb.queryResults[0]},C=(t.getSettings=function(e){return e.settings.values},t.getIsNew=function(e){return e.qb.card&&!e.qb.card.id}),x=(t.getQueryStartTime=function(e){return e.qb.queryStartTime},t.getDatabaseId=(0,a.createSelector)([b],function(e){return e&&e.dataset_query&&e.dataset_query.database})),k=t.getTableId=(0,a.createSelector)([b],function(e){return(0,o.getIn)(e,["dataset_query","query","source-table"])}),A=(t.getTableForeignKeyReferences=function(e){return e.qb.tableForeignKeyReferences},t.getDatabasesList=function(e){return p.default.selectors.getList(e,{entityQuery:{include:"tables",saved:!0}})||[]}),T=(t.getTables=(0,a.createSelector)([x,A],function(e,t){if(null!=e&&t&&t.length>0){var n=i.default.findWhere(t,{id:e});if(n&&n.tables)return n.tables}return[]}),t.getNativeDatabases=(0,a.createSelector)([A],function(e){return e&&e.filter(function(e){return"write"===e.native_permissions})}),t.getTableMetadata=(0,a.createSelector)([k,m.getMetadata],function(e,t){return t.table(e)})),P=(t.getTableForeignKeys=(0,a.createSelector)([T],function(e){return e&&e.fks}),t.getSampleDatasetId=(0,a.createSelector)([A],function(e){var t=i.default.findWhere(e,{is_sample:!0});return t&&t.id}),t.getDatabaseFields=(0,a.createSelector)([x,function(e){return e.qb.databaseFields}],function(e,t){return[]}),t.getParameters=(0,a.createSelector)([b,w],function(e,t){return(0,s.getParametersWithExtras)(e,t)})),j=(0,a.createSelector)([E],function(e){return e&&e.dataset_query}),N=(0,a.createSelector)([b],function(e){return e&&e.dataset_query}),M=(0,a.createSelector)([S],function(e){return e&&e.json_query&&e.json_query.parameters||[]}),R=(0,a.createSelector)([M],function(e){return e.map(function(e){return e.value})}),D=(0,a.createSelector)([P],function(e){return e.map(function(e){return e.value}).filter(function(e){return void 0!==e})});function L(e,t){return e?(e.query&&t&&(e=(0,o.updateIn)(e,["query","fields"],function(e){return(e=e?[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e)):t.fields.map(function(e){return["field-id",e.id]})).sort(function(e,t){return JSON.stringify(t).localeCompare(JSON.stringify(e))})})),e.native&&null==e.native["template-tags"]&&(e=(0,o.assocIn)(e,["native","template-tags"],{})),e):e}t.getIsResultDirty=(0,a.createSelector)([j,N,R,D,T],function(e,t,n,r,a){return e=L(e,a),t=L(t,a),!c.default.equals(e,t)||!c.default.equals(n,r)});var I=t.getQuestion=(0,a.createSelector)([m.getMetadata,b,w],function(e,t,n){return e&&t&&new d.default(t,e,n)}),F=t.getLastRunQuestion=(0,a.createSelector)([m.getMetadata,E,w],function(e,t,n){return t&&e&&new d.default(t,e,n)}),z=t.getOriginalQuestion=(0,a.createSelector)([m.getMetadata,_],function(e,t){return e&&t&&new d.default(t,e)}),q=t.getMode=(0,a.createSelector)([F],function(e){return e&&e.mode()}),B=t.getIsObjectDetail=(0,a.createSelector)([q],function(e){return e&&"object"===e.name()}),U=t.getIsDirty=(0,a.createSelector)([I,z],function(e,t){return e&&e.isDirtyComparedTo(t)}),V=(t.getQuery=(0,a.createSelector)([I],function(e){return e&&e.query()}),t.getIsRunnable=(0,a.createSelector)([I],function(e){return e&&e.canRun()}),t.getQuestionAlerts=(0,a.createSelector)([h.getAlerts,b],function(e,t){return t&&t.id&&i.default.pick(e,function(e){return e.card.id===t.id})||{}}),t.getResultsMetadata=(0,a.createSelector)([S],function(e){return e&&e.data&&e.data.results_metadata}),t.getRawSeries=(0,a.createSelector)([I,O,B,j,g],function(e,t,n,a,i){var o=e&&e.display(),u=e&&e.settings();return n?o="object":i&&(o="table",u={"table.pivot":!1}),t&&e.atomicQueries().map(function(n,i){return{card:r({},e.card(),{display:o,visualization_settings:u,dataset_query:a}),data:t[i]&&t[i].data}})})),G=(0,a.createSelector)([V],function(e){return e&&(0,u.getVisualizationTransformed)((0,u.extractRemappings)(e))}),H=t.getTransformedSeries=(0,a.createSelector)([G],function(e){return e&&e.series}),W=t.getTransformedVisualization=(0,a.createSelector)([G],function(e){return e&&e.visualization}),Q=t.getVisualizationSettings=(0,a.createSelector)([H],function(e){return e&&(0,l.getComputedSettingsForSeries)(e)}),Y=(t.getQueryBuilderMode=(0,a.createSelector)([y],function(e){return e.queryBuilderMode}),t.getIsNative=(0,a.createSelector)([I],function(e){return e&&e.query()instanceof f.default})),K=t.getIsNativeEditorOpen=(0,a.createSelector)([Y,y],function(e,t){return e&&t.isNativeEditorOpen}),Z=(0,a.createSelector)([y],function(e){return e&&e.nativeEditorSelectedRange});function J(e,t){var n=t.row,r=t.column;return e.split("\n").slice(0,n).reduce(function(e,t){return e+t.length},0)+n+r}t.getNativeEditorCursorOffset=(0,a.createSelector)([Z,N],function(e,t){return null==e||null==t||null==t.native?null:J(t.native.query,e.end)}),t.getNativeEditorSelectedText=(0,a.createSelector)([Z,N],function(e,t){if(null==e||null==t||null==t.native)return null;var n=t.native.query,r=J(n,e.start),a=J(n,e.end);return n.slice(r,a)}),t.getModalSnippet=(0,a.createSelector)([y],function(e){return e&&e.modalSnippet}),t.getSnippetCollectionId=(0,a.createSelector)([y],function(e){return e&&e.snippetCollectionId});var X=t.getIsPreviewable=(0,a.createSelector)([K,I,C,U],function(e,t,n,r){return!1});t.getIsPreviewing=(0,a.createSelector)([X,y],function(e,t){return e&&t.isPreviewing}),t.getIsVisualized=(0,a.createSelector)([I,Q],function(e,t){return e&&("table"!==e.display()||Object.keys(e.settings()).some(function(e){return e.startsWith("table.")})||t&&t["table.pivot"])}),t.getIsLiveResizable=(0,a.createSelector)([H,W],function(e,t){try{return!e||!t||!t.isLiveResizable||t.isLiveResizable(e)}catch(e){return console.error(e),!1}})},218:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=h(["Enter some SQL here so you can reuse it later"],["Enter some SQL here so you can reuse it later"]),i=h(["Give your snippet a name"],["Give your snippet a name"]),o=h(["Current Customers"],["Current Customers"]),u=h(["Add a description"],["Add a description"]),l=h(["It's optional but oh, so helpful"],["It's optional but oh, so helpful"]),s=h(["Folder this should be in"],["Folder this should be in"]),c=n(1),d=n(34),f=n(195),p=(r=f)&&r.__esModule?r:{default:r},m=n(43);function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=[{name:"content",title:(0,c.t)(a),placholder:"AND canceled_at IS null\nAND account_type = 'PAID'",type:"text",className:"Form-input full text-monospace text-normal text-small bg-light text-spaced",rows:4,validate:p.default.required().maxLength(1e4)},{name:"name",title:(0,c.t)(i),placeholder:(0,c.t)(o),validate:p.default.required().maxLength(100)},{name:"description",title:(0,c.t)(u),placeholder:(0,c.t)(l),validate:p.default.maxLength(500)}],y=(0,d.createEntity)({name:"snippets",nameOne:"snippet",path:"/api/native-query-snippet",createSelectors:function(e){var t=e.getObject,n=e.getFetched;return{getFetched:function(e,r){return n(e,r)||t(e,r)}}},forms:{withoutVisibleCollectionPicker:{fields:[].concat(v,[{name:"collection_id",hidden:!0}])},withVisibleCollectionPicker:{fields:[].concat(v,[{name:"collection_id",title:(0,c.t)(s),type:"snippetCollection",normalize:m.canonicalCollectionId}])}}});t.default=y},219:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=d(u),s=d(n(2)),c=d(n(4));function d(e){return e&&e.__esModule?e:{default:e}}var f=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.borderWidth,n=e.borderStyle,r=e.borderColor,a=e.borderRadius,o=e.className,u=e.style,s=e.children,d=2*parseInt(s.props.size||s.props.width,10),f=i({width:d,height:d,borderWidth:t,borderStyle:n,borderColor:r,borderRadius:a},u);return l.default.createElement("div",{className:(0,c.default)("flex layout-centered",o),style:f},s)}}]),t}(),r.propTypes={borderWidth:s.default.string,borderStyle:s.default.string,borderColor:s.default.string,borderRadius:s.default.string,style:s.default.object,children:s.default.any.isRequired},r.defaultProps={borderWidth:"1px",borderStyle:"solid",borderColor:"currentcolor",borderRadius:"99px",style:{}},a);f.displayName="IconBorder",t.default=f},221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=m;var u=n(0),l=f(u),s=f(n(2)),c=f(n(4)),d=n(28);function f(e){return e&&e.__esModule?e:{default:e}}var p=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.dark,n=e.height,r=e.width;return l.default.createElement("svg",{className:(0,c.default)("Icon",{"text-brand":!t},{"text-white":t}),viewBox:"0 0 66 85",width:r,height:n,fill:"currentcolor"},l.default.createElement("path",{d:"M46.8253288,70.4935014 C49.5764899,70.4935014 51.8067467,68.1774705 51.8067467,65.3205017 C51.8067467,62.4635329 49.5764899,60.147502 46.8253288,60.147502 C44.0741676,60.147502 41.8439108,62.4635329 41.8439108,65.3205017 C41.8439108,68.1774705 44.0741676,70.4935014 46.8253288,70.4935014 Z M32.8773585,84.9779005 C35.6285197,84.9779005 37.8587764,82.6618697 37.8587764,79.8049008 C37.8587764,76.947932 35.6285197,74.6319011 32.8773585,74.6319011 C30.1261973,74.6319011 27.8959405,76.947932 27.8959405,79.8049008 C27.8959405,82.6618697 30.1261973,84.9779005 32.8773585,84.9779005 Z M32.8773585,70.4935014 C35.6285197,70.4935014 37.8587764,68.1774705 37.8587764,65.3205017 C37.8587764,62.4635329 35.6285197,60.147502 32.8773585,60.147502 C30.1261973,60.147502 27.8959405,62.4635329 27.8959405,65.3205017 C27.8959405,68.1774705 30.1261973,70.4935014 32.8773585,70.4935014 Z M18.9293882,70.4935014 C21.6805494,70.4935014 23.9108062,68.1774705 23.9108062,65.3205017 C23.9108062,62.4635329 21.6805494,60.147502 18.9293882,60.147502 C16.1782271,60.147502 13.9479703,62.4635329 13.9479703,65.3205017 C13.9479703,68.1774705 16.1782271,70.4935014 18.9293882,70.4935014 Z M46.8253288,56.0091023 C49.5764899,56.0091023 51.8067467,53.6930714 51.8067467,50.8361026 C51.8067467,47.9791337 49.5764899,45.6631029 46.8253288,45.6631029 C44.0741676,45.6631029 41.8439108,47.9791337 41.8439108,50.8361026 C41.8439108,53.6930714 44.0741676,56.0091023 46.8253288,56.0091023 Z M18.9293882,56.0091023 C21.6805494,56.0091023 23.9108062,53.6930714 23.9108062,50.8361026 C23.9108062,47.9791337 21.6805494,45.6631029 18.9293882,45.6631029 C16.1782271,45.6631029 13.9479703,47.9791337 13.9479703,50.8361026 C13.9479703,53.6930714 16.1782271,56.0091023 18.9293882,56.0091023 Z M46.8253288,26.8995984 C49.5764899,26.8995984 51.8067467,24.5835675 51.8067467,21.7265987 C51.8067467,18.8696299 49.5764899,16.553599 46.8253288,16.553599 C44.0741676,16.553599 41.8439108,18.8696299 41.8439108,21.7265987 C41.8439108,24.5835675 44.0741676,26.8995984 46.8253288,26.8995984 Z M32.8773585,41.5247031 C35.6285197,41.5247031 37.8587764,39.2086723 37.8587764,36.3517034 C37.8587764,33.4947346 35.6285197,31.1787037 32.8773585,31.1787037 C30.1261973,31.1787037 27.8959405,33.4947346 27.8959405,36.3517034 C27.8959405,39.2086723 30.1261973,41.5247031 32.8773585,41.5247031 Z M32.8773585,10.3459994 C35.6285197,10.3459994 37.8587764,8.02996853 37.8587764,5.17299969 C37.8587764,2.31603085 35.6285197,0 32.8773585,0 C30.1261973,0 27.8959405,2.31603085 27.8959405,5.17299969 C27.8959405,8.02996853 30.1261973,10.3459994 32.8773585,10.3459994 Z M32.8773585,26.8995984 C35.6285197,26.8995984 37.8587764,24.5835675 37.8587764,21.7265987 C37.8587764,18.8696299 35.6285197,16.553599 32.8773585,16.553599 C30.1261973,16.553599 27.8959405,18.8696299 27.8959405,21.7265987 C27.8959405,24.5835675 30.1261973,26.8995984 32.8773585,26.8995984 Z M18.9293882,26.8995984 C21.6805494,26.8995984 23.9108062,24.5835675 23.9108062,21.7265987 C23.9108062,18.8696299 21.6805494,16.553599 18.9293882,16.553599 C16.1782271,16.553599 13.9479703,18.8696299 13.9479703,21.7265987 C13.9479703,24.5835675 16.1782271,26.8995984 18.9293882,26.8995984 Z",opacity:"0.2"}),l.default.createElement("path",{d:"M60.773299,70.4935014 C63.5244602,70.4935014 65.754717,68.1774705 65.754717,65.3205017 C65.754717,62.4635329 63.5244602,60.147502 60.773299,60.147502 C58.0221379,60.147502 55.7918811,62.4635329 55.7918811,65.3205017 C55.7918811,68.1774705 58.0221379,70.4935014 60.773299,70.4935014 Z M4.98141795,70.3527958 C7.73257912,70.3527958 9.96283591,68.0367649 9.96283591,65.1797961 C9.96283591,62.3228273 7.73257912,60.0067964 4.98141795,60.0067964 C2.23025679,60.0067964 0,62.3228273 0,65.1797961 C0,68.0367649 2.23025679,70.3527958 4.98141795,70.3527958 Z M60.773299,56.0091023 C63.5244602,56.0091023 65.754717,53.6930714 65.754717,50.8361026 C65.754717,47.9791337 63.5244602,45.6631029 60.773299,45.6631029 C58.0221379,45.6631029 55.7918811,47.9791337 55.7918811,50.8361026 C55.7918811,53.6930714 58.0221379,56.0091023 60.773299,56.0091023 Z M32.8773585,56.0091023 C35.6285197,56.0091023 37.8587764,53.6930714 37.8587764,50.8361026 C37.8587764,47.9791337 35.6285197,45.6631029 32.8773585,45.6631029 C30.1261973,45.6631029 27.8959405,47.9791337 27.8959405,50.8361026 C27.8959405,53.6930714 30.1261973,56.0091023 32.8773585,56.0091023 Z M4.98141795,55.8683967 C7.73257912,55.8683967 9.96283591,53.5523658 9.96283591,50.695397 C9.96283591,47.8384281 7.73257912,45.5223973 4.98141795,45.5223973 C2.23025679,45.5223973 0,47.8384281 0,50.695397 C0,53.5523658 2.23025679,55.8683967 4.98141795,55.8683967 Z M60.773299,41.5247031 C63.5244602,41.5247031 65.754717,39.2086723 65.754717,36.3517034 C65.754717,33.4947346 63.5244602,31.1787037 60.773299,31.1787037 C58.0221379,31.1787037 55.7918811,33.4947346 55.7918811,36.3517034 C55.7918811,39.2086723 58.0221379,41.5247031 60.773299,41.5247031 Z M46.8253288,41.5247031 C49.5764899,41.5247031 51.8067467,39.2086723 51.8067467,36.3517034 C51.8067467,33.4947346 49.5764899,31.1787037 46.8253288,31.1787037 C44.0741676,31.1787037 41.8439108,33.4947346 41.8439108,36.3517034 C41.8439108,39.2086723 44.0741676,41.5247031 46.8253288,41.5247031 Z M60.773299,26.8995984 C63.5244602,26.8995984 65.754717,24.5835675 65.754717,21.7265987 C65.754717,18.8696299 63.5244602,16.553599 60.773299,16.553599 C58.0221379,16.553599 55.7918811,18.8696299 55.7918811,21.7265987 C55.7918811,24.5835675 58.0221379,26.8995984 60.773299,26.8995984 Z M18.9293882,41.5247031 C21.6805494,41.5247031 23.9108062,39.2086723 23.9108062,36.3517034 C23.9108062,33.4947346 21.6805494,31.1787037 18.9293882,31.1787037 C16.1782271,31.1787037 13.9479703,33.4947346 13.9479703,36.3517034 C13.9479703,39.2086723 16.1782271,41.5247031 18.9293882,41.5247031 Z M4.98141795,41.3839975 C7.73257912,41.3839975 9.96283591,39.0679667 9.96283591,36.2109978 C9.96283591,33.354029 7.73257912,31.0379981 4.98141795,31.0379981 C2.23025679,31.0379981 0,33.354029 0,36.2109978 C0,39.0679667 2.23025679,41.3839975 4.98141795,41.3839975 Z M4.98141795,26.8995984 C7.73257912,26.8995984 9.96283591,24.5835675 9.96283591,21.7265987 C9.96283591,18.8696299 7.73257912,16.553599 4.98141795,16.553599 C2.23025679,16.553599 0,18.8696299 0,21.7265987 C0,24.5835675 2.23025679,26.8995984 4.98141795,26.8995984 Z"}))}}]),t}(),r.defaultProps={height:32},r.propTypes={width:s.default.number,height:s.default.number,dark:s.default.bool},a);function m(e){var t=i(d.PLUGIN_LOGO_ICON_COMPONENTS,1)[0],n=void 0===t?p:t;return l.default.createElement(n,e)}p.displayName="DefaultLogoIcon",m.displayName="LogoIcon"},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=h(o),l=n(22),s=n(25),c=n(256),d=h(n(14)),f=h(n(280)),p=h(n(720)),m=h(n(4));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n(721);var y={bordered:s.IFRAMED,titled:!0},g=(0,l.withRouter)(r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={innerScroll:!0},v(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentWillMount",value:function(){var e=this;(0,s.initializeIframeResizer)(function(){return e.setState({innerScroll:!1})})}},{key:"render",value:function(){var e,t,n,r=this.props,i=r.className,o=r.children,l=r.actionButtons,s=r.location,h=r.parameters,v=r.parameterValues,g=r.setParameterValue,b=this.state.innerScroll,_=!d.default.hideEmbedBranding()||l&&l.length>0,E=a({},y,(0,c.parseHashOptions)(s.hash)),w=E.bordered,O=E.titled,S=E.theme,C=E.hide_parameters,x=O?this.props.name:null;return u.default.createElement("div",{className:(0,m.default)("EmbedFrame flex flex-column",i,(e={spread:b,"bordered rounded shadowed":w},t="Theme--"+S,n=!!S,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))},u.default.createElement("div",{className:(0,m.default)("flex flex-column flex-full relative",{"scroll-y":b})},x||h&&h.length>0?u.default.createElement("div",{className:"EmbedFrame-header flex align-center p1 sm-p2 lg-p3"},x&&u.default.createElement("div",{className:"h4 text-bold sm-h3 md-h2"},x),h&&h.length>0?u.default.createElement("div",{className:"flex ml-auto"},u.default.createElement(f.default,{parameters:h.map(function(e){return a({},e,{value:v&&v[e.id]})}),query:s.query,setParameterValue:g,syncQueryString:!0,hideParameters:C,isQB:!0})):null):null,u.default.createElement("div",{className:"flex flex-column relative full flex-full"},o)),_&&u.default.createElement("div",{className:"EmbedFrame-footer p1 md-p2 lg-p3 border-top flex-no-shrink flex align-center"},!d.default.hideEmbedBranding()&&u.default.createElement(p.default,{dark:S}),l&&u.default.createElement("div",{className:"flex-align-right text-medium"},l)))}}]),t}())||r;g.displayName="EmbedFrame",t.default=g},226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IS_EMBED_PREVIEW=void 0,t.initializeEmbedding=function(e){if(i.IFRAMED){var t=void 0,n=void 0;setInterval(function(){var e=window.location;t!==e.href&&(s({type:"location",location:a.default.pick(e,function(e){return"string"==typeof e})}),t=e.href);var r=(0,u.isFitViewportMode)()?{mode:"fit"}:{mode:"normal",height:document.body.scrollHeight};a.default.isEqual(n,r)||(s({type:"frame",frame:r}),n=r)},100),window.addEventListener("message",function(t){t.source===window.parent&&t.data.metabase&&"location"===t.data.metabase.type&&e.dispatch((0,r.push)(t.data.metabase.location))})}};var r=n(30),a=l(n(3)),i=n(25),o=l(n(14)),u=n(169);function l(e){return e&&e.__esModule?e:{default:e}}t.IS_EMBED_PREVIEW=i.IFRAMED_IN_SELF;function s(e){window.parent.postMessage({metabase:e},o.default.get("embedding-app-origin"))}},227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),o=(r=i)&&r.__esModule?r:{default:r},u=n(18);var l=function(e){var t=e.type,n=void 0===t?"text":t,r=e.placeholder,i=e.field,l=e.readOnly;return o.default.createElement("input",a({className:"Form-input full",type:n,placeholder:r,"aria-labelledby":i.name+"-label",readOnly:l},(0,u.formDomOnlyProps)(i)))};l.displayName="FormInputWidget",t.default=l},23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractQueryParams=t.newCollection=t.newPulse=t.newDashboard=t.newQuestionFlow=t.activity=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.question=s,t.newQuestion=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mode,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["mode"]),r=u.default.create(n).getUrl();return t?r.replace(/^\/question/,"/question/"+t):r},t.dashboard=f,t.modelToUrl=function(e,t){switch(e){case"card":return s(t);case"dashboard":return f(t);case"pulse":return p(t);default:return null}},t.pulse=p,t.pulseEdit=function(e){return"/pulse/"+e},t.tableRowsQuery=function(e,t,n,r){var a="?db="+e+"&table="+t;n&&(a+="&metric="+n);r&&(a+="&segment="+r);return s(null,a)},t.collection=function(e){return"/collection/"+(e||"root")},t.collectionPermissions=function(e){return"/collection/"+(e||"root")+"/permissions"},t.label=function(e){return"/questions/search?label="+encodeURIComponent(e.slug)},t.publicQuestion=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o.default.get("site-url")+"/public/question/"+e+(t?"."+t:"")},t.publicDashboard=function(e){return o.default.get("site-url")+"/public/dashboard/"+e},t.embedCard=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return o.default.get("site-url")+"/embed/question/"+e+(t?"."+t:"")},t.embedDashboard=function(e){return o.default.get("site-url")+"/embed/dashboard/"+e},t.userCollection=function(e){return"/collection/"+e+"/"},t.accountSettings=function(){return"/user/edit_current"},t.newUser=function(){return"/admin/people/new"},t.editUser=function(e){return"/admin/people/"+e+"/edit"},t.resetPassword=function(e){return"/admin/people/"+e+"/reset"},t.newUserSuccess=function(e){return"/admin/people/"+e+"/success"},t.deactivateUser=function(e){return"/admin/people/"+e+"/deactivate"},t.reactivateUser=function(e){return"/admin/people/"+e+"/reactivate"},t.browseDatabase=function(e){return"/browse/"+e.id},t.browseSchema=function(e){return"/browse/"+e.db.id+"/schema/"+e.schema_name},t.browseTable=function(e){return"/browse/"+e.db.id+"/schema/"+e.schema_name};var i=n(126),o=l(n(14)),u=l(n(39));function l(e){return e&&e.__esModule?e:{default:e}}t.activity="/activity",t.newQuestionFlow=function(){return"/question/new"},t.newDashboard=function(e){return"collection/"+e+"/new_dashboard"},t.newPulse=function(){return"/pulse/create"},t.newCollection=function(e){return"collection/"+e+"/new_collection"};function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t&&"object"===(void 0===t?"undefined":a(t))&&(t=(0,i.serializeCardForUrl)(t)),n&&"object"===(void 0===n?"undefined":a(n))&&(n=c(n).map(function(e){return e.map(encodeURIComponent).join("=")}).join("&")),t&&"#"!==t.charAt(0)&&(t="#"+t),n&&"?"!==n.charAt(0)&&(n="?"+n),null!=e?"/question/"+e+n+t:"/question"+n+t}var c=t.extractQueryParams=function(e){var t;return(t=[]).concat.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.entries(e).map(d)))},d=function(e){var t=r(e,2),n=t[0],a=t[1];return a instanceof Array?a.map(function(e){return[n,e]}):[[n,a]]};function f(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).addCardWithId;return null!=t?"/dashboard/"+e+"#add="+t:"/dashboard/"+e}function p(e){return"/pulse/"+e}},231:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=(r=o)&&r.__esModule?r:{default:r},l=n(6),s=n(150);t.default=function(e){return function(t){var r,o;return(0,l.connect)(function(t,r){return{entityDef:n(154)[e||("function"==typeof r.entityType?r.entityType(t,r):r.entityType)]}})((o=r=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._boundActionCreators={},t._bindActionCreators(e),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.default.Component),i(n,[{key:"componentWillReceiveProps",value:function(e){e.entityDef===this.props.entityDef&&e.dispatch===this.props.dispatch||(this._bindActionCreators(e),this.forceUpdate())}},{key:"_bindActionCreators",value:function(e){var t=e.entityDef,n=e.dispatch;this._boundActionCreators=(0,s.bindActionCreators)(t.actions,n)}},{key:"render",value:function(){return u.default.createElement(t,a({},this.props,this._boundActionCreators))}}]),n}(),r.displayName="EntityType",o))}}},232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(34),i=n(64),o=n(58);function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var l,s,c=(0,i.GET)("/api/database/:dbId/schemas"),d=(0,i.GET)("/api/database/:dbId/schema/:schemaName");t.default=(0,a.createEntity)({name:"schemas",schema:o.SchemaSchema,api:{list:(s=u(regeneratorRuntime.mark(function e(t){var n,r=t.dbId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}throw new Error("Schemas can only be listed for a particular dbId");case 2:return e.next=4,c({dbId:r});case 4:return n=e.sent,e.abrupt("return",n.map(function(e){return{id:(0,o.generateSchemaId)(r,e),name:e,database:{id:r}}}));case 6:case"end":return e.stop()}},e,void 0)})),function(e){return s.apply(this,arguments)}),get:(l=u(regeneratorRuntime.mark(function e(t){var n,a,i,u,l,s=t.id;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,o.parseSchemaId)(s),a=r(n,2),i=a[0],u=a[1],i&&void 0!==u){e.next=3;break}throw new Error("Schemas ID is of the form dbId:schemaName");case 3:return e.next=5,d({dbId:i,schemaName:u});case 5:return l=e.sent,e.abrupt("return",{id:s,name:u,tables:l,database:{id:i}});case 7:case"end":return e.stop()}},e,void 0)})),function(e){return l.apply(this,arguments)})}})},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.MONTH_DAY_OPTIONS=t.DAY_OF_WEEK_OPTIONS=t.AM_PM_OPTIONS=t.HOUR_OPTIONS=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=A(["Sunday"],["Sunday"]),l=A(["Monday"],["Monday"]),s=A(["Tuesday"],["Tuesday"]),c=A(["Wednesday"],["Wednesday"]),d=A(["Thursday"],["Thursday"]),f=A(["Friday"],["Friday"]),p=A(["Saturday"],["Saturday"]),m=A(["First"],["First"]),h=A(["Last"],["Last"]),v=A(["15th (Midpoint)"],["15th (Midpoint)"]),y=A(["Calendar Day"],["Calendar Day"]),g=A(["your Metabase timezone"],["your Metabase timezone"]),b=n(0),_=k(b),E=k(n(2)),w=k(n(42)),O=k(n(14)),S=n(10),C=n(1),x=k(n(3));function k(e){return e&&e.__esModule?e:{default:e}}function A(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=t.HOUR_OPTIONS=x.default.times(12,function(e){return{name:(0===e?12:e)+":00",value:e}}),P=t.AM_PM_OPTIONS=[{name:"AM",value:0},{name:"PM",value:1}],j=t.DAY_OF_WEEK_OPTIONS=[{name:(0,C.t)(u),value:"sun"},{name:(0,C.t)(l),value:"mon"},{name:(0,C.t)(s),value:"tue"},{name:(0,C.t)(c),value:"wed"},{name:(0,C.t)(d),value:"thu"},{name:(0,C.t)(f),value:"fri"},{name:(0,C.t)(p),value:"sat"}],N=t.MONTH_DAY_OPTIONS=[{name:(0,C.t)(m),value:"first"},{name:(0,C.t)(h),value:"last"},{name:(0,C.t)(v),value:"mid"}],M=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,b.Component),o(t,[{key:"handleChangeProperty",value:function(e,t){var n,r,a,o=i({},this.props.schedule,(a=t,(r=e)in(n={})?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n));"schedule_type"===e?("hourly"===t&&(o=i({},o,{schedule_day:null,schedule_frame:null,schedule_hour:null})),"hourly"!==t&&(o=i({},o,{schedule_hour:o.schedule_hour||0})),"daily"===t&&(o=i({},o,{schedule_day:null,schedule_frame:null})),"weekly"===t&&(o=i({},o,{schedule_day:"mon",schedule_frame:null})),"monthly"===t&&(o=i({},o,{schedule_frame:"first",schedule_day:"mon"}))):"schedule_frame"===e&&"mid"===t&&(o=i({},o,{schedule_day:null}));var u={name:e,value:t};this.props.onScheduleChange(o,u)}},{key:"renderMonthlyPicker",value:function(){var e=this,t=this.props.schedule,n=j.slice(0);return n.unshift({name:(0,C.t)(y),value:null}),_.default.createElement("span",{className:"flex align-center"},_.default.createElement("span",{className:"h4 text-bold mx1"},"on the"),_.default.createElement(w.default,{className:"h4 text-bold bg-white",value:t.schedule_frame,onChange:function(t){var n=t.target.value;return e.handleChangeProperty("schedule_frame",n)},options:N}),"mid"!==t.schedule_frame&&_.default.createElement("span",{className:"mx1"},_.default.createElement(w.default,{className:"h4 text-bold bg-white",value:t.schedule_day,onChange:function(t){var n=t.target.value;return e.handleChangeProperty("schedule_day",n)},options:n})))}},{key:"renderDayPicker",value:function(){var e=this,t=this.props.schedule;return _.default.createElement("span",{className:"flex align-center"},_.default.createElement("span",{className:"h4 text-bold mx1"},"on"),_.default.createElement(w.default,{className:"h4 text-bold bg-white",value:t.schedule_day,onChange:function(t){var n=t.target.value;return e.handleChangeProperty("schedule_day",n)},options:j}))}},{key:"renderHourPicker",value:function(){var e=this,t=this.props,n=t.schedule,r=t.textBeforeSendTime,a=isNaN(n.schedule_hour)?8:n.schedule_hour,i=a%12,o=a>=12?1:0,u=O.default.get("report-timezone-short");return _.default.createElement("div",{className:"mt1"},_.default.createElement("div",{className:"flex align-center"},_.default.createElement("span",{className:"h4 text-bold mr1"},"at"),_.default.createElement(w.default,{className:"mr1 h4 text-bold bg-white",value:i,options:T,onChange:function(t){var n=t.target.value;return e.handleChangeProperty("schedule_hour",n+12*o)}}),_.default.createElement(w.default,{className:"h4 text-bold bg-white",value:o,onChange:function(t){var n=t.target.value;return e.handleChangeProperty("schedule_hour",i+12*n)},options:P})),r&&_.default.createElement("div",{className:"mt2 h4 text-bold text-medium border-top pt2"},r," ",0===i?12:i,":00"," ",o?"PM":"AM"," ",u,", ",(0,C.t)(g),"."))}},{key:"render",value:function(){var e=this,t=this.props,n=t.schedule,r=t.scheduleOptions,a=t.textBeforeInterval,i=n.schedule_type;return _.default.createElement("div",{className:"mt1"},_.default.createElement("div",{className:"flex align-center"},_.default.createElement("span",{className:"h4 text-bold mr1"},a),_.default.createElement(w.default,{className:"h4 text-bold bg-white",value:i,onChange:function(t){var n=t.target.value;return e.handleChangeProperty("schedule_type",n)},options:r,optionNameFn:function(e){return(0,S.capitalize)(e)},optionValueFn:function(e){return e}}),"monthly"===i&&this.renderMonthlyPicker(),"weekly"===i&&this.renderDayPicker()),("daily"===i||"weekly"===i||"monthly"===i)&&this.renderHourPicker())}}]),t}(),r.propTypes={schedule:E.default.object.isRequired,scheduleOptions:E.default.array.isRequired,textBeforeInterval:E.default.string,textBeforeSendTime:E.default.string,onScheduleChange:E.default.func.isRequired},a);M.displayName="SchedulePicker",t.default=M},234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isTokenType=t.lexerWithRecovery=t.Any=t.UnclosedDoubleQuotedString=t.UnclosedSingleQuotedString=t.UnclosedBracketQuotedString=t.UnclosedQuotedString=t.RecoveryToken=t.lexer=t.allTokens=t.WhiteSpace=t.DoubleQuotedString=t.SingleQuotedString=t.BracketQuotedString=t.RParen=t.LParen=t.Comma=t.Case=t.ExpressionFunctionName=t.AggregationFunctionName=t.FunctionName=t.BooleanOperatorBinary=t.BooleanOperatorUnary=t.FilterOperator=t.Div=t.Multi=t.MultiplicativeOperator=t.Minus=t.Plus=t.AdditiveOperator=t.Operator=t.NumberLiteral=t.StringLiteral=t.IdentifierString=t.Identifier=t.CLAUSE_TOKENS=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getSubTokenTypes=function(e){return e.categoryMatches.map(function(e){return fe.get(e)})};var a=n(376),i=l(n(437)),o=l(n(265)),u=n(181);function l(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=t.CLAUSE_TOKENS=new Map;function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=u.MBQL_CLAUSES[e];if(!n)throw new Error("MBQL_CLAUSE: "+n+" is missing");var o=n.displayName,l=n.tokenName,s=void 0===l?o:l;if(!s)throw new Error("MBQL_CLAUSE: "+n+" is missing a tokenName or displayName");var d=(0,a.createToken)(r({name:s,pattern:new RegExp((0,i.default)(o),"i"),longer_alt:f.PATTERN.test(o)?f:null},t));return c.set(d,n),d}var f=t.Identifier=(0,a.createToken)({name:"Identifier",pattern:/(\w|\.)+/,label:"identfier"}),p=t.IdentifierString=(0,a.createToken)({name:"IdentifierString",pattern:a.Lexer.NA,label:"identfier"}),m=t.StringLiteral=(0,a.createToken)({name:"StringLiteral",pattern:a.Lexer.NA,label:"string"}),h=t.NumberLiteral=(0,a.createToken)({name:"NumberLiteral",pattern:/-?(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?/,label:"number"}),v=t.Operator=(0,a.createToken)({name:"Operator",pattern:a.Lexer.NA}),y=t.AdditiveOperator=(0,a.createToken)({name:"AdditiveOperator",pattern:a.Lexer.NA,categories:[v]}),g=(t.Plus=d("+",{categories:[y]}),t.Minus=d("-",{categories:[y]}),t.MultiplicativeOperator=(0,a.createToken)({name:"MultiplicativeOperator",pattern:a.Lexer.NA,categories:[v]})),b=(t.Multi=d("*",{categories:[g]}),t.Div=d("/",{categories:[g]}),t.FilterOperator=(0,a.createToken)({name:"FilterOperator",pattern:a.Lexer.NA,categories:[v]})),_=!0,E=!1,w=void 0;try{for(var O,S=Array.from(u.FILTER_OPERATORS)[Symbol.iterator]();!(_=(O=S.next()).done);_=!0){d(O.value,{categories:[b]})}}catch(e){E=!0,w=e}finally{try{!_&&S.return&&S.return()}finally{if(E)throw w}}var C=t.BooleanOperatorUnary=(0,a.createToken)({name:"BooleanOperatorUnary",pattern:a.Lexer.NA,label:"boolean operator"}),x=!0,k=!1,A=void 0;try{for(var T,P=Array.from(u.BOOLEAN_UNARY_OPERATORS)[Symbol.iterator]();!(x=(T=P.next()).done);x=!0){d(T.value,{categories:[C]})}}catch(e){k=!0,A=e}finally{try{!x&&P.return&&P.return()}finally{if(k)throw A}}var j=t.BooleanOperatorBinary=(0,a.createToken)({name:"BooleanOperatorBinary",pattern:a.Lexer.NA,label:"boolean operator"}),N=!0,M=!1,R=void 0;try{for(var D,L=Array.from(u.BOOLEAN_BINARY_OPERATORS)[Symbol.iterator]();!(N=(D=L.next()).done);N=!0){d(D.value,{categories:[j]})}}catch(e){M=!0,R=e}finally{try{!N&&L.return&&L.return()}finally{if(M)throw R}}var I=t.FunctionName=(0,a.createToken)({name:"FunctionName",pattern:a.Lexer.NA,label:"function name"}),F=t.AggregationFunctionName=(0,a.createToken)({name:"AggregationFunctionName",pattern:a.Lexer.NA,categories:[I]}),z=!0,q=!1,B=void 0;try{for(var U,V=Array.from(u.AGGREGATION_FUNCTIONS)[Symbol.iterator]();!(z=(U=V.next()).done);z=!0){d(U.value,{categories:[F]})}}catch(e){q=!0,B=e}finally{try{!z&&V.return&&V.return()}finally{if(q)throw B}}var G=t.ExpressionFunctionName=(0,a.createToken)({name:"ExpressionFunctionName",pattern:a.Lexer.NA,categories:[I]}),H=!0,W=!1,Q=void 0;try{for(var Y,K=Array.from(u.EXPRESSION_FUNCTIONS)[Symbol.iterator]();!(H=(Y=K.next()).done);H=!0){d(Y.value,{categories:[G]})}}catch(e){W=!0,Q=e}finally{try{!H&&K.return&&K.return()}finally{if(W)throw Q}}t.Case=d("case");var Z=t.Comma=(0,a.createToken)({name:"Comma",pattern:",",label:"comma"}),J=t.LParen=(0,a.createToken)({name:"LParen",pattern:"(",label:"opening parenthesis"}),X=t.RParen=(0,a.createToken)({name:"RParen",pattern:")",label:"closing parenthesis"}),$=function(e){return"literal"===u.EDITOR_QUOTES.characters[e]?[m]:"identifier"===u.EDITOR_QUOTES.characters[e]?[p]:[]},ee=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new RegExp(e+"(?:[^\\\\"+e+"]|\\\\(?:[bfnrtv"+e+"\\\\/]|u[0-9a-fA-F]{4}))*"+(t?e:""))},te=t.BracketQuotedString=(0,a.createToken)({name:"BracketQuotedString",pattern:/\[[^\]]*\]/,categories:$("[")}),ne=t.SingleQuotedString=(0,a.createToken)({name:"SingleQuotedString",pattern:ee("'"),categories:$("'")}),re=t.DoubleQuotedString=(0,a.createToken)({name:"DoubleQuotedString",pattern:ee('"'),categories:$('"')}),ae=t.WhiteSpace=(0,a.createToken)({name:"WhiteSpace",pattern:/\s+/,group:"whitespace"}),ie=t.allTokens=[ae,J,X,Z,v,y,g,b,C,j,I,F,G].concat(s(c.keys()),[m,h,te,ne,re,p,f]),oe=(t.lexer=new a.Lexer(ie,{ensureOptimizations:!0}),t.RecoveryToken=(0,a.createToken)({name:"RecoveryToken",pattern:a.Lexer.NA})),ue=t.UnclosedQuotedString=(0,a.createToken)({name:"UnclosedQuotedString",pattern:a.Lexer.NA}),le=t.UnclosedBracketQuotedString=(0,a.createToken)({name:"UnclosedBracketQuotedString",pattern:/\[[^\]]*/,categories:[oe,ue].concat(s($("[")))}),se=t.UnclosedSingleQuotedString=(0,a.createToken)({name:"UnclosedSingleQuotedString",pattern:ee("'",!1),categories:[oe,ue].concat(s($("'")))}),ce=t.UnclosedDoubleQuotedString=(0,a.createToken)({name:"UnclosedDoubleQuotedString",pattern:ee('"',!1),categories:[oe,ue].concat(s($('"')))}),de=t.Any=(0,a.createToken)({name:"Any",pattern:/(.|\n)+/,categories:[oe]}),fe=(t.lexerWithRecovery=new a.Lexer([].concat(s(ie),[oe,ue,le,se,ce,de])),new Map(ie.map(function(e){return[e.tokenTypeIdx,e]}))),pe=t.isTokenType=(0,o.default)(function(e,t){return e===t||e.CATEGORIES.some(function(e){return pe(e,t)})},function(e,t){return e.tokenTypeIdx+","+t.tokenTypeIdx})},235:function(e,t){e.exports={LegendHeader:"_14YpV",LegendItem:"_1zU60",Legend:"_2tUFa",none:"_3YdyC",vertical:"_1BBNM",horizontal:"_1TLy7"}},236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=f(o),l=f(n(5)),s=f(n(29)),c=f(n(67)),d=f(n(4));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){return e.href?u.default.createElement("a",e):u.default.createElement("span",e)},m=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.color,r=e.showDot,a=e.showTitle,i=e.isMuted,o=e.showTooltip,f=e.showDotTooltip,m=e.onMouseEnter,h=e.onMouseLeave,v=e.className,y=e.description,g=e.onClick,b=e.infoClassName;return u.default.createElement(p,{className:(0,d.default)(v,"LegendItem","no-decoration flex align-center fullscreen-normal-text fullscreen-night-text",{mr1:a,muted:i,"cursor-pointer":g}),style:{overflowX:"hidden",flex:"0 1 auto"},onMouseEnter:m,onMouseLeave:h,onClick:g},r&&u.default.createElement(s.default,{tooltip:t,isEnabled:o&&f},u.default.createElement("div",{className:(0,d.default)("flex-no-shrink","inline-block circular"),style:{width:13,height:13,margin:4,marginRight:8,backgroundColor:n}})),a&&u.default.createElement("div",{className:"flex align-center overflow-hidden"},u.default.createElement(c.default,{showTooltip:o},t),y&&u.default.createElement("div",{className:"hover-child ml1 flex align-center text-medium"},u.default.createElement(s.default,{tooltip:y,maxWidth:"22em"},u.default.createElement(l.default,{className:b,name:"info"})))))}}]),t}(),r.propTypes={},r.defaultProps={showDot:!0,showTitle:!0,isMuted:!1,showTooltip:!0,showDotTooltip:!0},a);m.displayName="LegendItem",t.default=m},237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["Break out by ",""],a=["Break out by ",""],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=c(n(0)),u=n(1),l=c(n(327)),s=c(n(26));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){return function(r){var a=r.question,c=r.clicked,d=a.query();if(!(d instanceof s.default))return[];if(c&&(void 0===c.value||"aggregation"!==c.column.source))return[];var f=c&&c.dimensions||[],p=d.breakoutOptions(null,n);return 0===p.count?[]:[{name:"pivot-by-"+e.toLowerCase(),section:"breakout",title:c?e:o.default.createElement("span",null,(0,u.jt)(i,o.default.createElement("span",{className:"text-dark"},e.toLowerCase()))),icon:t,popover:function(e){var t=e.onChangeCardAndRun,n=e.onClose;return o.default.createElement(l.default,{query:d,breakoutOptions:p,onChangeBreakout:function(e){var n=a.pivot([e],f).card();n&&t({nextCard:n})},onClose:n,alwaysExpanded:!0})}}]}}},238:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i,o=(r=["Location"],a=["Location"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),u=n(1),l=n(13),s=n(237),c=(i=s)&&i.__esModule?i:{default:i};t.default=(0,c.default)((0,u.t)(o),"location",function(e){return(0,l.isAddress)(e)})},239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i,o=(r=["Time"],a=["Time"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),u=n(1),l=n(13),s=n(237),c=(i=s)&&i.__esModule?i:{default:i};t.default=(0,c.default)((0,u.t)(o),"clock",function(e){return(0,l.isDate)(e)})},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cardHasBecomeDirty=t.MAX_SERIES=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=v(["Average"],["Average"]),o=v(["Count"],["Count"]),u=v(["Sum"],["Sum"]),l=v(["Distinct"],["Distinct"]),s=v(["Standard Deviation"],["Standard Deviation"]);t.columnsAreValid=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};"string"==typeof e&&(e=[e]);if(!t||!Array.isArray(e))return!1;var r={},a=!0,i=!1,o=void 0;try{for(var u,l=t.cols[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value;r[s.name]=s}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return e.reduce(function(e,t){return e&&(null==t||r[t]&&n(r[t]))},!0)},t.getAvailableCanvasHeight=function(e){var t=e.parentElement,n=E("height",t),r=E("padding-top",t),a=E("padding-bottom",t);return n-r-a-3},t.getAvailableCanvasWidth=function(e){var t=e.parentElement,n=E("width",t),r=E("padding-left",t),a=E("padding-right",t);return n-r-a},t.computeSplit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.map(function(e,t){return t}).filter(function(e){return t.indexOf(e)<0&&n.indexOf(e)<0}),a=n.length>0,i=function(t){return w(t[0].map(function(t){return e[t]}),a)+w(t[1].map(function(t){return e[t]}),a)},o=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return 0===t.length?[[n,r]]:[].concat(y(e(t.slice(1),n.concat([t[0]]),r)),y(e(t.slice(1),n,r.concat([t[0]]))))}(r,t,n),u=void 0,l=void 0,s=!0,c=!1,d=void 0;try{for(var f,p=o[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var m=f.value,h=i(m);(!u||h<l)&&(u=m,l=h)}}catch(e){c=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(c)throw d}}return t.length>0||n.length>0?u:u&&u.sort(function(e,t){return e[0]-t[0]})},t.getFriendlyName=function(e){if(S.test(e.name)){var t=O[e.display_name.toLowerCase()];if(t)return t}return e.display_name},t.isSameSeries=function(e,t){return(e&&e.length)===(t&&t.length)&&c.default.zip(e,t).reduce(function(e,t){var n=a(t,2),r=n[0],i=n[1],o=r.data===i.data,u=(r.card&&r.card.display)===(i.card&&i.card.display),l=(r.card&&JSON.stringify(r.card.visualization_settings))===(i.card&&JSON.stringify(i.card.visualization_settings));return e&&o&&u&&l},!0)},t.colorShades=function(e,t){return c.default.range(t).map(function(n){return C(e,1-Math.min(.25,1/t)*n)})},t.colorShade=C,t.getColumnCardinality=k,t.getColumnExtent=function(e,t,n){var r=e[n];A.has(r)||A.set(r,d.default.extent(t,function(e){return e[n]}));return A.get(r)},t.getCardAfterVisualizationClick=function(e,t){if(T(e,t)){var n=!e.id,a=!!t.original_card_id;return r({},e,{original_card_id:a?t.original_card_id:n?t.id:e.id,id:null})}return r({},e,{original_card_id:e.id})},t.getDefaultDimensionAndMetric=function(e){var t=P(e,1,1);return{dimension:t.dimensions[0],metric:t.metrics[0]}},t.getDefaultDimensionsAndMetrics=P,t.computeMaxDecimalsForValues=function(e,t){try{var n=Intl.NumberFormat("en",t),r=0,a=!0,i=!1,o=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value,c=n.formatToParts(s),d=c.find(function(e){return"fraction"===e.type}),f=d?d.value.length:0;f>r&&(r=f)}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return r}catch(e){return}};var c=h(n(3)),d=h(n(36)),f=n(1),p=h(n(273)),m=n(13);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function y(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var g=t.MAX_SERIES=100,b=-100,_=2;function E(e,t){var n=document.defaultView.getComputedStyle(t,null).getPropertyValue(e);return n?parseFloat(n.replace("px","")):0}function w(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=d.default.extent((t=[]).concat.apply(t,y(e))),a=r[1]-r[0];return n&&0===e.length?b:0===a?0:e.reduce(function(e,t){return e+Math.pow(a/(t[1]-t[0]),_)},0)}var O={avg:(0,f.t)(i),count:(0,f.t)(o),sum:(0,f.t)(u),distinct:(0,f.t)(l),stddev:(0,f.t)(s)},S=new RegExp("^("+Object.keys(O).join("|")+")(_\\d+)?$");function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.match(/#(?:(..)(..)(..)|(.)(.)(.))/);if(!n)return e;var r=(null!=n[1]?n.slice(1,4):n.slice(4,7)).map(function(e){return parseInt(e,16)}),a=Math.min.apply(Math,y(r)),i=Math.max.apply(Math,y(r));return"#"+r.map(function(e){return Math.round(a+(i-a)*t*(e/255)).toString(16)}).join("")}var x=new WeakMap;function k(e,t,n){var r=e[n];if(!x.has(r)){var a=(0,p.default)(t);x.set(r,a.dimension(function(e){return e[n]}).group().size())}return x.get(r)}var A=new WeakMap;var T=t.cardHasBecomeDirty=function(e,t){return!c.default.isEqual(t.dataset_query,e.dataset_query)||t.display!==e.display};function P(e){var t=a(e,1)[0].data,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!t)return{dimensions:[null],metrics:[null]};var i=t.cols,o=t.rows,u=[],l=[],s=i.filter(function(e){return(0,m.isMetric)(e)}),c=i.filter(function(e){return(0,m.isDimension)(e)&&!(0,m.isMetric)(e)});return c.length<=n&&1===s.length?(u=c,l=s):1===c.length&&s.length<=r&&(u=c,l=s),2===u.length&&((0,m.isDate)(u[1])&&!(0,m.isDate)(u[0])?u.reverse():k(i,o,i.indexOf(u[0]))<k(i,o,i.indexOf(u[1]))&&u.reverse()),u.length>1&&k(i,o,i.indexOf(u[1]))>g&&u.pop(),{dimensions:u.length>0?u.map(function(e){return e.name}):[null],metrics:l.length>0?l.map(function(e){return e.name}):[null]}}},240:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(34),i=n(64),o=n(58),u=n(43);function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var s,c,d=Object.keys(o.ENTITIES_SCHEMA_MAP),f=(0,i.GET)("/api/search"),p=(0,i.GET)("/api/collection/:collection/items");t.default=(0,a.createEntity)({name:"search",path:"/api/search",api:{list:(s=regeneratorRuntime.mark(function e(){var t,n,a,i,o,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.collection){e.next=10;break}if(t=s.collection,n=s.archived,a=s.model,i=s.namespace,o=l(s,["collection","archived","model","namespace"]),!(Object.keys(o).length>0)){e.next=4;break}throw new Error("search with `collection` filter does not support these filters: "+Object.keys(o).join(", "));case 4:return e.next=6,p({collection:t,archived:n,model:a,namespace:i});case 6:return e.t0=function(e){return r({collection_id:(0,u.canonicalCollectionId)(t),archived:n||!1},e)},e.abrupt("return",e.sent.map(e.t0));case 10:return e.abrupt("return",f(s));case 11:case"end":return e.stop()}},e,void 0)}),c=function(){var e=s.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(){return c.apply(this,arguments)})},schema:o.ObjectUnionSchema,wrapEntity:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=n(154)[(0,o.entityTypeForObject)(e)];return r?r.wrapEntity(e,t):(console.warn("Couldn't find entity for object",e),e)},actionShouldInvalidateLists:function(e){var t=n(154),r=!0,a=!1,i=void 0;try{for(var o,u=d[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){if(t[o.value].actionShouldInvalidateLists(e))return!0}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return!1}})},241:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.currentUser=t.clearCurrentUser=t.CLEAR_CURRENT_USER=t.loadCurrentUser=t.LOAD_CURRENT_USER=t.refreshCurrentUser=t.REFRESH_CURRENT_USER=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(18),o=n(147),u=n(165),l=n(17);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=t.REFRESH_CURRENT_USER="metabase/user/REFRESH_CURRENT_USER",d=t.refreshCurrentUser=(0,i.createAction)(c,function(){try{return l.UserApi.current()}catch(e){return null}}),f=t.LOAD_CURRENT_USER="metabase/user/LOAD_CURRENT_USER",p=(t.loadCurrentUser=(0,i.createThunkAction)(f,function(){return e=regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n().currentUser){e.next=3;break}return e.next=3,t(d());case 3:case"end":return e.stop()}},e,void 0)}),t=function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})},function(e,n){return t.apply(this,arguments)};var e,t}),t.CLEAR_CURRENT_USER="metabase/user/CLEAR_CURRENT_USER");t.clearCurrentUser=(0,i.createAction)(p),t.currentUser=(0,i.handleActions)((s(r={},u.LOGOUT,{next:function(e,t){t.payload;return null}}),s(r,p,{next:function(e,t){return null}}),s(r,c,{next:function(e,t){return t.payload}}),s(r,o.CLOSE_QB_NEWB_MODAL,{next:function(e,t){t.payload;return a({},e,{is_qbnewb:!1})}}),r),null)},242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MULTIPLE_TIMEZONES=t.UNEXPECTED_QUERY_TIMEZONE=t.UNAGGREGATED_DATA_WARNING=t.INVALID_DATE_WARNING=t.NULL_DIMENSION_WARNING=void 0;var r=c(["Data includes missing dimension values."],["Data includes missing dimension values."]),a=c(['We encountered an invalid date: "','"'],['We encountered an invalid date: "','"']),i=c(['"','" is an unaggregated field: if it has more than one value at a point on the x-axis, the values will be summed.'],['"','" is an unaggregated field: if it has more than one value at a point on the x-axis, the values will be summed.']),o=c(["The query for this chart was run in "," rather than "," due to database or driver constraints."],["The query for this chart was run in "," rather than "," due to database or driver constraints."]),u=c(["This chart contains queries run in multiple timezones: ",""],["This chart contains queries run in multiple timezones: ",""]);t.nullDimensionWarning=function(){return{key:d,text:(0,s.t)(r)}},t.invalidDateWarning=function(e){return{key:f,text:(0,s.t)(a,e)}},t.unaggregatedDataWarning=function(e){return{key:p,text:(0,s.t)(i,(0,l.getFriendlyName)(e))}},t.unexpectedTimezoneWarning=function(e){var t=e.results_timezone,n=e.requested_timezone;return{key:m,text:(0,s.t)(o,t,n)}},t.multipleTimezoneWarning=function(e){var t=e.join(", ");return{key:h,text:(0,s.t)(u,t)}};var l=n(24),s=n(1);function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=t.NULL_DIMENSION_WARNING="NULL_DIMENSION_WARNING";var f=t.INVALID_DATE_WARNING="INVALID_DATE_WARNING";var p=t.UNAGGREGATED_DATA_WARNING="UNAGGREGATED_DATA_WARNING";var m=t.UNEXPECTED_QUERY_TIMEZONE="UNEXPECTED_QUERY_TIMEZONE";var h=t.MULTIPLE_TIMEZONES="MULTIPLE_TIMEZONES"},248:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EDITOR_QUOTES=t.DISPLAY_QUOTES=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(181);Object.defineProperty(t,"DISPLAY_QUOTES",{enumerable:!0,get:function(){return i.DISPLAY_QUOTES}}),Object.defineProperty(t,"EDITOR_QUOTES",{enumerable:!0,get:function(){return i.EDITOR_QUOTES}}),t.format=d;var o,u=n(3),l=(o=u)&&o.__esModule?o:{default:o},s=n(68);function c(e){return Array.isArray(e)?e:Array.from(e)}function d(e){var t,n,i,o,u,f,p,m,h,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||l.default.isEqual(e,[]))return"";if((0,s.isNumberLiteral)(e))return h=e,JSON.stringify(h);if((0,s.isStringLiteral)(e))return(0,s.formatStringLiteral)(e,v);if((0,s.isOperator)(e))return function(e,t){var n=c(e),a=n[0],i=n.slice(1);(0,s.hasOptions)(i)&&(i=i.slice(0,-1));var o=(0,s.getExpressionName)(a)||a,u=i.map(function(e){var n=(0,s.isOperator)(e)&&s.OPERATOR_PRECEDENCE[a]>s.OPERATOR_PRECEDENCE[e[0]];return d(e,r({},t,{parens:n}))}),l=s.MBQL_CLAUSES[a],f=l&&1===l.args.length?o+" "+u[0]:u.join(" "+o+" ");return t.parens?"("+f+")":f}(e,v);if((0,s.isFunction)(e))return function(e,t){var n=c(e),r=n[0],a=n.slice(1);(0,s.hasOptions)(a)&&(a=a.slice(0,-1));var i=(0,s.getExpressionName)(r),o=a.map(function(e){return d(e,t)});return 0===a.length?i:i+"("+o.join(", ")+")"}(e,v);if((0,s.isDimension)(e))return function(e,t){var n=t.query;if(n){var r=n.parseFieldReference(e);return(0,s.formatDimensionName)(r,t)}throw new Error("`query` is a required parameter to format expressions")}(e,v);if((0,s.isMetric)(e))return function(e,t){var n=a(e,2)[1],r=t.query,i=l.default.findWhere(r.table().metrics,{id:n});if(!i)throw"metric with ID does not exist: "+n;return(0,s.formatMetricName)(i,t)}(e,v);if((0,s.isSegment)(e))return function(e,t){var n=a(e,2)[1],r=t.query,i=l.default.findWhere(r.table().segments,{id:n});if(!i)throw"segment with ID does not exist: "+i;return(0,s.formatSegmentName)(i,t)}(e,v);if((0,s.isCase)(e))return t=v,(n=a(e,3))[0],i=n[1],o=n[2],u=void 0===o?{}:o,f=(0,s.getExpressionName)("case"),p=i.map(function(e){var n=a(e,2),r=n[0],i=n[1];return d(r,t)+", "+d(i,t)}).join(", "),m=void 0!==u.default?", "+d(u.default,t):"",f+"("+p+m+")";throw new Error("Unknown MBQL clause "+JSON.stringify(e))}},249:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countLines=void 0,t.createMultiwordSearchRegex=function(e){if(e)return new RegExp(i.default.map(e.split(/\s+/),o).join(".*"),"i")},t.regexpEscape=o,t.caseInsensitiveSearch=function(e,t){return!t||null!=e&&e.toLowerCase().indexOf(t.toLowerCase())>=0};var r,a=n(3),i=(r=a)&&r.__esModule?r:{default:r};function o(e){return e.replace(/[\^\$\\\.\*\+\?\(\)\[\]\{\}\|]/g,"\\$&")}t.countLines=function(e){return e.split(/\n/g).length}},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.isObscured=function(e,t){if(!document.elementFromPoint)return!1;var n=e.getBoundingClientRect();t=t||{top:Math.round(n.height/2),left:Math.round(n.width/2)};var r={left:n.x+t.left,top:n.y+t.top},a=document.elementFromPoint(r.left,r.top);return!e.contains(a)},t.elementIsInView=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.getBoundingClientRect(),a=[];for(;null!=e.parentElement;)a.push(e.parentElement.getBoundingClientRect()),e=e.parentElement;return a.every(function(e){var a=Math.min(r.right,e.right)-Math.max(r.left,e.left),i=Math.min(r.bottom,e.bottom)-Math.max(r.top,e.top),o=a/r.width,u=i/r.height;return o+.01>t&&u+.01>n})},t.getSelectionPosition=o,t.setSelectionPosition=u,t.saveSelection=function(e){var t=o(e);return function(){return u(e,t)}},t.getCaretPosition=l,t.setCaretPosition=s,t.saveCaretPosition=function(e){var t=l(e);return function(){return s(e,t)}},t.addCSSRule=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if("insertRule"in f){var r=f.insertRule(e+"{"+t+"}",n);return f.cssRules[r]}if("addRule"in f){var a=f.addRule(e,t,n);return f.rules[a]}},t.constrainToScreen=function(e,t,n){if(!e)return!1;if("bottom"===t){var r=window.innerHeight+a(),i=e.getBoundingClientRect().bottom-r;if(i+n>0)return e.style.maxHeight=e.getBoundingClientRect().height-i-n+"px",!0}else{if("top"!==t)throw new Error("Direction "+t+" not implemented");var o=a(),u=o-e.getBoundingClientRect().top;if(u+n>0)return e.style.maxHeight=e.getBoundingClientRect().height-u-n+"px",!0}return!1},t.forceRedraw=function(e){e.style.display="none",e.offsetHeight,e.style.display=""},t.moveToBack=function(e){e&&e.parentNode&&e.parentNode.insertBefore(e,e.parentNode.firstChild)},t.moveToFront=function(e){e&&e.parentNode&&e.parentNode.appendChild(e)},t.open=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.openInSameWindow,r=void 0===n?function(e){return m(e,!1)}:n,a=t.openInBlankWindow,i=void 0===a?function(e){return m(e,!0)}:a,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["openInSameWindow","openInBlankWindow"]);h(e,o)?i(e):r(e)},t.shouldOpenInBlankWindow=h,t.isSameOrigin=y,t.getUrlTarget=function(e){return i&&y(e)?"_self":"_top"},t.removeAllChildren=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},t.parseDataUri=function(e){var t=e&&e.match(/^data:(?:([^;]+)(?:;([^;]+))?)?(;base64)?,(.*)$/);if(t){var n=r(t,5),a=n[1],i=n[2],o=n[3],u=n[4];return"base64"!==i||o||(o=i,i=void 0),{mimeType:a,charset:i,data:o?atob(u):u,base64:o?u:btoa(u)}}return null},t.clipPathReference=function(e){return"url("+window.location.href.replace(/#.*$/,"")+"#"+e+")"},t.initializeIframeResizer=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};if(!i)return;window.iFrameResizer?(console.error("iFrameResizer resizer already defined."),e()):(window.iFrameResizer={autoResize:!0,heightCalculationMethod:"bodyScroll",readyCallback:e},n.e(0).then(function(e){n(1006)}.bind(null,n)).catch(n.oe))},t.isEventOverElement=function(e,t){var n=e.clientX,r=e.clientY,a=t.getBoundingClientRect(),i=a.top,o=a.bottom,u=a.left,l=a.right;return r>=i&&r<=o&&n>=u&&n<=l};t.getScrollX=function(){return void 0===window.scrollX?window.pageXOffset:window.scrollX};var a=t.getScrollY=function(){return void 0===window.scrollY?window.pageYOffset:window.scrollY},i=t.IFRAMED=function(){try{return window.self!==window.top}catch(e){return!0}}();window.METABASE=!0;t.IFRAMED_IN_SELF=function(){try{return window.self!==window.top&&window.top.METABASE}catch(e){return!1}}(),t.HAS_LOCAL_STORAGE=function(){try{return window.localStorage,!0}catch(e){return console.warn("localStorage not available:",e),!1}}();function o(e){if(e.setSelectionRange||e.createTextRange)return[e.selectionStart,e.selectionEnd];try{var t=window.getSelection().getRangeAt(0).cloneRange(),n=t.startContainer,r=t.startOffset;t.setStart(e,0);var a=t.toString().length;return t.setEnd(n,r),[t.toString().length,a]}catch(e){return[0,0]}}function u(e,t){var n=r(t,2),a=n[0],i=n[1];if(e.setSelectionRange)e.focus(),e.setSelectionRange(a,i);else if(e.createTextRange){var o=e.createTextRange();o.collapse(!0),o.moveEnd("character",i),o.moveStart("character",a),o.select()}else{var u=window.getSelection(),l=c(e,a),s=c(e,i);u.removeAllRanges();var d=new Range;d.setStart(l.node,l.position),d.setEnd(s.node,s.position),u.addRange(d)}}function l(e){return o(e)[1]}function s(e,t){u(e,[t,t])}function c(e,t){var n=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,function(e){return t>e.textContent.length?(t-=e.textContent.length,NodeFilter.FILTER_REJECT):NodeFilter.FILTER_ACCEPT}).nextNode();return{node:n||e,position:n?t:0}}var d,f=((d=document.createElement("style")).appendChild(document.createTextNode("/* dynamic stylesheet */")),document.head.appendChild(d),d.sheet);var p=void 0;function m(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("a");n.style.display="none",document.body.appendChild(n);try{n.href=e,n.rel="noopener",t&&(n.target="_blank"),n.click()}finally{n.remove()}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.event,r=void 0===n?window.event:n,a=t.blank,i=void 0!==a&&a,o=t.blankOnMetaKey,u=void 0===o||o,l=t.blankOnDifferentOrigin,s=void 0===l||l;return!!i||(!!(u&&(r&&null!=r.metaKey?r.metaKey:p))||!(!s||y(e)))}window.addEventListener("mouseup",function(e){p=e.metaKey},!0);var v=document.createElement("a");function y(e){return v.href=e,v.origin===window.location.origin}},250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=(o=["Custom Expression"],u=["Custom Expression"],Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(u)}}))),d=n(0),f=O(d),p=n(1),m=n(7),h=O(n(274)),v=O(n(5)),y=O(n(539)),g=O(n(541)),b=O(n(558)),_=O(n(434)),E=O(n(251)),w=(O(n(26)),O(n(203)));function O(e){return e&&e.__esModule?e:{default:e}}var S=(0,p.t)(c),C=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));i.call(n);var r=e.filter instanceof w.default?e.filter:null;return n.state={filter:r,choosingField:!r,editingFilter:!!r&&r.isCustom()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),s(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state.filter;t&&this.props.query!==e.query&&this.setState({filter:t.setQuery(e.query)})}},{key:"setFilter",value:function(e){this.setState({filter:e}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.style,a=t.query,i=t.showFieldPicker,o=t.fieldPickerTitle,u=t.isSidebar,s=t.isTopLevel,c=t.showCustom,d=this.state,p=d.filter,w=d.editingFilter,O=d.choosingField;if(w)return f.default.createElement(_.default,{title:S,query:a,expression:p?p.raw():null,startRule:"boolean",isValid:p&&p.isValid(),onChange:this.handleFilterChange,onBack:function(){return e.setState({editingFilter:!1})},onDone:this.handleCommit});var C=p&&p.dimension();return O||!C?f.default.createElement("div",{className:n,style:l({minWidth:300,overflowY:"auto"},r)},o&&f.default.createElement(E.default,{className:"mx1 my2",title:o}),f.default.createElement(h.default,{style:{color:(0,m.color)("filter")},maxHeight:1/0,dimension:C,sections:s?a.topLevelFilterFieldOptionSections():(p&&p.query()||a).filterFieldOptionSections(p,{includeSegments:c}),onChangeDimension:function(t){return e.handleDimensionChange(t)},onChangeOther:function(t){e.handleCommitFilter(t.filter,t.query)},width:u?null:"100%",alwaysExpanded:s||u}),c&&f.default.createElement("div",{style:{color:(0,m.color)("filter")},className:"List-section List-section--togglable",onClick:function(){return e.setState({editingFilter:!0})}},f.default.createElement("div",{className:"List-section-header mx2 py2 flex align-center hover-parent hover--opacity cursor-pointer"},f.default.createElement("span",{className:"List-section-icon mr1 flex align-center"},f.default.createElement(v.default,{name:"filter"})),f.default.createElement("h3",{className:"List-section-title text-wrap"},S)))):f.default.createElement("div",{className:n,style:l({minWidth:300},r)},f.default.createElement(y.default,{className:u?"px1 pt1":"p1 mb1 border-bottom",isSidebar:u,filter:p,onFilterChange:this.handleFilterChange,onBack:function(){return e.setState({choosingField:!0})},showFieldPicker:i}),f.default.createElement(g.default,{className:u?"p1":"px1 pt1 pb1",isSidebar:u,filter:p,onFilterChange:this.handleFilterChange,onCommit:this.handleCommit,minWidth:u?null:300,maxWidth:u?null:410}),f.default.createElement(b.default,{className:u?"p1":"px1 pb1",isSidebar:u,filter:p,onFilterChange:this.handleFilterChange,onCommit:this.props.noCommitButton?null:this.handleCommit,isNew:!this.props.filter}))}}]),t}(),r.defaultProps={style:{},showFieldPicker:!0,showCustom:!0},i=function(){var e=this;this.handleCommit=function(){e.handleCommitFilter(e.state.filter,e.props.query)},this.handleCommitFilter=function(t,n){!t||t instanceof w.default||(t=new w.default(t,null,n)),t&&t.isValid()&&e.props.onChangeFilter&&(e.props.onChangeFilter(t),e.props.onClose&&e.props.onClose())},this.handleDimensionChange=function(t){var n=e.state.filter;n&&n.query()===t.query()||(n=new w.default([],null,t.query())),e.setFilter(n.setDimension(t.mbql(),{useDefaultOperator:!0})),e.setState({choosingField:!1})},this.handleFilterChange=function(t){var n=e.state.filter||new w.default([],null,e.props.query);e.setFilter(n.set(t))}},a);C.displayName="ViewFilterPopover",t.default=C},251:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["Back"],a=["Back"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}})));t.default=d;var o=c(n(0)),u=c(n(4)),l=n(1),s=c(n(5));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.className,n=e.title,r=e.icon,a=e.onBack,c=e.onClose,d=!n&&!!a;return d&&(n=(0,l.t)(i)),o.default.createElement("div",{className:(0,u.default)("flex align-center",t)},o.default.createElement("span",{className:(0,u.default)("flex align-center text-heavy h3",{"cursor-pointer text-brand-hover":a,"h5 text-medium text-uppercase":d}),onClick:a},(a||r)&&o.default.createElement(s.default,{name:r||"chevronleft",className:"mr1"}),n),c&&o.default.createElement("a",{className:"flex-align-right text-medium text-brand-hover no-decoration",onClick:c},o.default.createElement(s.default,{name:"close",size:18})))}d.displayName="SidebarHeader"},252:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=s(a),o=s(n(274)),u=s(n(31)),l=s(n(137));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={sections:[]},r.handleChangeDimension=function(e,t){r.props.onFieldChange(e.mbql(),t)},r.handleChangeOther=function(e){e.filter&&r.props.onFilterChange&&r.props.onFilterChange(e.filter)},c(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"componentWillMount",value:function(){this._updateSections(this.props)}},{key:"componentWillReceiveProps",value:function(e){this._updateSections(e)}},{key:"_updateSections",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fieldOptions,n=void 0===t?{dimensions:[],fks:[]}:t,r=e.segmentOptions,a=void 0===r?[]:r,i=new l.default(n).sections({extraItems:a.map(function(e){return{filter:["segment",e.id],name:e.name,icon:"star_outline",className:"List-item--segment"}})});this.setState({sections:i})}},{key:"render",value:function(){var e=this.props,t=e.field,n=e.query,r=e.metadata,a=t&&(n?n.parseFieldReference(t):u.default.parseMBQL(t,r));return i.default.createElement(o.default,{sections:this.state.sections,dimension:a,onChangeDimension:this.handleChangeDimension,onChangeOther:this.handleChangeOther,className:this.props.className,maxHeight:this.props.maxHeight,width:this.props.width,alwaysExpanded:this.props.alwaysExpanded,useOriginalDimension:this.props.useOriginalDimension,enableSubDimensions:this.props.enableSubDimensions})}}]),t}();d.displayName="FieldList",t.default=d},255:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARAMETER_SECTIONS=t.PARAMETER_OPTIONS=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=z(["Month and Year"],["Month and Year"]),o=z(["Like January, 2016"],["Like January, 2016"]),u=z(["Quarter and Year"],["Quarter and Year"]),l=z(["Like Q1, 2016"],["Like Q1, 2016"]),s=z(["Single Date"],["Single Date"]),c=z(["Like January 31, 2016"],["Like January 31, 2016"]),d=z(["Date Range"],["Date Range"]),f=z(["Like December 25, 2015 - February 14, 2016"],["Like December 25, 2015 - February 14, 2016"]),p=z(["Relative Date"],["Relative Date"]),m=z(['Like "the last 7 days" or "this month"'],['Like "the last 7 days" or "this month"']),h=z(["Date Filter"],["Date Filter"]),v=z(["All Options"],["All Options"]),y=z(["Contains all of the above"],["Contains all of the above"]),g=z(["City"],["City"]),b=z(["State"],["State"]),_=z(["ZIP or Postal Code"],["ZIP or Postal Code"]),E=z(["Country"],["Country"]),w=z(["ID"],["ID"]),O=z(["Category"],["Category"]),S=z(["Time"],["Time"]),C=z(["Date range, relative date, time of day, etc."],["Date range, relative date, time of day, etc."]),x=z(["Location"],["Location"]),k=z(["City, State, Country, ZIP code."],["City, State, Country, ZIP code."]),A=z(["User ID, product ID, event ID, etc."],["User ID, product ID, event ID, etc."]),T=z(["Other Categories"],["Other Categories"]),P=z(["Category, Type, Model, Rating, etc."],["Category, Type, Model, Rating, etc."]);t.parameterOptionsForField=function(e){return q.filter(function(t){return Z(t.type)(e)})},t.getParameterMappingOptions=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],r=[];if("text"===n.display)return[];var i=new j.default(n,e).query();return r.push.apply(r,F(i.dimensionOptions(t?(l=t,s=Z(l.type),function(e){return s(e.field())}):void 0).sections().flatMap(function(e){return e.items.map(function(t){var n=t.dimension;return{sectionName:e.name,name:n.displayName(),icon:n.icon(),target:["dimension",n.mbql()],isForeign:n instanceof N.FKDimension||n instanceof N.JoinedDimension}})}))),r.push.apply(r,F(i.variables(t?(o=t,u=function(e){var t=e.type.split("/"),n=a(t,2),r=n[0],i=n[1];switch(r){case"date":return function(e){return"single"===i&&"date"===e.type};case"location":return function(e){return"number"===e.type||"text"===e.type};case"id":return function(e){return"number"===e.type||"text"===e.type};case"category":return function(e){return"number"===e.type||"text"===e.type}}return function(e){return!1}}(o),function(e){if(e instanceof M.TemplateTagVariable){var t=e.tag();return!!t&&u(t)}return!1}):void 0).map(function(e){return{sectionName:"Variables",name:e.displayName(),icon:e.icon(),target:["variable",e.mbql()]}}))),r;var o,u;var l,s},t.createParameter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.name,r=0;for(;D.default.any(t,function(e){return e.name===n});)n=e.name+" "+ ++r;return J({name:"",slug:"",id:Math.floor(Math.random()*Math.pow(2,32)).toString(16),type:e.type},n)},t.setParameterName=J,t.setParameterDefaultValue=function(e,t){return r({},e,{default:t})};var j=I(n(39)),N=n(31),M=(I(N),n(308)),R=(I(M),n(1)),D=I(n(3)),L=n(10);function I(e){return e&&e.__esModule?e:{default:e}}function F(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function z(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var q=t.PARAMETER_OPTIONS=[{type:"date/month-year",name:(0,R.t)(i),description:(0,R.t)(o)},{type:"date/quarter-year",name:(0,R.t)(u),description:(0,R.t)(l)},{type:"date/single",name:(0,R.t)(s),description:(0,R.t)(c)},{type:"date/range",name:(0,R.t)(d),description:(0,R.t)(f)},{type:"date/relative",name:(0,R.t)(p),description:(0,R.t)(m)},{type:"date/all-options",name:(0,R.t)(h),menuName:(0,R.t)(v),description:(0,R.t)(y)},{type:"location/city",name:(0,R.t)(g)},{type:"location/state",name:(0,R.t)(b)},{type:"location/zip_code",name:(0,R.t)(_)},{type:"location/country",name:(0,R.t)(E)},{type:"id",name:(0,R.t)(w)},{type:"category",name:(0,R.t)(O)}],B=t.PARAMETER_SECTIONS=[{id:"date",name:(0,R.t)(S),description:(0,R.t)(C),options:[]},{id:"location",name:(0,R.t)(x),description:(0,R.t)(k),options:[]},{id:"id",name:(0,R.t)(w),description:(0,R.t)(A),options:[]},{id:"category",name:(0,R.t)(T),description:(0,R.t)(P),options:[]}],U=!0,V=!1,G=void 0;try{for(var H,W=q[Symbol.iterator]();!(U=(H=W.next()).done);U=!0){var Q=H.value,Y=Q.type.split("/")[0],K=D.default.findWhere(B,{id:Y});K||(K=D.default.findWhere(B,{id:"category"})),K&&(K.options=K.options||[],K.options.push(Q))}}catch(e){V=!0,G=e}finally{try{!U&&W.return&&W.return()}finally{if(V)throw G}}function Z(e){var t=e.split("/");switch(a(t,1)[0]){case"date":return function(e){return e.isDate()};case"id":return function(e){return e.isID()};case"category":return function(e){return e.isCategory()}}switch(e){case"location/city":return function(e){return e.isCity()};case"location/state":return function(e){return e.isState()};case"location/zip_code":return function(e){return e.isZipCode()};case"location/country":return function(e){return e.isCountry()}}return function(e){return!1}}function J(e,t){t||(t="unnamed");var n=(0,L.slugify)(t);return r({},e,{name:t,slug:n})}},256:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHashOptions=o,t.stringifyHashOptions=u,t.updateQueryString=function(e,t){var n=o(e.search.substring(1)),r=u(t(n));return{pathname:e.pathname,hash:e.hash,search:r?"?"+r:null}},t.isMac=function(){var e=navigator.platform,t=void 0===e?"":e;return Boolean(t.match(/^Mac/))};var r,a=n(134),i=(r=a)&&r.__esModule?r:{default:r};function o(e){var t=i.default.parse(e.replace(/^#/,""));for(var n in t)""===t[n]?t[n]=!0:/^(true|false|-?\d+(\.\d+)?)$/.test(t[n])&&(t[n]=JSON.parse(t[n]));return t}function u(e){return i.default.stringify(e).replace(/=true\b/g,"")}},258:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.field_visibility_types=t.has_field_values_options=t.field_special_types_map=t.field_special_types=void 0;var r=Oe(["Entity Key"],["Entity Key"]),a=Oe(["Overall Row"],["Overall Row"]),i=Oe(["The primary key for this table."],["The primary key for this table."]),o=Oe(["Entity Name"],["Entity Name"]),u=Oe(['The "name" of each record. Usually a column called "name", "title", etc.'],['The "name" of each record. Usually a column called "name", "title", etc.']),l=Oe(["Foreign Key"],["Foreign Key"]),s=Oe(["Points to another table to make a connection."],["Points to another table to make a connection."]),c=Oe(["Category"],["Category"]),d=Oe(["Common"],["Common"]),f=Oe(["Comment"],["Comment"]),p=Oe(["Description"],["Description"]),m=Oe(["Number"],["Number"]),h=Oe(["Title"],["Title"]),v=Oe(["City"],["City"]),y=Oe(["Location"],["Location"]),g=Oe(["Country"],["Country"]),b=Oe(["Latitude"],["Latitude"]),_=Oe(["Longitude"],["Longitude"]),E=Oe(["State"],["State"]),w=Oe(["Zip Code"],["Zip Code"]),O=Oe(["Cost"],["Cost"]),S=Oe(["Financial"],["Financial"]),C=Oe(["Currency"],["Currency"]),x=Oe(["Discount"],["Discount"]),k=Oe(["Gross margin"],["Gross margin"]),A=Oe(["Income"],["Income"]),T=Oe(["Price"],["Price"]),P=Oe(["Quantity"],["Quantity"]),j=Oe(["Numeric"],["Numeric"]),N=Oe(["Score"],["Score"]),M=Oe(["Share"],["Share"]),R=Oe(["Birthday"],["Birthday"]),D=Oe(["Profile"],["Profile"]),L=Oe(["Company"],["Company"]),I=Oe(["Email"],["Email"]),F=Oe(["Owner"],["Owner"]),z=Oe(["Subscription"],["Subscription"]),q=Oe(["User"],["User"]),B=Oe(["Cancelation date"],["Cancelation date"]),U=Oe(["Date and Time"],["Date and Time"]),V=Oe(["Cancelation time"],["Cancelation time"]),G=Oe(["Cancelation timestamp"],["Cancelation timestamp"]),H=Oe(["Creation date"],["Creation date"]),W=Oe(["Creation time"],["Creation time"]),Q=Oe(["Creation timestamp"],["Creation timestamp"]),Y=Oe(["Deletion date"],["Deletion date"]),K=Oe(["Deletion time"],["Deletion time"]),Z=Oe(["Deletion timestamp"],["Deletion timestamp"]),J=Oe(["Join date"],["Join date"]),X=Oe(["Join time"],["Join time"]),$=Oe(["Join timestamp"],["Join timestamp"]),ee=Oe(["UNIX Timestamp (Milliseconds)"],["UNIX Timestamp (Milliseconds)"]),te=Oe(["UNIX Timestamp (Seconds)"],["UNIX Timestamp (Seconds)"]),ne=Oe(["Enum"],["Enum"]),re=Oe(["Categorical"],["Categorical"]),ae=Oe(["Product"],["Product"]),ie=Oe(["Source"],["Source"]),oe=Oe(["Avatar Image URL"],["Avatar Image URL"]),ue=Oe(["URLs"],["URLs"]),le=Oe(["Image URL"],["Image URL"]),se=Oe(["URL"],["URL"]),ce=Oe(["Field containing JSON"],["Field containing JSON"]),de=Oe(["Other"],["Other"]),fe=Oe(["Search box"],["Search box"]),pe=Oe(["A list of all values"],["A list of all values"]),me=Oe(["Plain input box"],["Plain input box"]),he=Oe(["Everywhere"],["Everywhere"]),ve=Oe(["The default setting. This field will be displayed normally in tables and charts."],["The default setting. This field will be displayed normally in tables and charts."]),ye=Oe(["Only in detail views"],["Only in detail views"]),ge=Oe(["This field will only be displayed when viewing the details of a single record. Use this for information that's lengthy or that isn't useful in a table or chart."],["This field will only be displayed when viewing the details of a single record. Use this for information that's lengthy or that isn't useful in a table or chart."]),be=Oe(["Do not include"],["Do not include"]),_e=Oe(["This field won't be visible or selectable in questions created with the GUI interfaces. It will still be accessible in SQL/native queries."],["This field won't be visible or selectable in questions created with the GUI interfaces. It will still be accessible in SQL/native queries."]),Ee=n(41),we=n(1);function Oe(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Se=t.field_special_types=[{id:Ee.TYPE.PK,name:(0,we.t)(r),section:(0,we.t)(a),description:(0,we.t)(i)},{id:Ee.TYPE.Name,name:(0,we.t)(o),section:(0,we.t)(a),description:(0,we.t)(u)},{id:Ee.TYPE.FK,name:(0,we.t)(l),section:(0,we.t)(a),description:(0,we.t)(s)},{id:Ee.TYPE.Category,name:(0,we.t)(c),section:(0,we.t)(d)},{id:Ee.TYPE.Comment,name:(0,we.t)(f),section:(0,we.t)(d)},{id:Ee.TYPE.Description,name:(0,we.t)(p),section:(0,we.t)(d)},{id:Ee.TYPE.Number,name:(0,we.t)(m),section:(0,we.t)(d)},{id:Ee.TYPE.Title,name:(0,we.t)(h),section:(0,we.t)(d)},{id:Ee.TYPE.City,name:(0,we.t)(v),section:(0,we.t)(y)},{id:Ee.TYPE.Country,name:(0,we.t)(g),section:(0,we.t)(y)},{id:Ee.TYPE.Latitude,name:(0,we.t)(b),section:(0,we.t)(y)},{id:Ee.TYPE.Longitude,name:(0,we.t)(_),section:(0,we.t)(y)},{id:Ee.TYPE.State,name:(0,we.t)(E),section:(0,we.t)(y)},{id:Ee.TYPE.ZipCode,name:(0,we.t)(w),section:(0,we.t)(y)},{id:Ee.TYPE.Cost,name:(0,we.t)(O),section:(0,we.t)(S)},{id:Ee.TYPE.Currency,name:(0,we.t)(C),section:(0,we.t)(S)},{id:Ee.TYPE.Discount,name:(0,we.t)(x),section:(0,we.t)(S)},{id:Ee.TYPE.GrossMargin,name:(0,we.t)(k),section:(0,we.t)(S)},{id:Ee.TYPE.Income,name:(0,we.t)(A),section:(0,we.t)(S)},{id:Ee.TYPE.Price,name:(0,we.t)(T),section:(0,we.t)(S)},{id:Ee.TYPE.Quantity,name:(0,we.t)(P),section:(0,we.t)(j)},{id:Ee.TYPE.Score,name:(0,we.t)(N),section:(0,we.t)(j)},{id:Ee.TYPE.Share,name:(0,we.t)(M),section:(0,we.t)(j)},{id:Ee.TYPE.Birthdate,name:(0,we.t)(R),section:(0,we.t)(D)},{id:Ee.TYPE.Company,name:(0,we.t)(L),section:(0,we.t)(D)},{id:Ee.TYPE.Email,name:(0,we.t)(I),section:(0,we.t)(D)},{id:Ee.TYPE.Owner,name:(0,we.t)(F),section:(0,we.t)(D)},{id:Ee.TYPE.Subscription,name:(0,we.t)(z),section:(0,we.t)(D)},{id:Ee.TYPE.User,name:(0,we.t)(q),section:(0,we.t)(D)},{id:Ee.TYPE.CancelationDate,name:(0,we.t)(B),section:(0,we.t)(U)},{id:Ee.TYPE.CancelationTime,name:(0,we.t)(V),section:(0,we.t)(U)},{id:Ee.TYPE.CancelationTimestamp,name:(0,we.t)(G),section:(0,we.t)(U)},{id:Ee.TYPE.CreationDate,name:(0,we.t)(H),section:(0,we.t)(U)},{id:Ee.TYPE.CreationTime,name:(0,we.t)(W),section:(0,we.t)(U)},{id:Ee.TYPE.CreationTimestamp,name:(0,we.t)(Q),section:(0,we.t)(U)},{id:Ee.TYPE.DeletionDate,name:(0,we.t)(Y),section:(0,we.t)(U)},{id:Ee.TYPE.DeletionTime,name:(0,we.t)(K),section:(0,we.t)(U)},{id:Ee.TYPE.DeletionTimestamp,name:(0,we.t)(Z),section:(0,we.t)(U)},{id:Ee.TYPE.JoinDate,name:(0,we.t)(J),section:(0,we.t)(U)},{id:Ee.TYPE.JoinTime,name:(0,we.t)(X),section:(0,we.t)(U)},{id:Ee.TYPE.JoinTimestamp,name:(0,we.t)($),section:(0,we.t)(U)},{id:Ee.TYPE.UNIXTimestampMilliseconds,name:(0,we.t)(ee),section:(0,we.t)(U)},{id:Ee.TYPE.UNIXTimestampSeconds,name:(0,we.t)(te),section:(0,we.t)(U)},{id:Ee.TYPE.Enum,name:(0,we.t)(ne),section:(0,we.t)(re)},{id:Ee.TYPE.Product,name:(0,we.t)(ae),section:(0,we.t)(re)},{id:Ee.TYPE.Source,name:(0,we.t)(ie),section:(0,we.t)(re)},{id:Ee.TYPE.AvatarURL,name:(0,we.t)(oe),section:(0,we.t)(ue)},{id:Ee.TYPE.ImageURL,name:(0,we.t)(le),section:(0,we.t)(ue)},{id:Ee.TYPE.URL,name:(0,we.t)(se),section:(0,we.t)(ue)},{id:Ee.TYPE.SerializedJSON,name:(0,we.t)(ce),section:(0,we.t)(de)}];t.field_special_types_map=Se.reduce(function(e,t){return Object.assign({},e,(n={},r=t.id,a=t,r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n));var n,r,a},{}),t.has_field_values_options=[{name:(0,we.t)(fe),value:"search"},{name:(0,we.t)(pe),value:"list"},{name:(0,we.t)(me),value:"none"}],t.field_visibility_types=[{id:"normal",name:(0,we.t)(he),description:(0,we.t)(ve)},{id:"details-only",name:(0,we.t)(ye),description:(0,we.t)(ge)},{id:"sensitive",name:(0,we.t)(be),description:(0,we.t)(_e)}]},26:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.STRUCTURED_QUERY_TEMPLATE=void 0;var r,a,i,o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(a=["Metrics"],i=["Metrics"],Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(i)}}))),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(109)),d=n(248),f=T(n(3)),p=n(11),m=n(1),h=n(82),v=n(31),y=T(v),g=T(n(137)),b=T(n(138)),_=T(n(430)),E=T(n(529)),w=T(n(203)),O=T(n(431)),S=T(n(531)),C=T(n(57)),x=T(n(77)),k=n(41),A=n(33);function T(e){return e&&e.__esModule?e:{default:e}}function P(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function R(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var D=t.STRUCTURED_QUERY_TEMPLATE={database:null,type:"query",query:{"source-table":null}},L=(R((r=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D;j(this,t);var r=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._structuredDatasetQuery=n,r}return M(t,b.default),l(t,null,[{key:"isDatasetQueryType",value:function(e){return e&&e.type===D.type}}]),l(t,[{key:"isEmpty",value:function(){return!this.databaseId()}},{key:"canRun",value:function(){return!(!this.sourceTableId()&&!this.sourceQuery())}},{key:"hasMetadata",value:function(){return this.metadata()&&!!this.rootTable()}},{key:"isEditable",value:function(){return this.hasMetadata()}},{key:"tables",value:function(){var e=this.database();return e&&e.tables||null}},{key:"databaseId",value:function(){return this._structuredDatasetQuery.database}},{key:"database",value:function(){var e=this.databaseId();return null!=e?this._metadata.database(e):null}},{key:"engine",value:function(){var e=this.database();return e&&e.engine}},{key:"readOnly",value:function(){return!this.database()}},{key:"reset",value:function(){return new t(this._originalQuestion)}},{key:"query",value:function(){return this._structuredDatasetQuery.query}},{key:"setQuery",value:function(e){return this._updateQuery(function(){return e},[])}},{key:"clearQuery",value:function(){return this._updateQuery(function(){return{}})}},{key:"updateQuery",value:function(e){return this._updateQuery(e,[])}},{key:"setDatabase",value:function(e){return this.setDatabaseId(e.id)}},{key:"setDatabaseId",value:function(e){return e!==this.databaseId()?new t(this._originalQuestion,(0,p.chain)(this.datasetQuery()).assoc("database",e).assoc("query",{}).value()):this}},{key:"sourceTableId",value:function(){return this.query()["source-table"]}},{key:"setSourceTableId",value:function(e){return e!==this.sourceTableId()?new t(this._originalQuestion,(0,p.chain)(this.datasetQuery()).assoc("database",this.metadata().table(e).database.id).assoc("query",{"source-table":e}).value()):this}},{key:"tableId",value:function(){return this.sourceTableId()}},{key:"setTableId",value:function(e){return this.setSourceTableId(e)}},{key:"setTable",value:function(e){return this.setSourceTableId(e.id)}},{key:"setDefaultQuery",value:function(){var e=this.table();if(e&&"entity/GoogleAnalyticsTable"===e.entity_type&&!this.isEmpty()&&!this.hasAnyClauses()){var t=f.default.findWhere(e.fields,{name:"ga:date"});if(t)return this.filter(["time-interval",["field-id",t.id],-365,"day"]).aggregate(["metric","ga:users"]).aggregate(["metric","ga:pageviews"]).breakout(["datetime-field",["field-id",t.id],"week"])}return this}},{key:"table",value:function(){var e=this,t=this.sourceQuery();return t?new C.default({name:"",display_name:"",db:t.database(),fields:t.columns().map(function(t){return new x.default(u({},t,{id:["field-literal",t.name,t.base_type],source:"fields",query:e}))}),segments:[],metrics:[]}):this.metadata().table(this.sourceTableId())}},{key:"clean",value:function(){if(!this.hasMetadata())return console.warn("Warning: can't clean query without metadata!"),this;var e=this,t=e.sourceQuery();return t&&(e=e.setSourceQuery(t.clean())),e.cleanJoins().cleanExpressions().cleanFilters().cleanAggregations().cleanBreakouts().cleanSorts().cleanLimit().cleanFields().cleanEmpty()}},{key:"cleanNesting",value:function(){var e=this.sourceQuery();return e?this.setSourceQuery(e.cleanNesting()).cleanEmpty():this}},{key:"cleanJoins",value:function(){return this._cleanClauseList("joins")}},{key:"cleanExpressions",value:function(){return this}},{key:"cleanFilters",value:function(){return this._cleanClauseList("filters")}},{key:"cleanAggregations",value:function(){return this._cleanClauseList("aggregations")}},{key:"cleanBreakouts",value:function(){return this._cleanClauseList("breakouts")}},{key:"cleanSorts",value:function(){return this._cleanClauseList("sorts")}},{key:"cleanLimit",value:function(){return this}},{key:"cleanFields",value:function(){return this}},{key:"cleanEmpty",value:function(){var e=this.sourceQuery();return e&&!this.hasAnyClauses()?e:this}},{key:"isValid",value:function(){if(!this.hasData())return!1;var e=this.sourceQuery();return!(e&&!e.isValid())&&(!!(this._isValidClauseList("joins")&&this._isValidClauseList("filters")&&this._isValidClauseList("aggregations")&&this._isValidClauseList("breakouts"))&&!("entity/GoogleAnalyticsTable"===this.table().entity_type&&!this.hasAggregations()))}},{key:"_cleanClauseList",value:function(e){for(var t=this,n=0;n<t[e]().length;n++){var r=t[e]()[n];this._validateClause(r)||(t=r.remove(),n-=1)}return t}},{key:"_isValidClauseList",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=this[e]()[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;if(!this._validateClause(o))return!1}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}return!0}},{key:"_validateClause",value:function(e){try{return e.isValid()}catch(t){return console.warn("Error thrown while validating clause:",e),!1}}},{key:"hasData",value:function(){return!!this.table()}},{key:"hasAnyClauses",value:function(){return this.hasJoins()||this.hasExpressions()||this.hasFilters()||this.hasAggregations()||this.hasBreakouts()||this.hasSorts()||this.hasLimit()||this.hasFields()}},{key:"hasJoins",value:function(){return this.joins().length>0}},{key:"hasExpressions",value:function(){return Object.keys(this.expressions()).length>0}},{key:"hasFilters",value:function(){return this.filters().length>0}},{key:"hasAggregations",value:function(){return this.aggregations().length>0}},{key:"hasBreakouts",value:function(){return this.breakouts().length>0}},{key:"hasSorts",value:function(){return this.sorts().length>0}},{key:"hasLimit",value:function(){var e=this.limit();return null!=e&&e>0}},{key:"hasFields",value:function(){return this.fields().length>0}},{key:"aggregate",value:function(e){return this.addAggregation(e)}},{key:"breakout",value:function(e){return e instanceof x.default&&(e=e.dimension()),e instanceof y.default&&(e=e.mbql()),this.addBreakout(e)}},{key:"filter",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return this.addFilter(e)})},{key:"sort",value:function(e){return this.addSort(e)}},{key:"join",value:function(e){return this.addJoin(e)}},{key:"joins",value:function(){var e=this;return c.getJoins(this.query()).map(function(t,n){return new O.default(t,n,e)})}},{key:"addJoin",value:function(e){return this._updateQuery(c.addJoin,arguments)}},{key:"updateJoin",value:function(e,t){return this._updateQuery(c.updateJoin,arguments)}},{key:"removeJoin",value:function(e){return this._updateQuery(c.removeJoin,arguments)}},{key:"clearJoins",value:function(){return this._updateQuery(c.clearJoins,arguments)}},{key:"aggregations",value:function(){var e=this;return c.getAggregations(this.query()).map(function(t,n){return new _.default(t,n,e)})}},{key:"aggregationOperators",value:function(){return this.table()&&this.table().aggregationOperators()||[]}},{key:"aggregationOperatorsWithoutRows",value:function(){return this.aggregationOperators().filter(function(e){return"rows"!==e.short})}},{key:"aggregationFieldOptions",value:function(e){var t="string"==typeof e?this.table().aggregationOperator(e):e;if(t){var n=this.fieldOptions(function(e){return t.validFieldsFilters.length>0&&1===t.validFieldsFilters[0]([e]).length});return new g.default(u({},n,{dimensions:f.default.uniq([].concat(P(this.expressionDimensions()),P(n.dimensions.filter(function(e){return!(e instanceof v.ExpressionDimension)}))))}))}return new g.default({count:0,fks:[],dimensions:[]})}},{key:"canRemoveAggregation",value:function(){return this.aggregations().length>1}},{key:"isBareRows",value:function(){return!this.hasAggregations()}},{key:"isRaw",value:function(){return!this.hasAggregations()&&!this.hasBreakouts()}},{key:"formatExpression",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.quotes,r=void 0===n?d.DISPLAY_QUOTES:n,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["quotes"]);return(0,d.format)(e,u({quotes:r},a,{query:this}))}},{key:"addAggregation",value:function(e){return this._updateQuery(c.addAggregation,arguments)}},{key:"updateAggregation",value:function(e,t){return this._updateQuery(c.updateAggregation,arguments)}},{key:"removeAggregation",value:function(e){return this._updateQuery(c.removeAggregation,arguments)}},{key:"clearAggregations",value:function(){return this._updateQuery(c.clearAggregations,arguments)}},{key:"breakouts",value:function(){var e=this;return c.getBreakouts(this.query()).map(function(t,n){return new E.default(t,n,e)})}},{key:"breakoutOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},n=new Set(!0===e?[]:this.breakouts().filter(function(t){return!f.default.isEqual(t,e)}).map(function(e){return e.field().id}));return this.fieldOptions(function(e){return t(e)&&!n.has(e.id)})}},{key:"canAddBreakout",value:function(){return this.breakoutOptions().count>0}},{key:"hasValidBreakout",value:function(){var e=this.breakouts();return e.length>0&&e[0].isValid()}},{key:"addBreakout",value:function(e){return this._updateQuery(c.addBreakout,arguments)}},{key:"updateBreakout",value:function(e,t){return this._updateQuery(c.updateBreakout,arguments)}},{key:"removeBreakout",value:function(e){return this._updateQuery(c.removeBreakout,arguments)}},{key:"clearBreakouts",value:function(){return this._updateQuery(c.clearBreakouts,arguments)}},{key:"filters",value:function(){var e=this;return c.getFilters(this.query()).map(function(t,n){return new w.default(t,n,e)})}},{key:"topLevelFilters",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,n=this.queries().slice(-t);return(e=[]).concat.apply(e,P(n.map(function(e){return e.filters()})))}},{key:"filterFieldOptionSections",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).includeSegments,r=void 0===n||n,a=this.filterDimensionOptions(),i=r?this.filterSegmentOptions(e):[];return a.sections({extraItems:i.map(function(e){return{name:e.name,icon:"star_outline",filter:["segment",e.id],query:t}})})}},{key:"topLevelFilterFieldOptionSections",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=this.queries().slice(-n);r.length<n&&this.canNest()&&this.hasBreakouts()&&r.push(r[r.length-1].nest()),r.reverse();var a=(e=[]).concat.apply(e,P(r.map(function(e){return e.filterFieldOptionSections(t)})));return r.length>1&&(a[0].name=(0,m.t)(s),a[0].items=a[0].items.filter(function(e){if(e.dimension){var t=r[0].dimensionForSourceQuery(e.dimension);if(t)return t instanceof v.AggregationDimension}return!0})),a}},{key:"filterDimensionOptions",value:function(){return this.dimensionOptions()}},{key:"filterSegmentOptions",value:function(e){var t=this;!e||e instanceof w.default||(e=new w.default(e,null,this));var n=e&&e.isSegment()&&e.segmentId();return this.table().segments.filter(function(e){return null!=n&&n===e.id||!e.archived&&!t.segments().includes(e)})}},{key:"segments",value:function(){return this.filters().filter(function(e){return e.isSegment()}).map(function(e){return e.segment()})}},{key:"canAddFilter",value:function(){return c.canAddFilter(this.query())&&(this.filterDimensionOptions().count>0||this.filterSegmentOptions().length>0)}},{key:"addFilter",value:function(e){return this._updateQuery(c.addFilter,arguments)}},{key:"updateFilter",value:function(e,t){return this._updateQuery(c.updateFilter,arguments)}},{key:"removeFilter",value:function(e){return this._updateQuery(c.removeFilter,arguments)}},{key:"clearFilters",value:function(){return this._updateQuery(c.clearFilters,arguments)}},{key:"sorts",value:function(){var e=this;return c.getOrderBys(this.query()).map(function(t,n){return new S.default(t,n,e)})}},{key:"sortOptions",value:function(e){if(this.isBareRows()){var t=new Set(this.sorts().filter(function(t){return!f.default.isEqual(t,e)}).map(function(e){return e.field().id}));return this.fieldOptions(function(e){return!t.has(e.id)})}if(this.hasValidBreakout()){var n={count:0,dimensions:[],fks:[]},r=!0,a=!1,i=void 0;try{for(var o,u=this.breakouts()[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;n.dimensions.push(l.dimension()),n.count++}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}if(this.hasBreakouts()){var s=!0,c=!1,d=void 0;try{for(var p,m=this.aggregations()[Symbol.iterator]();!(s=(p=m.next()).done);s=!0){var h=p.value;h.isSortable()&&(n.dimensions.push(h.aggregationDimension()),n.count++)}}catch(e){c=!0,d=e}finally{try{!s&&m.return&&m.return()}finally{if(c)throw d}}}return new g.default(n)}}},{key:"canAddSort",value:function(){var e=this.sorts();return this.sortOptions().count>0&&(0===e.length||null!=e[e.length-1][0])}},{key:"addSort",value:function(e){return this._updateQuery(c.addOrderBy,arguments)}},{key:"updateSort",value:function(e,t){return this._updateQuery(c.updateOrderBy,arguments)}},{key:"removeSort",value:function(e){return this._updateQuery(c.removeOrderBy,arguments)}},{key:"clearSort",value:function(){return this._updateQuery(c.clearOrderBy,arguments)}},{key:"replaceSort",value:function(e){return this.clearSort().addSort(e)}},{key:"limit",value:function(){return c.getLimit(this.query())}},{key:"updateLimit",value:function(e){return this._updateQuery(c.updateLimit,arguments)}},{key:"clearLimit",value:function(){return this._updateQuery(c.clearLimit,arguments)}},{key:"expressions",value:function(){return c.getExpressions(this.query())}},{key:"addExpression",value:function(e,t){var n=this._updateQuery(c.addExpression,arguments);return n.hasFields()&&n.isRaw()&&(n=n.addField(["expression",e])),n}},{key:"updateExpression",value:function(e,t,n){var r=this._updateQuery(c.updateExpression,arguments);if(e!==n){var a=r._indexOfField(["expression",n]);a>=0&&(r=r.updateField(a,["expression",e]))}return r}},{key:"removeExpression",value:function(e){var t=this._updateQuery(c.removeExpression,arguments),n=t._indexOfField(["expression",e]);return n>=0&&(t=t.removeField(n)),t}},{key:"clearExpressions",value:function(){var e=this._updateQuery(c.clearExpressions,arguments),t=!0,n=!1,r=void 0;try{for(var a,i=Object.keys(this.expressions())[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,u=e._indexOfField(["expression",o]);u>=0&&(e=e.removeField(u))}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}return e}},{key:"_indexOfField",value:function(e){return this.fields().findIndex(function(t){return f.default.isEqual(t,e)})}},{key:"fields",value:function(){return this.query().fields||[]}},{key:"addField",value:function(e,t){return this._updateQuery(c.addField,arguments)}},{key:"updateField",value:function(e,t){return this._updateQuery(c.updateField,arguments)}},{key:"removeField",value:function(e){return this._updateQuery(c.removeField,arguments)}},{key:"clearFields",value:function(){return this._updateQuery(c.clearFields,arguments)}},{key:"setFields",value:function(e){return this._updateQuery(function(t){return u({},t,{fields:e})})}},{key:"fieldsOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return!0};return this.isBareRows()&&!this.hasBreakouts()?this.dimensionOptions(e):new g.default({count:0,dimensions:[],fks:[]})}},{key:"dimensionOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return!0},t={count:0,fks:[],dimensions:[]},n=this.joins(),r=!0,a=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value.joinedDimensionOptions(e);t.count+=l.count,t.fks.push(l)}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}if(this.table()){var s=this.dimensions().filter(e),c=!0,d=!1,f=void 0;try{for(var p,m=s[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var h=p.value;t.count++,t.dimensions.push(h)}}catch(e){d=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw f}}var y=function(e,t){return e&&t?e.id+","+t.id:null},b=new Set(n.map(function(e){var t=e.parentDimension(),n=e.joinDimension();return y(t&&t.field(),n&&n.field())}));b.delete(null);var _=this.dimensions().filter(function(e){return e.field&&e.field()&&e.field().isFK()}),E=!0,w=!1,O=void 0;try{for(var S,C=_[Symbol.iterator]();!(E=(S=C.next()).done);E=!0){var x=S.value,k=x.field();if(!k||!b.has(y(k,k.target))){var A=x.dimensions([v.FKDimension]).filter(e);A.length>0&&(t.count+=A.length,t.fks.push({field:k,dimension:x,dimensions:A}))}}}catch(e){w=!0,O=e}finally{try{!E&&C.return&&C.return()}finally{if(w)throw O}}}return new g.default(t)}},{key:"fieldOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return!0};return this.dimensionOptions(function(t){var n=t.field&&t.field();return!n||n.isDimension()&&e(n)})}},{key:"dimensions",value:function(){return[].concat(P(this.expressionDimensions()),P(this.tableDimensions()))}},{key:"tableDimensions",value:function(){var e=this,t=this.table();return t?t.dimensions().map(function(t){return t._query?t:e.parseFieldReference(t.mbql())}):[]}},{key:"expressionDimensions",value:function(){var e=this;return Object.entries(this.expressions()).map(function(t){var n=o(t,2),r=n[0];n[1];return new v.ExpressionDimension(null,[r],e._metadata,e)})}},{key:"joinedDimensions",value:function(){var e;return(e=[]).concat.apply(e,P(this.joins().map(function(e){return e.fieldsDimensions()})))}},{key:"breakoutDimensions",value:function(){var e=this;return this.breakouts().map(function(t){return e.parseFieldReference(t)})}},{key:"aggregationDimensions",value:function(){return this.aggregations().map(function(e){return e.aggregationDimension()})}},{key:"fieldDimensions",value:function(){var e=this;return this.fields().map(function(t,n){return e.parseFieldReference(t)})}},{key:"columnDimensions",value:function(){if(this.hasAggregations()||this.hasBreakouts()){var e=this.aggregationDimensions(),t=this.breakoutDimensions();return[].concat(P(t),P(e))}if(this.hasFields()){var n=this.fieldDimensions(),r=this.joinedDimensions();return[].concat(P(n),P(r))}var a=this.expressionDimensions(),i=this.joinedDimensions(),o=this.tableDimensions(),u=f.default.chain(o).filter(function(e){var t=e.field();return!1!==t.active&&"sensitive"!==t.visibility_type&&"retired"!==t.visibility_type&&null==t.parent_id}).sortBy(function(e){return e.field().name.toLowerCase()}).sortBy(function(e){var t=e.field().special_type;return t===k.TYPE.PK?0:t===k.TYPE.Name?1:2}).sortBy(function(e){return e.field().position}).value();return[].concat(P(u),P(a),P(i))}},{key:"columnNames",value:function(){var e=new Map;return this.columnDimensions().map(function(t){var n=t.columnName();if(e.has(n)){var r=e.get(n)+1;return e.set(n,r),n+"_"+r}return e.set(n,1),n})}},{key:"columns",value:function(){var e=this.columnNames();return this.columnDimensions().map(function(t,n){return u({},t.column(),{name:e[n]})})}},{key:"columnDimensionWithName",value:function(e){var t=this.columnNames().findIndex(function(t){return t===e});if(t>=0)return this.columnDimensions()[t]}},{key:"fieldReferenceForColumn",value:function(e){return(0,A.fieldRefForColumn)(e)}},{key:"parseFieldReference",value:function(e){return y.default.parseMBQL(e,this._metadata,this)}},{key:"dimensionForColumn",value:function(e){if(e){var t=this.fieldReferenceForColumn(e);if(t)return this.parseFieldReference(t)}return null}},{key:"setDatasetQuery",value:function(e){return new t(this._originalQuestion,e)}},{key:"nest",value:function(){return this._updateQuery(function(e){return{"source-query":e}})}},{key:"canNest",value:function(){var e=this.database();return e&&e.hasFeature("nested-queries")}},{key:"sourceQuery",value:function(){var e=this.query()["source-query"];return e?new I(this._originalQuestion,u({},this.datasetQuery(),{query:e}),this):null}},{key:"rootQuery",value:function(){var e=this.sourceQuery();return e?e.rootQuery():this}},{key:"lastSummarizedQuery",value:function(){if(this.hasAggregations()||!this.canNest())return this;var e=this.sourceQuery();return e?e.lastSummarizedQuery():null}},{key:"topLevelQuery",value:function(){return this.canNest()?this.lastSummarizedQuery()||this:this}},{key:"topLevelDimension",value:function(e){for(var t=this.topLevelQuery(),n=this;n;){if(n===t)return e;e=n.dimensionForSourceQuery(e),n=n.sourceQuery()}return null}},{key:"topLevelColumn",value:function(e){var t=this.dimensionForColumn(e);if(t){var n=this.topLevelDimension(t);if(n)return n.column()}return null}},{key:"dimensionForSourceQuery",value:function(e){if(e instanceof v.FieldLiteralDimension){var t=this.sourceQuery();if(t){var n=t.columnNames().indexOf(e.name());if(n>=0)return t.columnDimensions()[n]}}return null}},{key:"rootTable",value:function(){return this.rootQuery().table()}},{key:"rootTableId",value:function(){return this.rootQuery().sourceTableId()}},{key:"setSourceQuery",value:function(e){if(e instanceof t){if(this.sourceQuery()===e)return this;e=e.query()}return this._updateQuery(function(t){return(0,p.chain)(t).dissoc("source-table").assoc("source-query",e).value()})}},{key:"queries",value:function(){for(var e=[],t=this;t;t=t.sourceQuery())e.unshift(t);return e}},{key:"dependentMetadata",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).foreignTables,t=void 0===e||e,n=[];function r(e){var t=f.default.findWhere(n,f.default.pick(e,"type","id"));t?Object.assign(t,e):n.push(e)}var a=this.sourceTableId();a&&r({type:"table",id:a,foreignTables:t});var i=!0,o=!1,u=void 0;try{for(var l,s=this.joins()[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){l.value.dependentMetadata().forEach(r)}}catch(e){o=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}var c=this.sourceQuery();return c&&c.dependentMetadata({foreignTables:t}).forEach(r),n}},{key:"_updateQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.setDatasetQuery((0,p.updateIn)(this._datasetQuery,["query"],function(n){return e.apply(void 0,[n].concat(P(t)))}))}}]),t}()).prototype,"table",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"table"),r.prototype),R(r.prototype,"filters",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"filters"),r.prototype),R(r.prototype,"sorts",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"sorts"),r.prototype),R(r.prototype,"tableDimensions",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"tableDimensions"),r.prototype),R(r.prototype,"expressionDimensions",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"expressionDimensions"),r.prototype),R(r.prototype,"joinedDimensions",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"joinedDimensions"),r.prototype),R(r.prototype,"breakoutDimensions",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"breakoutDimensions"),r.prototype),R(r.prototype,"aggregationDimensions",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"aggregationDimensions"),r.prototype),R(r.prototype,"fieldDimensions",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"fieldDimensions"),r.prototype),R(r.prototype,"columnDimensions",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"columnDimensions"),r.prototype),R(r.prototype,"columnNames",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"columnNames"),r.prototype),R(r.prototype,"sourceQuery",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"sourceQuery"),r.prototype),R(r.prototype,"rootQuery",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"rootQuery"),r.prototype),R(r.prototype,"lastSummarizedQuery",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"lastSummarizedQuery"),r.prototype),R(r.prototype,"topLevelQuery",[h.memoize],Object.getOwnPropertyDescriptor(r.prototype,"topLevelQuery"),r.prototype),r);t.default=L;var I=function(e){function t(e,n,r){j(this,t);var a=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a._parent=r,a}return M(t,L),l(t,[{key:"setDatasetQuery",value:function(e){return new t(this._originalQuestion,e,this._parent)}},{key:"parentQuery",value:function(){return this._parent.setSourceQuery(this.query())}}]),t}()},269:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=(r=["Select a ",""],a=["Select a ",""],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),l=m(n(0)),s=m(n(15)),c=m(n(2)),d=n(1),f=m(n(37)),p=m(n(124));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=300;t.default=function(e,t,n){var r,a;return a=r=function(n){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=n=h(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i))),n.state={width:v},h(n,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,l.default.Component),o(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=s.default.findDOMNode(this).getBoundingClientRect().width;this.state.width!==e&&this.setState({width:e})}},{key:"render",value:function(){var n=this,r=this.props,a=r.value,o=r.onChange,u=r.className,s=r.style,c=r.placeholder,d=r.inheritWidth,m=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(r,["value","onChange","className","style","placeholder","inheritWidth"]);return l.default.createElement(f.default,{pinInitialAttachment:!0,triggerClasses:u,triggerElement:l.default.createElement(p.default,{style:s},void 0!==a&&""!==a?l.default.createElement(t,{id:a}):c),sizeToFit:!0,autoWidth:!0},function(t){var r=t.onClose;return l.default.createElement(e,i({},m,{style:d?{width:Math.max(n.state.width,v)}:{minWidth:v},className:"p2 overflow-auto",value:a,onChange:function(e){o(e),r()}}))})}}]),r}(),r.propTypes={value:c.default.number,onChange:c.default.func.isRequired,field:c.default.object.isRequired,collectionId:c.default.number,inheritWidth:c.default.bool},r.defaultProps={placeholder:(0,d.t)(u,n),inheritWidth:!0},a}},27:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.makeGetMergedParameterFieldValues=t.getSegments=t.getMetrics=t.getFields=t.getTables=t.getDatabases=t.getMetadata=t.getShallowSegments=t.getShallowMetrics=t.getShallowFields=t.getShallowTables=t.getShallowDatabases=t.getNormalizedSegments=t.getNormalizedMetrics=t.getNormalizedFields=t.getNormalizedTables=t.getNormalizedSchemas=t.getNormalizedDatabases=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.copyObjects=k;var a=n(32),i=v(n(140)),o=v(n(79)),u=v(n(182)),l=v(n(57)),s=v(n(77)),c=v(n(310)),d=v(n(309)),f=v(n(3)),p=n(937),m=n(183),h=n(11);function v(e){return e&&e.__esModule?e:{default:e}}var y=t.getNormalizedDatabases=function(e){return e.entities.databases},g=t.getNormalizedSchemas=function(e){return e.entities.schemas},b=function(e){return e.entities.tables},_=t.getNormalizedTables=(0,a.createSelector)([b],function(e){return P(e,function(e){return null==e.visibility_type})}),E=t.getNormalizedFields=(0,a.createSelector)([function(e){return e.entities.fields},b],function(e,t){return P(e,function(e){var n=t[e.table_id];return(!n||null==n.visibility_type)&&"sensitive"!==e.visibility_type})}),w=t.getNormalizedMetrics=function(e){return e.entities.metrics},O=t.getNormalizedSegments=function(e){return e.entities.segments},S=(t.getShallowDatabases=y,t.getShallowTables=_,t.getShallowFields=E,t.getShallowMetrics=w,t.getShallowSegments=O,t.getMetadata=(0,a.createSelector)([y,g,_,E,O,w],function(e,t,n,r,a,p){var h=new i.default;return h.databases=k(h,e,o.default),h.schemas=k(h,t,u.default),h.tables=k(h,n,l.default),h.fields=k(h,r,s.default),h.segments=k(h,a,d.default),h.metrics=k(h,p,c.default),T(h.databases,"tables",h.tables),A(h.schemas,"database",function(e){return h.database(e.database)}),T(h.tables,"fields",h.fields),T(h.tables,"segments",h.segments),T(h.tables,"metrics",h.metrics),A(h.tables,"db",function(e){return h.database(e.db_id||e.db)}),A(h.tables,"schema",function(e){return h.schema(e.schema)}),A(h.databases,"schemas",function(e){return e.schemas?e.schemas.map(function(e){return h.schema(e)}):e.tables.length>0?f.default.uniq(e.tables.map(function(e){return e.schema})):Object.values(h.schemas).filter(function(t){return t.database&&t.database.id===e.id})}),A(h.schemas,"tables",function(e){return e.tables?e.tables.map(function(e){return h.table(e)}):e.database&&e.database.tables.length>0?e.database.tables.filter(function(t){return t.schema_name===e.name}):Object.values(h.tables).filter(function(t){return t.schema&&t.schema.id===e.id})}),A(h.segments,"table",function(e){return h.table(e.table_id)}),A(h.metrics,"table",function(e){return h.table(e.table_id)}),A(h.fields,"table",function(e){return h.table(e.table_id)}),A(h.fields,"target",function(e){return h.field(e.fk_target_field_id)}),A(h.fields,"name_field",function(e){return null!=e.name_field?h.field(e.name_field):e.table&&e.isPK()?f.default.find(e.table.fields,function(e){return e.isEntityName()}):void 0}),A(h.fields,"values",function(e){return(0,m.getFieldValues)(e)}),A(h.fields,"remapping",function(e){return new Map((0,m.getRemappings)(e))}),h})),C=(t.getDatabases=(0,a.createSelector)([S],function(e){return e.databases}),t.getTables=(0,a.createSelector)([S],function(e){return e.tables}),t.getFields=(0,a.createSelector)([S],function(e){return e.fields}),t.getMetrics=(0,a.createSelector)([S],function(e){return e.metrics}),t.getSegments=(0,a.createSelector)([S],function(e){return e.segments}),function(e,t){var n;return(n=f.default.chain((0,h.getIn)(e,["entities","fields"]))).pick.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t.parameter.field_ids||[t.parameter.field_id])).mapObject(m.getFieldValues).value()}),x=(0,a.createSelectorCreator)(a.defaultMemoize,function(e,t){return(0,p.shallowEqual)(f.default.mapObject(e,function(e){return e.length}),f.default.mapObject(t,function(e){return e.length}))});t.makeGetMergedParameterFieldValues=function(){return x(C,function(e){var t=Object.keys(e);if(0===t.length)return[];if(1===t.length){var n=e[t[0]];return(r=n)&&1===r.length&&r[0]&&"boolean"==typeof r[0][0]?[[!0],[!1]]:r}var r,a=f.default.chain(Object.values(e)).flatten(!0).sortBy(function(e){return 2===e.length?e[1]:e[0]}).value();return f.default.uniq(a,!1,function(e){return e[0]})})};function k(e,t,n){var r={},a=!0,i=!1,o=void 0;try{for(var u,l=Object.values(t)[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value;s&&null!=s.id?(r[s.id]=new n(s),r[s.id].metadata=e):console.warn("Missing id:",s)}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return r}function A(e,t,n){var r=!0,a=!1,i=void 0;try{for(var o,u=Object.values(e)[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;l[t]=n(l)}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}}function T(e,t,n){A(e,t,function(e){return(e[t]||[]).map(function(e){return n[e]}).filter(function(e){return null!=e})})}function P(e,t){var n={},a=!0,i=!1,o=void 0;try{for(var u,l=Object.entries(e)[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=r(u.value,2),c=s[0],d=s[1];t(d)&&(n[c]=d)}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return n}},270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(0)),i=u(n(2)),o=u(n(375));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.value,n=e.onChange,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value","onChange"]);return a.default.createElement(o.default,r({},i,{value:void 0===t?void 0:{model:"collection",id:t},onChange:function(e){return n(e?e.id:void 0)},models:["collection"]}))};l.displayName="CollectionPicker",l.propTypes={value:i.default.number,onChange:i.default.func.isRequired},t.default=l},274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DimensionPicker=t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=(r=["Add grouping"],a=["Add grouping"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),l=n(0),s=g(l),c=g(n(3)),d=n(1),f=g(n(170)),p=g(n(5)),m=g(n(37)),h=g(n(29)),v=n(31),y=(g(v),g(n(4)));function g(e){return e&&e.__esModule?e:{default:e}}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _={attachment:"top left",targetAttachment:"top right",targetOffset:"0 0",constraints:[{to:"window",attachment:"together",pin:["left","right"]}]},E=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={sections:[]},r.state={sections:[]},r.itemIsSelected=function(e){var t=r._getDimensions();return e.dimension&&c.default.any(t,function(t){return e.dimension.isSameBaseDimension(t)})},r.renderItemExtra=function(e,t,n){var a=r.props,i=a.dimension,o=a.enableSubDimensions,l=a.onAddDimension,c=a.onRemoveDimension,f=o&&e.dimension&&e.dimension.dimensions(),v=!(!l&&!c);return s.default.createElement("div",{className:"Field-extra flex align-center"},e.dimension&&e.dimension.tag&&s.default.createElement("span",{className:"h5 text-light px1"},e.dimension.tag),f&&f.length>0?s.default.createElement(m.default,{className:r.props.className,hasArrow:!1,triggerElement:r.renderSubDimensionTrigger(e.dimension,v),tetherOptions:v?null:_,sizeToFit:!0},function(e){var t=e.onClose;return s.default.createElement(w,{className:"scroll-y",dimension:i,dimensions:f,onChangeDimension:function(e){r.props.onChangeDimension(e),t()}})}):null,!n&&l&&s.default.createElement(h.default,{tooltip:(0,d.t)(u)},s.default.createElement(p.default,{name:"add",size:14,className:"mx1 cursor-pointer hover-child faded fade-in-hover",onClick:function(t){t.stopPropagation(),r.handleAdd(e)}})),n&&c&&s.default.createElement(p.default,{name:"close",className:"mx1 cursor-pointer faded fade-in-hover",onClick:function(t){t.stopPropagation(),r.handleRemove(e)}}))},r.handleChange=function(e){var t=r.props,n=t.dimension,a=t.onChangeDimension,i=t.onChangeOther;null!=n&&r.itemIsSelected(e)?a(n,e):e.dimension?a(r._getDimensionFromItem(e),e):i&&i(e)},r.handleAdd=function(e){var t=r._getDimensionFromItem(e);t&&r.props.onAddDimension&&r.props.onAddDimension(t,e)},r.handleRemove=function(e){var t=r._getDimensionFromItem(e);t&&r.props.onRemoveDimension&&r.props.onRemoveDimension(t,e)},b(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),o(t,[{key:"componentWillMount",value:function(){this._updateSections(this.props.sections)}},{key:"componentWillReceiveProps",value:function(e){this.props.sections!==e.sections&&this._updateSections(e.sections)}},{key:"_updateSections",value:function(e){this.setState({sections:(e||[]).map(function(e){return i({},e,{items:e.items.map(function(e){return i({},e,{name:e.name||e.dimension&&e.dimension.displayName(),icon:e.icon||e.dimension&&e.dimension.icon()})})})})})}},{key:"_getDimensions",value:function(){return this.props.dimensions||(this.props.dimension?[this.props.dimension]:[])}},{key:"renderSubDimensionTrigger",value:function(e,t){var n=this._getDimensions(),r=c.default.find(n,function(t){return t.isSameBaseDimension(e)})||e.defaultDimension(),a=r?r.subTriggerDisplayName():null;return s.default.createElement("div",{className:"FieldList-grouping-trigger text-white-hover flex align-center p1 cursor-pointer"},a&&s.default.createElement("h4",null,a),!t&&s.default.createElement(p.default,{name:"chevronright",className:"ml1",size:16}))}},{key:"_getDimensionFromItem",value:function(e){var t=this.props,n=t.enableSubDimensions,r=t.useOriginalDimension,a=r?e.dimension:e.dimension.defaultDimension()||e.dimension;return!n&&!r&&a instanceof v.BinnedDimension?a.baseDimension():a}},{key:"render",value:function(){return s.default.createElement(f.default,i({},this.props,{sections:this.state.sections,onChange:this.handleChange,itemIsSelected:this.itemIsSelected,renderItemExtra:this.renderItemExtra,getItemClassName:function(){return"hover-parent hover--visibility"}}))}}]),t}();E.displayName="DimensionList",t.default=E;var w=t.DimensionPicker=function(e){var t=e.style,n=e.className,r=e.dimension,a=e.dimensions,i=e.onChangeDimension;return s.default.createElement("ul",{className:(0,y.default)(n,"px2 py1"),style:t},a.map(function(e,t){return s.default.createElement("li",{key:t,className:(0,y.default)("List-item",{"List-item--selected":e.isEqual(r)})},s.default.createElement("a",{className:"List-item-title full px2 py1 cursor-pointer",onClick:function(){return i(e)}},e.subDisplayName()))}))};w.displayName="DimensionPicker"},275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(0)),i=u(n(550)),o=n(10);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.value,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value"]);if(n.hide)return null;if(n.remap)return a.default.createElement(i.default,r({value:t},n));var u=(0,o.formatValue)(t,r({},n,{jsx:!0}));return a.default.isValidElement(u)?u:a.default.createElement("span",null,u)}},276:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupSelect=void 0;var r=p(["No groups"],["No groups"]),a=p(["Groups"],["Groups"]),i=f(n(0)),o=n(1),u=f(n(5)),l=f(n(42)),s=f(n(37)),c=f(n(608)),d=n(125);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m=t.GroupSelect=function(e){var t=e.groups,n=e.selectedGroupIds,f=void 0===n?new Set:n,p=e.onGroupChange,m=e.isCurrentUser,h=void 0!==m&&m,v=e.emptyListMessage,y=void 0===v?(0,o.t)(r):v,g=i.default.createElement("div",{className:"flex align-center"},i.default.createElement("span",{className:"mr1 text-medium"},i.default.createElement(c.default,{groups:t,selectedGroupIds:f})),i.default.createElement(u.default,{className:"text-light",name:"chevrondown",size:10}));if(0===t.length)return i.default.createElement(s.default,{triggerElement:g},i.default.createElement("span",{className:"p1"},y));var b=t.filter(function(e){return!(0,d.isAdminGroup)(e)&&!(0,d.isDefaultGroup)(e)}),_=t.find(d.isAdminGroup),E=[t.find(d.isDefaultGroup),_].filter(function(e){return null!=e});return i.default.createElement(l.default,{triggerElement:g,onChange:function(e){var n=e.target.value;t.filter(function(e){return f.includes(e.id)^n.includes(e.id)}).forEach(function(e){return p(e,n.includes(e.id))})},optionDisabledFn:function(e){return(0,d.isAdminGroup)(e)&&h||!(0,d.canEditMembership)(e)},optionValueFn:function(e){return e.id},optionNameFn:d.getGroupNameLocalized,optionClassNameFn:d.getGroupColor,value:f,sections:E.length>0?[{items:E},{items:b,name:(0,o.t)(a)}]:[{items:b}],multiple:!0})};m.displayName="GroupSelect",t.default=m},277:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearTemporaryPassword=t.deleteMembership=t.createMembership=t.loadMemberships=t.CLEAR_TEMPORARY_PASSWORD=t.DELETE_MEMBERSHIP=t.CREATE_MEMBERSHIP=t.LOAD_MEMBERSHIPS=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(18),u=f(n(16)),l=n(17),s=f(n(3)),c=n(11),d=f(n(106));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var h,v,y=t.LOAD_MEMBERSHIPS="metabase/admin/people/LOAD_MEMBERSHIPS",g=t.CREATE_MEMBERSHIP="metabase/admin/people/CREATE_MEMBERSHIP",b=t.DELETE_MEMBERSHIP="metabase/admin/people/DELETE_MEMBERSHIP",_=t.CLEAR_TEMPORARY_PASSWORD="metabase/admin/people/CLEAR_TEMPORARY_PASSWORD",E=(t.loadMemberships=(0,o.createAction)(y,m(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s.default,e.next=3,l.PermissionsApi.memberships();case 3:return e.t1=e.sent,e.t2=function(e){return[e.membership_id,e]},e.abrupt("return",e.t0.chain.call(e.t0,e.t1).values().flatten().map(e.t2).object().value());case 6:case"end":return e.stop()}},e,void 0)}))),t.createMembership=(0,o.createAction)(g,(h=m(regeneratorRuntime.mark(function e(t){var n,r=t.userId,a=t.groupId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.PermissionsApi.createMembership({user_id:r,group_id:a});case 2:return n=e.sent,u.default.trackEvent("People Groups","Membership Added"),e.abrupt("return",{user_id:r,group_id:a,membership_id:s.default.findWhere(n,{user_id:r}).membership_id});case 5:case"end":return e.stop()}},e,void 0)})),function(e){return h.apply(this,arguments)})),t.deleteMembership=(0,o.createAction)(b,(v=m(regeneratorRuntime.mark(function e(t){var n=t.membershipId;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.PermissionsApi.deleteMembership({id:n});case 2:return u.default.trackEvent("People Groups","Membership Deleted"),e.abrupt("return",n);case 4:case"end":return e.stop()}},e,void 0)})),function(e){return v.apply(this,arguments)})),t.clearTemporaryPassword=(0,o.createAction)(_),(0,o.handleActions)((p(r={},y,{next:function(e,t){return t.payload}}),p(r,g,{next:function(e,t){var n=t.payload;return(0,c.assoc)(e,n.membership_id,n)}}),p(r,b,{next:function(e,t){var n=t.payload;return(0,c.dissoc)(e,n)}}),r),{})),w=(0,o.handleActions)((p(a={},d.default.actionTypes.CREATE,{next:function(e,t){var n=t.payload;return i({},e,p({},n.id,n.password))}}),p(a,d.default.actionTypes.PASSWORD_RESET_MANUAL,{next:function(e,t){var n=t.payload;return i({},e,p({},n.id,n.password))}}),p(a,_,{next:function(e,t){var n=t.payload;return i({},e,p({},n,null))}}),a),{});t.default=(0,o.combineReducers)({memberships:E,temporaryPasswords:w})},278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(["Enabled"],["Enabled"]),a=s(["Disabled"],["Disabled"]),i=l(n(0)),o=n(1),u=l(n(86));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var c=function(e){var t=e.setting,n=e.onChange,l=e.disabled,s=null==t.value?t.default:t.value,c=!0===s||"true"===s;return i.default.createElement("div",{className:"flex align-center pt1"},i.default.createElement(u.default,{value:c,onChange:l?null:function(){return n(!c)}}),i.default.createElement("span",{className:"text-bold mx1"},c?(0,o.t)(r):(0,o.t)(a)))};c.displayName="SettingToggle",t.default=c},279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(0)),i=u(n(5)),o=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.title,n=e.description,u=e.hidden,l=e.disabled,s=e.set,c=e.widget,d=e.value,f=e.onChange,p=e.props,m=e.noPadding,h=e.noReset,v=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["title","description","hidden","disabled","set","widget","value","onChange","props","noPadding","noReset"]);return a.default.createElement("div",{className:(0,o.default)({mb3:!u,mx4:!m,hide:u,disable:l})},t&&a.default.createElement("h4",{className:"mb1 flex align-center"},t,a.default.createElement(i.default,{size:12,className:(0,o.default)("ml1 text-light text-medium-hover cursor-pointer",{hidden:!s||h}),name:"refresh",tooltip:"Reset to default",onClick:function(){return f(void 0)}})),n&&a.default.createElement("div",{className:"mb1"},n),c&&a.default.createElement(c,r({value:d,onChange:f},v,p)))};l.displayName="ChartSettingsWidget",t.default=l},28:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PLUGIN_APP_INIT_FUCTIONS=[],t.PLUGIN_LANDING_PAGE=[],t.PLUGIN_LOGO_ICON_COMPONENTS=[],t.PLUGIN_ADMIN_NAV_ITEMS=[],t.PLUGIN_ADMIN_ROUTES=[],t.PLUGIN_ADMIN_SETTINGS_UPDATES=[],t.PLUGIN_ADMIN_PERMISSIONS_TABLE_ROUTES=[],t.PLUGIN_ADMIN_PERMISSIONS_TABLE_FIELDS_OPTIONS=[],t.PLUGIN_ADMIN_PERMISSIONS_TABLE_FIELDS_ACTIONS={controlled:[]},t.PLUGIN_ADMIN_PERMISSIONS_TABLE_FIELDS_POST_ACTION={controlled:null},t.PLUGIN_ADMIN_PERMISSIONS_TABLE_FIELDS_PERMISSION_VALUE={controlled:null},t.PLUGIN_ADMIN_USER_FORM_FIELDS=[],t.PLUGIN_AUTH_PROVIDERS=[],t.PLUGIN_SHOW_CHANGE_PASSWORD_CONDITIONS=[],t.PLUGIN_DRILLS=[],t.PLUGIN_CHART_SETTINGS={},t.PLUGIN_TABLE_COLUMN_SETTINGS=[];var r=t.PLUGIN_FORMATTING_HELPERS={url:function(e,t){return String(e)},urlText:function(e,t){return t.link_text||r.url(e,t)}};t.PLUGIN_SELECTORS={getShowAuthScene:function(e,t){return!0},getLogoBackgroundClass:function(e,t){return"bg-white"}},t.PLUGIN_SNIPPET_SIDEBAR_PLUS_MENU_OPTIONS=[],t.PLUGIN_SNIPPET_SIDEBAR_ROW_RENDERERS={},t.PLUGIN_SNIPPET_SIDEBAR_MODALS=[],t.PLUGIN_SNIPPET_SIDEBAR_HEADER_BUTTONS=[]},280:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.parseQueryParam=S;var o=n(0),u=y(o),l=n(6),s=y(n(688)),c=y(n(5)),d=n(7),f=n(27),p=y(n(134)),m=y(n(4)),h=y(n(31)),v=n(253);function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=(0,l.connect)(function(e){return{metadata:(0,f.getMetadata)(e)}})(r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.defaultProps={syncQueryString:!1,vertical:!1,commitImmediately:!1},r.handleSortEnd=function(e){var t=e.oldIndex,n=e.newIndex,a=r.props,i=a.parameters,o=a.setParameterIndex;o&&o(i[t].id,n)},g(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.parameters,n=e.setParameterValue,r=e.query,a=e.metadata;if(n){var i=!0,o=!1,u=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,d=r&&r[c.slug];if(null!=d||null!=c.default){var f=null!=d?d:c.default;c.hasOnlyFieldTargets&&!/^date\//.test(c.type)&&f&&!Array.isArray(f)&&(f=[f]);var p=(c.field_ids||[]).map(function(e){return a.field(e)||h.default.parseMBQL(e,a).field()});n(c.id,S(f,p))}}}catch(e){o=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}}}},{key:"componentDidUpdate",value:function(){if(this.props.syncQueryString){var e={},t=!0,n=!1,r=void 0;try{for(var a,i=this._parametersWithValues()[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.value&&(e[o.slug]=o.value)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}var u=p.default.stringify(e);(u=u?"?"+u:"")!==window.location.search&&history.replaceState(null,document.title,window.location.pathname+u+window.location.hash)}}},{key:"_parametersWithValues",value:function(){var e=this.props,t=e.parameters,n=e.parameterValues;return n?t.map(function(e){return a({},e,{value:n[e.id]})}):t}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.editingParameter,r=e.setEditingParameter,a=e.isEditing,i=e.isFullscreen,o=e.isNightMode,l=e.hideParameters,c=e.isQB,d=e.setParameterName,f=e.setParameterValue,p=e.setParameterDefaultValue,h=e.setParameterIndex,v=e.removeParameter,y=e.vertical,g=e.commitImmediately,b=new Set((l||"").split(",")),S=this._parametersWithValues(),C=void 0,x=void 0;return a?(C=w,x=O):(C=s.default,x=_),u.default.createElement(x,{className:(0,m.default)(t,"flex align-end flex-wrap",y?"flex-column":"flex-row",{mt1:c}),axis:"x",distance:9,onSortEnd:this.handleSortEnd},S.filter(function(e){return!b.has(e.slug)}).map(function(e,t){return u.default.createElement(C,{key:e.id,className:(0,m.default)("relative hover-parent hover--visibility",{mb2:y}),isEditing:a,isFullscreen:i,isNightMode:o,parameter:e,parameters:S,editingParameter:n,setEditingParameter:r,index:t,setName:d&&function(t){return d(e.id,t)},setValue:f&&function(t){return f(e.id,t)},setDefaultValue:p&&function(t){return p(e.id,t)},remove:v&&function(){return v(e.id)},commitImmediately:g},a&&h?u.default.createElement(E,null):null)}))}}]),t}())||r;b.displayName="Parameters",t.default=b;var _=function(e){var t=e.children,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children"]);return u.default.createElement("div",n,t)};_.displayName="StaticParameterWidgetList";var E=(0,v.SortableHandle)(function(){return u.default.createElement("div",{className:"absolute top bottom left flex layout-centered hover-child cursor-grab",style:{color:(0,d.color)("border"),width:"1em",marginLeft:"1px"}},u.default.createElement(c.default,{name:"grabber2",size:12}))}),w=(0,v.SortableElement)(s.default),O=(0,v.SortableContainer)(_);function S(e,t){if(Array.isArray(e))return e.map(function(e){return S(e,t)});if(t.length>0){if(t.every(function(e){return e.isNumeric()&&!e.isDate()}))return parseFloat(e);if(t.every(function(e){return e.isBoolean()}))return"true"===e||"false"!==e&&e}return e}},281:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=i(n(0)),a=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.className,n=void 0===t?"border-brand":t,i=e.legend,o=e.noPadding,u=e.children,l=(0,a.default)("bordered rounded",{"px2 pb2":!o});return r.default.createElement("fieldset",{className:(0,a.default)(n,l)},i&&r.default.createElement("legend",{className:"h5 text-bold text-uppercase px1 text-nowrap text-medium"},i),r.default.createElement("div",null,u))}o.displayName="FieldSet"},282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=E(["Download full results"],["Download full results"]),a=E(["Download this data"],["Download this data"]),i=E(["Your answer has a large number of rows so it could take a while to download."],["Your answer has a large number of rows so it could take a while to download."]),o=E(["The maximum download size is 1 million rows."],["The maximum download size is 1 million rows."]),u=_(n(0)),l=_(n(2)),s=n(20),c=n(1),d=n(378),f=_(n(134)),p=_(n(37)),m=_(n(5)),h=_(n(706)),v=_(n(29)),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(23)),g=_(n(3)),b=_(n(4));function _(e){return e&&e.__esModule?e:{default:e}}function E(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var w=["csv","xlsx","json"],O=function(e){var t=e.className,n=e.classNameClose,l=e.card,d=e.result,f=e.uuid,h=e.token,y=e.dashcardId,g=e.icon,_=e.params;return u.default.createElement(p.default,{triggerElement:u.default.createElement(v.default,{tooltip:(0,c.t)(r)},u.default.createElement(m.default,{title:(0,c.t)(a),name:g,size:20})),triggerClasses:(0,b.default)(t,"text-brand-hover"),triggerClassesClose:n},u.default.createElement(s.Box,{p:2,w:d.data&&null!=d.data.rows_truncated?300:260},u.default.createElement(s.Box,{p:1},u.default.createElement("h4",null,(0,c.t)(r))),null!=d.data&&null!=d.data.rows_truncated&&u.default.createElement(s.Box,{px:1},u.default.createElement("p",null,(0,c.t)(i)),u.default.createElement("p",null,(0,c.t)(o))),u.default.createElement(s.Box,null,w.map(function(e){return u.default.createElement(s.Box,{key:e,w:"100%"},y&&h?u.default.createElement(A,{key:e,type:e,dashcardId:y,token:h,card:l,params:_}):f?u.default.createElement(x,{key:e,type:e,uuid:f,result:d}):h?u.default.createElement(k,{key:e,type:e,token:h}):l&&l.id?u.default.createElement(C,{key:e,type:e,card:l,result:d}):l&&!l.id?u.default.createElement(S,{key:e,type:e,card:l,result:d}):null)}))))};O.displayName="QueryDownloadWidget";var S=function(e){var t=e.type,n=e.result.json_query;e.card;return u.default.createElement(h.default,{url:"api/dataset/"+t,params:{query:JSON.stringify(g.default.omit(n,"constraints"))},extensions:[t]},t)};S.displayName="UnsavedQueryButton";var C=function(e){var t=e.type,n=e.result.json_query,r=e.card;return u.default.createElement(h.default,{url:"api/card/"+r.id+"/query/"+t,params:{parameters:JSON.stringify(n.parameters)},extensions:[t]},t)};C.displayName="SavedQueryButton";var x=function(e){var t=e.type,n=e.uuid,r=e.result.json_query;return u.default.createElement(h.default,{method:"GET",url:y.publicQuestion(n,t),params:{parameters:JSON.stringify(r.parameters)},extensions:[t]},t)};x.displayName="PublicQueryButton";var k=function(e){var t=e.type,n=e.token,r=(0,d.parse)(window.location.href).query,a=r&&f.default.parse(r);return u.default.createElement(h.default,{method:"GET",url:y.embedCard(n,t),params:a,extensions:[t]},t)};k.displayName="EmbedQueryButton";var A=function(e){var t=e.type,n=e.dashcardId,r=e.token,a=e.card,i=e.params;return u.default.createElement(h.default,{method:"GET",url:"api/embed/dashboard/"+r+"/dashcard/"+n+"/card/"+a.id+"/"+t,extensions:[t],params:i},t)};A.displayName="DashboardEmbedQueryButton",O.propTypes={card:l.default.object,result:l.default.object,uuid:l.default.string,icon:l.default.string,params:l.default.object},O.defaultProps={result:{},icon:"download",params:{}},O.shouldRender=function(e){var t=e.result;return!e.isResultDirty&&t&&!t.error},t.default=O},285:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.entityListLoader=t.default=void 0;var r,a,i,o,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=y(n(0)),c=n(6),d=y(n(3)),f=n(32),p=n(18),m=y(n(231)),h=y(n(609)),v=y(n(38));function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=["entityType","entityQuery","wrapped","loadingAndErrorWrapper","selectorName"],_=(0,p.createMemoizedSelector)([function(e,t){return"function"==typeof t.entityQuery?t.entityQuery(e,t):t.entityQuery}],function(e){return e}),E=(0,m.default)()(r=(0,h.default)()(r=(0,c.connect)(function(e,t){var n=t.entityDef,r=t.entityQuery,a=t.page,i=t.pageSize,o=t.allLoading,u=t.allLoaded,s=t.allFetched,c=t.allError,d=t.selectorName,f=void 0===d?"getList":d;"function"==typeof r&&(r=r(e,t)),"number"==typeof i&&"number"==typeof a&&(r=l({limit:i,offset:i*a},r)),r=_(e,{entityQuery:r});var p=n.selectors.getLoading(e,{entityQuery:r}),m=n.selectors.getLoaded(e,{entityQuery:r}),h=n.selectors.getFetched(e,{entityQuery:r}),v=n.selectors.getError(e,{entityQuery:r});return{entityQuery:r,list:n.selectors[f](e,{entityQuery:r}),loading:p,loaded:m,fetched:h,error:v,allLoading:p||null!=o&&o,allLoaded:m&&(null==u||u),allFetched:h&&(null==s||s),allError:v||(null==c?null:c)}})((i=a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(n),n._getWrappedList=(0,f.createSelector)([function(e){return e.list},function(e){return e.dispatch},function(e){return e.entityDef}],function(e,t,n){return e&&e.map(function(e){return n.wrapEntity(e,t)})}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),u(t,[{key:"fetchList",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(t,n){var r,a=t.fetchList,i=t.entityQuery,o=t.pageSize,u=t.onChangeHasMorePages;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(i,n);case 2:return r=e.sent,"number"==typeof o&&u&&u(!r.payload.result||r.payload.result.length===o),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})});return function(e,n){return t.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){this.fetchList(this.props,{reload:this.props.reload})}},{key:"componentWillReceiveProps",value:function(e){d.default.isEqual(e.entityQuery,this.props.entityQuery)?!this.props.loaded||e.loaded||e.loading||this.fetchList(e):this.fetchList(e,{reload:e.reload})}},{key:"render",value:function(){var e=this.props,t=e.allFetched,n=e.allError;return this.props.loadingAndErrorWrapper?s.default.createElement(v.default,{loading:!t,error:n,children:this.renderChildren,noWrapper:!0}):this.renderChildren()}}]),t}(),a.defaultProps={loadingAndErrorWrapper:!0,reload:!1,wrapped:!1},o=function(){var e=this;this.renderChildren=function(){var t,n=e.props,r=n.children,a=n.entityDef,i=n.wrapped,o=n.list,u=(n.reload,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["children","entityDef","wrapped","list","reload"]));return i&&(o=e._getWrappedList(e.props)),r(l({},d.default.omit.apply(d.default,[u].concat(b)),(g(t={list:o},a.nameMany,o),g(t,"reload",e.reload),t)))},this.reload=function(){e.fetchList(e.props,{reload:!0})}},r=i))||r)||r)||r;E.displayName="EntityListLoader",t.default=E;t.entityListLoader=function(e){return function(t){return function(n){return s.default.createElement(E,l({},n,e),function(e){return s.default.createElement(t,l({},d.default.omit.apply(d.default,[n].concat(b)),e))})}}}},286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.entityObjectLoader=t.default=void 0;var r,a,i,o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=h(n(0)),c=n(6),d=n(32),f=h(n(3)),p=h(n(231)),m=h(n(38));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var g=["entityType","entityId","wrapped","properties","loadingAndErrorWrapper","selectorName"],b=(0,p.default)()(r=(0,c.connect)(function(e,t){var n=t.entityDef,r=t.entityId,a=t.selectorName,i=void 0===a?"getObject":a,o=y(t,["entityDef","entityId","selectorName"]);return"function"==typeof r&&(r=r(e,o)),{entityId:r,object:n.selectors[i](e,{entityId:r}),fetched:n.selectors.getFetched(e,{entityId:r}),loading:n.selectors.getLoading(e,{entityId:r}),error:n.selectors.getError(e,{entityId:r})}})((i=a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.call(n),n._getWrappedObject=(0,d.createSelector)([function(e){return e.object},function(e){return e.dispatch},function(e){return e.entityDef}],function(e,t,n){return e&&n.wrapEntity(e,t)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),l(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.entityId,n=e.fetch;null!=t&&n({id:t},{reload:this.props.reload,properties:this.props.properties})}},{key:"componentWillReceiveProps",value:function(e){e.entityId!==this.props.entityId&&null!=this.props.entityId&&e.fetch({id:e.entityId},{reload:e.reload,properties:e.properties})}},{key:"render",value:function(){var e=this.props,t=e.entityId,n=e.fetched,r=e.error;return e.loadingAndErrorWrapper?s.default.createElement(m.default,{loading:!n&&null!=t,error:r,children:this.renderChildren,noWrapper:!0}):this.renderChildren()}}]),t}(),a.defaultProps={loadingAndErrorWrapper:!0,reload:!1,wrapped:!1},o=function(){var e=this;this.renderChildren=function(){var t,n=e.props,r=n.children,a=n.entityDef,i=n.wrapped,o=n.object,l=y(n,["children","entityDef","wrapped","object"]);return i&&(o=e._getWrappedObject(e.props)),r(u({},f.default.omit.apply(f.default,[l].concat(g)),(v(t={object:o},a.nameOne,o),v(t,"reload",e.reload),v(t,"remove",e.remove),t)))},this.reload=function(){return e.props.fetch({id:e.props.entityId},{reload:!0,properties:e.props.properties})},this.remove=function(){return e.props.delete(e.props.object)}},r=i))||r)||r;b.displayName="EntityObjectLoader",t.default=b;t.entityObjectLoader=function(e){return function(t){return function(n){return s.default.createElement(b,u({},n,e),function(e){return s.default.createElement(t,u({},f.default.omit.apply(f.default,[n].concat(g)),e))})}}}},29:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestTooltipContent=t.TestTooltipTarget=t.TestTooltip=t.default=void 0;var r,a,i,o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=m(s),d=m(n(2)),f=m(n(15)),p=m(n(301));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=[];function b(e){var t=(g=g.filter(function(t){return t!==e}))[g.length-1];t&&!t.state.isOpen&&t.setState({isOpen:!0})}var _=(a=r=function(e){function t(e,n){h(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._onMouseEnter=function(e){var t;t=r,(g=g.filter(function(e){return e!==t})).filter(function(e){return e.state.isOpen}).forEach(function(e){return e.setState({isOpen:!1})}),g.push(t),r.setState({isOpen:!0,isHovered:!0})},r._onMouseLeave=function(e){b(r),r.setState({isOpen:!1,isHovered:!1})},r._onMouseDown=function(e){r.setState({isOpen:!1})},r._onMouseUp=function(e){r.timer=setTimeout(function(){return r.setState({isOpen:r.state.isHovered})},0)},r.state={isOpen:!1,isHovered:!1},r}return y(t,s.Component),l(t,[{key:"componentDidMount",value:function(){var e=f.default.findDOMNode(this);e?(e.addEventListener("mouseenter",this._onMouseEnter,!1),e.addEventListener("mouseleave",this._onMouseLeave,!1),e.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("mouseup",this._onMouseUp,!0)):console.warn("Tooltip::componentDidMount: no DOM node for tooltip "+this.props.tooltip),this._element=document.createElement("div"),this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isEnabled,n=e.tooltip,r=null!=this.props.isOpen?this.props.isOpen:this.state.isOpen;n&&t&&r?f.default.unstable_renderSubtreeIntoContainer(this,c.default.createElement(p.default,u({isOpen:!0,target:this,hasArrow:!0},this.props,{children:this.props.tooltip})),this._element):f.default.unmountComponentAtNode(this._element)}},{key:"componentWillUnmount",value:function(){b(this);var e=f.default.findDOMNode(this);e?(e.removeEventListener("mouseenter",this._onMouseEnter,!1),e.removeEventListener("mouseleave",this._onMouseLeave,!1),e.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("mouseup",this._onMouseUp,!0)):console.warn("Tooltip::componentWillUnmount: no DOM node for tooltip "+this.props.tooltip),this._element&&f.default.unmountComponentAtNode(this._element),clearTimeout(this.timer)}},{key:"render",value:function(){return c.default.Children.only(this.props.children)}}]),t}(),r.propTypes={tooltip:d.default.node,children:d.default.element.isRequired,isEnabled:d.default.bool,verticalAttachments:d.default.array,isOpen:d.default.bool},r.defaultProps={isEnabled:!0,verticalAttachments:["top","bottom"],horizontalAttachments:["center","left","right"]},a);_.displayName="Tooltip",t.default=_,(t.TestTooltip=(o=i=function(e){function t(e,n){h(this,t);var r=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._onMouseEnter=function(e){r.setState({isOpen:!0,isHovered:!0})},r._onMouseLeave=function(e){r.setState({isOpen:!1,isHovered:!1})},r.state={isOpen:!1,isHovered:!1},r}return y(t,s.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.isEnabled,n=e.tooltip,r=null!=this.props.isOpen?this.props.isOpen:this.state.isOpen;return c.default.createElement("div",null,c.default.createElement(E,{onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},this.props.children),n&&t&&r&&c.default.createElement(w,null,c.default.createElement(p.default,u({isOpen:!0,target:this},this.props,{children:this.props.tooltip})),this.props.tooltip))}}]),t}(),i.propTypes={tooltip:d.default.node,children:d.default.element.isRequired,isEnabled:d.default.bool,verticalAttachments:d.default.array,isOpen:d.default.bool},i.defaultProps={isEnabled:!0,verticalAttachments:["top","bottom"]},o)).displayName="TestTooltip";var E=t.TestTooltipTarget=function(e){var t=e.children,n=e.onMouseEnter,r=e.onMouseLeave;return c.default.createElement("div",{className:"test-tooltip-hover-area",onMouseEnter:n,onMouseLeave:r},t)};E.displayName="TestTooltipTarget";var w=t.TestTooltipContent=function(e){var t=e.children;return c.default.createElement("div",{className:"test-tooltip-content"},t)};w.displayName="TestTooltipContent"},294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadLocalization=void 0;var r,a;t.loadLocalization=(r=regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(17),a=r.I18NApi,"en"===t){e.next=7;break}return e.next=4,a.locale({locale:t});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0={headers:{language:"en","plural-forms":"nplurals=2; plural=(n != 1);"},translations:{"":{Metabase:{msgid:"Metabase",msgstr:["Metabase"]}}}};case 8:s(e.t0);case 10:case"end":return e.stop()}},e,this)}),a=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(e){return a.apply(this,arguments)});t.setLocalization=s,t.isLocale24Hour=function(){var e=(0,l.default)("2000-01-01T13:00:00").format("LT");return/^13:/.test(e)};var i,o=n(1),u=n(8),l=(i=u)&&i.__esModule?i:{default:i};function s(e){var t=e.headers.language;!function(e){var t=e.translations[""];for(var n in t)void 0===t[n].msgid&&(t[n].msgid=n)}(e),(0,o.addLocale)(t,e),(0,o.useLocale)(t),l.default.locale(t)}window.MetabaseLocalization&&s(window.MetabaseLocalization)},299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomFormFooter=t.CustomFormSection=t.CustomFormMessage=t.CustomFormSubmit=t.CustomFormField=void 0;var r,a,i,o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=x(["Submit"],["Submit"]),c=x(["Failed"],["Failed"]),d=x(["Success"],["Success"]),f=x(["Cancel"],["Cancel"]),p=C(n(0)),m=C(n(2)),h=C(n(493)),v=C(n(494)),y=C(n(382)),g=C(n(328)),b=C(n(19)),_=C(n(164)),E=C(n(3)),w=C(n(4)),O=n(1),S=n(11);function C(e){return e&&e.__esModule?e:{default:e}}function x(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function k(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function P(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var j=(a=r=function(e){function t(){return A(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,p.default.Component),l(t,[{key:"getChildContext",value:function(){var e=this.props,t=e.fields,n=e.values,r=e.formObject,a=e.submitting,i=e.invalid,o=e.pristine,u=e.error,l=e.handleSubmit,s=e.submitTitle,c=e.renderSubmit,d=e.className,f=e.style,p=e.onChangeField,m=r.fields(n);return{handleSubmit:l,submitTitle:s,renderSubmit:c,className:d,style:f,fields:t,formFields:m,formFieldsByName:E.default.indexBy(m,"name"),values:n,submitting:a,invalid:i,pristine:o,error:u,onChangeField:p}}},{key:"render",value:function(){var e=this,t=this.props,n=t.formObject,r=t.values,a=t.children;return"function"==typeof a?a(u({},this.props,{form:n,formFields:n.fields(r),Form:N,FormField:M,FormSubmit:R,FormMessage:D,FormFooter:F})):p.default.createElement(N,{formRef:function(t){return e._formRef=t}},a)}}]),t}(),r.childContextTypes={handleSubmit:m.default.func,submitTitle:m.default.string,renderSubmit:m.default.func,className:m.default.string,style:m.default.object,fields:m.default.object,formFields:m.default.array,formFieldsByName:m.default.object,values:m.default.object,submitting:m.default.bool,invalid:m.default.bool,pristine:m.default.bool,error:m.default.string,onChangeField:m.default.func},a);j.displayName="CustomForm";var N=function(e,t){var n=e.children,r=e.formRef,a=t.handleSubmit,i=t.className,o=t.style;return p.default.createElement("form",{onSubmit:a,ref:r,className:i,style:o},n)};N.displayName="Form",N.contextTypes={handleSubmit:m.default.func,className:m.default.string,style:m.default.object};var M=t.CustomFormField=(o=i=function(e){function t(){return A(this,t),T(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return P(t,p.default.Component),l(t,[{key:"_getFieldDefinition",value:function(){return E.default.pick(this.props,"name","type","title","description","initial","validate","normalize")}},{key:"componentWillMount",value:function(){this.context.registerFormField&&this.context.registerFormField(this._getFieldDefinition())}},{key:"componentWillUnmount",value:function(){this.context.unregisterFormField&&this.context.unregisterFormField(this._getFieldDefinition())}},{key:"render",value:function(){var e=this.props.name,t=this.context,n=t.fields,r=t.formFieldsByName,a=t.values,i=t.onChangeField,o=(0,S.getIn)(n,e.split(".")),l=r[e];if(!o||!l)return null;var s=u({},this.props,{values:a,onChangeField:i,field:o,formField:l});return p.default.createElement(h.default,s,p.default.createElement(v.default,s))}}]),t}(),i.contextTypes={fields:m.default.object,formFieldsByName:m.default.object,values:m.default.object,onChangeField:m.default.func,registerFormField:m.default.func,unregisterFormField:m.default.func},o);M.displayName="CustomFormField";var R=function(e,t){t.values;var n=t.submitting,r=t.invalid,a=(t.pristine,t.handleSubmit),i=t.submitTitle,o=t.renderSubmit,l=e.children,f=k(e,["children"]),m=l||i||(0,O.t)(s),h=!(n||r);return o?o({canSubmit:h,title:m,handleSubmit:a}):p.default.createElement(_.default,u({normalText:m,activeText:m,failedText:(0,O.t)(c),successText:(0,O.t)(d),primary:h,disabled:!h},f,{type:"submit",actionFn:a}))};t.CustomFormSubmit=R,R.contextTypes={values:m.default.object,submitting:m.default.bool,invalid:m.default.bool,pristine:m.default.bool,handleSubmit:m.default.func,submitTitle:m.default.string,renderSubmit:m.default.func};var D=t.CustomFormMessage=function(e,t){var n=t.error;return n?p.default.createElement(y.default,{message:n,formError:!0}):null};D.contextTypes={error:m.default.string},t.default=j;var L=function(e){var t=e.title,n=e.children;return p.default.createElement("section",{className:"mb4"},t&&p.default.createElement("h2",{className:"mb2"},t),n)};L.displayName="StandardSection";var I=function(e){function t(){var e,n,r;A(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={show:!1},r.handleToggle=function(){r.setState(function(e){return{show:!e.show}})},T(r,n)}return P(t,p.default.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.children,r=this.state.show;return p.default.createElement("section",{className:"mb4"},p.default.createElement("div",{className:"mb2 flex align-center cursor-pointer text-brand-hover",onClick:this.handleToggle},p.default.createElement(g.default,{className:"mr1",open:r}),p.default.createElement("h3",null,t)),p.default.createElement("div",{className:r?null:"hide"},n))}}]),t}();I.displayName="CollapsibleSection";t.CustomFormSection=function(e){var t=e.collapsible,n=k(e,["collapsible"]);return t?p.default.createElement(I,n):p.default.createElement(L,n)};var F=t.CustomFormFooter=function(e,t){var n=e.submitTitle,r=e.cancelTitle,a=void 0===r?(0,O.t)(f):r,i=e.onCancel,o=e.footerExtraButtons,u=t.isModal;return p.default.createElement("div",{className:(0,w.default)("flex align-center",{"flex-reverse":u})},p.default.createElement(R,null,n),i&&p.default.createElement(b.default,{className:"mx1",onClick:i},a),p.default.createElement("div",{className:"flex-full"}),p.default.createElement(D,null),o)};F.displayName="CustomFormFooter",F.contextTypes={isModal:m.default.bool}},300:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEBUG=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(25),i=void 0;i=!("object"!==("undefined"==typeof window?"undefined":r(window))||!(window.location&&"#debug"===window.location.hash||a.HAS_LOCAL_STORAGE&&window.localStorage.getItem("debug")));t.DEBUG=i},301:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),i=l(n(4)),o=l(n(87)),u=l(n(60));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.children,n=e.maxWidth,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","maxWidth"]),l=void 0;if("string"==typeof t){var s=t.split(" ").length>10;l=a.default.createElement("div",{className:(0,i.default)({"py1 px2":!s},{"py2 px3":s}),style:{maxWidth:n||"12em",lineHeight:s?1.54:1}},t)}else l=t;return a.default.createElement(u.default,r({className:"PopoverBody--tooltip",targetOffsetY:10,hasArrow:!0,horizontalAttachments:["center","left","right"],noOnClickOutsideWrapper:!0},o),l)};s.displayName="TooltipPopover",t.default=(0,o.default)(s)},302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=d(i),u=d(n(15)),l=n(25),s=d(n(29)),c=d(n(4));function d(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,n;return n=t=function(t){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.state={isOpen:e.isInitiallyOpen||!1},r._startCheckObscured=r._startCheckObscured.bind(r),r._stopCheckObscured=r._stopCheckObscured.bind(r),r.onClose=r.onClose.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.Component),a(n,[{key:"open",value:function(){this.toggle(!0)}},{key:"close",value:function(){this.toggle(!1)}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.state.isOpen;this.setState({isOpen:e})}},{key:"onClose",value:function(e){e&&e.target&&u.default.findDOMNode(this.refs.trigger).contains(e.target)||(this.props.onClose&&this.props.onClose(e),this.close())}},{key:"target",value:function(){return this.props.target?this.props.target():this.refs.trigger}},{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){this.state.isOpen&&this.props.closeOnObscuredTrigger?this._startCheckObscured():this._stopCheckObscured()}},{key:"componentWillUnmount",value:function(){this._stopCheckObscured()}},{key:"_startCheckObscured",value:function(){var e=this;null==this._offscreenTimer&&(this._offscreenTimer=setInterval(function(){var t=u.default.findDOMNode(e.refs.trigger);(0,l.isObscured)(t)&&e.close()},250))}},{key:"_stopCheckObscured",value:function(){null!=this._offscreenTimer&&(clearInterval(this._offscreenTimer),this._offscreenTimer=null)}},{key:"render",value:function(){var t=this,n=this.props,a=n.triggerId,i=n.triggerClasses,u=n.triggerStyle,l=n.triggerClassesOpen,d=n.triggerClassesClose,f=null!=this.props.isOpen?this.props.isOpen:this.state.isOpen,p=this.props.triggerElement;p&&p.type===s.default&&(p=o.default.cloneElement(p,{isEnabled:p.props.isEnabled&&!f}));var m=this.props.children;return"function"==typeof m&&f?m=m({onClose:this.onClose}):1===o.default.Children.count(m)&&void 0===o.default.Children.only(m).props.onClose&&"string"!=typeof o.default.Children.only(m).type&&(m=o.default.cloneElement(m,{onClose:this.onClose})),o.default.createElement("a",{id:a,ref:"trigger",onClick:function(e){e.preventDefault(),!t.props.disabled&&t.toggle()},className:(0,c.default)(i,f&&l,!f&&d,"no-decoration",{"cursor-default":this.props.disabled}),style:u},p,o.default.createElement(e,r({},this.props,{children:m,isOpen:f,onClose:this.onClose,target:function(){return t.target()}})))}}]),n}(),t.displayName="Triggerable["+(e.displayName||e.name)+"]",t.defaultProps={closeOnObscuredTrigger:!1},n}},3025:function(e,t,n){"use strict";var r,a=n(460),i=n(3026),o=n(1003),u=(r=o)&&r.__esModule?r:{default:r};(0,a.init)(u.default,i.getRoutes,function(){})},3026:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRoutes=void 0;var r=s(n(0)),a=n(22),i=s(n(724)),o=s(n(1e3)),u=s(n(719)),l=s(n(722));function s(e){return e&&e.__esModule?e:{default:e}}(t.getRoutes=function(e){return r.default.createElement(a.Route,null,r.default.createElement(a.Route,{path:"public",component:o.default},r.default.createElement(a.Route,{path:"question/:uuid",component:u.default}),r.default.createElement(a.Route,{path:"dashboard/:uuid",component:l.default}),r.default.createElement(a.Route,{path:"*",component:i.default})),r.default.createElement(a.Route,{path:"*",component:i.default}))}).displayName="getRoutes"},304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(i=["Find..."],o=["Find..."],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),s=n(0),c=h(s),d=h(n(2)),f=h(n(5)),p=n(1),m=h(n(4));function h(e){return e&&e.__esModule?e:{default:e}}var v=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),u(t,[{key:"componentDidMount",value:function(){var e=this;this.props.autoFocus&&setTimeout(function(){return e._input&&e._input.focus()},50)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.inputClassName,a=t.onChange,i=t.placeholder,o=t.searchText;return c.default.createElement("div",{className:(0,m.default)(n,"bordered rounded text-light flex flex-full align-center")},c.default.createElement("span",{className:"px1"},c.default.createElement(f.default,{name:"search",size:16})),c.default.createElement("input",{className:(0,m.default)(r,"p1 h4 input--borderless text-default flex-full"),type:"text",placeholder:i,value:o,onChange:function(e){return a(e.target.value)},ref:function(t){return e._input=t}}))}}]),t}(),r.propTypes={onChange:d.default.func.isRequired,placeholder:d.default.string,searchText:d.default.string,autoFocus:d.default.bool},r.defaultProps={placeholder:(0,p.t)(l),searchText:"",autoFocus:!1},a);v.displayName="ListSearchField",t.default=v},306:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDateFormatFromStyle=function(e,t,n){var i=function(e){return n&&e?e.replace(/\//g,n):e};t||(t="default");if(a[e]){if(a[e][t])return i(a[e][t])}else console.warn("Unknown date style",e);if(r[t])return i(r[t]);return i(e)},t.getTimeFormatFromStyle=function(e,t,n){var r=e;return n&&"milliseconds"!==n?"seconds"===n?r.replace(/mm/,"mm:ss"):r:r.replace(/mm/,"mm:ss.SSS")};var r={year:"YYYY",quarter:"[Q]Q - YYYY","minute-of-hour":"m","day-of-week":"dddd","day-of-month":"D","day-of-year":"DDD","week-of-year":"wo","month-of-year":"MMMM","quarter-of-year":"[Q]Q"},a={"M/D/YYYY":{month:"M/YYYY"},"D/M/YYYY":{month:"M/YYYY"},"YYYY/M/D":{month:"YYYY/M",quarter:"YYYY - [Q]Q"},"MMMM D, YYYY":{month:"MMMM, YYYY"},"D MMMM, YYYY":{month:"MMMM, YYYY"},"dddd, MMMM D, YYYY":{week:"MMMM D, YYYY",month:"MMMM, YYYY"}};t.DEFAULT_DATE_STYLE="MMMM D, YYYY";var i=new Set(["default","minute","hour","hour-of-day"]),o=new Set(["default","minute","hour","day","week"]);t.hasHour=function(e){return null==e||i.has(e)},t.hasDay=function(e){return null==e||o.has(e)},t.DEFAULT_TIME_STYLE="h:mm A"},307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(82),u=n(137),l=(a=u)&&a.__esModule?a:{default:a};function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c,d,f,p,m,h,v=(r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._metadata=t._metadata,this._datasetQuery=n,this._originalQuestion=t}return i(e,[{key:"question",value:function(){return this._originalQuestion.setQuery(this)}},{key:"clean",value:function(){return this}},{key:"metadata",value:function(){return this._metadata}},{key:"isEditable",value:function(){return!0}},{key:"datasetQuery",value:function(){return this._datasetQuery}},{key:"setDatasetQuery",value:function(e){return this}},{key:"isEmpty",value:function(){return!1}},{key:"canRun",value:function(){return!1}},{key:"readOnly",value:function(){return!0}},{key:"dimensionOptions",value:function(e){return new l.default}},{key:"variables",value:function(e){return[]}},{key:"dependentMetadata",value:function(){return[]}},{key:"setDefaultQuery",value:function(){return this}},{key:"update",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?e.apply(void 0,[this.datasetQuery()].concat(s(n))):(a=this.question()).update.apply(a,[void 0].concat(s(n)));var a}}]),e}(),c=r.prototype,d="question",f=[o.memoize],p=Object.getOwnPropertyDescriptor(r.prototype,"question"),m=r.prototype,h={},Object.keys(p).forEach(function(e){h[e]=p[e]}),h.enumerable=!!h.enumerable,h.configurable=!!h.configurable,("value"in h||h.initializer)&&(h.writable=!0),h=f.slice().reverse().reduce(function(e,t){return t(c,d,e)||e},h),m&&void 0!==h.initializer&&(h.value=h.initializer?h.initializer.call(m):void 0,h.initializer=void 0),void 0===h.initializer&&(Object.defineProperty(c,d,h),h=null),r);t.default=v},308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateTagVariable=t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(97),o=(r=i)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function e(t,n,r){u(this,e),this._args=t,this._metadata=n||r&&r.metadata(),this._query=r};t.default=l;var s={text:"string",number:"int",date:"calendar",dimension:null};t.TemplateTagVariable=function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l),a(t,[{key:"tag",value:function(){if(this._query instanceof o.default)return this._query.templateTagsMap()[this._args[0]]}},{key:"displayName",value:function(){var e=this.tag();return e&&(e["display-name"]||e.name)}},{key:"icon",value:function(){var e=this.tag();return e&&s[e.type]}},{key:"mbql",value:function(){return["template-tag",this._args[0]]}}]),t}()},309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(96));i(n(79)),i(n(57));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"displayName",value:function(){return this.name}},{key:"filterClause",value:function(){return["segment",this.id]}},{key:"isActive",value:function(){return!this.archived}}]),t}();t.default=o},31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemplateTagDimension=t.JoinedDimension=t.AggregationDimension=t.ExpressionDimension=t.BinnedDimension=t.DatetimeFieldDimension=t.FKDimension=t.FieldLiteralDimension=t.FieldIDDimension=t.FieldDimension=t.default=void 0;var r=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(r):void 0},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=v(["by ",""],["by ",""]),u=v([""," bin"],[""," bin"]),l=v(["Auto binned"],["Auto binned"]),s=n(1),c=h(n(3)),d=n(10),f=n(41),p=h(n(77)),m=n(78);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var E=function(){function e(t,n,r,a){_(this,e),this._parent=t,this._args=n,this._metadata=r||t&&t._metadata,this._query=a||t&&t._query}return i(e,[{key:"parseMBQL",value:function(t){return e.parseMBQL(t,this._metadata,this._query)}},{key:"dimensions",value:function(e){var t,n=this,r=this.field().dimension_options;return!e&&r?r.map(function(e){return n._dimensionForOption(e)}):(t=[]).concat.apply(t,b((e||[]).map(function(e){return e.dimensions(n)})))}},{key:"defaultDimension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=this.field().default_dimension_option;if(t){var n=this._dimensionForOption(t);if(!(n instanceof k))return n}var r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value.defaultDimension(this);if(l)return l}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return null}},{key:"_dimensionForOption",value:function(e){var t=this.baseDimension().mbql(),n=e.mbql;n=n?[n[0],t].concat(b(n.slice(2))):t;var r=this.parseMBQL(n);return e.name&&(r._subDisplayName=e.name,r._subTriggerDisplayName=e.name),r}},{key:"isEqual",value:function(t){if(null==t)return!1;var n=t instanceof e?t:this.parseMBQL(t);return!!n&&c.default.isEqual(this.mbql(),n.mbql())}},{key:"isSameBaseDimension",value:function(t){if(null==t)return!1;var n=t instanceof e?t:this.parseMBQL(t),r=this.baseDimension(),a=n&&n.baseDimension();return!!r&&!!a&&r.isEqual(a)}},{key:"baseDimension",value:function(){return this}},{key:"foreign",value:function(e){return new C(this,[e.mbql()],this._metadata,this._query)}},{key:"datetime",value:function(e){return new k(this,[e],this._metadata,this._query)}},{key:"field",value:function(){return new p.default}},{key:"columnName",value:function(){return this.field().name}},{key:"filterOperators",value:function(e){return this.field().filterOperators(e)}},{key:"filterOperator",value:function(e){return this.field().filterOperator(e)}},{key:"defaultFilterOperator",value:function(){return this.field().isDate()?null:this.filterOperators()[0]}},{key:"aggregationOperators",value:function(){return this.field().aggregationOperators()}},{key:"aggregationOperator",value:function(e){return this.field().aggregationOperator(e)}},{key:"defaultAggregationOperator",value:function(){return this.aggregationOperators()[0]}},{key:"defaultAggregation",value:function(){var e=this.defaultAggregationOperator();return e?[e.short,this.mbql()]:null}},{key:"defaultBreakout",value:function(){var e=this.defaultDimension();return e?e.mbql():this.mbql()}},{key:"displayName",value:function(){return""}},{key:"column",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.baseDimension().field();return a({id:t.id,base_type:t.base_type,special_type:t.special_type,name:this.columnName(),display_name:this.displayName(),field_ref:this.mbql()},e)}},{key:"subDisplayName",value:function(){return this._subDisplayName||""}},{key:"subTriggerDisplayName",value:function(){return this._subTriggerDisplayName||""}},{key:"icon",value:function(){return null}},{key:"query",value:function(){return this._query}},{key:"sourceDimension",value:function(){return this._query&&this._query.dimensionForSourceQuery(this)}},{key:"render",value:function(){return this._parent?this._parent.render():this.displayName()}},{key:"mbql",value:function(){throw new Error("Abstract method `mbql` not implemented")}},{key:"key",value:function(){return JSON.stringify(this.mbql())}}],[{key:"parseMBQL",value:function(e,t,n){var r=!0,a=!1,i=void 0;try{for(var o,u=M[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value.parseMBQL(e,t,n);if(null!=l)return l}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return null}},{key:"isEqual",value:function(t,n){var r=t instanceof e?t:e.parseMBQL(t),a=n instanceof e?n:e.parseMBQL(n);return!!r&&!!a&&r.isEqual(a)}},{key:"dimensions",value:function(e){return[]}},{key:"defaultDimension",value:function(e){return null}}]),e}();E.displayName="Dimension",t.default=E;var w=t.FieldDimension=function(e){function t(){return _(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,E),i(t,[{key:"field",value:function(){return this._parent instanceof t?this._parent.field():new p.default}},{key:"displayName",value:function(){return this.field().displayName()}},{key:"subDisplayName",value:function(){return this._subDisplayName?this._subTriggerDisplayName:this._parent?this.field().display_name:"Default"}},{key:"subTriggerDisplayName",value:function(){return this.defaultDimension()instanceof A?"Unbinned":""}},{key:"icon",value:function(){return this.field().icon()}}]),t}(),O=t.FieldIDDimension=function(e){function t(){return _(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,w),i(t,[{key:"mbql",value:function(){return["field-id",this._args[0]]}},{key:"field",value:function(){return this._metadata&&this._metadata.field(this._args[0])||new p.default({id:this._args[0]})}}],[{key:"parseMBQL",value:function(e,n,r){return"number"==typeof e?new t(null,[e],n,r):Array.isArray(e)&&"field-id"===e[0]?new t(null,e.slice(1),n,r):null}}]),t}(),S=t.FieldLiteralDimension=function(e){function t(){return _(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,w),i(t,[{key:"mbql",value:function(){return["field-literal"].concat(b(this._args))}},{key:"columnDimension",value:function(){var e=this;if(this._query){var t=this._query.sourceQuery(),n=t.columnNames(),r=c.default.findIndex(n,function(t){return e._args[0]===t});if(r>=0)return t.columnDimensions()[r]}}},{key:"name",value:function(){return this._args[0]}},{key:"displayName",value:function(){return this.field().displayName()}},{key:"field",value:function(){if(this._query){var e=c.default.findWhere(this._query.table().fields,{name:this.name()});if(e)return e}return new p.default({id:this.mbql(),name:this.name(),display_name:this.name(),base_type:this._args[1],query:this._query})}}],[{key:"parseMBQL",value:function(e,n,r){return Array.isArray(e)&&"field-literal"===e[0]?new t(null,e.slice(1),n,r):null}}]),t}(),C=t.FKDimension=function(e){function t(e,n,r,a){_(this,t);var i=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,a));return i._dest=i.parseMBQL(n[0]),i}return g(t,w),i(t,null,[{key:"parseMBQL",value:function(e,n,r){if(Array.isArray(e)&&"fk->"===e[0]){var a=e;return new t(E.parseMBQL(a[1],n,r),a.slice(2),n,r)}return null}},{key:"dimensions",value:function(e){if(e instanceof w){var n=e.field();if(n.target&&n.target.table)return n.target.table.fields.map(function(n){return new t(e,[n.id],e._metadata,e._query)})}return[]}}]),i(t,[{key:"mbql",value:function(){return["fk->",this._parent.mbql(),this._dest.mbql()]}},{key:"field",value:function(){return this._dest.field()}},{key:"fk",value:function(){return this._parent}},{key:"destination",value:function(){return this._dest}},{key:"column",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a({},r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"column",this).call(this),{fk_field_id:this.fk().field().id},e)}},{key:"render",value:function(){return(0,d.stripId)(this._parent.field().displayName())+" "+d.FK_SYMBOL+" "+this.field().displayName()}}]),t}();C.displayName="FKDimension";var x=function(e){return e instanceof O||e instanceof C},k=t.DatetimeFieldDimension=function(e){function t(){return _(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,w),i(t,[{key:"mbql",value:function(){return["datetime-field",this._parent.mbql(),this._args[0]]}},{key:"baseDimension",value:function(){return this._parent.baseDimension()}},{key:"unit",value:function(){return this._args[0]}},{key:"isExtraction",value:function(){return/-of-/.test(this.unit())}},{key:"isTruncation",value:function(){return!this.isExtraction()}},{key:"subDisplayName",value:function(){return(0,m.formatBucketing)(this._args[0])}},{key:"subTriggerDisplayName",value:function(){return(0,s.t)(o,(0,m.formatBucketing)(this._args[0]).toLowerCase())}},{key:"column",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a({},r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"column",this).call(this),{unit:this.unit()},e)}},{key:"render",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)+": "+this.subDisplayName()}}],[{key:"parseMBQL",value:function(e,n,r){if(Array.isArray(e)&&"datetime-field"===e[0]){var a=E.parseMBQL(e[1],n,r);return 4===e.length?new t(a,e.slice(3),n,r):new t(a,e.slice(2),n,r)}return null}},{key:"dimensions",value:function(e){var n=this;return x(e)&&e.field().isDate()?m.DATETIME_UNITS.map(function(r){return new t(e,[r],n._metadata,n._query)}):[]}},{key:"defaultDimension",value:function(e){return x(e)&&e.field().isDate()?new t(e,[e.field().getDefaultDateTimeUnit()],this._metadata,this._query):null}}]),t}();k.displayName="DatetimeFieldDimension";var A=t.BinnedDimension=function(e){function t(){return _(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,w),i(t,[{key:"mbql",value:function(){return["binning-strategy",this._parent.mbql()].concat(b(this._args))}},{key:"baseDimension",value:function(){return this._parent.baseDimension()}},{key:"subTriggerDisplayName",value:function(){if("num-bins"===this._args[0]){var e=this._args[1];return(0,s.ngettext)((0,s.msgid)(u,e),e+" bins",e)}return"bin-width"===this._args[0]?""+this._args[1]+(this.field().isCoordinate()?"°":""):(0,s.t)(l)}},{key:"render",value:function(){return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)+": "+this.subTriggerDisplayName()}}],[{key:"parseMBQL",value:function(e,n,r){return Array.isArray(e)&&"binning-strategy"===e[0]?new t(E.parseMBQL(e[1],n,r),e.slice(2)):null}},{key:"dimensions",value:function(e){return[]}}]),t}();A.displayName="BinnedDimension";var T=t.ExpressionDimension=function(e){function t(){var e,n,r;_(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.tag="Custom",y(r,n)}return g(t,E),i(t,[{key:"mbql",value:function(){return["expression",this._args[0]]}},{key:"name",value:function(){return this._args[0]}},{key:"displayName",value:function(){return this._args[0]}},{key:"columnName",value:function(){return this._args[0]}},{key:"field",value:function(){return new p.default({id:this.mbql(),name:this.name(),display_name:this.displayName(),special_type:null,base_type:"type/Float",query:this._query,table:this._query?this._query.table():null})}},{key:"icon",value:function(){return"int"}}],[{key:"parseMBQL",value:function(e,n,r){if(Array.isArray(e)&&"expression"===e[0])return new t(null,e.slice(1),n,r)}}]),t}(),P=new Set([f.TYPE.FK,f.TYPE.PK]),j=t.AggregationDimension=function(e){function t(){return _(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,E),i(t,[{key:"aggregationIndex",value:function(){return this._args[0]}},{key:"column",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a({},r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"column",this).call(this),{source:"aggregation"},e)}},{key:"field",value:function(){var e=this.aggregation();if(!e)return r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"field",this).call(this);var n=e.dimension(),i=n&&n.field(),o=(i||{}).special_type;return new p.default(a({name:e.columnName(),display_name:e.displayName(),base_type:e.baseType()},!P.has(o)&&{special_type:o},{query:this._query,metadata:this._metadata}))}},{key:"_aggregation",value:function(){return this._query&&this._query.aggregations()[this.aggregationIndex()]}},{key:"aggregation",value:function(){var e=this._aggregation();return e?e.aggregation():null}},{key:"displayName",value:function(){var e=this._aggregation();return e?e.displayName():null}},{key:"columnName",value:function(){var e=this._aggregation();return e?e.columnName():null}},{key:"mbql",value:function(){return["aggregation",this._args[0]]}},{key:"icon",value:function(){return"int"}}],[{key:"parseMBQL",value:function(e,n,r){if(Array.isArray(e)&&"aggregation"===e[0])return new t(null,e.slice(1),n,r)}}]),t}(),N=t.JoinedDimension=function(e){function t(){return _(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,w),i(t,[{key:"subDisplayName",value:function(){return this._parent.subDisplayName()}},{key:"subTriggerDisplayName",value:function(){return this._parent.subTriggerDisplayName()}},{key:"defaultDimension",value:function(){var e,t=(e=this._parent).defaultDimension.apply(e,arguments);if(t instanceof A||t instanceof k){var n=t.mbql();t=this.parseMBQL([n[0],["joined-field",this.joinAlias(),n[1]]].concat(b(n.slice(2))))}else(t instanceof O||t instanceof S)&&(t=this.parseMBQL(["joined-field",this.joinAlias(),t.mbql()]));return t}},{key:"joinAlias",value:function(){return this._args[0]}},{key:"join",value:function(){return c.default.findWhere(this._query&&this._query.joins(),{alias:this.joinAlias()})}},{key:"mbql",value:function(){return["joined-field",this._args[0],this._parent.mbql()]}},{key:"render",value:function(){return this.joinAlias()+" "+d.FK_SYMBOL+" "+r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}}],[{key:"parseMBQL",value:function(e,n,r){return Array.isArray(e)&&"joined-field"===e[0]?new t(E.parseMBQL(e[2],n,r),[e[1]],n,r):null}}]),t}();N.displayName="JoinedDimension";t.TemplateTagDimension=function(e){function t(){return _(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,w),i(t,[{key:"dimension",value:function(){if(this._query){var e=this._query.templateTagsMap()[this.tagName()];if(e&&"dimension"===e.type)return this.parseMBQL(e.dimension)}return null}},{key:"field",value:function(){var e=this.dimension();return e?e.field():r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"field",this).call(this)}},{key:"tagName",value:function(){return this._args[0]}},{key:"mbql",value:function(){return["template-tag",this.tagName()]}}]),t}();var M=[O,S,C,k,T,A,j,N]},310:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(96));i(n(79)),i(n(57));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"displayName",value:function(){return this.name}},{key:"aggregationClause",value:function(){return["metric",this.id]}},{key:"definitionQuery",value:function(){return this.definition?this.table.query().setQuery(this.definition):null}},{key:"aggregation",value:function(){var e=this.definitionQuery();if(e)return e.aggregations()[0]}},{key:"columnName",value:function(){var e=this.aggregation();return e?e.columnName():"string"==typeof this.id?this.id:null}},{key:"isActive",value:function(){return!this.archived}}]),t}();t.default=o},311:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=o(n(3)),i=(o(n(39)),n(533));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._question=t,this._queryMode=n}return r(e,[{key:"queryMode",value:function(){return this._queryMode}},{key:"name",value:function(){return this._queryMode.name}},{key:"actionsForClick",value:function(e,t){var n=this;return a.default.flatten(this._queryMode.drills().map(function(r){return r({question:n._question,settings:t,clicked:e})}))}}],[{key:"forQuestion",value:function(t){var n=(0,i.getMode)(t);return n?new e(t,n):null}}]),e}();t.default=u},312:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["View details"],a=["View details"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=n(13),u=n(1);t.default=function(e){var t=e.question,n=e.clicked;if(!n||!n.column||void 0===n.value||!(0,o.isFK)(n.column)&&!(0,o.isPK)(n.column))return[];var r=t.metadata().field(n.column.id);return r?(r.target&&(r=r.target),n?[{name:"object-detail",section:"details",title:(0,u.t)(i),default:!0,question:function(){return r?t.drillPK(r,n&&n.value):t}}]:[]):[]}},313:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),a=s(n(135)),i=s(n(5)),o=n(294),u=s(n(4)),l=s(n(8));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.hours,n=e.minutes,s=e.onChangeHours,c=e.onChangeMinutes,d=e.onClear,f=e.is24HourMode,p=void 0===f?(0,o.isLocale24Hour)():f;return r.default.createElement("div",{className:"flex align-center"},r.default.createElement(a.default,{className:"input",style:{height:36},size:2,maxLength:2,value:p?String(t):t%12==0?"12":String(t%12),onChange:p?function(e){return s(e)}:function(e){return s((t>=12?12:0)+e)}}),r.default.createElement("span",{className:"px1"},":"),r.default.createElement(a.default,{className:"input",style:{height:36},size:2,maxLength:2,value:(n<10?"0":"")+n,onChange:function(e){return c(e)}}),!p&&r.default.createElement("div",{className:"flex align-center pl1"},r.default.createElement("span",{className:(0,u.default)("text-purple-hover mr1",{"text-purple":t<12,"cursor-pointer":t>=12}),onClick:t>=12?function(){return s(t-12)}:null},l.default.localeData().meridiem(0)),r.default.createElement("span",{className:(0,u.default)("text-purple-hover mr1",{"text-purple":t>=12,"cursor-pointer":t<12}),onClick:t<12?function(){return s(t+12)}:null},l.default.localeData().meridiem(12))),d&&r.default.createElement(i.default,{className:"text-light cursor-pointer text-medium-hover ml-auto",name:"close",onClick:d}))};c.displayName="HoursMinutesInput",t.default=c},314:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(0)),a=n(42),i=u(a),o=n(78);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.className,n=(e.open,e.value),u=e.onChange,l=(e.togglePicker,e.intervals),s=e.formatter,c=e.periods;return r.default.createElement(i.default,{className:t,value:n,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return u(e.target.value)}),width:150,compact:!0},c.map(function(e){return r.default.createElement(a.Option,{value:e,key:e},(0,o.formatBucketing)(e,s(l)||1))}))};l.displayName="DateUnitSelector",t.default=l},315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=v(["You can enter multiple values separated by commas"],["You can enter multiple values separated by commas"]),u=v(["Enter desired text"],["Enter desired text"]),l=n(0),s=h(l),c=h(n(2)),d=h(n(936)),f=n(1),p=h(n(4)),m=h(n(3));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={fieldString:e.values.join(", ")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),i(t,[{key:"setValue",value:function(e){if(null!=e){var t=e.replace(/\r?\n|\r/g,"");this.setState({fieldString:t});var n=t.split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e});this.props.onValuesChange(n)}else this.props.onValuesChange([])}},{key:"render",value:function(){var e=this,t=this.props,n=t.validations,r=t.multi,a=t.onCommit,i=m.default.some(n,function(e){return!1===e});return s.default.createElement("div",null,s.default.createElement("div",{className:"FilterInput px1 pt1 relative"},s.default.createElement(d.default,{className:(0,p.default)("input block full border-purple",{"border-error":i}),type:"text",value:this.state.fieldString,onChange:function(t){return e.setValue(t.target.value)},onKeyPress:function(e){"Enter"===e.key&&a&&a()},placeholder:this.props.placeholder,autoFocus:!0,style:{resize:"none"},maxRows:8})),r?s.default.createElement("div",{className:"p1 text-small"},(0,f.t)(o)):null)}}]),t}(),r.propTypes={values:c.default.array.isRequired,onValuesChange:c.default.func.isRequired,placeholder:c.default.string,validations:c.default.array,multi:c.default.bool,onCommit:c.default.func},r.defaultProps={validations:[],placeholder:(0,f.t)(u)},a);y.displayName="TextPicker",t.default=y},316:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldValuesWidget=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=R(["Search the list"],["Search the list"]),c=R(["Search"],["Search"]),d=R(["Search by ",""],["Search by ",""]),f=R([" or enter an ID"],[" or enter an ID"]),p=R(["Enter an ID"],["Enter an ID"]),m=R(["Enter a number"],["Enter a number"]),h=R(["Enter some text"],["Enter some text"]),v=R(["No matching result"],["No matching result"]),y=R(["No matching "," found."],["No matching "," found."]),g=R(["Including every option in your filter probably won’t do much…"],["Including every option in your filter probably won’t do much…"]),b=n(0),_=M(b),E=n(6),w=n(1),O=M(n(396)),S=M(n(275)),C=M(n(66)),x=M(n(557)),k=n(17),A=n(21),T=n(112),P=n(3),j=n(10),N=M(n(130));function M(e){return e&&e.__esModule?e:{default:e}}function R(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function D(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var L={addRemappings:A.addRemappings,fetchFieldValues:A.fetchFieldValues};var I=t.FieldValuesWidget=(0,x.default)((i=a=function(e){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r,a,i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.onInputChange=function(e){return e&&i.isSearchable()&&i._search(e),e},i.searchField=function(e){if(i.props.disablePKRemappingForSearch&&e.isPK())return e.isSearchable()?e:null;var t=e.remappedField();return t&&t.isSearchable()?t:e.isSearchable()?e:null},i.search=(r=D(regeneratorRuntime.mark(function e(t,r){var a,o,l,s,c,d,f,p,m,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return a=i.props.fields,e.next=5,Promise.all(a.map(function(e){return k.MetabaseApi.field_search({value:t,fieldId:e.id,searchFieldId:i.searchField(e).id,limit:i.props.maxResults},{cancelled:r})}));case 5:for(o=e.sent,l=!0,s=!1,c=void 0,e.prev=9,d=(0,P.zip)(a,o)[Symbol.iterator]();!(l=(f=d.next()).done);l=!0)p=u(f.value,2),m=p[0],(h=p[1])&&m.remappedField()===i.searchField(m)&&i.props.addRemappings(m.id,h);e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),s=!0,c=e.t0;case 17:e.prev=17,e.prev=18,!l&&d.return&&d.return();case 20:if(e.prev=20,!s){e.next=23;break}throw c;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",F(o));case 26:case"end":return e.stop()}},e,n,[[9,13,17,25],[18,,20,24]])})),function(e,t){return r.apply(this,arguments)}),i._search=function(e){var t=i.state,n=t.lastValue,r=t.options;n&&e.slice(0,n.length)===n&&r.length<i.props.maxResults||(i.setState({loadingState:"LOADING"}),i._cancel&&i._cancel(),i._searchDebounced(e))},i._searchDebounced=(0,P.debounce)((a=D(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i.setState({loadingState:"LOADING"}),r=(0,T.defer)(),i._cancel=function(){i._cancel=null,r.resolve()},e.next=5,i.search(t,r.promise);case 5:a=e.sent,i._cancel=null,a?i.setState({loadingState:"LOADED",options:a,lastValue:t}):i.setState({loadingState:"INIT",options:[],lastValue:t});case 8:case"end":return e.stop()}},e,n)})),function(e){return a.apply(this,arguments)}),500),i.renderValue=function(e,t){var n=i.props,r=n.fields,a=n.formatOptions;return _.default.createElement(S.default,o({value:e,column:r[0],maximumFractionDigits:20,remap:1===r.length},a,t))},i.state={options:[],loadingState:"INIT",lastValue:""},i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,b.Component),l(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.fields,n=e.fetchFieldValues;t.every(function(e){return"list"===e.has_field_values})&&t.forEach(function(e){return n(e.id)})}},{key:"componentWillUnmount",value:function(){this._cancel&&this._cancel()}},{key:"hasList",value:function(){return this.props.fields.every(function(e){return"list"===e.has_field_values&&e.values})}},{key:"isSearchable",value:function(){var e=this.props.fields;return e.every(this.searchField)&&e.some(function(e){return"search"===e.has_field_values})&&e.every(function(e){return"search"===e.has_field_values||"list"===e.has_field_values})}},{key:"renderOptions",value:function(e){var t=e.optionsList,n=e.isFocused,r=e.isAllSelected,a=this.props,i=a.alwaysShowOptions,o=a.fields,u=this.state.loadingState;if(i||n){if(t)return t;if(this.hasList()){if(r)return _.default.createElement(B,null)}else if(this.isSearchable()){if("LOADING"===u)return _.default.createElement(z,null);if("LOADED"===u)return _.default.createElement(q,{fields:o.map(this.searchField)})}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.onChange,a=t.fields,i=t.multi,o=t.autoFocus,l=t.color,v=t.className,y=t.style,g=t.optionsMaxHeight,b=this.state.loadingState,E=this.props.placeholder;if(!E){var S=u(a,1)[0];if(this.hasList())E=(0,w.t)(s);else if(this.isSearchable()){var C=new Set(a.map(function(t){return(0,j.stripId)(e.searchField(t).display_name)}));if(C.size>1)E=(0,w.t)(c);else{var x=u(C,1)[0];E=(0,w.t)(d,x),S.isID()&&S!==this.searchField(S)&&(E+=(0,w.t)(f))}}else E=S.isID()?(0,w.t)(p):S.isNumeric()?(0,w.t)(m):(0,w.t)(h)}var k=[];return k=this.hasList()?F(a.map(function(e){return e.values})):this.isSearchable()&&"LOADED"===b?this.state.options:[],_.default.createElement("div",{style:{width:this.props.expand?this.props.maxWidth:null,minWidth:this.props.minWidth,maxWidth:this.props.maxWidth}},_.default.createElement(O.default,{value:n.filter(function(e){return null!=e}),onChange:r,placeholder:E,updateOnInputChange:!0,multi:i,autoFocus:o,color:l,style:y,className:v,optionsStyle:void 0!==g?{maxHeight:g}:{},options:k,valueKey:0,valueRenderer:function(t){return e.renderValue(t,{autoLoad:!0,compact:!1})},optionRenderer:function(t){return e.renderValue(t[0],{autoLoad:!1})},layoutRenderer:function(t){return _.default.createElement("div",null,t.valuesList,e.renderOptions(t))},filterOption:function(e,t){return null!=e[0]&&0===String(e[0]).toLowerCase().indexOf(t.toLowerCase())||null!=e[1]&&0===String(e[1]).toLowerCase().indexOf(t.toLowerCase())},onInputChange:this.onInputChange,parseFreeformValue:function(e){return(e=String(e||"").trim())?a[0].isNumeric()?/^-?\d+(\.\d+)?$/.test(e)?parseFloat(e):null:e:null}}))}}]),t}(),a.defaultProps={color:"purple",maxResults:100,alwaysShowOptions:!0,style:{},formatOptions:{},maxWidth:500},r=i))||r;function F(e){var t=new Map(e.flat().map(function(e){return[e[0],e]}));return Array.from(t.values())}I.displayName="FieldValuesWidget";var z=function(){return _.default.createElement("div",{className:"flex layout-centered align-center border-bottom",style:{minHeight:82}},_.default.createElement(C.default,{size:32}))};z.displayName="LoadingState";var q=function(e){var t=e.fields;if(t.length>1)return _.default.createElement(U,{message:(0,w.t)(v)});var n=u(t,1)[0].display_name;return _.default.createElement(U,{message:(0,w.jt)(y,_.default.createElement("strong",null," ",n," "))})};q.displayName="NoMatchState";var B=function(){return _.default.createElement(U,{message:(0,w.t)(g)})};B.displayName="EveryOptionState";var U=function(e){var t=e.message;return _.default.createElement("div",{className:"flex layout-centered p4 border-bottom"},t)};U.displayName="OptionsMessage",t.default=(0,E.connect)(function(e,t){var n=t.fields;return{fields:(void 0===n?[]:n).map(function(t){return N.default.selectors.getObject(e,{entityId:t.id})||t})}},L)(I)},317:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=S(["Include ",""],["Include ",""]),s=S(["Case sensitive"],["Case sensitive"]),c=S(["today"],["today"]),d=S(["this week"],["this week"]),f=S(["this month"],["this month"]),p=S(["this year"],["this year"]),m=S(["this minute"],["this minute"]),h=S(["this hour"],["this hour"]),v=n(0),y=O(v),g=O(n(2)),b=n(1),_=n(152),E=O(n(110)),w=O(n(16));function O(e){return e&&e.__esModule?e:{default:e}}function S(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var C={"include-current":function(e){var t=y.default.createElement("strong",{key:"notsurewhythisneedsakey"},function(e){if("time-interval"===e[0])return x[e[3]];return null}(e));return(0,b.jt)(l,t)},"case-sensitive":function(){return(0,b.t)(s)}},x={day:(0,b.t)(c),week:(0,b.t)(d),month:(0,b.t)(f),year:(0,b.t)(p),minute:(0,b.t)(m),hour:(0,b.t)(h)};var k=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,v.Component),u(t,[{key:"getOptions",value:function(){return this.props.operator&&this.props.operator.options||{}}},{key:"getOptionName",value:function(e){return C[e]?C[e](this.props.filter):e}},{key:"getOptionValue",value:function(e){var t=this.props.filter,n=(0,_.getFilterOptions)(t)[e];if(void 0!==n)return n;var r=this.getOptions()[e];return!(!r||void 0===r.defaultValue)&&r.defaultValue}},{key:"setOptionValue",value:function(e,t){var n,r,a,i=this.props.filter,u=(0,_.getFilterOptions)(i);this.props.onFilterChange((0,_.setFilterOptions)(i,o({},u,(n={},r=e,a=!u[e],r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n)))),w.default.trackEvent("QueryBuilder","Filter","SetOption",e)}},{key:"toggleOptionValue",value:function(e){this.setOptionValue(e,!this.getOptionValue(e))}},{key:"render",value:function(){var e=this,t=Object.entries(this.getOptions());return 0===t.length?null:y.default.createElement("div",{className:"flex align-center"},t.map(function(t){var n=i(t,2),r=n[0];n[1];return y.default.createElement("div",{key:r,className:"flex align-center",onClick:function(){return e.toggleOptionValue(r)}},y.default.createElement(E.default,{color:"purple",checked:e.getOptionValue(r)}),y.default.createElement("label",{className:"ml1"},e.getOptionName(r)))}))}}]),t}(),r.propTypes={filter:g.default.array.isRequired,onFilterChange:g.default.func.isRequired,operator:g.default.object.isRequired},a);k.displayName="FilterOptions",t.default=k},318:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.deleteAlert=t.DELETE_ALERT=t.unsubscribeFromAlert=t.UNSUBSCRIBE_FROM_ALERT_CLEANUP=t.UNSUBSCRIBE_FROM_ALERT=t.updateAlert=t.UPDATE_ALERT=t.createAlert=t.CREATE_ALERT=t.fetchAlertsForQuestion=t.FETCH_ALERTS_FOR_QUESTION=t.FETCH_ALERTS_FOR_QUESTION_CLEAR_OLD_ALERTS=t.fetchAllAlerts=t.FETCH_ALL_ALERTS=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=b(["Your alert is all set up."],["Your alert is all set up."]),o=b(["Your alert was updated."],["Your alert was updated."]),u=b(["The alert was successfully deleted."],["The alert was successfully deleted."]),l=y(n(0)),s=y(n(3)),c=n(127),d=n(150),f=n(151),p=n(1),m=n(17),h=n(577),v=y(n(5));function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var E=t.FETCH_ALL_ALERTS="metabase/alerts/FETCH_ALL_ALERTS",w=new h.RestfulRequest({endpoint:m.AlertApi.list,actionPrefix:E,storeAsDictionary:!0}),O=(t.fetchAllAlerts=function(){return e=_(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(w.trigger());case 2:t.action(E);case 3:case"end":return e.stop()}},e,void 0)})),function(t,n){return e.apply(this,arguments)};var e},t.FETCH_ALERTS_FOR_QUESTION_CLEAR_OLD_ALERTS="metabase/alerts/FETCH_ALERTS_FOR_QUESTION_CLEAR_OLD_ALERTS"),S=t.FETCH_ALERTS_FOR_QUESTION="metabase/alerts/FETCH_ALERTS_FOR_QUESTION",C=new h.RestfulRequest({endpoint:m.AlertApi.list_for_question,actionPrefix:S,storeAsDictionary:!0}),x=(t.fetchAlertsForQuestion=function(e){return t=_(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.action(O,e),t.next=3,n(C.trigger({questionId:e}));case 3:n.action(S);case 4:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},t.CREATE_ALERT="metabase/alerts/CREATE_ALERT"),k=new h.RestfulRequest({endpoint:m.AlertApi.create,actionPrefix:x,storeAsDictionary:!0});t.createAlert=function(e){return t=_(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(k.trigger(e));case 2:n((0,f.addUndo)({message:function(){return l.default.createElement("div",{className:"flex align-center text-bold"},l.default.createElement(v.default,{name:"alert_confirm",size:"19",className:"mr2 text-success"}),(0,p.t)(i))}})),n.action(x);case 4:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t};var A=t.UPDATE_ALERT="metabase/alerts/UPDATE_ALERT",T=new h.RestfulRequest({endpoint:m.AlertApi.update,actionPrefix:A,storeAsDictionary:!0}),P=(t.updateAlert=function(e){return t=_(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(T.trigger((null==(r=a({},r=e,{card:s.default.pick(r.card,"id","include_csv","include_xls")})).collection_id&&delete r.collection_id,null==r.alert_above_goal&&delete r.alert_above_goal,r)));case 2:n((0,f.addUndo)({message:function(){return l.default.createElement("div",{className:"flex align-center text-bold"},l.default.createElement(v.default,{name:"alert_confirm",size:"19",className:"mr2 text-success"}),(0,p.t)(o))}})),n.action(A);case 4:case"end":return t.stop()}var r},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},t.UNSUBSCRIBE_FROM_ALERT="metabase/alerts/UNSUBSCRIBE_FROM_ALERT"),j=t.UNSUBSCRIBE_FROM_ALERT_CLEANUP="metabase/alerts/UNSUBSCRIBE_FROM_ALERT_CLEANUP",N=new h.RestfulRequest({endpoint:m.AlertApi.unsubscribe,actionPrefix:P,storeAsDictionary:!0}),M=(t.unsubscribeFromAlert=function(e){return t=_(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(N.trigger(e));case 2:n.action(P),setTimeout(function(){return n.action(j,e.id)},5e3);case 4:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},t.DELETE_ALERT="metabase/alerts/DELETE_ALERT"),R=new h.RestfulRequest({endpoint:m.AlertApi.delete,actionPrefix:M,storeAsDictionary:!0}),D=(t.deleteAlert=function(e){return t=_(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(R.trigger({id:e}));case 2:n((0,f.addUndo)({message:function(){return l.default.createElement("div",{className:"flex align-center text-bold"},l.default.createElement(v.default,{name:"alert_confirm",size:"19",className:"mr2 text-success"}),(0,p.t)(u))}})),n.action(M,e);case 4:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t},function(e,t){var n=t.payload;return a({},e,{result:s.default.omit(e.result||{},n)})}),L=(0,c.handleActions)(a({},w.getReducers(),g({},O,function(e,t){var n=t.payload;return a({},e,{result:s.default.omit(e.result||{},function(e){return e.card.id===n})})}),C.getReducers(),k.getReducers(),T.getReducers(),(g(r={},M,D),g(r,j,D),r)),[]);t.default=(0,d.combineReducers)({alerts:L})},319:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.startTimer=function(){if("object"!==("undefined"==typeof performance?"undefined":r(performance)))return function(){};var e=performance.now();return function(t){return t(performance.now()-e)}}},320:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.formatValueForTooltip=v;var u=n(0),l=p(u),s=p(n(2)),c=p(n(301)),d=n(24),f=n(10);function p(e){return e&&e.__esModule?e:{default:e}}var m=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"_getRows",value:function(){var e=this.props.hovered;if(!e)return[];if(Array.isArray(e.data))return e.data;if(void 0!==e.value||e.dimensions){var t=[];return e.dimensions&&t.push.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.dimensions)),void 0!==e.value&&t.push({value:e.value,column:e.column}),t.map(function(e){var t=e.value,n=e.column;return{key:(0,d.getFriendlyName)(n),value:t,col:n}})}return[]}},{key:"render",value:function(){var e=this.props,t=e.hovered,n=e.settings,r=this._getRows(),a=t&&(t.element&&document.body.contains(t.element)||t.event),i=r.length>0&&!!a;return l.default.createElement(c.default,{target:t&&t.element,targetEvent:t&&t.event,verticalAttachments:["bottom","top"],isOpen:i},l.default.createElement("table",{className:"py1 px2"},l.default.createElement("tbody",null,r.map(function(e,t){var r=e.key,a=e.value,i=e.col;return l.default.createElement(h,{key:t,name:r,value:a,column:i,settings:n})}))))}}]),t}(),r.propTypes={hovered:s.default.object,settings:s.default.object},a);m.displayName="ChartTooltip",t.default=m;var h=function(e){var t=e.name,n=e.value,r=e.column,a=e.settings;return l.default.createElement("tr",null,t?l.default.createElement("td",{className:"text-light text-right pr1"},t,":"):l.default.createElement("td",null),l.default.createElement("td",{className:"text-bold text-left"},l.default.isValidElement(n)?n:v({value:n,column:r,settings:a})))};function v(e){var t=e.value,n=e.column,r=e.settings;return(0,f.formatValue)(t,i({},r&&r.column&&n?r.column(n):{column:n},{type:"tooltip",majorWidth:0}))}h.displayName="TooltipRow"},321:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performAction=u,t.performDefaultAction=function(e,t){if(!e)return!1;if(1===e.length&&e[0].default)return u(e[0],t);var n=o.default.find(e,function(e){return!0===e.defaultAlways});if(n)return u(n,t);return!1};var r,a=n(25),i=n(3),o=(r=i)&&r.__esModule?r:{default:r};function u(e,t){var n=t.dispatch,r=t.onChangeCardAndRun,i=!1;if(e.action){var o=e.action();o&&(n(o),i=!0)}if(e.url){var u=e.url();u&&((0,a.open)(u),i=!0)}if(e.question){var l=e.question();l&&(r({nextCard:l.card()}),i=!0)}return i}},322:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),i=n(42),o=l(i),u=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.value,n=void 0===t?null:t,l=e.onChange,s=e.options,c=void 0===s?[]:s,d=e.isInitiallyOpen,f=e.className,p=e.placeholder,m=e.placeholderNoOptions,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value","onChange","options","isInitiallyOpen","className","placeholder","placeholderNoOptions"]);return a.default.createElement(o.default,r({className:(0,u.default)(f,"block",{disabled:0===c.length||1===c.length&&c[0].value===n}),value:n,onChange:function(e){return l(e.target.value)},placeholder:0===c.length?m:p,isInitiallyOpen:d},h),c.map(function(e){return a.default.createElement(i.Option,{key:e.value,name:e.name,value:e.value},e.name)}))};s.displayName="ChartSettingSelect",t.default=s},323:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.value,n=e.onChange,i=e.options,o=e.optionNameFn,u=void 0===o?function(e){return e.name}:o,l=e.optionValueFn,s=void 0===l?function(e){return e.value}:l,c=e.optionKeyFn,d=void 0===c?s:c,f=e.className;return r.default.createElement("div",{className:(0,a.default)(f,"rounded bordered flex")},i.map(function(e,i){return r.default.createElement("div",{key:d(e),className:(0,a.default)("flex flex-full layout-centered text-bold text-brand-hover p1 cursor-pointer",{"border-left":i>0},s(e)===t?"text-brand":"text-medium"),onClick:function(){return n(s(e))}},u(e))}))};o.displayName="ButtonGroup",t.default=o},324:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(["Select a field"],["Select a field"]),a=p(["No valid fields"],["No valid fields"]),i=f(n(0)),o=n(1),u=f(n(4)),l=f(n(3)),s=f(n(5)),c=f(n(322)),d=n(33);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m=function(e){var t=e.value,n=e.options,f=e.onChange,p=e.onRemove,m=e.onShowWidget,h=e.className,v=e.columns,y=e.showColumnSetting,g=void 0;if(t&&y&&v){var b=l.default.findWhere(v,{name:t});b&&(g=(0,d.keyForColumn)(b))}return i.default.createElement("div",{className:(0,u.default)(h,"flex align-center")},i.default.createElement(c.default,{className:"flex-full",value:t,options:n,onChange:f,placeholder:(0,o.t)(r),placeholderNoOptions:(0,o.t)(a),isInitiallyOpen:void 0===t}),g&&i.default.createElement(s.default,{name:"gear",className:"ml1 text-medium text-brand-hover cursor-pointer",onClick:function(){m({id:"column_settings",props:{initialKey:g}})}}),i.default.createElement(s.default,{name:"close",className:(0,u.default)("ml1 text-medium text-brand-hover cursor-pointer",{"disabled hidden":!p}),onClick:p}))};m.displayName="ChartSettingFieldPicker",t.default=m},325:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=l(i),u=l(n(114));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"render",value:function(){return o.default.createElement("div",{className:"flex align-center mb1"},o.default.createElement(u.default,r({},this.props,{triggerSize:12})),this.props.title&&o.default.createElement("h4",{className:"ml1"},this.props.title))}}]),t}();s.displayName="ChartSettingColorPicker",t.default=s},326:function(e,t,n){e.exports=n.p+"1e07783e66572fcf1816d1195b38188b.svg"},327:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),a=o(n(4)),i=o(n(252));o(n(26));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.className,n=e.breakout,o=e.onChangeBreakout,u=e.query,l=e.breakoutOptions,s=e.onClose,c=e.maxHeight,d=e.alwaysExpanded,f=e.width,p=void 0===f?400:f,m=u.table();return m?r.default.createElement(i.default,{className:(0,a.default)(t,"text-green"),width:p,field:n,fieldOptions:l||u.breakoutOptions(n),onFieldChange:function(e){o(e),s&&s()},table:m,enableSubDimensions:!0,maxHeight:c,alwaysExpanded:d,searchable:!1}):null};u.displayName="BreakoutPopover",t.default=u},328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),a=n(205),i=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.open,n=e.className;return r.default.createElement(a.Motion,{defaultStyle:{deg:0},style:{deg:t?(0,a.spring)(0,a.presets.gentle):(0,a.spring)(-90,a.presets.gentle)}},function(e){return r.default.createElement(i.default,{className:n,name:"expand_arrow",style:{transform:"rotate("+e.deg+"deg)"}})})};u.displayName="DisclosureTriangle",t.default=u},329:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=c(["Active"],["Active"]),i=c(["Configure"],["Configure"]),o=n(0),u=(r=o)&&r.__esModule?r:{default:r},l=n(22),s=n(1);function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=function(e){var t=e.setting,n=e.settingValues;return u.default.createElement("div",{className:"bordered rounded shadowed bg-white p4",style:{width:500}},u.default.createElement("div",{className:"flex align-center"},u.default.createElement("h2",null,t.authName),t.authEnabled&&t.authEnabled(n)&&u.default.createElement("div",{className:"ml-auto flex align-center text-uppercase text-success"},u.default.createElement("div",{className:"bg-success circular mr1",style:{width:10,height:10}}),(0,s.t)(a))),u.default.createElement("p",null,t.authDescription),u.default.createElement(l.Link,{className:"Button",to:"/admin/settings/authentication/"+t.authType},(0,s.t)(i)))};d.displayName="AuthenticationOption",t.default=d},33:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.keyForColumn=t.rangeForValue=t.datasetContainsNoResults=void 0,t.fieldRefForColumn=l,t.findColumnForColumnSetting=function(e,t){var n=c(e,t);return n>=0?e[n]:null},t.normalizeFieldRef=s,t.findColumnIndexForColumnSetting=c,t.syncTableColumnsToQuery=function(e){var t=e.query(),n=e.settings()["table.columns"];if(n&&t instanceof a.default){for(var o=(t=t.clearFields()).columnDimensions(),u=t.columnNames(),l=t.joins().length-1;l>=0;l--){var s=t.joins()[l];t=s.clearFields().parent()}var c=!0,d=!1,f=void 0;try{for(var p,m=function(){var e=p.value;if(e.enabled){var n=void 0;if(e.fieldRef)n=e.fieldRef;else if(e.name){var a=r.default.findIndex(u,function(t){return t===e.name});a>=0&&(n=o[a].mbql())}if(n){var l=t.parseFieldReference(n);if(l instanceof i.JoinedDimension){var s=l.join();s?t=s.addField(l.mbql()).parent():console.warn("missing join?",t,l)}else t=t.addField(l.mbql())}else console.warn("Unknown column",e)}},h=n[Symbol.iterator]();!(c=(p=h.next()).done);c=!0)m()}catch(e){d=!0,f=e}finally{try{!c&&h.return&&h.return()}finally{if(d)throw f}}var v=t.columnDimensions();return o.length===v.length&&r.default.all(o,function(e,t){return e.isSameBaseDimension(v[t])})?t.clearFields().question():t.question()}return e};var r=u(n(3)),a=u(n(26)),i=n(31),o=u(i);function u(e){return e&&e.__esModule?e:{default:e}}t.datasetContainsNoResults=function(e){return 0===e.rows.length||r.default.isEqual(e.rows,[[null]])},t.rangeForValue=function(e,t){if("number"==typeof e&&t&&t.binning_info&&t.binning_info.bin_width)return[e,e+t.binning_info.bin_width]};function l(e){return e.field_ref&&o.default.parseMBQL(e.field_ref).baseDimension().mbql()}t.keyForColumn=function(e){var t=l(e);return Array.isArray(t)&&"joined-field"===t[0]?JSON.stringify(["ref",t[2]]):Array.isArray(t)&&"field-literal"!==t[0]&&"aggregation"!==t[0]?JSON.stringify(["ref",t]):JSON.stringify(["name",e.name])};function s(e){var t=o.default.parseMBQL(e);return t&&t.mbql()}function c(e,t){var n=s(t.fieldRef);if(null!=n){var a=r.default.findIndex(e,function(e){return r.default.isEqual(n,s(l(e)))});if(a>=0)return a}return r.default.findIndex(e,function(e){return e.name===t.name})}},330:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(i=["Using "],o=["Using "],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),c=n(0),d=S(c),f=S(n(2)),p=n(11),m=S(n(441)),h=n(1),v=S(n(207)),y=S(n(622)),g=S(n(623)),b=S(n(624)),_=S(n(278)),E=S(n(625)),w=S(n(626)),O=S(n(627));function S(e){return e&&e.__esModule?e:{default:e}}var C={string:v.default,number:y.default,password:g.default,select:E.default,radio:b.default,boolean:_.default,text:w.default,color:O.default},x=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.Component),l(t,[{key:"render",value:function(){var e,t=this.props,n=t.setting,r=t.errorMessage,a=n.widget||C[n.type];return a||(console.warn("No render method for setting type "+n.type+", defaulting to string input."),a=v.default),d.default.createElement("li",{className:"m2 mb4"},!n.noHeader&&d.default.createElement(m.default,{setting:n}),d.default.createElement("div",{className:"flex"},d.default.createElement(a,u({},n.props||{},(e=this.props)&&e.setting&&e.setting.is_env_setting?(0,p.assocIn)(e,["setting","placeholder"],(0,h.t)(s)+e.setting.env_name):e))),r&&d.default.createElement("div",{className:"text-error text-bold pt1"},r),n.warning&&d.default.createElement("div",{className:"text-gold text-bold pt1"},n.warning))}}]),t}(),r.propTypes={setting:f.default.object.isRequired,onChange:f.default.func.isRequired,onChangeSetting:f.default.func,autoFocus:f.default.bool,disabled:f.default.bool},a);x.displayName="SettingsSetting",t.default=x},331:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=(r=["Display"],a=["Display"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}})));t.nestedSettings=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.objectName,a=void 0===r?"object":r,d=n.getObjects,p=n.getObjectKey,m=n.getSettingDefintionsForObject,h=n.getInheritedSettingsForObject,v=void 0===h?function(){return{}}:h,y=n.component,g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["objectName","getObjects","getObjectKey","getSettingDefintionsForObject","getInheritedSettingsForObject","component"]);function b(e,t,n,r){var a=m(e,t),o=v(t),l=(0,s.getComputedSettings)(a,t,i({},o,n),r);return u.default.pick(l,function(e){return void 0!==e})}var _=(0,c.default)({getObjectKey:p,getSettingsWidgetsForObject:function(e,t,n,r,a){var o=m(e,t),u=b(e,t,n,a);return(0,s.getSettingsWidgets)(o,n,u,t,r,a).map(function(e){return i({},e,{noPadding:!0})})}})(y);return f(t={},e,i({section:(0,l.t)(o),default:{},getProps:function(t,n){var r=d(t,n),a=function(e,t,n,r){var a={},i=!0,o=!1,u=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value,d=p(c);a[d]=b(e,c,n[d]||{},r)}}catch(e){o=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}return a}(t,r,n[e],{series:t,settings:n});return{series:t,settings:n,objects:r,allComputedSettings:a,extra:{series:t,settings:n}}},widget:_},g)),f(t,a,{getDefault:function(t,n){var r=new Map;return function(a){var o=p(a);if(!r.has(o)){var u=v(a),l=n[e][o]||{};r.set(o,i({},b(t,a,i({},u,l),{series:t,settings:n})))}return r.get(o)}},readDependencies:[e]}),t};var u=d(n(3)),l=n(1),s=n(162),c=d(n(633));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},332:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),a=o(n(5)),i=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.icon,n=e.onClick;return r.default.createElement(a.default,{name:t,className:"cursor-pointer text-light text-medium-hover ml1",onClick:function(e){e.stopPropagation(),n()}})};u.displayName="ActionIcon";var l=function(e){var t=e.title,n=e.onAdd,a=e.onRemove,o=e.onClick,l=e.onEdit,s=e.draggable;return r.default.createElement("div",{className:(0,i.default)("my1 bordered rounded overflow-hidden bg-white",{"cursor-grab shadowed":s,"cursor-pointer":o}),onClick:o},r.default.createElement("div",{className:"p1 border-bottom relative"},r.default.createElement("div",{className:"px1 flex align-center relative"},r.default.createElement("span",{className:"h4 flex-auto text-dark text-wrap"},t),l&&r.default.createElement(u,{icon:"gear",onClick:l}),n&&r.default.createElement(u,{icon:"add",onClick:n}),a&&r.default.createElement(u,{icon:"close",onClick:a}))))};l.displayName="ColumnItem",t.default=l},333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScalarTitle=t.ScalarWrapper=void 0;var r=s(n(0)),a=s(n(4)),i=s(n(67)),o=s(n(5)),u=s(n(29)),l=n(20);function s(e){return e&&e.__esModule?e:{default:e}}(t.ScalarWrapper=function(e){var t=e.children;return r.default.createElement(l.Flex,{align:"center",justify:"center",flexDirection:"column",className:"full-height full flex-wrap relative",flex:1},t)}).displayName="ScalarWrapper";var c=function(e){var t=e.value;e.isFullscreen,e.isDashboard;return r.default.createElement("h1",{className:"ScalarValue cursor-pointer text-brand-hover"},t)};c.displayName="ScalarValue";(t.ScalarTitle=function(e){var t=e.title,n=e.description,l=e.onClick;return r.default.createElement("div",{className:"flex align-center full justify-center px2"},n&&n.length>0&&r.default.createElement("div",{style:{width:24}}),r.default.createElement("h3",{onClick:l,className:(0,a.default)("Scalar-title overflow-hidden fullscreen-normal-text fullscreen-night-text text-brand-hover",{"cursor-pointer":!!l})},r.default.createElement(i.default,{tooltip:t},t)),n&&n.length>0&&r.default.createElement("div",{className:"hover-child cursor-pointer pl1 text-brand-hover",style:{marginTop:5,width:24}},r.default.createElement(u.default,{tooltip:n,maxWidth:"22em"},r.default.createElement(o.default,{name:"info_outline"}))))}).displayName="ScalarTitle",t.default=c},334:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTableCellClickedObject=function(e,t,n,r){var a=e.rows,i=e.cols,o=i[n],u=a[t],l=u[n];return r?0===n?u._dimension:{value:l,column:o,dimensions:[u._dimension,o._dimension]}:"aggregation"===o.source?{value:l,column:o,dimensions:i.map(function(e,t){return{value:u[t],column:e}}).filter(function(e){return"breakout"===e.column.source}),origin:{rowIndex:t,row:u,cols:i}}:{value:l,column:o,origin:{rowIndex:t,row:u,cols:i}}},t.getTableHeaderClickedObject=function(e,t,n){var r=e.cols[t];return n?t>=0&&r?r._dimension:null:{column:r}},t.isColumnRightAligned=function(e){e&&e.remapped_to_column&&(e=e.remapped_to_column);return(0,r.isNumber)(e)||(0,r.isCoordinate)(e)};var r=n(13)},335:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=n(0),u=(r=o)&&r.__esModule?r:{default:r},l=n(7),s=n(10);var c=function(e){var t=e.value,n=i(e.extent,2),r=n[0],o=n[1],c=e.options,d=(e.cellHeight,r<0),f=t<0,p=Math.abs(t)/Math.max(Math.abs(r),Math.abs(o))*100,m=f?(0,l.color)("error"):(0,l.color)("brand"),h=d?f?{width:p/2+"%",right:"50%",borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:3,borderBottomLeftRadius:3}:{width:p/2+"%",left:"50%",borderTopLeftRadius:0,borderBottomLeftRadius:0,borderTopRightRadius:3,borderBottomRightRadius:3}:{width:p+"%",left:0,borderRadius:3};return u.default.createElement("div",{className:"flex align-center currentcolor justify-end relative"},u.default.createElement("div",{className:"text-ellipsis text-bold text-right flex-full",style:{minWidth:30}},(0,s.formatValue)(t,a({},c,{jsx:!0,type:"cell"}))),u.default.createElement("div",{className:"ml1",style:{position:"relative",width:70,height:8,backgroundColor:(0,l.alpha)(m,.2),borderRadius:3}},u.default.createElement("div",{style:a({position:"absolute",top:0,bottom:0,backgroundColor:m},h)}),d&&u.default.createElement("div",{style:{position:"absolute",left:"50%",top:0,bottom:0,borderLeft:"1px solid white"}})))};c.displayName="MiniBar",t.default=c},336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ColorRangePreview=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=s(n(0)),i=s(n(37)),o=n(7),u=s(n(36)),l=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.value,n=e.onChange,o=e.ranges,u=e.className,s=e.style,c=e.sections,f=void 0===c?5:c,p=e.quantile,m=void 0!==p&&p,h=e.columns,v=void 0===h?2:h;return a.default.createElement(i.default,{triggerElement:a.default.createElement(d,{colors:t,className:(0,l.default)(u,"bordered rounded overflow-hidden"),style:r({height:30},s),sections:f,quantile:m})},function(e){var t=e.onClose;return a.default.createElement("div",{className:"pt1 mr1 flex flex-wrap",style:{width:300}},o.map(function(e){return a.default.createElement("div",{className:"mb1 pl1",style:{flex:"1 1 "+Math.round(100/v)+"%"}},a.default.createElement(d,{colors:e,onClick:function(){n(e),t()},className:(0,l.default)("bordered rounded overflow-hidden cursor-pointer"),style:{height:30},sections:f,quantile:m}))}))})};c.displayName="ColorRangePicker";var d=function(e){var t=e.colors,n=void 0===t?[]:t,i=e.sections,s=void 0===i?5:i,c=e.quantile,d=void 0!==c&&c,f=e.className,p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["colors","sections","quantile","className"]),m=(0,o.getColorScale)([0,s-1],n,d);return a.default.createElement("div",r({className:(0,l.default)(f,"flex")},p),u.default.range(0,s).map(function(e){return a.default.createElement("div",{className:"flex-full",style:{background:m(e)}})}))};d.displayName="ColorRangePreview",t.ColorRangePreview=d,t.default=c},337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=v(u),s=v(n(2)),c=v(n(15)),d=v(n(3)),f=v(n(52)),p=v(n(16)),m=n(319),h=n(24);function v(e){return e&&e.__esModule?e:{default:e}}var y=d.default.throttle(p.default.trackEvent,1e4),g=(0,f.default)({wrapped:!0})((i=a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props.width===e.width&&this.props.height===e.height,n=(0,h.isSameSeries)(this.props.series,e.series);return!(t&&n)}},{key:"componentDidMount",value:function(){this.renderChart()}},{key:"componentDidUpdate",value:function(){this.renderChart()}},{key:"componentWillUnmount",value:function(){this._deregisterChart()}},{key:"_deregisterChart",value:function(){this._deregister&&(this._deregister(),delete this._deregister)}},{key:"renderChart",value:function(){var e=this,t=this.props,n=t.width,r=t.height,a=t.isDashboard,i=t.isEditing,o=t.isSettings;if(null!=n&&null!=r){var u=c.default.findDOMNode(this);for(this._deregisterChart();u.firstChild;)u.removeChild(u.firstChild);var l=document.createElement("div");if(u.appendChild(l),a&&i&&!o){var s=document.createElement("div");s.classList.add("spread"),s.style.setProperty("pointer-events","all"),u.appendChild(s)}try{var d=(0,m.startTimer)();this._deregister=this.props.renderer(l,this.props),d(function(t){var n=e.props.card.display;y("Visualization","Render Card",n,t)})}catch(e){console.error(e)}}}},{key:"render",value:function(){return l.default.createElement("div",{className:this.props.className,style:this.props.style})}}]),t}(),a.propTypes={className:s.default.string,series:s.default.array.isRequired,renderer:s.default.func.isRequired,onRenderError:s.default.func.isRequired,isEditing:s.default.bool,isDashboard:s.default.bool},r=i))||r;g.displayName="CardRenderer",t.default=g},338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TitleLegendHeader=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(0)),i=u(n(188)),o=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}t.TitleLegendHeader=function(e){var t=e.series,n=e.settings,u=e.onChangeCardAndRun,l=e.actionButtons,s=t._raw||t,c=o.default.uniq(s.map(function(e){return e.card.id})),d=c.length>1;if(n["card.title"]){var f=[{card:r({name:n["card.title"]},d?{}:{id:c[0],dataset_query:s[0].card.dataset_query,display:s[0].card.display})}];return a.default.createElement(i.default,{className:"flex-no-shrink",series:f,description:n["card.description"],actionButtons:l,onChangeCardAndRun:d?null:u})}return null}},339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.adjustYAxisTicksIfNeeded=_,t.applyChartTimeseriesXAxis=function(e,t,n){n.xValues;var r=n.xDomain,o=n.xInterval,u=i.default.find(t,function(e){return!(0,s.datasetContainsNoResults)(e.data)}).data.cols[0],p=o,h=p;e.settings["graph.x_axis.labels_enabled"]&&e.xAxisLabel(e.settings["graph.x_axis.title_text"]||(0,m.getFriendlyName)(u),y);if(e.settings["graph.x_axis.axis_enabled"]){e.renderVerticalGridLines(e.settings["graph.x_axis.gridLine_enabled"]),null==u.unit&&(u=a({},u,{unit:p.interval}));var v=h,g=v.timezone,b=u.unit,_=function(t){var n=e.settings.column(u),r=n.column,i=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["column"]);return(0,c.formatValue)(t,a({},i,{column:a({},r,{unit:b}),type:"axis",compact:"compact"===e.settings["graph.x_axis.axis_enabled"]}))};if("week"===p.interval){var E=(0,d.computeTimeseriesTicksInterval)(r,h,e.width(),_);E.interval===h.interval&&E.count===h.count||(b="month",h={interval:"month",count:1,timezone:g})}e.xAxis().tickFormat(_),h=a({},(0,d.computeTimeseriesTicksInterval)(r,h,e.width(),_),{timezone:g})}r=w(r,p),e.x((0,f.default)(h).domain(r)),e.xUnits(function(e,t){return Math.ceil(1+(0,l.default)(t).diff(e,p.interval)/p.count)})},t.stretchTimeseriesDomain=w,t.applyChartQuantitativeXAxis=function(e,t,n){var r=n.xValues,l=n.xDomain,d=n.xInterval,f=i.default.find(t,function(e){return!(0,s.datasetContainsNoResults)(e.data)}).data.cols[0];e.settings["graph.x_axis.labels_enabled"]&&e.xAxisLabel(e.settings["graph.x_axis.title_text"]||(0,m.getFriendlyName)(f),y);e.settings["graph.x_axis.axis_enabled"]?(e.renderVerticalGridLines(e.settings["graph.x_axis.gridLine_enabled"]),E(e.xAxis(),e.width(),r),e.xAxis().tickFormat(function(t){if((0,p.isMultipleOf)(t,d))return(0,c.formatValue)(t,a({},e.settings.column(f),{type:"axis",compact:"compact"===e.settings["graph.x_axis.axis_enabled"]}))})):(e.xAxis().ticks(0),e.xAxis().tickFormat(""));var h=void 0;if("pow"===e.settings["graph.x_axis.scale"])h=o.default.scale.pow().exponent(.5);else if("log"===e.settings["graph.x_axis.scale"]){if(h=o.default.scale.log().base(Math.E),!(l[0]<0&&l[1]<0||l[0]>0&&l[1]>0))throw"X-axis must not cross 0 when using log scale."}else h=o.default.scale.linear();l=[l[0]-.75*d,l[1]+.75*d],e.x(h.domain(l)).xUnits(u.default.units.fp.precision(d))},t.applyChartOrdinalXAxis=function(e,t,n){var r=n.xValues,l=n.isHistogramBar,d=i.default.find(t,function(e){return!(0,s.datasetContainsNoResults)(e.data)}).data.cols[0];e.settings["graph.x_axis.labels_enabled"]&&e.xAxisLabel(e.settings["graph.x_axis.title_text"]||(0,m.getFriendlyName)(d),y);e.settings["graph.x_axis.axis_enabled"]?(e.renderVerticalGridLines(e.settings["graph.x_axis.gridLine_enabled"]),e.xAxis().ticks(r.length),E(e.xAxis(),e.width(),r),e.xAxis().tickFormat(function(t){return(0,c.formatValue)(t,a({},e.settings.column(d),{type:"axis",compact:"compact"===e.settings["graph.x_axis.labels_enabled"],noRange:l}))})):(e.xAxis().ticks(0),e.xAxis().tickFormat(""));(0,h.isHistogram)(e.settings)&&e._outerRangeBandPadding(0);e.x(o.default.scale.ordinal().domain(r)).xUnits(u.default.units.ordinal)},t.maybeRoundValueToZero=S,t.applyChartYAxis=function(e,t,n,a){var u=void 0;u="right"!==a?{scale:function(){return e.y.apply(e,arguments)},axis:function(){return e.yAxis.apply(e,arguments)},label:function(){return e.yAxisLabel.apply(e,arguments)},setting:function(t){return e.settings["graph.y_axis."+t]}}:{scale:function(){return e.rightY.apply(e,arguments)},axis:function(){return e.rightYAxis.apply(e,arguments)},label:function(){return e.rightYAxisLabel.apply(e,arguments)},setting:function(t){return e.settings["graph.y_axis."+t]}};if(u.setting("labels_enabled"))if(u.setting("title_text"))u.label(u.setting("title_text"),g);else{var l=i.default.uniq(t.map(function(t){return e.settings.series(t).title}));1===l.length&&u.label(l[0],g)}u.setting("axis_enabled")?(u.axis().tickFormat(C(e,t,n)),e.renderHorizontalGridLines(!0),_(u.axis(),e.height())):u.axis().ticks(0);var s=void 0;s="pow"===u.setting("scale")?o.default.scale.pow().exponent(.5):"log"===u.setting("scale")?o.default.scale.log().base(Math.E):o.default.scale.linear();if(t.every(function(e){return"bar"===e.card.display})){var c=s.interpolate.bind(s);s.interpolate=function(e){return c(function(t,n){var r=e(t,n),a=o.default.interpolate(t,n);return function(e){var t=a(e),n=r(0)-1;return n<t&&t<a(0)?n:r(e)}})}}if(s.clamp(!0),u.setting("auto_range")){if("log"!==u.setting("scale"))e.elasticY(!0);else{var d=r(n,2),f=d[0],p=d[1];if(!(f<0&&p<0||f>0&&p>0))throw"Y-axis must not cross 0 when using log scale.";var m=t.every(function(e){return"bar"!==e.card.display});m?s.domain([f,p]):f<0?s.domain([f,-1]):s.domain([1,p])}u.scale(s)}else{var h=o.default.extent([u.setting("min"),u.setting("max")].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n))),v=r(h,2),y=v[0],b=v[1];if("log"===u.setting("scale")&&!(y<0&&b<0||y>0&&b>0))throw"Y-axis must not cross 0 when using log scale.";u.scale(s.domain([y,b]))}},t.getYValueFormatter=C;var i=v(n(3)),o=v(n(36)),u=v(n(220)),l=v(n(8)),s=n(33),c=n(10),d=n(192),f=v(n(340)),p=n(136),m=n(24),h=n(120);function v(e){return e&&e.__esModule?e:{default:e}}var y=10,g=22;function b(e){var t=e.ticks();return Array.isArray(t)?t[0]:t}function _(e,t){t/b(e)<32&&e.ticks(Math.floor(t/32))}function E(e,t,n){var r=8*function(e){e=e.slice(0,100);var t=0,n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;t+=String(u).length}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return Math.round(t/e.length)}(n),a=Math.floor(t/r);b(e)>a&&e.ticks(a)}function w(e,t){var n=r(e,2),a=n[0],i=n[1],o=t.count,u=t.interval;return"month"===u?(u="day",o*=30):"week"===u?(u="day",o*=7):"day"===u&&(u="hour",o*=24),[(0,l.default)(a).subtract(.75*o,u),(0,l.default)(i).add(.75*o,u)]}var O=1e6;function S(e,t){var n=r(t,2),a=n[0],i=n[1],o=Math.abs(i-a)/O;return Math.abs(e)<o?0:e}function C(e,t,n){if("normalized"===e.settings["stackable.stack_type"])return function(e){return Math.round(100*e)+"%"};var r=t[0].data.cols[1],i=e.settings.column(r);return function(e,t){var r=S(e,n);return(0,c.formatValue)(r,a({},i,t))}}},34:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.undo=t.notify=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.createEntity=function(e){var t=this,y=i({},e);y.nameOne||(y.nameOne=f.default.singularize(y.name));y.nameMany||(y.nameMany=y.name);y.displayNameOne||(y.displayNameOne=y.nameOne);y.displayNameMany||(y.displayNameMany=y.nameMany);y.schema||(y.schema=new m.schema.Entity(y.name));y.api||(y.api={});if(y.path){var E=y.path;y.api=i({list:(0,d.GET)(""+E),create:(0,d.POST)(""+E),get:(0,d.GET)(E+"/:id"),update:(0,d.PUT)(E+"/:id"),delete:(0,d.DELETE)(E+"/:id")},y.api)}var w=function(e){return JSON.stringify(e||null)},O=function(e){return["entities",y.name,e]},S=function(e){return["entities",y.name+"_list"].concat(w(e))};y.getObjectStatePath=O,y.getListStatePath=S;var C=function(e){return null!=y.writableProperties?v.default.pick.apply(v.default,[e,"id"].concat(_(y.writableProperties))):e},x="metabase/entities/"+y.name+"/CREATE",k="metabase/entities/"+y.name+"/FETCH",A="metabase/entities/"+y.name+"/UPDATE",T="metabase/entities/"+y.name+"/DELETE",P="metabase/entities/"+y.name+"/FETCH_LIST",j="metabase/entities/"+y.name+"/INVALIDATE_LISTS";function N(e){return(0,o.withRequestState)(function(){return["entities",y.name].concat(_(e.apply(void 0,arguments)))})}function M(e){return(0,o.withAnalytics)("entities",y.name,e,y.getAnalyticsMetadata)}function R(e){return y.actionDecorators[e]||function(e){return e}}y.actionTypes=i({CREATE:x,FETCH:k,UPDATE:A,DELETE:T,FETCH_LIST:P,INVALIDATE_LISTS_ACTION:j},y.actionTypes||{}),y.actionDecorators=i({},y.actionDecorators||{}),y.normalize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.schema;return i(b({object:e},y.nameOne,e),(0,m.normalize)(e,t))},y.normalizeList=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.schema;return i(b({list:e},y.nameMany,e),(0,m.normalize)(e,[t]))},y.objectActions=i({fetch:(0,o.compose)((0,o.withAction)(k),(0,o.withCachedDataAndRequestState)(function(e){var t=e.id;return[].concat(_(O(t)))},function(e){var t=e.id;return[].concat(_(O(t)),["fetch"])}),R("fetch"))(function(e){return n=g(regeneratorRuntime.mark(function n(r,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=y,t.next=3,y.api.get({id:e.id});case 3:return t.t1=t.sent,t.abrupt("return",t.t0.normalize.call(t.t0,t.t1));case 5:case"end":return t.stop()}},n,t)})),function(e,t){return n.apply(this,arguments)};var n}),create:(0,o.compose)((0,o.withAction)(x),M("create"),N(function(){return["create"]}),R("create"))(function(e){return n=g(regeneratorRuntime.mark(function n(r,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=y,t.next=3,y.api.create(C(e));case 3:return t.t1=t.sent,t.abrupt("return",t.t0.normalize.call(t.t0,t.t1));case 5:case"end":return t.stop()}},n,t)})),function(e,t){return n.apply(this,arguments)};var n}),update:(0,o.compose)((0,o.withAction)(A),M("update"),N(function(e){return[e.id,"update"]}),R("update"))(function(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.notify;return n=g(regeneratorRuntime.mark(function n(a,u){var s,c,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=y.selectors.getObject(u(),{entityId:e.id}),r&&(e=i({id:e.id},r)),t.t0=y,t.next=5,y.api.update(C(e));case 5:return t.t1=t.sent,c=t.t0.normalize.call(t.t0,t.t1),o&&(o.undo?(d=v.default.pick.apply(v.default,[s].concat(_(Object.keys(r||{})))),a((0,l.addUndo)(i({actions:[y.objectActions.update(e,d,{notify:!1})]},o)))):a((0,l.addUndo)(o))),t.abrupt("return",c);case 9:case"end":return t.stop()}},n,t)})),function(e,t){return n.apply(this,arguments)}}),delete:(0,o.compose)((0,o.withAction)(T),M("delete"),N(function(e){return[e.id,"delete"]}),R("delete"))(function(e){return n=g(regeneratorRuntime.mark(function n(r,a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.api.delete({id:e.id});case 2:return t.abrupt("return",{entities:b({},y.name,b({},e.id,null)),result:e.id});case 3:case"end":return t.stop()}},n,t)})),function(e,t){return n.apply(this,arguments)};var n})},e.objectActions||{}),y.actions=i({fetchList:(0,o.compose)((0,o.withAction)(P),(0,o.withCachedDataAndRequestState)(function(e){return[].concat(_(S(e)))},function(e){return[].concat(_(S(e)),["fetch"])}))(function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e=g(regeneratorRuntime.mark(function e(r,a){var o,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.api.list(n||{});case 2:return o=e.sent,u=o.data?o.data:o,e.abrupt("return",i({},y.normalizeList(u),{entityQuery:n}));case 5:case"end":return e.stop()}},e,t)})),function(t,n){return e.apply(this,arguments)}})},y.objectActions,e.actions||{}),y.HACK_getObjectFromAction=function(e){var t=e.payload;return t&&"entities"in t&&"result"in t?Array.isArray(t.result)?t.result.map(function(e){return t.entities[y.name][e]}):t.entities[y.name][t.result]:t};var D=function(e){return e.entities},L=(0,u.default)([D,function(e,t){return t.params&&t.params.entityId||t.entityId}],function(e,t){return(0,m.denormalize)(t,y.schema,e)})(function(e,t){var n=t.entityId;return"object"===(void 0===n?"undefined":a(n))?JSON.stringify(n):n}),I=(0,p.createSelector)([D],function(e){return e[y.name+"_list"]}),F=(0,p.createSelector)([function(e,t){return w(t&&t.entityQuery)},I],function(e,t){return t[e]}),z=(0,p.createSelector)([function(e){return e},F],function(e,t){return t&&t.map(function(t){return y.selectors.getObject(e,{entityId:t})}).filter(function(e){return null!=e})}),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.entityId,n=e.entityQuery,r=e.requestType,a=void 0===r?"fetch":r;return["requests"].concat(_(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.entityId,n=e.entityQuery;return null!=t?O(t):S(n)}({entityId:t,entityQuery:n})),[a])},B=function(e,t){return(0,h.getIn)(e,q(t))||{}},U=(0,p.createSelector)([B],function(e){return e.loading}),V=(0,p.createSelector)([B],function(e){return e.loaded}),G=(0,p.createSelector)([B],function(e){return e.fetched}),H=(0,p.createSelector)([B],function(e){return e.error}),W={getList:z,getObject:L,getFetched:G,getLoading:U,getLoaded:V,getError:H};y.selectors=i({},W,e.selectors||{},e.createSelectors?e.createSelectors(W):{}),y.objectSelectors=i({getName:function(e){return e.name},getIcon:function(e){return"unknown"},getColor:function(e){}},e.objectSelectors||{}),y.reducers={},y.reducers[y.name]=(0,o.handleEntities)(/^metabase\/entities\//,y.name,e.reducer),y.reducers[y.name+"_list"]=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,r=t.error,a=t.payload;if(r)return e;if(n===P){if(a&&a.result)return i({},e,b({},w(a.entityQuery),a.result))}else{if(n===x&&e[""])return i({},e,{"":e[""].concat([a.result])});if(n===T&&e[""])return i({},e,{"":e[""].filter(function(e){return e!==a.result})})}return e},y.actionShouldInvalidateLists||(y.actionShouldInvalidateLists=function(e){return e.type===x||e.type===T||e.type===A||e.type===j});if(y.requestsReducer=function(e,t){return y.actionShouldInvalidateLists(t)?(0,c.default)(e,(0,s.setRequestUnloaded)(["entities",y.name+"_list"])):e},!y.wrapEntity){var Q=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,t),this._dispatch=n},Y=!0,K=!1,Z=void 0;try{for(var J,X=function(){var e=r(J.value,2),t=e[0],n=e[1];n&&(Q.prototype[t]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(void 0,[this].concat(t))})},$=Object.entries(y.objectSelectors)[Symbol.iterator]();!(Y=(J=$.next()).done);Y=!0)X()}catch(e){K=!0,Z=e}finally{try{!Y&&$.return&&$.return()}finally{if(K)throw Z}}var ee=!0,te=!1,ne=void 0;try{for(var re,ae=function(){var e=r(re.value,2),t=e[0],n=e[1];n&&(Q.prototype[t]=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._dispatch?this._dispatch(n.apply(void 0,[this].concat(t))):n.apply(void 0,[this].concat(t))})},ie=Object.entries(y.objectActions)[Symbol.iterator]();!(ee=(re=ie.next()).done);ee=!0)ae()}catch(e){te=!0,ne=e}finally{try{!ee&&ie.return&&ie.return()}finally{if(te)throw ne}}y.wrapEntity=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Q(e,t)}}return n(527).addEntityContainers(y),y},t.combineEntities=function(e){var t={},n={},r=!0,a=!1,i=void 0;try{for(var u,l=e[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var s=u.value;s.name in t?console.warn("Entity with name "+s.name+" already exists!"):(t[s.name]=s,Object.assign(n,s.reducers))}}catch(e){a=!0,i=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw i}}return{entities:t,reducers:n,reducer:(0,o.combineReducers)(n),requestsReducer:function(t,n){var r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;l.requestsReducer&&(t=l.requestsReducer(t,n))}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return t}}};var o=n(18),u=y(n(929)),l=n(151),s=n(176),c=y(s),d=n(64),f=y(n(160)),p=n(32),m=n(128),h=n(11),v=y(n(3));function y(e){return e&&e.__esModule?e:{default:e}}function g(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.notify=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2];return(0,h.merge)({notify:{subject:t,verb:n,undo:!1}},e||{})},t.undo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2];return(0,h.merge)({notify:{subject:t,verb:n,undo:!0}},e||{})}},340:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=o(n(36)),i=o(n(444));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){var n=r(t,2),a=n[0],i=n[1],o=s(e),l=r(o,2),c=l[0],d=l[1];return[].concat(u(a<c?[a]:[]),u(e),u(d<i?[i]:[]))}function s(e){return null==e||e.length<2?e:[e[0],e[e.length-1]]}function c(e,t){var n=r(e,2),a=n[0],i=n[1],o=t.count,u=t.timezone,l=t.interval,s=[],c=a.clone().tz(u).startOf(l),d=c.get(l);for(c.set(l,d-d%o);!c.isAfter(i);)c.isBefore(a)||s.push(c),c=c.clone().add(o,l);return s}function d(e){return i.default.isMoment(e)?e.valueOf():i.default.isDate(e)?e.getTime():e}t.default=function e(t){var n=t.count,o=t.interval,u=t.timezone,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.scale.linear(),p=function(e){return f(d(e))};return p.domain=function(e){return void 0===e?s(f.domain()).map(function(e){return(0,i.default)(e).tz(u)}):(e=e.map(function(e){return(0,i.default)(e).tz(u)}),"month"===o&&(t=e,r=(n={interval:o,timezone:u}).timezone,a=n.interval,m=c(t,{count:1,timezone:r,interval:a}),e=m.length<2?t:l(m,t)),f.domain(e.map(d)),p);var t,n,r,a,m},p.range=function(e){return void 0===e?s(f.range()):("month"===o&&(e=function(e,t,n){var i=n.timezone,o=n.interval,u=a.default.scale.linear().domain(t.map(d)).range(e),f=c(t,{count:1,timezone:i,interval:o});if(f.length<2)return e;var p=s(f).map(function(e){return u(d(e))}),m=r(p,2),h=m[0],v=(m[1]-h)/(f.length-1);return l(a.default.range(f.length).map(function(e){return h+e*v}),e)}(e,p.domain(),{interval:o,timezone:u})),f.range(e),p)},p.ticks=function(){return c(p.domain(),{count:n,timezone:u,interval:o})},p.copy=function(){return e({count:n,interval:o,timezone:u},f)},a.default.rebind(p,f,"rangeRound","interpolate","clamp","invert"),p}},341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=A(["Line style"],["Line style"]),o=A(["Line"],["Line"]),u=A(["Curve"],["Curve"]),l=A(["Step"],["Step"]),s=A(["Show dots on lines"],["Show dots on lines"]),c=A(["Auto"],["Auto"]),d=A(["On"],["On"]),f=A(["Off"],["Off"]),p=A(["Replace missing values with"],["Replace missing values with"]),m=A(["Zero"],["Zero"]),h=A(["Nothing"],["Nothing"]),v=A(["Linear Interpolated"],["Linear Interpolated"]),y=A(["Which axis?"],["Which axis?"]),g=A(["Left"],["Left"]),b=A(["Right"],["Right"]),_=A(["Show values for this series"],["Show values for this series"]);t.keyForSingleSeries=T,t.seriesSetting=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.readDependencies,n=void 0===t?[]:t,k=(e.noPadding,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["readDependencies","noPadding"])),A="series_settings",j=A+".colors",N={title:{getDefault:function(e,t,n){var r=n.series,a=n.settings,i=a["graph.series_labels"];if(i){var o=r.indexOf(e);if(o>=0&&o<i.length)return i[o]}return e.card.name}},display:{getDefault:function(e,t,n){var r=n.series;if("combo"===e.card.display){var a=r.indexOf(e);return 0===a?"line":"bar"}return e.card.display}},color:{getDefault:function(e,t,n){var r=n.settings;return(0,O.getIn)(r,[j,T(e)])}},"line.interpolate":{title:(0,E.t)(i),widget:"buttonGroup",props:{options:[{icon:"straight",name:(0,E.t)(o),value:"linear"},{icon:"curved",name:(0,E.t)(u),value:"cardinal"},{icon:"stepped",name:(0,E.t)(l),value:"step-after"}]},getHidden:function(e,t){return!P.has(t.display)},getDefault:function(e,t,n){var r=n.settings;return r["line.interpolate"]||"linear"},readDependencies:["display"]},"line.marker_enabled":{title:(0,E.t)(s),widget:"buttonGroup",props:{options:[{name:(0,E.t)(c),value:null},{name:(0,E.t)(d),value:!0},{name:(0,E.t)(f),value:!1}]},getHidden:function(e,t){return!P.has(t.display)},getDefault:function(e,t,n){var r=n.settings;return null==r["line.marker_enabled"]?null:r["line.marker_enabled"]},readDependencies:["display"]},"line.missing":{title:(0,E.t)(p),widget:"select",props:{options:[{name:(0,E.t)(m),value:"zero"},{name:(0,E.t)(h),value:"none"},{name:(0,E.t)(v),value:"interpolate"}]},getHidden:function(e,t){return!P.has(t.display)},getDefault:function(e,t,n){var r=n.settings;return r["line.missing"]||"interpolate"},readDependencies:["display"]},axis:{title:(0,E.t)(y),widget:"buttonGroup",default:null,props:{options:[{name:(0,E.t)(c),value:null},{name:(0,E.t)(g),value:"left"},{name:(0,E.t)(b),value:"right"}]},getHidden:function(e,t,n){var r=n.series;return r.length<2}},show_series_values:{title:(0,E.t)(_),widget:"toggle",getHidden:function(e,t,n){var r=n.settings,a=n.series;return a.length<=1||!r.hasOwnProperty("graph.show_values")||r["stackable.stack_type"]},getDefault:function(e,t,n){var r=n.settings;return r["graph.show_values"]},readDependencies:["graph.show_values","stackable.stack_type"]}};return a({},(0,C.nestedSettings)(A,a({objectName:"series",getObjects:function(e,t){return e},getObjectKey:T,getSettingDefintionsForObject:function(e,t,n){return N},component:S.default,readDependencies:[j].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)),noPadding:!0},k)),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n;return e}({},j,{getValue:function(e,t){var n=e.map(function(e){return T(e)}),a=w.default.chain(n).map(function(e){return[e,(0,O.getIn)(t,[A,e,"color"])]}).filter(function(e){var t=r(e,2),n=(t[0],t[1]);return null!=n}).object().value(),i=t["graph.colors"];if(i){var o=!0,u=!1,l=void 0;try{for(var s,c=n.entries()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=r(s.value,2),f=d[0],p=d[1];p in a||(a[p]=i[f])}}catch(e){u=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(u)throw l}}}return(0,x.getColorsForValues)(n,a)}}))};var E=n(1),w=k(n(3)),O=n(11),S=k(n(654)),C=n(331),x=n(7);function k(e){return e&&e.__esModule?e:{default:e}}function A(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function T(e){return e.card._seriesKey||String(e.card.name)}var P=new Set(["line","area"])},342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.checkXAxisLabelOverlap=L,t.default=function(e,t){n=e,function(e){if(!0===e.settings["graph.x_axis.axis_enabled"]){var t=L(e);if(t)if(e.isOrdinal()){var n=function(e){var t=[],n=1/0,r=!0,a=!1,i=void 0;try{for(var o,u=e.selectAll("g.x text")[0][Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;if(t.push(l.getBoundingClientRect()),t.length>1){var s=t[t.length-2],c=t[t.length-1],d=c.left+c.width/2-(s.left+s.width/2);n=Math.min(n,d)}}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e);n<p?e.settings["graph.x_axis.axis_enabled"]=!1:n<f?I(e,90)?e.settings["graph.x_axis.axis_enabled"]="rotate-90":e.settings["graph.x_axis.axis_enabled"]=!1:I(e,45)?e.settings["graph.x_axis.axis_enabled"]="rotate-45":e.settings["graph.x_axis.axis_enabled"]=!1}else e.settings["graph.x_axis.axis_enabled"]=!1}}(n),F=n,S(F),C(F),x(F),c=n,d=function(e){var t={left:0,right:0},n=e.selectAll(".axis.x .tick text")[0];if(n.length>0){var r=e.select("svg").node().getBoundingClientRect();t.left=e.margins().left-(n[0].getBoundingClientRect().left-r.left),t.right=e.margins().right-(r.right-n[n.length-1].getBoundingClientRect().right)}return t}(c),m=function(e){if(!1===e.settings["graph.x_axis.axis_enabled"])return h;var t=k(e),n=R(e),r=D(n,t);return Math.max(0,r.width-n.height)}(c),(0,l.adjustYAxisTicksIfNeeded)(c.yAxis(),c.height()-m),(0,l.adjustYAxisTicksIfNeeded)(c.rightYAxis(),c.height()-m),M(c,"bottom","height",j+m,".axis.x",".x-axis-label"),M(c,"left","width",N,".axis.y",".y-axis-label.y-label"),M(c,"right","width",N,".axis.yr",".y-axis-label.yr-label"),c.margins().top=Math.max(A,c.margins().top),c.margins().left=Math.max(P,c.margins().left,d.left),c.margins().right=Math.max(P,c.margins().right,d.right),c.margins().bottom=Math.max(T,c.margins().bottom),e.on("renderlet.on-render",function(){return n=e,c=(l=t).onGoalHover,d=l.isSplitAxis,f=l.xInterval,p=l.yAxisSplit,m=l.isStacked,h=l.formatYValue,A=l.datas,function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e.selectAll(".sub, .chart-body")[0][Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.removeAttribute("clip-path")}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}(n),function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e.selectAll(".sub, .chart-body")[0][Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;(0,u.moveToFront)(o)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}(n),function(e){var t=e.series.map(function(t){return e.settings.series(t).display});if(i.default.uniq(t).length>0){var n=!0,a=!1,o=void 0;try{for(var l,s=t.entries()[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var c=r(l.value,2),d=c[0],f=c[1];"area"===f&&(0,u.moveToFront)(e.select(".sub._"+d)[0][0])}}catch(e){a=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw o}}var p=!0,m=!1,h=void 0;try{for(var v,y=t.entries()[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var g=r(v.value,2),d=g[0],f=g[1];"line"===f&&(0,u.moveToFront)(e.select(".sub._"+d)[0][0])}}catch(e){m=!0,h=e}finally{try{!p&&y.return&&y.return()}finally{if(m)throw h}}}}(n),function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e.svg().selectAll(".dc-tooltip circle.dot")[0][Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;o.style.color=o.getAttribute("fill")}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}(n),function(e){var t=e.svg()[0][0].querySelectorAll(".dot");if(t.length<y){var n=function(e){var t=null,n=null,r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value,s=l.getBoundingClientRect(),c=s.left;if(null!==n){var d=c-n;d>0&&(null==t||d<t)&&(t=d)}n=c}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return t}(t);n>150?e.svg().classed("line--heavy",!0):n>75&&e.svg().classed("line--medium",!0)}}(n),function(e){var t=e.series.map(function(t){return e.settings.series(t)["line.marker_enabled"]}),n=void 0;if(i.default.any(t,function(e){return null==e})){var o,u=(o=[]).concat.apply(o,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t.map(function(t,n){return!1===t?[]:e.svg().selectAll(".sub._"+n+" .dc-tooltip .dot")[0]})));if(u.length>v)n=!1;else{var l=u.map(function(e,t){var n=e.getBoundingClientRect();return[n.left,n.top,t]}),s={},c=!0,d=!1,f=void 0;try{for(var p,m=a.default.geom.voronoi().links(l)[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var h=p.value,y=h.source,E=h.target;Math.sqrt(Math.pow(y[0]-E[0],2)+Math.pow(y[1]-E[1],2))<_&&(s[y[2]]=s[E[2]]=!0)}}catch(e){d=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw f}}var w=l.length,O=Object.keys(s).length;n=O<g||O/w<b}}var S=!0,C=!1,x=void 0;try{for(var k,A=t.entries()[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){var T=r(k.value,2),P=T[0],j=T[1],N=null!=j?!!j:n;e.svg().select(".sub._"+P).classed("enable-dots",N).classed("enable-dots-onhover",!N)}}catch(e){C=!0,x=e}finally{try{!S&&A.return&&A.return()}finally{if(C)throw x}}}(n),function(e){var t=e.svg().select("svg > g"),n=e.svg().selectAll(".sub .dc-tooltip .dot")[0];if(!(0===n.length||n.length>w)){var r=e.svg().node().getBoundingClientRect(),i=n.map(function(e){var t=e.getBoundingClientRect(),n=t.top,a=t.left,i=t.width,o=t.height,u=a+i/2-r.left,l=n+o/2-r.top;return[u,l,e]}),o=t.node()?t.node().getBBox():{width:0,height:0},l=o.width,s=o.height,c=a.default.geom.voronoi().clipExtent([[0,0],[l,s]]);t.append("svg:g").selectAll("clipPath").data(i).enter().append("svg:clipPath").attr("id",function(e,t){return"clip-"+t}).append("svg:circle").attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}).attr("r",E),t.append("svg:g").classed("voronoi",!0).selectAll("path").data(c(i),function(e){return e&&e.join(",")}).enter().append("svg:path").filter(function(e){return null!=e}).attr("d",function(e){return"M"+e.join("L")+"Z"}).attr("clip-path",function(e,t){return(0,u.clipPathReference)("clip-"+t)}).on("mousemove",function(e){var t=e.point,n=t[2];O(n,"mousemove"),a.default.select(n).classed("hover",!0)}).on("mouseleave",function(e){var t=e.point,n=t[2];O(n,"mouseleave"),a.default.select(n).classed("hover",!1)}).on("click",function(e){var t=e.point,n=t[2];O(n,"click")}).order()}}(n),function(e,t,n){e.selectAll(".goal .dot, .trend .dot").remove(),e.selectAll(".goal, .trend").each(function(){this.parentNode.appendChild(this)});var r=e.selectAll(".goal .line")[0][0];if(r){var a=e.selectAll(".axis.x .domain")[0][0];a&&r.getBBox&&r.setAttribute("d","M0,"+r.getBBox().y+"L"+a.getBBox().width+","+r.getBBox().y);var i=r.getBBox?r.getBBox():{x:0,y:0,width:0},u=i.x,l=i.y,s=i.width,c=!n;e.selectAll(".goal .stack._0").append("text").text(e.settings["graph.goal_label"]).attr({x:c?u+s:u,y:l-5,"text-anchor":c?"end":"start","font-weight":"bold",fill:(0,o.color)("text-medium")}).on("mouseenter",function(){t(this)}).on("mouseleave",function(){t(null)})}}(n,c,d),(0,s.onRenderValueLabels)(n,{formatYValue:h,xInterval:f,yAxisSplit:p,datas:A}),S(n),C(n),x(n),(R=n).selectAll("rect.bar").on("click",function(e){R.filter(null),R.filter(e.key)}),function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e.selectAll(".stack-list, .dc-tooltip-list")[0][Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value,u=!0,l=!1,s=void 0;try{for(var c,d=o.childNodes[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var f=c.value;o.insertBefore(o.firstChild,f)}}catch(e){l=!0,s=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw s}}}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}(n),M=m,n.svg().classed("stacked",M),0!==(N=k(j=n))&&j.selectAll("g.x text").attr("transform",function(){var e=this.getBBox(),t=e.width,n=e.height;return"translate(-"+t/2+","+-n/2+") rotate("+-N+", "+t/2+", "+n+")"}),void((P=(T=n).props.onEditBreakout)&&T.svg().select(".x-axis-label").classed("cursor-pointer",!0).on("click",function(){return P(a.default.event,0)}));var n,l,c,d,f,p,m,h,A,T,P,j,N,M,R}),e.render();var n,c,d,m,F};var a=c(n(36)),i=c(n(3)),o=n(7),u=n(25),l=n(339),s=n(655);function c(e){return e&&e.__esModule?e:{default:e}}var d=2,f=24,p=12,m=.7,h=6;var v=500,y=500,g=8,b=.1,_=8;var E=25,w=300;function O(e,t){var n=document.createEvent("UIEvents");n.initUIEvent(t,!0,!0,window,1),e.dispatchEvent(n)}function S(e){e.settings["graph.x_axis.labels_enabled"]||e.selectAll(".x-axis-label").remove(),e.settings["graph.y_axis.labels_enabled"]||e.selectAll(".y-axis-label").remove()}function C(e){e.settings["graph.x_axis.axis_enabled"]||e.selectAll(".axis.x").remove(),e.settings["graph.y_axis.axis_enabled"]||e.selectAll(".axis.y, .axis.yr").remove()}function x(e){0===e.selectAll(".axis.x .tick")[0].length&&e.selectAll(".axis.x").remove()}function k(e){var t=String(e.settings["graph.x_axis.axis_enabled"]||"").match(/^rotate-(\d+)$/);return t?parseInt(t[1],10):0}var A=20,T=10,P=20,j=0,N=8;function M(e,t,n,r,a,i){var o=e.select(a).node(),u=e.select(i).node(),l=o?o.getBoundingClientRect()[n]+10:0,s=u?u.getBoundingClientRect()[n]+5:0;e.margins()[t]=l+s+r}function R(e){var t=0,n=0;return e.selectAll("g.x text").each(function(){var e=this.getBBox(),r=e.width,a=e.height;t=Math.max(t,r),n=Math.max(n,a)}),{width:t,height:n}}function D(e,t){return{width:Math.sin(t*(Math.PI/180))*e.width,height:Math.sin(t*(Math.PI/180))*e.height}}function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"g.x text",n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e.selectAll(t)[0][Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;if(n.push(l.getBoundingClientRect()),n.length>1&&n[n.length-2].right+d>n[n.length-1].left)return!0}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return!1}function I(e,t){var n=D(R(e),t+180),r=e.selectAll("g.y")[0][0].getBBox();return Math.abs(n.width)/r.height<m}},343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=v(["Bar"],["Bar"]),l=v(["bar chart"],["bar chart"]),s=n(1),c=n(119),d=(i=c)&&i.__esModule?i:{default:i},f=n(144),p=n(11),m=n(121),h=n(28);function v(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default),t}(),r.uiName=(0,s.t)(u),r.identifier="bar",r.iconName="bar",r.noun=(0,s.t)(l),r.settings=o({},m.STACKABLE_SETTINGS,m.GRAPH_GOAL_SETTINGS,m.GRAPH_COLORS_SETTINGS,m.GRAPH_AXIS_SETTINGS,h.PLUGIN_CHART_SETTINGS,m.GRAPH_DISPLAY_VALUES_SETTINGS,m.GRAPH_DATA_SETTINGS),r.renderer=f.barRenderer,r.placeholderSeries=(0,p.assocIn)(d.default.placeholderSeries,[0,"card","display"],"bar"),a);t.default=y},344:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=h(l),c=h(n(662)),d=h(n(663)),f=h(n(664)),p=h(n(52)),m=h(n(4));function h(e){return e&&e.__esModule?e:{default:e}}var v=(0,p.default)({wrapped:!0})((i=a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.legendTitles,r=e.legendColors,a=e.hovered,i=e.onHoverChange,u=e.className,l=e.style,p=e.gridSize,h=e.aspectRatio,v=e.height,y=e.width,g=e.showLegend,b=e.isDashboard;y-=28,v-=14,p||(p={width:y/100,height:v/100});var _=void 0,E=void 0,w=!1,O=void 0,S=void 0,C=p.width>p.height/(4/3);if(!1===g)O="small";else if(!p||C&&(g||p.width>4||p.height>4)){O="horizontal",S=d.default,p&&p.width<6&&(n=n.map(function(e){return Array.isArray(e)?e.slice(0,1):e}));var x=v*h;x>y*(2/3)?w=!0:_=x,E=v}else if(!C&&(g||p.height>3&&p.width>2)){O="vertical",S=f.default,n=n.map(function(e){return Array.isArray(e)?e[0]:e});var k=y*(1/h);k>.75*v?w=!0:E=k,_=y}else O="small";var A=S?s.default.createElement(S,{className:c.default.Legend,titles:n,colors:r,hovered:a,onHoverChange:i}):null;return s.default.createElement("div",{className:(0,m.default)(u,"fullscreen-text-small fullscreen-normal-text fullscreen-night-text",c.default.ChartWithLegend,c.default[O],w&&c.default.flexChart),style:o({},l,{paddingBottom:14,paddingLeft:14,paddingRight:14})},A&&s.default.createElement("div",{className:(0,m.default)(c.default.LegendWrapper)},A),s.default.createElement("div",{className:(0,m.default)(c.default.Chart),style:{width:_,height:E}},t),A&&s.default.createElement("div",{className:(0,m.default)(c.default.LegendSpacer),style:b?{flexBasis:0}:{}},A))}}]),t}(),a.defaultProps={aspectRatio:1,style:{}},r=i))||r;v.displayName="ChartWithLegend",t.default=v},345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.computeMinimalBounds=function(e){var t=s(e),n=l(t,function(e){return e[0]}),o=i.default.extent(t,function(e){return e[0]}),u=r(o,2),c=u[0],d=u[1],f=i.default.extent(t,function(e){return e[1]}),p=r(f,2),m=p[0],h=p[1],v=n[1]-n[0];return 180+c+(180-d)>v?a.default.latLngBounds(a.default.latLng(h,c),a.default.latLng(m,d)):a.default.latLngBounds(a.default.latLng(h,-360+n[1]),a.default.latLng(m,n[0]))},t.computeLargestGap=l,t.getAllFeaturesPoints=s,t.getCanonicalRowKey=function(e,t){return e=String(e).toLowerCase(),"us_states"===t&&c.has(e)?c.get(e):e};var a=o(n(92)),i=o(n(36));function o(e){return e&&e.__esModule?e:{default:e}}function u(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=i.default.extent(e,t),a=r(n,2),o=a[0],u=a[1];if(o===u)return[o,u];var l=[],s=(u-o)/e.length,c=!0,d=!1,f=void 0;try{for(var p,m=e[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var h=t(p.value),v=Math.floor((h-o)/s);void 0===l[v]?l[v]=[h,h]:l[v]=[Math.min(h,l[v][0]),Math.max(h,l[v][1])]}}catch(e){d=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw f}}for(var y=[0,0],g=0;g<e.length;g++)void 0===l[g+1]?l[g+1]=l[g]:l[g+1][0]-l[g][1]>y[1]-y[0]&&(y=[l[g][1],l[g+1][0]]);return y}function s(e){var t=[],n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;if("Polygon"===l.geometry.type){var s=!0,c=!1,d=void 0;try{for(var f,p=l.geometry.coordinates[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var m=f.value;t.push.apply(t,u(m))}}catch(e){c=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(c)throw d}}}else if("MultiPolygon"===l.geometry.type){var h=!0,v=!1,y=void 0;try{for(var g,b=l.geometry.coordinates[Symbol.iterator]();!(h=(g=b.next()).done);h=!0){var _=g.value,E=!0,w=!1,O=void 0;try{for(var S,C=_[Symbol.iterator]();!(E=(S=C.next()).done);E=!0){var x=S.value;t.push.apply(t,u(x))}}catch(e){w=!0,O=e}finally{try{!E&&C.return&&C.return()}finally{if(w)throw O}}}}catch(e){v=!0,y=e}finally{try{!h&&b.return&&b.return()}finally{if(v)throw y}}}else console.warn("Unimplemented feature.geometry.type",l.geometry.type)}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}return t}var c=new Map([["AL","Alabama"],["AK","Alaska"],["AS","American Samoa"],["AZ","Arizona"],["AR","Arkansas"],["CA","California"],["CO","Colorado"],["CT","Connecticut"],["DE","Delaware"],["DC","District Of Columbia"],["FM","Federated States Of Micronesia"],["FL","Florida"],["GA","Georgia"],["GU","Guam"],["HI","Hawaii"],["ID","Idaho"],["IL","Illinois"],["IN","Indiana"],["IA","Iowa"],["KS","Kansas"],["KY","Kentucky"],["LA","Louisiana"],["ME","Maine"],["MH","Marshall Islands"],["MD","Maryland"],["MA","Massachusetts"],["MI","Michigan"],["MN","Minnesota"],["MS","Mississippi"],["MO","Missouri"],["MT","Montana"],["NE","Nebraska"],["NV","Nevada"],["NH","New Hampshire"],["NJ","New Jersey"],["NM","New Mexico"],["NY","New York"],["NC","North Carolina"],["ND","North Dakota"],["MP","Northern Mariana Islands"],["OH","Ohio"],["OK","Oklahoma"],["OR","Oregon"],["PW","Palau"],["PA","Pennsylvania"],["PR","Puerto Rico"],["RI","Rhode Island"],["SC","South Carolina"],["SD","South Dakota"],["TN","Tennessee"],["TX","Texas"],["UT","Utah"],["VT","Vermont"],["VI","Virgin Islands"],["VA","Virginia"],["WA","Washington"],["WV","West Virginia"],["WI","Wisconsin"],["WY","Wyoming"]].map(function(e){var t=r(e,2),n=t[0];return[t[1].toLowerCase(),n.toLowerCase()]}))},347:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(42));function i(e){return e&&e.__esModule?e:{default:e}}var o=i(n(3)).default.range((new Date).getFullYear(),1900,-1),u=function(e){var t=e.value,n=e.onChange;return r.default.createElement(a.default,{className:"borderless",value:t,options:o,optionNameFn:function(e){return e},optionValueFn:function(e){return e},onChange:function(e){var t=e.target.value;return n(t)}})};u.displayName="YearPicker",t.default=u},348:function(e,t){e.exports={container:"tfpVo _38618 _3Dqep",deemphasized:"_2twtF",parameter:"_20z_B _38618 _3Dqep",nameInput:"_2i2x7 _38618 _3Dqep",fullscreen:"_2G87x",name:"_2m475 _3K4no",selected:"_2YcmO",noPopover:"pg3LL",isEditing:"_2AYUY",input:"_38Q_V",parameterButtons:"_2bHbr",editButton:"_3tq8o _38618 _3Dqep _1a-AI",removeButton:"_1kPst _38618 _3Dqep _1a-AI",editNameIconContainer:"_1oJCz"}},349:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPositionForNewDashCard=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.width,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.height,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,o=0,u=0;for(;o<1e3;){for(;u<=i-t;){var l=!0,s={col:u,row:o,sizeX:t,sizeY:n},c=!0,d=!1,f=void 0;try{for(var p,m=e[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var h=p.value;if(!((y=s).col>=(v=h).col+v.sizeX||y.col+y.sizeX<=v.col||y.row>=v.row+v.sizeY||y.row+y.sizeY<=v.row)){l=!1;break}}}catch(e){d=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw f}}if(l)return s;u++}u=0,o++}var v,y;return{col:u,row:o,sizeX:t,sizeY:n}};var r=t.GRID_WIDTH=18,a=(t.GRID_ASPECT_RATIO=4/3,t.GRID_MARGIN=6,t.DEFAULT_CARD_SIZE={width:4,height:4})},35:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=b(["zero"],["zero"]),a=b(["one"],["one"]),i=b(["two"],["two"]),o=b(["three"],["three"]),u=b(["four"],["four"]),l=b(["five"],["five"]),s=b(["six"],["six"]),c=b(["seven"],["seven"]),d=b(["eight"],["eight"]),f=b(["nine"],["nine"]);t.stripLayoutProps=function(e){return v.default.omit(e,_)};var p=y(n(833)),m=n(1),h=y(n(14)),v=y(n(3));function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function b(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _=["m","ml","mr","mt","mb","mx","my","p","pl","pr","pt","pb","px","py","bg","color","hover","bordered"];function E(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var w={generatePassword:function(e){e=e||h.default.passwordComplexityRequirements()||{};for(var t,n,r,a,i,o=Math.max(e.total||0,14),u="",l=0;void 0,void 0,void 0,void 0,n=(t=u).match(/([A-Z])/g),r=t.match(/([a-z])/g),a=t.match(/([\d])/g),i=t.match(/([!@#\$%\^\&*\)\(+=._-{}])/g),!(n&&n.length>=(e.upper||0)&&r&&r.length>=(e.lower||0)&&a&&a.length>=(e.digit||0)&&i&&i.length>=(e.special||0))&&l<100;)u=(0,p.default)(o,!1,/[\w\d\?\-]/),l++;return u},isEmpty:function(e){return null!=e&&(e=String(e)),null==e||0===e.length||null!=e.match(/^\s+$/)},numberToWord:function(e){var t=[(0,m.t)(r),(0,m.t)(a),(0,m.t)(i),(0,m.t)(o),(0,m.t)(u),(0,m.t)(l),(0,m.t)(s),(0,m.t)(c),(0,m.t)(d),(0,m.t)(f)];return e>=0&&e<=9?t[e]:""+e},uuid:function(){return E()+E()+"-"+E()+"-"+E()+"-"+E()+"-"+E()+E()+E()},isUUID:function(e){return"string"==typeof e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/.test(e)},isBase64:function(e){return"string"==typeof e&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},isJWT:function(e){return"string"==typeof e&&/^[A-Za-z0-9_-]+\.[A-Za-z0-9_-]+\.[A-Za-z0-9_-]+$/.test(e)},validEmail:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},equals:function(e,t){return v.default.isEqual(e,t)},propertiesEqual:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[].concat(g(Object.keys(e)),g(Object.keys(t))),r=!0,a=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;if(e[l]!==t[l])return!1}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return!0},copy:function(e){return JSON.parse(JSON.stringify(e))},compareVersions:function(e,t){if(!e||!t)return null;for(var n={snapshot:-4,alpha:-3,beta:-2,rc:-1},r=function(e){return e.toLowerCase().replace(/^v/,"").split(/[.-]*([0-9]+)[.-]*/).filter(function(e){return e}).map(function(e){return n[e]||parseInt(e,10)})},a=r(e),i=r(t),o=0;o<Math.max(a.length,i.length);o++){var u=a[o],l=i[o];if(null==l||u<l)return-1;if(null==u||l<u)return 1}return 0}};t.default=w},355:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(28),a={name:"public",drills:function(){return r.PLUGIN_DRILLS}};t.default=a},37:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(302)),a=i(n(60));function i(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.default)(a.default)},375:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=(o=["Search"],u=["Search"],Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(u)}}))),d=S(n(0)),f=S(n(2)),p=S(n(4)),m=n(1),h=n(20),v=S(n(5)),y=S(n(93)),g=S(n(38)),b=n(7),_=n(6),E=n(285),w=S(E),O=S(n(43));function S(e){return e&&e.__esModule?e:{default:e}}function C(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var x=(0,b.color)("text-light"),k=function(e){return"root"===e.id||null==e.id},A=(0,E.entityListLoader)({entityType:function(e,t){return t.entity?t.entity.name:"collections"},loadingAndErrorWrapper:!1})(r=(0,_.connect)(function(e,t){return{collectionsById:(t.entity||O.default).selectors.getExpandedCollectionsById(e),getCollectionIcon:(t.entity||O.default).objectSelectors.getIcon}})((i=a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={parentId:"root",searchMode:!1,searchString:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"_getCrumbs",value:function(e,t){var n=this;return e&&e.path?[].concat(C(e.path.map(function(e){return[t[e].name,function(){return n.setState({parentId:e})}]})),[[e.name]]):[[t.root.name,function(){return n.setState({parentId:t.root.id})}],["Unknown"]]}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.onChange,a=t.collectionsById,i=t.getCollectionIcon,o=t.style,u=t.className,s=t.showSearch,f=void 0===s||s,b=this.state,_=b.parentId,E=b.searchMode,O=b.searchString,S=new Set(this.props.models),A=this.props.models.filter(function(e){return"collection"!==e}).length>0,P=a[_],j=this._getCrumbs(P,a),N=P&&P.children||[];P&&k(P)&&S.has("collection")&&(N=[P].concat(C(N))),N=N.map(function(e){return l({},e,{model:"collection"})});var M=function(e){return e&&("collection"===e.model&&null===e.id?"root":e.id)},R=function(e){return e&&n&&M(e)===M(n)&&(1===S.size||e.model===n.model)};return d.default.createElement(g.default,{loading:!a,className:"scroll-y"},d.default.createElement(h.Box,{style:o,className:(0,p.default)(u,"scroll-y")},E?d.default.createElement(h.Box,{pb:1,mb:2,className:"border-bottom flex align-center"},d.default.createElement("input",{type:"search",className:"input rounded flex-full",placeholder:(0,m.t)(c),autoFocus:!0,onKeyPress:function(t){"Enter"===t.key&&e.setState({searchString:t.target.value})}}),d.default.createElement(v.default,{name:"close",className:"ml-auto pl2 text-light text-medium-hover cursor-pointer",onClick:function(){return e.setState({searchMode:null,searchString:null})}})):d.default.createElement(h.Box,{pb:1,mb:2,className:"border-bottom flex align-center"},d.default.createElement(y.default,{crumbs:j}),f&&d.default.createElement(v.default,{name:"search",className:"ml-auto pl2 text-light text-medium-hover cursor-pointer",onClick:function(){return e.setState({searchMode:!0})}})),d.default.createElement(h.Box,{className:"scroll-y"},O?null:N.map(function(t){var n=t.children&&t.children.length>0&&!k(t)||A,a=S.has("collection")&&t.can_write;return a||n?d.default.createElement(T,{item:t,name:t.name,color:x,icon:i(t),selected:a&&R(t),canSelect:a,hasChildren:n,onChange:function(e){return k(e)?r({id:null,model:"collection"}):r(e)},onChangeParentId:function(t){return e.setState({parentId:t})}}):null}),(A||O)&&d.default.createElement(w.default,{entityType:"search",entityQuery:l({},O?{q:O}:{collection:_},1===S.size?{model:Array.from(S)[0]}:{}),wrapped:!0},function(e){var t=e.list;return d.default.createElement("div",null,t.filter(function(e){return("collection"!==e.model||!!O)&&S.has(e.model)}).map(function(e){return d.default.createElement(T,{item:e,name:e.getName(),color:e.getColor(),icon:e.getIcon(),selected:R(e),canSelect:!0,onChange:r})}))}))))}}]),t}(),a.propTypes={value:f.default.number,types:f.default.array,showSearch:f.default.boolean},r=i))||r)||r;A.displayName="ItemPicker",t.default=A;var T=function(e){var t=e.item,n=e.name,r=e.icon,a=e.color,i=e.selected,o=e.canSelect,u=e.hasChildren,l=e.onChange,s=e.onChangeParentId;return d.default.createElement(h.Box,{mt:1,p:1,onClick:o?function(){return l(t)}:u?function(){return s(t.id)}:null,className:(0,p.default)("rounded",{"bg-brand text-white":i,"bg-brand-hover text-white-hover cursor-pointer":o||u})},d.default.createElement(h.Flex,{align:"center"},d.default.createElement(v.default,{name:r,color:i?"white":a,size:22}),d.default.createElement("h4",{className:"mx1"},n),u&&d.default.createElement(v.default,{name:"chevronright",className:(0,p.default)("p1 ml-auto circular text-light border-grey-2 bordered bg-white-hover cursor-pointer",{"bg-brand-hover":!o}),onClick:function(e){e.stopPropagation(),s(t.id)}})))};T.displayName="Item"},379:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=t.ALERT_TYPE_ROWS="alert-type-rows";t.ALERT_TYPE_TIMESERIES_GOAL="alert-type-timeseries-goal",t.ALERT_TYPE_PROGRESS_BAR_GOAL="alert-type-progress-bar-goal",t.getDefaultAlert=function(e,t,n){var i=e.alertType(n)===a?{alert_condition:"rows",alert_first_only:!1}:{alert_condition:"goal",alert_first_only:!0,alert_above_goal:!0},o={enabled:!0,channel_type:"email",recipients:[t],schedule_day:"mon",schedule_frame:null,schedule_hour:0,schedule_type:"daily"};return r({card:{id:e.id(),include_csv:!1,include_xls:!1},channels:[o]},i)}},38:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=h(["An error occurred"],["An error occurred"]),u=h(["Loading..."],["Loading..."]),l=n(0),s=m(l),c=m(n(2)),d=m(n(66)),f=n(1),p=m(n(4));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={messageIndex:0,sceneIndex:0},r.loadingInterval=function(){r.props.loading&&r.cycleLoadingMessage()},r.cycleLoadingMessage=function(){r.setState({messageIndex:r.state.messageIndex+1<r.props.loadingMessages.length?r.state.messageIndex+1:0})},v(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),i(t,[{key:"getErrorMessage",value:function(){var e=this.props.error,t=e.data&&(e.data.message?e.data.message:e.data)||e.statusText||e.message||e;return t&&"string"==typeof t||(t=(0,f.t)(o)),t}},{key:"componentDidMount",value:function(){var e=this.props,t=e.loadingMessages,n=e.messageInterval;t.length>1&&(this.cycle=setInterval(this.loadingInterval,n))}},{key:"componentWillUnmount",value:function(){clearInterval(this.cycle)}},{key:"getChildren",value:function(){return function e(t){return Array.isArray(t)?t.map(e):"function"==typeof t?t():t}(this.props.children)}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.error,r=e.noBackground,a=e.noWrapper,i=e.showSpinner,o=e.loadingMessages,u=e.loadingScenes,l=this.state,c=l.messageIndex,f=l.sceneIndex,m=(0,p.default)("wrapper py4 text-brand text-centered flex-full flex flex-column layout-centered",{"bg-white":!r});if(a&&!n&&!t){var h=this.getChildren();return null==h?null:s.default.Children.only(h)}return s.default.createElement("div",{className:this.props.className,style:this.props.style},n?s.default.createElement("div",{className:m},s.default.createElement("h2",{className:"text-normal text-light ie-wrap-content-fix"},this.getErrorMessage())):t?s.default.createElement("div",{className:m},u&&u[f],!u&&i&&s.default.createElement(d.default,null),s.default.createElement("h2",{className:"text-normal text-light mt1"},o[c])):this.getChildren())}}]),t}(),r.propTypes={className:c.default.string,error:c.default.any,loading:c.default.any,noBackground:c.default.bool,noWrapper:c.default.bool,children:c.default.any,style:c.default.object,showSpinner:c.default.bool,loadingMessages:c.default.array,messageInterval:c.default.number,loadingScenes:c.default.array},r.defaultProps={error:!1,loading:!1,noBackground:!0,noWrapper:!1,showSpinner:!0,loadingMessages:[(0,f.t)(u)],messageInterval:6e3},a);y.displayName="LoadingAndErrorWrapper",t.default=y},380:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(34),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(23)),o=n(7),u=n(43);var l=(0,a.createEntity)({name:"pulses",path:"/api/pulse",objectActions:{setArchived:function(e,t,n){var r=e.id;return l.actions.update({id:r},{archived:t},(0,a.undo)(n,"pulse",t?"archived":"unarchived"))},setCollection:function(e,t,n){var r=e.id;return l.actions.update({id:r},{collection_id:(0,u.canonicalCollectionId)(t&&t.id)},(0,a.undo)(n,"pulse","moved"))},setPinned:function(e,t,n){var r=e.id;return l.actions.update({id:r},{collection_position:"number"==typeof t?t:t?1:null},n)}},objectSelectors:{getName:function(e){return e&&e.name},getUrl:function(e){return e&&i.pulse(e.id)},getIcon:function(e){return"pulse"},getColor:function(e){return(0,o.color)("pulse")}},form:{fields:[{name:"name"},{name:"collection_id",title:"Collection",type:"collection"}]},getAnalyticsMetadata:function(e,t,n){var a=r(e,1)[0],i=(t.action,a&&(0,u.getCollectionType)(a.collection_id,n()));return i&&"collection="+i}});t.default=l},381:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(34);t.default=(0,r.createEntity)({name:"tasks",path:"/api/task"})},382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UNKNOWN_ERROR_MESSAGE=t.SERVER_ERROR_MESSAGE=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=d(["Server error encountered"],["Server error encountered"]),i=d(["Unknown error encountered"],["Unknown error encountered"]),o=n(0),u=c(o),l=c(n(4)),s=n(1);function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=t.SERVER_ERROR_MESSAGE=(0,s.t)(a),p=t.UNKNOWN_ERROR_MESSAGE=(0,s.t)(i),m=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.formError,r=e.formSuccess,a=e.message;a||(n?a=n.data&&n.data.message?n.data.message:n.status>=400?f:p:r&&r.data.message&&(a=r.data.message));var i=(0,l.default)("Form-message","px2",t,{"Form-message--visible":!!a,"text-success":r,"text-error":n});return u.default.createElement("span",{className:i},a)}}]),t}();m.displayName="FormMessage",t.default=m},383:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),i=(r=a)&&r.__esModule?r:{default:r};var o=function(e){var t=e.columnTitles,n=e.children;return i.default.createElement("table",{className:"ContentTable"},i.default.createElement("thead",null,i.default.createElement("tr",null,t&&t.map(function(e,t){return i.default.createElement("th",{key:t},e)}))),i.default.createElement("tbody",null,n))};o.displayName="AdminContentTable",t.default=o},384:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["\n  background: ",";\n  border-radius: 6px;\n"],a=["\n  background: ",";\n  border-radius: 6px;\n"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=n(20),u=n(7);var l=o.Flex.extend(i,(0,u.color)("bg-medium"));t.default=l},385:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(70),i=(r=a)&&r.__esModule?r:{default:r},o=n(416),u=n(7);var l=i.default.p.withConfig({displayName:"Text",componentId:"v6xp4w-0"})(["",";color:",";"],o.space,function(e){return(0,u.color)("text-"+e.color)});l.defaultProps={className:"text-paragraph",color:"dark"},t.default=l},387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=E(u),s=E(n(2)),c=E(n(703)),d=E(n(705)),f=E(n(84)),p=E(n(52)),m=E(n(712)),h=E(n(713)),v=n(47),y=E(n(16)),g=n(349),b=E(n(3)),_=E(n(4));function E(e){return e&&e.__esModule?e:{default:e}}var w=(0,p.default)()((i=a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={layout:r.getLayout(e),dashcards:r.getSortedDashcards(e),removeModalDashCard:null,addSeriesModalDashCard:null,isDragging:!1},b.default.bindAll(r,"onDashCardMouseDown"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({dashcards:this.getSortedDashcards(e),layout:this.getLayout(e)})}},{key:"onLayoutChange",value:function(e){var t=this,n=e.filter(function(e){return!b.default.isEqual(e,t.getLayoutForDashCard(e.dashcard))}),r=!0,a=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;this.props.setDashCardAttributes({id:l.dashcard.id,attributes:{col:l.x,row:l.y,sizeX:l.w,sizeY:l.h}})}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}n&&n.length>0&&y.default.trackEvent("Dashboard","Layout Changed")}},{key:"getSortedDashcards",value:function(e){return e.dashboard&&e.dashboard.ordered_cards.sort(function(e,t){return e.row<t.row?-1:e.row>t.row?1:e.col<t.col?-1:e.col>t.col?1:0})}},{key:"getLayoutForDashCard",value:function(e){var t=(0,v.getVisualizationRaw)([{card:e.card}]).visualization,n=g.DEFAULT_CARD_SIZE,r=t.minSize||g.DEFAULT_CARD_SIZE;return{i:String(e.id),x:e.col||0,y:e.row||0,w:e.sizeX||n.width,h:e.sizeY||n.height,dashcard:e,minSize:r}}},{key:"getLayout",value:function(e){return e.dashboard.ordered_cards.map(this.getLayoutForDashCard)}},{key:"renderRemoveModal",value:function(){var e=this,t=null!=this.state.removeModalDashCard;return l.default.createElement(f.default,{isOpen:t},t&&l.default.createElement(m.default,{dashcard:this.state.removeModalDashCard,dashboard:this.props.dashboard,removeCardFromDashboard:this.props.removeCardFromDashboard,onClose:function(){return e.setState({removeModalDashCard:null})}}))}},{key:"renderAddSeriesModal",value:function(){var e=this,t=null!=this.state.addSeriesModalDashCard;return l.default.createElement(f.default,{className:"Modal AddSeriesModal",isOpen:t},t&&l.default.createElement(h.default,{dashcard:this.state.addSeriesModalDashCard,dashboard:this.props.dashboard,dashcardData:this.props.dashcardData,databases:this.props.databases,fetchCardData:this.props.fetchCardData,fetchDatabaseMetadata:this.props.fetchDatabaseMetadata,removeCardFromDashboard:this.props.removeCardFromDashboard,setDashCardAttributes:this.props.setDashCardAttributes,onClose:function(){return e.setState({addSeriesModalDashCard:null})}}))}},{key:"onDrag",value:function(){this.state.isDragging||this.setState({isDragging:!0})}},{key:"onDragStop",value:function(){this.setState({isDragging:!1})}},{key:"onDashCardMouseDown",value:function(e){this.props.isEditing||e.stopPropagation()}},{key:"onDashCardRemove",value:function(e){this.setState({removeModalDashCard:e})}},{key:"onDashCardAddSeries",value:function(e){this.setState({addSeriesModalDashCard:e})}},{key:"renderDashCard",value:function(e,t){return l.default.createElement(d.default,{dashcard:e,dashcardData:this.props.dashcardData,parameterValues:this.props.parameterValues,slowCards:this.props.slowCards,fetchCardData:this.props.fetchCardData,markNewCardSeen:this.props.markNewCardSeen,isEditing:this.props.isEditing,isEditingParameter:this.props.isEditingParameter,isFullscreen:this.props.isFullscreen,isMobile:t,onRemove:this.onDashCardRemove.bind(this,e),onAddSeries:this.onDashCardAddSeries.bind(this,e),onUpdateVisualizationSettings:this.props.onUpdateDashCardVisualizationSettings.bind(this,e.id),onReplaceAllVisualizationSettings:this.props.onReplaceAllDashCardVisualizationSettings.bind(this,e.id),mode:this.props.mode,navigateToNewCardFromDashboard:this.props.navigateToNewCardFromDashboard,onChangeLocation:this.props.onChangeLocation,metadata:this.props.metadata,dashboard:this.props.dashboard})}},{key:"renderMobile",value:function(){var e=this,t=this.props,n=t.isEditing,r=t.isEditingParameter,a=t.width,i=this.state.dashcards;return l.default.createElement("div",{className:(0,_.default)("DashboardGrid",{"Dash--editing":n,"Dash--editingParameter":r,"Dash--dragging":this.state.isDragging}),style:{margin:0}},i&&i.map(function(t){return l.default.createElement("div",{key:t.id,className:"DashCard",style:{width:a,marginTop:10,marginBottom:10,height:"text"===t.card.display?40*t.sizeY:a/1.5}},e.renderDashCard(t,!0))}))}},{key:"renderGrid",value:function(){var e=this,t=this.props,n=t.dashboard,r=t.isEditing,a=t.isEditingParameter,i=t.width,o=Math.floor(i/g.GRID_WIDTH/g.GRID_ASPECT_RATIO);return l.default.createElement(c.default,{className:(0,_.default)("DashboardGrid",{"Dash--editing":r,"Dash--editingParameter":a,"Dash--dragging":this.state.isDragging}),layout:this.state.layout,cols:g.GRID_WIDTH,margin:g.GRID_MARGIN,rowHeight:o,onLayoutChange:function(){return e.onLayoutChange.apply(e,arguments)},onDrag:function(){return e.onDrag.apply(e,arguments)},onDragStop:function(){return e.onDragStop.apply(e,arguments)},isEditing:r},n&&n.ordered_cards.map(function(t){return l.default.createElement("div",{key:t.id,className:"DashCard",onMouseDownCapture:e.onDashCardMouseDown,onTouchStartCapture:e.onDashCardMouseDown},e.renderDashCard(t,!1))}))}},{key:"render",value:function(){var e=this.props.width;return l.default.createElement("div",{className:"flex layout-centered"},0===e?l.default.createElement("div",null):e<=752?this.renderMobile():this.renderGrid(),this.renderRemoveModal(),this.renderAddSeriesModal())}}]),t}(),a.propTypes={isEditing:s.default.oneOfType([s.default.bool,s.default.object]).isRequired,isEditingParameter:s.default.bool.isRequired,dashboard:s.default.object.isRequired,parameterValues:s.default.object.isRequired,setDashCardAttributes:s.default.func.isRequired,removeCardFromDashboard:s.default.func.isRequired,markNewCardSeen:s.default.func.isRequired,fetchCardData:s.default.func.isRequired,onUpdateDashCardVisualizationSettings:s.default.func.isRequired,onReplaceAllDashCardVisualizationSettings:s.default.func.isRequired,onChangeLocation:s.default.func.isRequired},a.defaultProps={width:0,isEditing:!1,isEditingParameter:!1},r=i))||r;w.displayName="DashboardGrid",t.default=w},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=x(n(3)),u=n(11),l=n(26),s=x(l),c=n(97),d=x(c),f=x(n(138)),p=x(n(532)),m=(x(n(307)),x(n(140)),x(n(79)),x(n(57)),x(n(77)),n(31)),h=x(n(311)),v=n(82),y=C(n(126)),g=C(n(23)),b=n(33),_=n(80),E=n(187),w=n(17),O=x(n(102)),S=n(379);function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}function k(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function A(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function T(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var P=(T((r=function(){function e(t,n,r,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._card=t,this._metadata=n,this._parameterValues=r||{},this._update=a}return i(e,[{key:"clone",value:function(){return new e(this._card,this._metadata,this._parameterValues,this._update)}},{key:"metadata",value:function(){return this._metadata}},{key:"card",value:function(){return this._card}},{key:"setCard",value:function(e){var t=this.clone();return t._card=e,t}},{key:"update",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)e.apply(void 0,[this].concat(A(n)));else{if(!this._update)throw new Error("Question update function not provided or bound");this._update.apply(this,[this].concat(A(n)))}}},{key:"bindUpdate",value:function(e){var t=this.clone();return t._update=e,t}},{key:"withoutNameAndId",value:function(){return this.setCard((0,u.chain)(this.card()).dissoc("id").dissoc("name").dissoc("description").value())}},{key:"query",value:function(){for(var e=this._card.dataset_query,t=[s.default,d.default,p.default],n=0;n<t.length;n++){var r=t[n];if(r.isDatasetQueryType(e))return new r(this,e)}throw new Error("Unknown query type: "+e.type)}},{key:"isNative",value:function(){return this.query()instanceof d.default}},{key:"isStructured",value:function(){return this.query()instanceof s.default}},{key:"setQuery",value:function(e){return this._card.dataset_query!==e.datasetQuery()?this.setCard((0,u.assoc)(this.card(),"dataset_query",e.datasetQuery())):this}},{key:"datasetQuery",value:function(){return this.card().dataset_query}},{key:"setDatasetQuery",value:function(e){return this.setCard((0,u.assoc)(this.card(),"dataset_query",e))}},{key:"atomicQueries",value:function(){var e=this.query();return e instanceof f.default?[e]:[]}},{key:"display",value:function(){return this._card&&this._card.display}},{key:"setDisplay",value:function(e){return this.setCard((0,u.assoc)(this.card(),"display",e))}},{key:"lockDisplay",value:function(){return this.setDisplayIsLocked(!0)}},{key:"setDisplayIsLocked",value:function(e){return this.setCard((0,u.assoc)(this.card(),"displayIsLocked",e))}},{key:"displayIsLocked",value:function(){return this._card&&this._card.displayIsLocked}},{key:"maybeUnlockDisplay",value:function(e){var t=this.displayIsLocked()&&e.includes(this.display());return this.setDisplayIsLocked(t)}},{key:"switchTableScalar",value:function(e){var t=e.rows,n=void 0===t?[]:t,r=e.cols;if(this.displayIsLocked())return this;var a=this.display(),i=["scalar","progress","gauge"].includes(a),o=1===n.length&&1===r.length,u=!i&&o?"scalar":i&&!o?"table":a;return this.setDisplay(u)}},{key:"setDefaultDisplay",value:function(){if(this.displayIsLocked())return this;var e=this.query();if(e instanceof s.default){var t=e.aggregations(),n=e.breakouts(),r=n.map(function(e){return e.dimension()}),a=r.map(function(e){return e.field()});if(0===t.length&&0===n.length)return this.setDisplay("table");if(1===t.length&&0===n.length)return this.setDisplay("scalar");if(1===t.length&&1===n.length){if(a[0].isState())return this.setDisplay("map").updateSettings({"map.type":"region","map.region":"us_states"});if(a[0].isCountry())return this.setDisplay("map").updateSettings({"map.type":"region","map.region":"world_countries"})}if(t.length>=1&&1===n.length){if(a[0].isDate())return r[0]instanceof m.DatetimeFieldDimension&&r[0].isExtraction()?this.setDisplay("bar"):this.setDisplay("line");if(r[0]instanceof m.BinnedDimension)return this.setDisplay("bar");if(a[0].isCategory())return this.setDisplay("bar")}if(1===t.length&&2===n.length){if(o.default.any(a,function(e){return e.isDate()}))return this.setDisplay("line");if(a[0].isCoordinate()&&a[1].isCoordinate())return this.setDisplay("map").updateSettings({"map.type":"grid"});if(o.default.all(a,function(e){return e.isCategory()}))return this.setDisplay("bar")}}return this.setDisplay("table")}},{key:"setDefaultQuery",value:function(){return this.query().setDefaultQuery().question()}},{key:"settings",value:function(){return this._card&&this._card.visualization_settings||{}}},{key:"setting",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this.settings()[e];return void 0===n?t:n}},{key:"setSettings",value:function(e){return this.setCard((0,u.assoc)(this.card(),"visualization_settings",e))}},{key:"updateSettings",value:function(e){return this.setSettings(a({},this.settings(),e))}},{key:"type",value:function(){return this.datasetQuery().type}},{key:"isEmpty",value:function(){return this.query().isEmpty()}},{key:"canRun",value:function(){return this.query().canRun()}},{key:"canWrite",value:function(){return this._card&&this._card.can_write}},{key:"canAutoRun",value:function(){var e=this.database();return e&&e.auto_run_queries||!1}},{key:"alertType",value:function(e){var t=this.display();if(!this.canRun())return null;var n="line"===t||"area"===t||"bar"===t;if("progress"===t)return S.ALERT_TYPE_PROGRESS_BAR_GOAL;if(n){var r=e||this.card().visualization_settings,a=r["graph.show_goal"],i=r["graph.metrics"]&&1===r["graph.metrics"].length;return a&&i?S.ALERT_TYPE_TIMESERIES_GOAL:S.ALERT_TYPE_ROWS}return S.ALERT_TYPE_ROWS}},{key:"aggregate",value:function(e){return(0,E.aggregate)(this,e)||this}},{key:"breakout",value:function(e){return(0,E.breakout)(this,e)||this}},{key:"filter",value:function(e,t,n){return(0,E.filter)(this,e,t,n)||this}},{key:"pivot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(0,E.pivot)(this,e,t)||this}},{key:"drillUnderlyingRecords",value:function(e){return(0,E.drillUnderlyingRecords)(this,e)||this}},{key:"toUnderlyingRecords",value:function(){return(0,E.toUnderlyingRecords)(this)||this}},{key:"toUnderlyingData",value:function(){return this.setDisplay("table")}},{key:"distribution",value:function(e){return(0,E.distribution)(this,e)||this}},{key:"composeThisQuery",value:function(){if(this.id()){var e={display:"table",dataset_query:{type:"query",database:this.databaseId(),query:{"source-table":"card__"+this.id()}}};return this.setCard(e)}}},{key:"drillPK",value:function(e,t){var n=this.query();if(n instanceof s.default)return n.reset().setTable(e.table).filter(["=",["field-id",e.id],t]).question()}},{key:"syncColumnsAndSettings",value:function(e){var t=this.query(),n=e&&e.query();if(t instanceof s.default&&n instanceof s.default){if(!o.default.isEqual(e.setting("table.columns"),this.setting("table.columns")))return(0,b.syncTableColumnsToQuery)(this);var r=o.default.difference(t.columnNames(),n.columnNames()),a=o.default.difference(n.columnNames(),t.columnNames());if(this.setting("graph.metrics")&&r.length>0&&0===a.length){var i=r.filter(function(e){return t.columnDimensionWithName(e)instanceof m.AggregationDimension});if(i.length>0)return this.updateSettings({"graph.metrics":[].concat(A(this.setting("graph.metrics")),A(i))})}if(this.setting("table.columns")&&r.length>0&&0===a.length)return this.updateSettings({"table.columns":[].concat(A(this.setting("table.columns")),A(r.map(function(e){return{name:e,field_ref:t.columnDimensionWithName(e).baseDimension().mbql(),enabled:!0}})))})}return this}},{key:"topLevelQuestion",value:function(){var e=this.query();return e instanceof s.default&&e!==e.topLevelQuery()?this.setQuery(e.topLevelQuery()):this}},{key:"topLevelClicked",value:function(e){var t=this.query();return t instanceof s.default&&t!==t.topLevelQuery()?a({},e,{column:e.column&&t.topLevelColumn(e.column),dimensions:e.dimensions&&e.dimensions.map(function(e){return a({},e,{column:e.column&&t.topLevelColumn(e.column)})})}):e}},{key:"mode",value:function(){return h.default.forQuestion(this)}},{key:"isObjectDetail",value:function(){var e=this.mode();return!!e&&"object"===e.name()}},{key:"objectDetailPK",value:function(){var e=this.query();if(this.isObjectDetail()&&e instanceof s.default){var t=e.filters();return t[0]&&t[0][2]}}},{key:"displayName",value:function(){return this._card&&this._card.name}},{key:"setDisplayName",value:function(e){return this.setCard((0,u.assoc)(this.card(),"name",e))}},{key:"collectionId",value:function(){return this._card&&this._card.collection_id}},{key:"setCollectionId",value:function(e){return this.setCard((0,u.assoc)(this.card(),"collection_id",e))}},{key:"id",value:function(){return this._card&&this._card.id}},{key:"setId",value:function(e){return this.setCard((0,u.assoc)(this.card(),"id",e))}},{key:"description",value:function(){return this._card&&this._card.description}},{key:"isSaved",value:function(){return!!this.id()}},{key:"publicUUID",value:function(){return this._card&&this._card.public_uuid}},{key:"database",value:function(){var e=this.query();return e&&"function"==typeof e.database?e.database():null}},{key:"databaseId",value:function(){var e=this.database();return e?e.id:null}},{key:"table",value:function(){var e=this.query();return e&&"function"==typeof e.table?e.table():null}},{key:"tableId",value:function(){var e=this.table();return e?e.id:null}},{key:"getUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.originalQuestion,n=e.clean,r=void 0===n||n;return!this.id()||t&&this.isDirtyComparedTo(t)?g.question(null,this._serializeForUrl({clean:r})):g.question(this.id(),"")}},{key:"getAutomaticDashboardUrl",value:function(e){var t="";if(e.length>0){var n=e.length>1?["and"].concat(A(e)):e[0];t="/cell/"+y.utf8_to_b64url(JSON.stringify(n))}var r=this.id();return null==r||(0,_.isTransientId)(r)?"/auto/dashboard/adhoc/"+y.utf8_to_b64url(JSON.stringify(this.card().dataset_query))+t:"/auto/dashboard/question/"+r+t}},{key:"getComparisonDashboardUrl",value:function(e){var t="";if(e.length>0){var n=e.length>1?["and"].concat(A(e)):e[0];t="/cell/"+y.utf8_to_b64url(JSON.stringify(n))}var r=this.id(),a=this.query();if(a instanceof s.default){var i=a.tableId();if(i)return null==r||(0,_.isTransientId)(r)?"/auto/dashboard/adhoc/"+y.utf8_to_b64url(JSON.stringify(this.card().dataset_query))+t+"/compare/table/"+i:"/auto/dashboard/question/"+r+t+"/compare/table/"+i}}},{key:"setResultsMetadata",value:function(e){var t=e&&e.columns,n=e&&e.checksum;return this.setCard(a({},this.card(),{result_metadata:t,metadata_checksum:n}))}},{key:"isEqual",value:function(e){return!!e&&(this.id()===e.id()&&(!!o.default.isEqual(this.card(),e.card())&&!!o.default.isEqual(this.parameters(),e.parameters())))}},{key:"apiGetResults",value:function(){var e=k(regeneratorRuntime.mark(function e(){var t,n,r,i,u,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=l.cancelDeferred,c=l.isDirty,d=void 0!==c&&c,f=l.ignoreCache,p=void 0!==f&&f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!d&&this.isSaved(),n=this.parametersList().filter(function(e){return o.default.has(e,"value")}).map(function(e){return o.default.pick(e,"type","target","value")}),!t){e.next=10;break}return r={cardId:this.id(),ignore_cache:p,parameters:n},e.next=6,w.CardApi.query(r,{cancelled:s.promise});case 6:return e.t0=e.sent,e.abrupt("return",[e.t0]);case 10:return i=function(e){var t=a({},e,{parameters:n});return w.MetabaseApi.dataset(t,s?{cancelled:s.promise}:{})},u=this.atomicQueries().map(function(e){return e.datasetQuery()}),e.abrupt("return",Promise.all(u.map(i)));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"apiCreate",value:function(){var e=k(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.default.api.create(this.card());case 2:return t=e.sent,e.abrupt("return",this.setCard(t));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"apiUpdate",value:function(){var e=k(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.default.api.update(this.card());case 2:return t=e.sent,e.abrupt("return",this.setCard(t));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"reduxCreate",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(O.default.actions.create(this.card()));case 2:return n=e.sent,e.abrupt("return",this.setCard(O.default.HACK_getObjectFromAction(n)));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"reduxUpdate",value:function(){var e=k(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(O.default.actions.update({id:this.id()},this.card()));case 2:return n=e.sent,e.abrupt("return",this.setCard(O.default.HACK_getObjectFromAction(n)));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parameters",value:function(){return(0,_.getParametersWithExtras)(this.card(),this._parameterValues)}},{key:"parametersList",value:function(){return Object.values(this.parameters())}},{key:"isDirtyComparedTo",value:function(e){if(!this.isSaved()&&this.canRun())return!0;var t=e&&e._serializeForUrl({includeOriginalCardId:!1});return this._serializeForUrl({includeOriginalCardId:!1})!==t}},{key:"_serializeForUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.includeOriginalCardId,n=void 0===t||t,r=e.clean,i=void 0===r||r?this.query().clean():this.query(),o=a({name:this._card.name,description:this._card.description,dataset_query:i.datasetQuery(),display:this._card.display,parameters:this._card.parameters,visualization_settings:this._card.visualization_settings},n?{original_card_id:this._card.original_card_id}:{});return y.utf8_to_b64url(JSON.stringify((0,v.sortObject)(o)))}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.databaseId,r=t.tableId,a=t.metadata,i=t.parameterValues,o=t.type,s=void 0===o?"query":o,d=t.name,f=t.display,p=void 0===f?"table":f,m=t.visualization_settings,h=void 0===m?{}:m,v=t.dataset_query,y={name:d,display:p,visualization_settings:h,dataset_query:void 0===v?"native"===s?c.NATIVE_QUERY_TEMPLATE:l.STRUCTURED_QUERY_TEMPLATE:v};return null!=r&&(y=(0,u.assocIn)(y,["dataset_query","query","source-table"],r)),null!=n&&(y=(0,u.assocIn)(y,["dataset_query","database"],n)),new e(y,a,i)}}]),e}()).prototype,"query",[v.memoize],Object.getOwnPropertyDescriptor(r.prototype,"query"),r.prototype),T(r.prototype,"mode",[v.memoize],Object.getOwnPropertyDescriptor(r.prototype,"mode"),r.prototype),r);t.default=P,window.Question=P,window.NativeQuery=d.default,window.StructuredQuery=s.default},395:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(a=["New ",""],i=["New ",""],Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(i)}})));t.getForm=m;var s=p(n(0)),c=n(1),d=p(n(209)),f=p(n(45));function p(e){return e&&e.__esModule?e:{default:e}}function m(e){return e.form||Object.values(e.forms)[0]}var h=(0,p(n(231)).default)()(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.Component),u(t,[{key:"render",value:function(){var e=this.props,t=e.entityDef,n=e.entityObject,r=e.form,a=void 0===r?m(t):r,i=e.update,u=e.create,p=e.onSubmit,h=void 0===p?function(e){return null!=e.id?i(e):u(e)}:p,v=e.onClose,y=e.onSaved,g=e.modal,b=e.title,_=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["entityDef","entityObject","form","update","create","onSubmit","onClose","onSaved","modal","title"]),E=s.default.createElement(d.default,o({},_,{form:a,initialValues:n,onSubmit:h,onSubmitSuccess:function(e){return y&&y(e.payload.object)}}));return g?s.default.createElement(f.default,{title:b||(n&&null!=n.id?t.objectSelectors.getName(n):(0,c.t)(l,t.displayNameOne)),onClose:v},E):E}}]),t}())||r;h.displayName="EntityForm",t.default=h},396:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=b(l),c=b(n(2)),d=n(15),f=b(n(3)),p=b(n(4)),m=b(n(214)),h=b(n(5)),v=b(n(60)),y=n(104),g=n(25);function b(e){return e&&e.__esModule?e:{default:e}}var _={fontSize:14,fontWeight:700},E=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.call(n),n.state={inputValue:"",searchValue:"",filteredOptions:[],selectedOptionValue:null,isFocused:e.autoFocus||!1,isAllSelected:!1,listIsHovered:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),u(t,[{key:"componentWillMount",value:function(){this._updateFilteredValues(this.props)}},{key:"componentWillReceiveProps",value:function(e){this._updateFilteredValues(e)}},{key:"setInputValue",value:function(e){var t=this,n={inputValue:e};(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(n.searchValue=e),this.setState(n,function(){return t._updateFilteredValues(t.props)})}},{key:"clearInputValue",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.setInputValue("",e)}},{key:"_value",value:function(e){var t=this.props.valueKey;return"function"==typeof t?t(e):e[t]}},{key:"_label",value:function(e){var t=this.props.labelKey;return"function"==typeof t?t(e):e[t]}},{key:"_key",value:function(e){return JSON.stringify(this._value(e))}},{key:"_isLastFreeformValue",value:function(e){var t=this.props,n=t.value,r=t.parseFreeformValue,a=t.updateOnInputChange;if(r&&a){var i=r(e);return n[n.length-1]===i}}},{key:"addSelectedOption",value:function(e){var t=this,n=this.props.multi,r=this.state,a=r.filteredOptions,i=r.selectedOptionValue,o=(0,d.findDOMNode)(this.refs.input),u=f.default.find(a,function(e){return t._valueIsEqual(i,t._value(e))});if(u)return this.addOption(u),this._isLastFreeformValue(this._value(u))?this.clearInputValue(!0):this.clearInputValue(1===a.length),!0;if(this.props.parseFreeformValue){if(this.props.updateOnInputChange)return n&&e.preventDefault(),this.clearInputValue(),!1;var l=this.props.parseFreeformValue(o.value);if(null!=l&&(n||l!==this.props.value[0]))return this.addValue(l),this.clearInputValue(),!0}}},{key:"addValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props,r=n.value,a=n.onChange,i=n.multi;Array.isArray(e)||(e=[e]),a(i?w(t?r.slice(0,-1).concat(e):r.concat(e)):e.slice(0,1))}},{key:"removeValue",value:function(e){var t=this,n=this.props,r=n.value;(0,n.onChange)(r.filter(function(n){return!t._valueIsEqual(n,e)}))}},{key:"_valueIsEqual",value:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{key:"componentDidUpdate",value:function(e,t){if(t.selectedOptionValue!==this.state.selectedOptionValue&&null!=this.scrollElement){var n=(0,d.findDOMNode)(this.scrollElement);n&&(0,g.isObscured)(n)&&n.scrollIntoView({block:"nearest"})}if(this.props.value.length>e.value.length){var r=(0,d.findDOMNode)(this.refs.input);r&&(0,g.isObscured)(r)&&r.scrollIntoView({block:"nearest"})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.placeholder,a=t.multi,i=t.parseFreeformValue,u=t.updateOnInputChange,l=t.optionRenderer,c=t.valueRenderer,d=t.layoutRenderer,f=t.color,m=t.style,v=t.className,y=t.valueStyle,g=t.optionsStyle,b=t.optionsClassName,E=this.state,w=E.inputValue,O=E.searchValue,S=E.filteredOptions,C=E.isFocused,x=E.isAllSelected,k=E.selectedOptionValue;return!a&&C&&(w=w||n[0],n=[]),n.length>0&&u&&i&&n[n.length-1]===i(w)&&(C?n=n.slice(0,-1):w=""),C||(k=null),n.length>0&&(r=null),d({valuesList:s.default.createElement("ul",{className:(0,p.default)(v,"pl1 pt1 pb0 pr0 flex flex-wrap bg-white scroll-x scroll-y"),style:o({maxHeight:130},m),onMouseDownCapture:this.onMouseDownCapture},n.map(function(t,n){return s.default.createElement("li",{key:n,className:(0,p.default)("flex align-center mr1 mb1 p1 rounded bg-medium")},s.default.createElement("span",{style:o({},_,y),className:a?"pl1 pr0":"px1"},c(t)),a&&s.default.createElement("a",{className:"text-medium text-default-hover px1",onClick:function(n){n.preventDefault(),e.removeValue(t)},onMouseDown:function(e){return e.preventDefault()}},s.default.createElement(h.default,{name:"close",size:12})))}),s.default.createElement("li",{className:(0,p.default)("flex-full flex align-center mr1 mb1 p1")},s.default.createElement("input",{ref:"input",style:o({},_,y),className:(0,p.default)("full no-focus borderless px1"),size:10,placeholder:r,value:w,autoFocus:C,onKeyDown:this.onInputKeyDown,onChange:this.onInputChange,onFocus:this.onInputFocus,onBlur:this.onInputBlur,onPaste:this.onInputPaste}))),optionsList:0===S.length?null:s.default.createElement("ul",{className:(0,p.default)(b,"pl1 my1 scroll-y scroll-show border-bottom"),style:o({maxHeight:300},g),onMouseEnter:function(){return e.setState({listIsHovered:!0})},onMouseLeave:function(){return e.setState({listIsHovered:!1})}},S.map(function(t){return s.default.createElement("li",{className:"mr1",key:e._key(t)},s.default.createElement("div",{ref:e._valueIsEqual(k,e._value(t))?function(t){return e.scrollElement=t}:null,className:(0,p.default)("py1 pl1 pr2 block rounded text-bold text-"+f+"-hover inline-block full cursor-pointer","bg-light-hover",(n={},r="text-"+f+" bg-light",a=!e.state.listIsHovered&&e._valueIsEqual(k,e._value(t)),r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n)),onClick:function(n){e.addOption(t),e.clearInputValue(1===S.length),n.preventDefault()},onMouseDown:function(e){return e.preventDefault()}},l(t)));var n,r,a})),isFocused:C,isAllSelected:x,isFiltered:!!O,onClose:this.onClose})}}]),t}(),r.defaultProps={removeSelected:!0,valueKey:"value",labelKey:"label",valueRenderer:function(e){return s.default.createElement("span",null,e)},optionRenderer:function(e){return s.default.createElement("span",null,e)},layoutRenderer:function(e){return s.default.createElement(O,e)},color:"brand",style:{},valueStyle:{},optionsStyle:{}},i=function(){var e=this;this.scrollElement=null,this._updateFilteredValues=function(t){var n=t.options,r=t.value,a=t.removeSelected,i=t.filterOption,o=e.state,u=o.searchValue,l=o.selectedOptionValue,s=new Set(r.map(function(e){return JSON.stringify(e)}));i||(i=function(t,n){return String(e._label(t)||"").indexOf(n)>=0});var c=0,d=n.filter(function(t){var n=s.has(JSON.stringify(e._value(t))),r=e._isLastFreeformValue(e._value(t))&&e._isLastFreeformValue(u),o=i(t,u);return n&&c++,(!a||!n||r)&&o});null!=l&&f.default.find(d,function(t){return e._valueIsEqual(l,e._value(t))})||(l=d.length>0?e._value(d[0]):null),e.setState({filteredOptions:d,selectedOptionValue:l,isAllSelected:n.length>0&&c===n.length})},this.onInputChange=function(t){var n=t.target.value,r=e.props,a=r.updateOnInputChange,i=r.onInputChange,o=r.parseFreeformValue;if(i&&(n=i(n)||""),e.setInputValue(n),a&&o){var u=e._isLastFreeformValue(e.state.inputValue),l=o(n);null!=l?e.addValue(l,u):u&&e.removeValue(o(e.state.inputValue))}},this.onInputKeyDown=function(t){e.props.onInputKeyDown&&e.props.onInputKeyDown(t);var n=t.key,r=t.keyCode,a=e.state,i=a.filteredOptions,o=a.selectedOptionValue;if(r===y.KEYCODE_ESCAPE||r===y.KEYCODE_TAB||n===y.KEY_COMMA||r===y.KEYCODE_ENTER)e.addSelectedOption(t)&&t.stopPropagation();else if(t.keyCode===y.KEYCODE_UP){t.preventDefault();var u=f.default.findIndex(i,function(t){return e._valueIsEqual(o,e._value(t))});u>0&&e.setState({selectedOptionValue:e._value(i[u-1])})}else if(r===y.KEYCODE_DOWN){t.preventDefault();var l=f.default.findIndex(i,function(t){return e._valueIsEqual(o,e._value(t))});l>=0&&l<i.length-1&&e.setState({selectedOptionValue:e._value(i[l+1])})}else if(r===y.KEYCODE_BACKSPACE){var s=e.props.value;!e.state.inputValue&&s.length>0&&e.removeValue(s[s.length-1])}},this.onInputFocus=function(){e.props.onFocus&&e.props.onFocus(),e.setState({isFocused:!0,searchValue:e.state.inputValue},function(){return e._updateFilteredValues(e.props)})},this.onInputBlur=function(){if(e.props.updateOnInputBlur&&e.props.parseFreeformValue){var t=(0,d.findDOMNode)(e.refs.input),n=e.props.parseFreeformValue(t.value);null==n||!e.props.multi&&n===e.props.value[0]||(e.addValue(n),e.clearInputValue())}e.props.onBlur&&e.props.onBlur(),e.setState({isFocused:!1})},this.onInputPaste=function(t){if(e.props.parseFreeformValue){t.preventDefault();var n=t.clipboardData.getData("Text"),r=e.props.multi?n.split(/\n|,/g).map(e.props.parseFreeformValue).filter(function(e){return e}):[n];r.length>0&&e.addValue(r)}},this.onMouseDownCapture=function(t){var n=(0,d.findDOMNode)(e.refs.input);n.focus(),n!==t.target&&t.preventDefault()},this.onClose=function(){e.setState({isFocused:!1})},this.addOption=function(t){var n=e._isLastFreeformValue(e.state.inputValue);e.addValue(e._value(t),n)}},a);E.displayName="TokenField",t.default=E;var w=function(e){return Array.from(new Set(e))},O=function(e){var t=e.valuesList,n=e.optionsList,r=e.isFocused,a=e.onClose;return s.default.createElement(m.default,{handleDismissal:a},s.default.createElement("div",null,t,s.default.createElement(v.default,{isOpen:r&&!!n,hasArrow:!1,tetherOptions:{attachment:"top left",targetAttachment:"bottom left",targetOffset:"10 0"}},n)))};O.displayName="DefaultTokenFieldLayout",O.propTypes={valuesList:c.default.element.isRequired,optionsList:c.default.element,isFocused:c.default.bool,onClose:c.default.func}},41:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TYPE=void 0,t.isa=o,t.isPK=function(e){return o(e,u.PK)},t.isFK=function(e){return o(e,u.FK)};var r=a(n(3));function a(e){return e&&e.__esModule?e:{default:e}}var i=a(n(14)).default.get("types");function o(e,t){if(!e||!t)return!1;if(e===t)return!0;var n=i[e];if(!n)return"type/*"!==e&&console.error("Invalid type:",e),!1;var r=!0,a=!1,u=void 0;try{for(var l,s=n[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){if(o(l.value,t))return!0}}catch(e){a=!0,u=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw u}}return!1}var u=t.TYPE={},l=!0,s=!1,c=void 0;try{for(var d,f=r.default.keys(i)[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value,m=p.substring(5);u[m]=p}}catch(e){s=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(s)throw c}}},42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Option=t.OptionSection=t.default=void 0;var r,a,i,o,u,l,s,c=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=n(0),m=S(p),h=S(n(2)),v=S(n(5)),y=S(n(37)),g=S(n(124)),b=S(n(3)),_=S(n(4)),E=S(n(170)),w=n(32),O=n(7);function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=20,T=(0,S(n(520)).default)()((i=a=function(e){function t(e){C(this,t);var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.itemIsSelected=function(e){var t=n.props.optionValueFn(e);return n._getValuesSet().has(t)},n.itemIsClickable=function(e){return!n.props.optionDisabledFn(e)},n.handleChange=function(e){var t=n.props,r=t.multiple,a=t.onChange,i=n.props.optionValueFn(e),o=void 0;if(r){var u=n._getValues();o=n.itemIsSelected(e)?u.filter(function(e){return e!==i}):[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(u),[i])}else o=i;a({target:{value:o}}),r||n._popover.close()},n.renderItemIcon=function(e){if(n.itemIsSelected(e))return m.default.createElement(v.default,{name:"check",size:14,color:(0,O.color)("text-dark"),style:{minWidth:A}});var t=n.props.optionIconFn(e);return t?m.default.createElement(v.default,{name:t,size:e.iconSize||18,color:e.iconColor||(0,O.color)("text-dark"),style:{minWidth:A}}):m.default.createElement("span",{style:{minWidth:A}})};var r=(0,w.createSelector)([function(e){return e.hasOwnProperty("defaultValue")&&null==e.value?e.defaultValue:e.value}],function(e){return Array.isArray(e)?e:[e]}),a=(0,w.createSelector)([r],function(e){return new Set(e)});return n._getValues=function(){return r(n.props)},n._getValuesSet=function(){return a(n.props)},n}return k(t,p.Component),f(t,[{key:"_getSections",value:function(){var e=this.props,t=e.children,n=e.sections,r=e.options;if(t){var a=function(e){return e.props},i=Array.isArray(t)?t[0]:t;if(i&&i.type===P)return m.default.Children.map(t,function(e){return d({},e.props,{items:m.default.Children.map(e.props.children,a)})});if(i&&i.type===j)return[{items:m.default.Children.map(t,a)}]}else{if(r)return this.props.optionSectionFn?b.default.chain(r).groupBy(this.props.optionSectionFn).pairs().map(function(e){var t=c(e,2);return{name:t[0],items:t[1]}}).value():[{items:r}];if(n)return n}return[]}},{key:"render",value:function(){var e=this,t=this.props,n=t.buttonProps,r=t.className,a=t.placeholder,i=t.searchProp,o=t.searchCaseInsensitive,u=t.searchFuzzy,l=t.isInitiallyOpen,s=this._getSections(),c=s.map(function(t){return t.items.filter(e.itemIsSelected).map(e.props.optionNameFn)}).flat().filter(function(e){return e});return m.default.createElement(y.default,{ref:function(t){return e._popover=t},triggerElement:this.props.triggerElement||m.default.createElement(g.default,d({className:"flex-full",hasValue:c.length>0},n),c.length>0?c.map(function(e,t){return m.default.createElement("span",{key:t},e,t<c.length-1?", ":"")}):a),triggerClasses:(0,_.default)("flex",r),isInitiallyOpen:l,verticalAttachments:["top","bottom"],pinInitialAttachment:!0},m.default.createElement(E.default,{sections:s,className:"MB-Select text-brand",alwaysExpanded:!0,itemIsSelected:this.itemIsSelected,itemIsClickable:this.itemIsClickable,renderItemName:this.props.optionNameFn,getItemClassName:this.props.optionClassNameFn,renderItemDescription:this.props.optionDescriptionFn,renderItemIcon:this.renderItemIcon,onChange:this.handleChange,searchable:!!i,searchProp:i,searchCaseInsensitive:o,searchFuzzy:u}))}}]),t}(),a.propTypes={className:h.default.string,options:h.default.any,sections:h.default.any,children:h.default.any,value:h.default.any.isRequired,defaultValue:h.default.any,onChange:h.default.func.isRequired,multiple:h.default.bool,placeholder:h.default.string,isInitiallyOpen:h.default.bool,triggerElement:h.default.any,buttonProps:h.default.object,searchProp:h.default.string,searchCaseInsensitive:h.default.bool,searchFuzzy:h.default.bool,optionNameFn:h.default.func,optionValueFn:h.default.func,optionDescriptionFn:h.default.func,optionSectionFn:h.default.func,optionDisabledFn:h.default.func,optionIconFn:h.default.func,optionClassNameFn:h.default.func},a.defaultProps={optionNameFn:function(e){return e.children||e.name},optionValueFn:function(e){return e.value},optionDescriptionFn:function(e){return e.description},optionDisabledFn:function(e){return e.disabled},optionIconFn:function(e){return e.icon}},r=i))||r;T.displayName="Select",t.default=T;var P=t.OptionSection=(u=o=function(e){function t(){return C(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,p.Component),f(t,[{key:"render",value:function(){return null}}]),t}(),o.propTypes={name:h.default.any,icon:h.default.any,children:h.default.any.isRequired},u);P.displayName="OptionSection";var j=t.Option=(s=l=function(e){function t(){return C(this,t),x(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,p.Component),f(t,[{key:"render",value:function(){return null}}]),t}(),l.propTypes={value:h.default.any.isRequired,name:h.default.any,children:h.default.any,icon:h.default.any,disabled:h.default.bool},s);j.displayName="Option"},426:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(269)),a=o(n(270)),i=o(n(610));function o(e){return e&&e.__esModule?e:{default:e}}var u=(0,r.default)(a.default,i.default,"collection");t.default=u},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PERSONAL_COLLECTIONS=t.PERSONAL_COLLECTION=t.ROOT_COLLECTION=t.getCollectionType=t.canonicalCollectionId=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=k(["collection"],["collection"]),o=k(["collections"],["collections"]),u=k(["Name"],["Name"]),l=k(["My new fantastic collection"],["My new fantastic collection"]),s=k(["Name is required"],["Name is required"]),c=k(["Name must be 100 characters or less"],["Name must be 100 characters or less"]),d=k(["Description"],["Description"]),f=k(["It's optional but oh, so helpful"],["It's optional but oh, so helpful"]),p=k(["Color"],["Color"]),m=k(["Color is required"],["Color is required"]),h=k(["Collection it's saved in"],["Collection it's saved in"]),v=k(["Our analytics"],["Our analytics"]),y=k(["My personal collection"],["My personal collection"]),g=k(["All personal collections"],["All personal collections"]);t.getExpandedCollectionsById=R;var b=n(34),_=n(7),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(23)),w=n(58),O=n(32),S=n(142),C=n(1);function x(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function k(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var A=(0,b.createEntity)({name:"collections",path:"/api/collection",schema:w.CollectionSchema,displayNameOne:(0,C.t)(i),displayNameMany:(0,C.t)(o),objectActions:{setArchived:function(e,t,n){var r=e.id;return A.actions.update({id:r},{archived:t},(0,b.undo)(n,"collection",t?"archived":"unarchived"))},setCollection:function(e,t,n){var r=e.id;return A.actions.update({id:r},{parent_id:T(t&&t.id)},(0,b.undo)(n,"collection","moved"))},delete:null},objectSelectors:{getName:function(e){return e&&e.name},getUrl:function(e){return E.collection(e.id)},getIcon:function(e){return"all"}},selectors:{getExpandedCollectionsById:(0,O.createSelector)([function(e){return e.entities.collections},function(e){return e.entities.collections_list.null||[]},S.getUser],function(e,t,n){return R(t.map(function(t){return e[t]}),n&&n.personal_collection_id)}),getInitialCollectionId:(0,O.createSelector)([function(e,t){return t.collectionId},function(e,t){var n=t.params;return n?n.collectionId:void 0},function(e,t){var n=t.location;return n&&n.query?n.query.collectionId:void 0},S.getUserDefaultCollectionId],function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;if(void 0!==l)return T(l)}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return null})},form:{fields:function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,_.color)("brand");return[{name:"name",title:(0,C.t)(u),placeholder:(0,C.t)(l),validate:function(e){return!e&&(0,C.t)(s)||e&&e.length>100&&(0,C.t)(c)}},{name:"description",title:(0,C.t)(d),type:"text",placeholder:(0,C.t)(f),normalize:function(e){return e||null}},{name:"color",title:(0,C.t)(p),type:"hidden",initial:function(){return(0,_.color)("brand")},validate:function(e){return!e&&(0,C.t)(m)}},{name:"parent_id",title:(0,C.t)(h),type:"collection"}]}},getAnalyticsMetadata:function(e,t,n){var r=a(e,1)[0],i=(t.action,r&&P(r.parent_id,n()));return i&&"collection="+i}});t.default=A;var T=t.canonicalCollectionId=function(e){return null==e||"root"===e?null:parseInt(e,10)},P=t.getCollectionType=function(e,t){return null===e||"root"===e?"root":e===(0,S.getUserPersonalCollectionId)(t)?"personal":void 0!==e?"other":null},j=t.ROOT_COLLECTION={id:"root",name:(0,C.t)(v),location:"",path:[]},N=t.PERSONAL_COLLECTION={id:void 0,name:(0,C.t)(y),location:"/",path:["root"],can_write:!0},M=t.PERSONAL_COLLECTIONS={id:"personal",name:(0,C.t)(g),location:"/",path:["root"],can_write:!1};function R(e,t){var n={},a=!0,i=!1,o=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value;n[s.id]=r({},s,{path:"root"===s.id?[]:null!=s.location?["root"].concat(x(s.location.split("/").filter(function(e){return e}))):null,parent:null,children:[],is_personal:null!=s.personal_owner_id})}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}n[j.id]=r({},j,{parent:null,children:[]},n[j.id]||{}),null!=t&&n[j.id].children.push(r({},N,{id:t,parent:n[j.id],children:[],is_personal:!0})),n[M.id]=r({},M,{parent:n[j.id],children:[],is_personal:!0}),n[j.id].children.push(n[M.id]);var c=!0,d=!1,f=void 0;try{for(var p,m=e[Symbol.iterator]();!(c=(p=m.next()).done);c=!0){var h=n[p.value.id];if(h.path&&h.id!==j.id){var v=void 0,y=null==(v=null!=h.personal_owner_id?M.id:h.path[h.path.length-1]?h.path[h.path.length-1]:j.id)?null:n[v];h.parent=y,y&&y.children.push(h)}}}catch(e){d=!0,f=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw f}}return n[M.id].children.length<=1&&(delete n[M.id],n[j.id].children=n[j.id].children.filter(function(e){return e.id!==M.id})),n}},430:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=(r=[""," of ",""],a=[""," of ",""],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),l=n(139),s=(i=l)&&i.__esModule?i:{default:i},c=n(1),d=n(41),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(180)),p=n(31);var m=new Set(["count","cum-count","distinct"]),h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"replace",value:function(e){return null!=e?this._query.updateAggregation(this._index,e):this._query.updateAggregation(this._index,this)}},{key:"add",value:function(){return this._query.aggregate(this)}},{key:"remove",value:function(){return this._query.removeAggregation(this._index)}},{key:"canRemove",value:function(){return this.remove().clean().isValid()}},{key:"displayName",value:function(){var e=this.options()["display-name"];if(e)return e;var t=this.aggregation();if(t.isCustom())return t._query.formatExpression(t);if(t.isMetric()){var n=t.metric();if(n)return n.displayName()}else if(t.isStandard()){var r=t.option();if(r){var a=r.columnName||r.name.replace(" of ...",""),i=t.dimension();return i?(0,c.t)(u,a,i.render()):a}}return null}},{key:"columnName",value:function(){var e=this.options()["display-name"];if(e)return e;var t=this.aggregation();if(t.isCustom())return"expression";if(t.isMetric()){var n=t.metric();if(n)return n.columnName()}else if(t.isStandard()){var r=this.short();if(r)return"distinct"===r?"count":r}return null}},{key:"short",value:function(){var e=this.aggregation();if(e.isMetric()){var t=e.metric();if(t)return t.aggregation().short()}else if(e.isStandard())return e[0]}},{key:"baseType",value:function(){var e=this.short();return m.has(e)?d.TYPE.Integer:d.TYPE.Float}},{key:"isValid",value:function(){if(this.hasOptions())return this.aggregation().isValid();if(this.isStandard()&&this.dimension()){var e=this.dimension(),t=this.query().table().aggregationOperator(this[0]);return t&&(!t.requiresField||this.query().aggregationFieldOptions(t).hasDimension(e))}return!this.isMetric()||!!this.metric()}},{key:"isStandard",value:function(){return f.isStandard(this)}},{key:"isMetric",value:function(){return f.isMetric(this)}},{key:"isCustom",value:function(){return f.isCustom(this)}},{key:"option",value:function(){var e=this.operatorName();return null!=this._query&&e?this._query.aggregationOperators().find(function(t){return t.short===e}):null}},{key:"operatorName",value:function(){if(this.isStandard())return this[0]}},{key:"getFieldReference",value:function(){if(this.isStandard())return this[1]}},{key:"dimension",value:function(){if(this.isStandard()&&this.length>1)return this._query.parseFieldReference(this.getFieldReference())}},{key:"metricId",value:function(){if(this.isMetric())return this[1]}},{key:"metric",value:function(){if(this.isMetric())return this.metadata().metric(this.metricId())}},{key:"hasOptions",value:function(){return"aggregation-options"===this[0]}},{key:"options",value:function(){return this.hasOptions()?this[2]||{}:{}}},{key:"aggregation",value:function(){return this.hasOptions()?new t(this[1],this._index,this._query):this}},{key:"aggregationDimension",value:function(){return new p.AggregationDimension(null,[this._index],this._query.metadata(),this._query)}},{key:"isSortable",value:function(){return f.isSortable(this)}}]),t}();t.default=h},431:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=y(["Left outer join"],["Left outer join"]),o=y(["Right outer join"],["Right outer join"]),u=y(["Inner join"],["Inner join"]),l=y(["Full outer join"],["Full outer join"]),s=n(139),c=n(1),d=v(n(26)),f=n(31),p=v(f),m=v(n(137)),h=(n(530),v(n(3)));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=[{value:"left-join",name:(0,c.t)(i),icon:"join_left_outer"},{value:"right-join",name:(0,c.t)(o),icon:"join_right_outer"},{value:"inner-join",name:(0,c.t)(u),icon:"join_inner"},{value:"full-join",name:(0,c.t)(l),icon:"join_full_outer"}],b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.MBQLObjectClause),a(t,[{key:"set",value:function(e){return function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"set",this).call(this,e)}},{key:"displayName",value:function(){return this.alias}},{key:"replace",value:function(e){return this._query.updateJoin(this._index,e)}},{key:"joinSourceTableId",value:function(){return this["source-table"]}},{key:"setJoinSourceTableId",value:function(e){if(e!==this["source-table"]){var t=this.set(r({},this,{"source-query":void 0,"source-table":e,condition:null}));return t.alias?t:t.setDefaultAlias()}return this}},{key:"joinSourceQuery",value:function(){return this["source-query"]}},{key:"setJoinSourceQuery",value:function(e){return this.set(r({},this,{"source-table":void 0,"source-query":e,condition:null}))}},{key:"_uniqueAlias",value:function(e){var t=this,n=new Set(this.query().joins().map(function(e){return e.alias}).filter(function(e){return e!==t.alias})),r=this.parentTable();r&&n.add(r.name);for(var a=1;;a++){var i=1===a?e:e+"_"+a;if(!n.has(i))return i}}},{key:"setFields",value:function(e){return this.set(r({},this,{fields:e}))}},{key:"addField",value:function(e){return Array.isArray(this.fields)?this.setFields([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.fields),[e])):"none"===this.fields?this.setFields([e]):this}},{key:"clearFields",value:function(){return this.setFields("none")}},{key:"setAlias",value:function(e){if((e=this._uniqueAlias(e))!==this.alias){var t=this.set(r({},this,{alias:e})),n=t.joinDimension();if(n instanceof f.JoinedDimension&&n.joinAlias()===this.alias){var a=n.mbql();return a[1]=e,t.setJoinDimension(a)}return t}return this}},{key:"setDefaultAlias",value:function(){var e=this.parentDimension();if(e&&e.field().isFK())return this.setAlias(e.field().targetObjectName());var t=this.joinedTable(),n=String(t.id).match(/card__(\d+)/);return n?this.setAlias("Question "+n[1]):this.setAlias(t&&t.display_name||"source")}},{key:"setStrategy",value:function(e){return this.set(r({},this,{strategy:e}))}},{key:"strategyOption",value:function(){return this.strategy?h.default.findWhere(this.strategyOptions(),{value:this.strategy}):g[0]}},{key:"strategyOptions",value:function(){var e=this.query().database();return e?g.filter(function(t){var n=t.value;return e.hasFeature(n)}):[]}},{key:"setCondition",value:function(e){return this.set(r({},this,{condition:e}))}},{key:"setDefaultCondition",value:function(){var e=this.parentDimensionOptions().dimensions,t=this.joinedTable();if(t&&null!=t.id){var n=h.default.find(e,function(e){var n=e.field().target;return n&&n.table&&n.table.id===t.id});if(n)return this.setParentDimension(n).setJoinDimension(this.joinedDimension(n.field().target.dimension()))}return this}},{key:"parentDimension",value:function(){var e=this.condition;if(Array.isArray(e)&&"="===e[0]&&e[1])return this.query().parseFieldReference(e[1])}},{key:"parentDimensionOptions",value:function(){for(var e=this.query(),t=e.dimensions(),n={count:t.length,dimensions:t,fks:[]},r=e.joins(),a=0;a<this.index();a++){var i=r[a].joinedDimensionOptions();n.count+=i.count,n.fks.push(i)}return new m.default(n)}},{key:"setParentDimension",value:function(e){e instanceof p.default&&(e=e.mbql());var t=this.joinDimension();return this.setCondition(["=",e,t instanceof p.default?t.mbql():null])}},{key:"joinDimension",value:function(){var e=this.condition;if(Array.isArray(e)&&"="===e[0]&&e[2]){var t=this.joinedQuery();return t&&t.parseFieldReference(e[2])}}},{key:"setJoinDimension",value:function(e){e instanceof p.default&&(e=e.mbql());var t=this.parentDimension();return this.setCondition(["=",t instanceof p.default?t.mbql():null,e])}},{key:"joinDimensionOptions",value:function(){var e=this.joinedDimensions();return new m.default({count:e.length,dimensions:e,fks:[]})}},{key:"joinedQuery",value:function(){var e=this.joinSourceTableId(),t=this.joinSourceQuery();return e?new d.default(this.query().question(),{type:"query",query:{"source-table":e}}):t?new d.default(this.query().question(),{type:"query",query:t}):null}},{key:"joinedTable",value:function(){var e=this.joinedQuery();return e&&e.table()}},{key:"parentQuery",value:function(){return this.query()}},{key:"parentTable",value:function(){var e=this.parentQuery();return e&&e.table()}},{key:"joinedDimensions",value:function(){var e=this,t=this.joinedTable();return t?t.dimensions().map(function(t){return e.joinedDimension(t)}):[]}},{key:"fieldsDimensions",value:function(){var e=this;return"all"===this.fields?this.joinedDimensions():Array.isArray(this.fields)?this.fields.map(function(t){return e.query().parseFieldReference(t)}):[]}},{key:"joinedDimensionOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0},t=this.joinedDimensions().filter(e);return new m.default({name:this.displayName(),icon:"join_left_outer",dimensions:t,fks:[],count:t.length})}},{key:"joinedDimension",value:function(e){return this.query().parseFieldReference(["joined-field",this.alias,e.mbql()])}},{key:"dependentMetadata",value:function(){var e=this.joinedQuery();return e?e.dependentMetadata({foreignTables:!1}):[]}},{key:"remove",value:function(){return this._query.removeJoin(this._index)}},{key:"isValid",value:function(){return!!(this.joinedTable()&&this.parentDimension()&&this.joinDimension())}}]),t}();t.default=b},432:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getEngineNativeType=a,t.getEngineNativeAceMode=function(e){switch(e){case"mongo":case"druid":case"googleanalytics":return"ace/mode/json";case"mysql":return"ace/mode/mysql";case"postgres":return"ace/mode/pgsql";case"sqlserver":return"ace/mode/sqlserver";default:return"ace/mode/sql"}},t.getEngineNativeRequiresTable=function(e){return"mongo"===e},t.formatJsonQuery=i,t.formatNativeQuery=function(e,t){return"json"===a(t)?i(e,t):(0,r.formatSQL)(e)};var r=n(10);function a(e){switch(e){case"mongo":case"druid":case"googleanalytics":return"json";default:return"sql"}}function i(e,t){return"googleanalytics"===t?function(e){if(!e)return"";var t={},n=!0,r=!1,a=void 0;try{for(var i,u=o[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var l=i.value;null!=e[l]&&(t[l]=e[l])}}catch(e){r=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw a}}return JSON.stringify(t,null,2)}(e):JSON.stringify(e)}var o=["ids","start-date","end-date","metrics","dimensions","sort","filters","segment","samplingLevel","include-empty-rows","start-index","max-results"]},433:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=(i=u)&&i.__esModule?i:{default:i};var s=(a=r=function(e){function t(e){var n=e.isInitiallyOpen;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.state={isOpen:null==n||!!n,isTransitioning:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"componentWillReceiveProps",value:function(e){this.setOpen(e.isOpen)}},{key:"componentDidMount",value:function(){this.setOpen(this.props.isOpen)}},{key:"componentWillUnmount",value:function(){this.clearTimer()}},{key:"setOpen",value:function(e){var t=this;e=!!e,this.state.isOpen!==e&&(this.clearTimer(),this.setState({isOpen:e,isTransitioning:!0},function(){t._timer=setTimeout(function(){t.setState({isTransitioning:!1})},t.props.duration)}))}},{key:"clearTimer",value:function(){null!=this._timer&&(clearTimeout(this._timer),this._timer=null)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.duration,a=t.animateHeight,i=t.animateOpacity,o=this.state,u=o.isOpen,s=o.isTransitioning?this._ref&&this._ref.scrollHeight||0:"none";return l.default.createElement("div",{ref:function(t){return e._ref=t},style:{transition:"all "+r+"ms ease",maxHeight:!a||u?s:0,opacity:!i||u?1:0}},n)}}]),t}(),r.defaultProps={duration:300,opacity:!0,animateHeight:!0,animateOpacity:!0},a);s.displayName="ExpandingContent",t.default=s},434:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=f(["Name (required)"],["Name (required)"]),i=f(["Done"],["Done"]),o=d(n(0)),u=d(n(435)),l=d(n(19)),s=n(1),c=d(n(5));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={error:null},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.startRule,d=t.query,f=t.expression,p=t.onChange,m=t.onBack,h=t.onDone,v=t.name,y=t.onChangeName,g=this.state.error,b=!g&&(!y||v);return o.default.createElement("div",{style:{width:500}},o.default.createElement("div",{className:"text-medium p1 py2 border-bottom flex align-center"},o.default.createElement("a",{className:"cursor-pointer flex align-center",onClick:m},o.default.createElement(c.default,{name:"chevronleft",size:18}),o.default.createElement("h3",{className:"inline-block pl1"},n))),o.default.createElement("div",{className:"p1"},o.default.createElement(u.default,{startRule:r,expression:f,query:d,onChange:function(t){p(t),e.setState({error:null})},onError:function(t){e.setState({error:t})},onCommit:function(e){y||(p(e),h())}}),g&&(Array.isArray(g)?g.map(function(e){return o.default.createElement("div",{className:"text-error mb1",style:{whiteSpace:"pre-wrap"}},e.message)}):o.default.createElement("div",{className:"text-error mb1"},g.message)),y&&o.default.createElement("input",{className:"input block full my1",value:v,onChange:function(e){return y(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&b&&h()},placeholder:(0,s.t)(a)}),o.default.createElement(l.default,{className:"full",primary:!0,disabled:!b,onClick:h},(0,s.t)(i))))}}]),t}();m.displayName="ExpressionPopover",t.default=m},435:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=L(["Fields"],["Fields"]),c=L(["Aggregations"],["Aggregations"]),d=L(["Operators"],["Operators"]),f=L(["Metrics"],["Metrics"]),p=L(["Other"],["Other"]),m=L(["Invalid expression"],["Invalid expression"]),h=L(["unknown error"],["unknown error"]),v=L(["Learn more"],["Learn more"]),y=D(n(0)),g=D(n(2)),b=D(n(15)),_=n(1),E=D(n(3)),w=D(n(4)),O=n(248),S=n(559),C=D(n(14)),x=D(n(7)),k=D(n(265)),A=n(25),T=n(104),P=D(n(5)),j=D(n(60)),N=D(n(52)),M=D(n(568)),R=n(68);function D(e){return e&&e.__esModule?e:{default:e}}function L(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var I={fields:(0,_.t)(s),aggregations:(0,_.t)(c),operators:(0,_.t)(d),metrics:(0,_.t)(f),other:(0,_.t)(p)},F=(0,N.default)()((i=a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSuggestionAccepted=function(){var t=e.state.source,n=e.state.suggestions[e.state.highlightedSuggestion];if(n){var r=t.slice(0,n.index);n.prefixTrim&&(r=r.replace(n.prefixTrim,""));var a=t.slice(n.index);n.postfixTrim&&(a=a.replace(n.postfixTrim,"")),!a&&n.postfixText&&(a=n.postfixText),e.onExpressionChange(r+n.text+a),setTimeout(function(){return e._setCaretPosition((r+n.text).length,!0)})}e.setState({highlightedSuggestion:0})},e.onSuggestionMouseDown=function(t,n){t.preventDefault(),t.stopPropagation(),e.setState({highlightedSuggestion:n},e.onSuggestionAccepted)},e.onInputKeyDown=function(t){var n=e.state,r=n.suggestions,a=n.highlightedSuggestion;if(t.keyCode!==T.KEYCODE_LEFT&&t.keyCode!==T.KEYCODE_RIGHT)return t.keyCode===T.KEYCODE_ESCAPE?(t.stopPropagation(),t.preventDefault(),void e.clearSuggestions()):void(r.length?t.keyCode===T.KEYCODE_ENTER?(e.onSuggestionAccepted(),t.preventDefault()):t.keyCode===T.KEYCODE_UP?(e.setState({highlightedSuggestion:(a+r.length-1)%r.length}),t.preventDefault()):t.keyCode===T.KEYCODE_DOWN&&(e.setState({highlightedSuggestion:(a+r.length+1)%r.length}),t.preventDefault()):t.keyCode===T.KEYCODE_ENTER&&e.props.onCommit&&null!=e.state.expression&&e.props.onCommit(e.state.expression));setTimeout(function(){return e._triggerAutosuggest()})},e.onInputBlur=function(){e.clearSuggestions(),e.state.expression?((0,R.isExpression)(e.state.expression)||console.warn("isExpression=false",e.state.expression),e.props.onChange(e.state.expression)):e.state.compileError?e.props.onError(e.state.compileError):e.props.onError({message:(0,_.t)(m)})},e.onInputClick=function(){e._triggerAutosuggest()},e._triggerAutosuggest=function(){e.onExpressionChange(e.state.source)},e._setCaretPosition=function(t,n){(0,A.setCaretPosition)(b.default.findDOMNode(e.refs.input),t),n&&setTimeout(function(){return e._triggerAutosuggest()})},e._processSource=(0,k.default)(S.processSource,function(e){return[e.source,e.targetOffset].join(",")}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,y.default.Component),l(t,[{key:"_getParserOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{query:e.query,startRule:e.startRule}}},{key:"componentWillMount",value:function(){this.componentWillReceiveProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){if(!this.state||!E.default.isEqual(this.props.expression,e.expression)){var t=this._getParserOptions(e),n=(0,O.format)(e.expression,t),r=this._processSource(u({source:n},this._getParserOptions(e))),a=r.expression,i=r.compileError,o=r.syntaxTree;this.setState({source:n,expression:a,compileError:i,syntaxTree:o,suggestions:[],highlightedSuggestion:0})}}},{key:"componentDidMount",value:function(){this._setCaretPosition(this.state.source.length,0===this.state.source.length)}},{key:"componentDidUpdate",value:function(e,t){t.highlightedSuggestion!==this.state.highlightedSuggestion&&this._selectedRow&&(0,A.isObscured)(this._selectedRow)&&this._selectedRow.scrollIntoView({block:"nearest"})}},{key:"clearSuggestions",value:function(){this.setState({suggestions:[],highlightedSuggestion:0})}},{key:"onExpressionChange",value:function(e){var t=b.default.findDOMNode(this.refs.input);if(t){var n=(0,A.getSelectionPosition)(t),r=o(n,2),a=r[0],i=r[1],l=a!==i,s=i===e.length,c=/\s$/.test(e),d=l?null:i,f=this._processSource(u({source:e,targetOffset:d},this._getParserOptions())),p=f.expression,m=f.compileError,h=f.suggestions,v=f.helpText,y=f.syntaxTree,g=!(l||void 0!==p&&s&&!c);this.setState({source:e,expression:p,syntaxTree:y,compileError:m,suggestions:g?h:[],helpText:v})}}},{key:"render",value:function(){var e=this,t=this.props.placeholder,n=this.state.compileError,r=this.state,a=r.source,i=r.suggestions,o=r.helpText,l=r.syntaxTree;n&&!n.length&&(n=(0,_.t)(h));var s=(0,w.default)("input text-bold text-monospace",{"text-dark":a,"text-light":!a}),c={fontSize:12};return y.default.createElement("div",{className:(0,w.default)("relative my1")},y.default.createElement("div",{className:(0,w.default)(s,"absolute top left"),style:u({},c,{pointerEvents:"none",borderColor:"transparent"})},"= "),y.default.createElement(M.default,{ref:"input",type:"text",className:(0,w.default)(s,{"border-error":n}),style:u({},c,{paddingLeft:26}),placeholder:t,value:a,syntaxTree:l,parserOptions:this._getParserOptions(),onChange:function(t){return e.onExpressionChange(t.target.value)},onKeyDown:this.onInputKeyDown,onBlur:this.onInputBlur,onFocus:function(t){return e._triggerAutosuggest()},onClick:this.onInputClick,autoFocus:!0}),o&&y.default.createElement(j.default,{tetherOptions:{attachment:"top left",targetAttachment:"bottom left"},style:{width:this.props.width},isOpen:!0},y.default.createElement("p",{className:"p2 m0 text-monospace text-bold",style:{background:x.default["bg-yellow"]}},o.structure),y.default.createElement("div",{className:"p2 border-top"},y.default.createElement("p",{className:"mt0 text-bold"},o.description),y.default.createElement("p",{className:"text-code m0 text-body"},o.example)),y.default.createElement("div",{className:"p2 border-top"},o.args.map(function(e){var t=e.name,n=e.description;return y.default.createElement("div",null,y.default.createElement("h4",{className:"text-medium"},t),y.default.createElement("p",{className:"mt1 text-bold"},n))}),y.default.createElement("a",{className:"link text-bold block my1",target:"_blank",href:C.default.docsUrl("users-guide/expressions")},y.default.createElement(P.default,{name:"reference",size:12,className:"mr1"}),(0,_.t)(v)))),i.length?y.default.createElement(j.default,{className:"pb1 not-rounded border-dark",hasArrow:!1,tetherOptions:{attachment:"top left",targetAttachment:"bottom left"},sizeToFit:!0},y.default.createElement("ul",{style:{minWidth:150,overflowY:"scroll"}},i.map(function(t,n){return[(0===n||t.type!==i[n-1].type)&&y.default.createElement("li",{className:"mx2 h6 text-uppercase text-bold text-medium py1 pt2"},I[t.type]||t.type),y.default.createElement("li",{ref:function(t){n===e.state.highlightedSuggestion&&(e._selectedRow=t)},style:{paddingTop:5,paddingBottom:5},className:(0,w.default)("px2 cursor-pointer text-white-hover bg-brand-hover hover-parent hover--inherit",{"text-white bg-brand":n===e.state.highlightedSuggestion}),onMouseDownCapture:function(t){return e.onSuggestionMouseDown(t,n)}},t.range?y.default.createElement("span",null,t.name.slice(0,t.range[0]),y.default.createElement("span",{className:(0,w.default)("text-brand text-bold hover-child",{"text-white bg-brand":n===e.state.highlightedSuggestion})},t.name.slice(t.range[0],t.range[1])),t.name.slice(t.range[1])):t.name)]}))):null)}}]),t}(),a.propTypes={expression:g.default.array,onChange:g.default.func.isRequired,onError:g.default.func.isRequired,startRule:g.default.string.isRequired},a.defaultProps={expression:[null,""],startRule:"expression",placeholder:"write some math!"},r=i))||r;F.displayName="ExpressionEditorTextfield",t.default=F},438:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(34),i=n(64),o=(0,i.GET)("/api/revision"),u=(0,a.createEntity)({name:"revisions",api:{list:function(e,t){var n=e.model_type,a=e.model_id;return o({entity:n,id:a}).then(function(e){return e.map(function(e){return r({model_type:n,model_id:a},e)})})},revert:(0,i.POST)("/api/revision/revert")},objectActions:{revert:function(e){return function(t,n){return u.api.revert({entity:e.model_type,id:e.model_id,revision_id:e.id})}}}});t.default=u},440:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=N(["That's not a valid email address"],["That's not a valid email address"]),c=N(["That's not a valid integer"],["That's not a valid integer"]),d=N(["Save changes"],["Save changes"]),f=N(["Saving..."],["Saving..."]),p=N(["Changes saved!"],["Changes saved!"]),m=N(["Looks like we ran into some problems"],["Looks like we ran into some problems"]),h=n(0),v=A(h),y=A(n(2)),g=n(6),b=A(n(3)),_=A(n(952)),E=n(1),w=A(n(93)),O=A(n(19)),S=A(n(328)),C=A(n(35)),x=A(n(330)),k=n(206);function A(e){return e&&e.__esModule?e:{default:e}}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function N(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var M={email:{validate:function(e){return C.default.validEmail(e)},message:(0,E.t)(s)},integer:{validate:function(e){return!isNaN(parseInt(e))},message:(0,E.t)(c)}},R={default:(0,E.t)(d),working:(0,E.t)(f),success:(0,E.t)(p)},D=(0,g.connect)(null,{updateSettings:k.updateSettings},null,{withRef:!0})((i=a=function(e){function t(e,n){T(this,t);var r=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleChangeEvent=function(e,t){r.setState(function(n){var a,i,o,l=u({},n.formData,(o=t,(i=e)in(a={})?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,a)),s=b.default.findWhere(r.props.elements,{key:e});return s&&s.onChanged&&s.onChanged(n.formData[e],l[e],l,r.handleChangeEvent),{dirty:!0,formData:l}})},r.updateSettings=function(e){e.preventDefault();var t=r.state,n=t.formData;t.valid&&(r.setState({formErrors:null,submitting:"working"}),r.props.updateSettings(n).then(function(){r.setState({dirty:!1,submitting:"success"}),setTimeout(function(){return r.setState({submitting:"default"})},3e3)},function(e){r.setState({submitting:"default",formErrors:r.handleFormErrors(e)})}))},r.state={dirty:!1,formData:{},submitting:"default",valid:!1,validationErrors:{}},r}return j(t,h.Component),l(t,[{key:"componentWillMount",value:function(){this.updateFormData(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.updateFormData(e)}},{key:"updateFormData",value:function(e){var t={},n=!0,r=!1,a=void 0;try{for(var i,o=e.elements[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;t[u.key]=u.value}}catch(e){r=!0,a=e}finally{try{!n&&o.return&&o.return()}finally{if(r)throw a}}this.setState({formData:t})}},{key:"componentDidMount",value:function(){this.validateForm()}},{key:"componentDidUpdate",value:function(){this.validateForm()}},{key:"setSubmitting",value:function(e){this.setState({submitting:e})}},{key:"setFormErrors",value:function(e){this.setState({formErrors:e})}},{key:"validateElement",value:function(e,t,n){if(!C.default.isEmpty(t)){if("function"==typeof e)return e(t);var r=o(e,2),a=r[0],i=r[1];return M[a]||console.warn("Unknown validation "+a),M[a].validate(t)?void 0:i||M[a].message}}},{key:"validateForm",value:function(){var e=this.props,t=e.elements,n=e.enabledKey,r=this.state.formData,a=!0,i={};n&&!r[n]||t.forEach(function(e){e.required&&C.default.isEmpty(r[e.key])&&(a=!1),e.validations&&e.validations.forEach(function(t){i[e.key]=this.validateElement(t,r[e.key],e),i[e.key]&&(a=!1)},this)},this),this.state.valid===a&&b.default.isEqual(this.state.validationErrors,i)||this.setState({valid:a,validationErrors:i})}},{key:"handleFormErrors",value:function(e){var t={};return e.data&&e.data.message?t.message=e.data.message:t.message=(0,E.t)(m),e.data&&e.data.errors&&(t.elements=e.data.errors),t}},{key:"render",value:function(){var e=this,t=this.props,n=t.elements,r=t.settingValues,a=this.state,i=a.formData,o=a.formErrors,l=a.submitting,s=a.valid,c=a.dirty,d=a.validationErrors,f=this.props.layout||[{settings:n.map(function(e){return e.key})}],p=b.default.indexBy(n,"key"),m=function(t){var n=p[t];if(!n)return console.warn("Missing setting",n),null;var a=o&&o.elements?o.elements[n.key]:d[n.key],l=null==i[n.key]?n.defaultValue:i[n.key];return v.default.createElement(x.default,{key:n.key,setting:u({},n,{value:l}),onChange:function(t){return e.handleChangeEvent(n.key,t)},settingValues:r,onChangeSetting:function(t,n){return e.handleChangeEvent(t,n)},errorMessage:a})},h=!s||"default"!==l;return v.default.createElement("div",null,this.props.breadcrumbs&&v.default.createElement(w.default,{crumbs:this.props.breadcrumbs,className:"ml2 mb3"}),f.map(function(e,t){return e.collapse?v.default.createElement(I,{title:e.title,key:t},e.settings.map(function(e){return m(e)})):v.default.createElement(L,{title:e.title,key:t},e.settings.map(function(e){return m(e)}))}),o&&o.message&&v.default.createElement("div",{className:"m2 text-error text-bold"},o.message),v.default.createElement("div",{className:"m2 mb4"},v.default.createElement(O.default,{mr:1,primary:!h,success:"success"===l,disabled:h,onClick:this.updateSettings},R[l]),this.props.renderExtraButtons&&this.props.renderExtraButtons({valid:s,submitting:l,disabled:h,dirty:c})))}}]),t}(),a.propTypes={elements:y.default.array.isRequired,formErrors:y.default.object,updateSettings:y.default.func.isRequired},r=i))||r;D.displayName="SettingsBatchForm",t.default=D;var L=function(e){var t=e.title,n=e.children;return v.default.createElement("div",null,t&&v.default.createElement("h2",{className:"mx2"},t),v.default.createElement("ul",null,n))};L.displayName="StandardSection";var I=function(e){function t(){var e,n,r;T(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=P(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={show:!1},P(r,n)}return j(t,v.default.Component),l(t,[{key:"handleToggle",value:function(){this.setState(function(e){return{show:!e.show}})}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.children,r=this.state.show;return v.default.createElement("section",{className:"mb4"},v.default.createElement("div",{className:"inline-block ml1 cursor-pointer text-brand-hover",onClick:this.handleToggle.bind(this)},v.default.createElement("div",{className:"flex align-center"},v.default.createElement(S.default,{className:"mx1",open:r}),v.default.createElement("h3",null,t))),v.default.createElement(_.default,{isOpened:r,keepCollapsedContent:!0},v.default.createElement("ul",null,n)))}}]),t}();I.displayName="CollapsibleSection"},441:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),i=(r=a)&&r.__esModule?r:{default:r};var o=function(e){var t=e.setting;return i.default.createElement("div",null,i.default.createElement("div",{className:"text-medium text-bold text-uppercase"},t.display_name),i.default.createElement("div",{className:"text-medium text-measure my1"},t.description,t.note&&i.default.createElement("div",null,t.note)))};o.displayName="SettingHeader",t.default=o},442:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={USD:{symbol:"$",name:"US Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"USD",name_plural:"US dollars"},CAD:{symbol:"CA$",name:"Canadian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"CAD",name_plural:"Canadian dollars"},EUR:{symbol:"€",name:"Euro",symbol_native:"€",decimal_digits:2,rounding:0,code:"EUR",name_plural:"euros"},AED:{symbol:"AED",name:"United Arab Emirates Dirham",symbol_native:"د.إ.‏",decimal_digits:2,rounding:0,code:"AED",name_plural:"UAE dirhams"},AFN:{symbol:"Af",name:"Afghan Afghani",symbol_native:"؋",decimal_digits:0,rounding:0,code:"AFN",name_plural:"Afghan Afghanis"},ALL:{symbol:"ALL",name:"Albanian Lek",symbol_native:"Lek",decimal_digits:0,rounding:0,code:"ALL",name_plural:"Albanian lekë"},AMD:{symbol:"AMD",name:"Armenian Dram",symbol_native:"դր.",decimal_digits:0,rounding:0,code:"AMD",name_plural:"Armenian drams"},ARS:{symbol:"AR$",name:"Argentine Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"ARS",name_plural:"Argentine pesos"},AUD:{symbol:"AU$",name:"Australian Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"AUD",name_plural:"Australian dollars"},AZN:{symbol:"man.",name:"Azerbaijani Manat",symbol_native:"ман.",decimal_digits:2,rounding:0,code:"AZN",name_plural:"Azerbaijani manats"},BAM:{symbol:"KM",name:"Bosnia-Herzegovina Convertible Mark",symbol_native:"KM",decimal_digits:2,rounding:0,code:"BAM",name_plural:"Bosnia-Herzegovina convertible marks"},BDT:{symbol:"Tk",name:"Bangladeshi Taka",symbol_native:"৳",decimal_digits:2,rounding:0,code:"BDT",name_plural:"Bangladeshi takas"},BGN:{symbol:"BGN",name:"Bulgarian Lev",symbol_native:"лв.",decimal_digits:2,rounding:0,code:"BGN",name_plural:"Bulgarian leva"},BHD:{symbol:"BD",name:"Bahraini Dinar",symbol_native:"د.ب.‏",decimal_digits:3,rounding:0,code:"BHD",name_plural:"Bahraini dinars"},BIF:{symbol:"FBu",name:"Burundian Franc",symbol_native:"FBu",decimal_digits:0,rounding:0,code:"BIF",name_plural:"Burundian francs"},BND:{symbol:"BN$",name:"Brunei Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BND",name_plural:"Brunei dollars"},BOB:{symbol:"Bs",name:"Bolivian Boliviano",symbol_native:"Bs",decimal_digits:2,rounding:0,code:"BOB",name_plural:"Bolivian bolivianos"},BRL:{symbol:"R$",name:"Brazilian Real",symbol_native:"R$",decimal_digits:2,rounding:0,code:"BRL",name_plural:"Brazilian reals"},BWP:{symbol:"BWP",name:"Botswanan Pula",symbol_native:"P",decimal_digits:2,rounding:0,code:"BWP",name_plural:"Botswanan pulas"},BYR:{symbol:"BYR",name:"Belarusian Ruble",symbol_native:"BYR",decimal_digits:0,rounding:0,code:"BYR",name_plural:"Belarusian rubles"},BZD:{symbol:"BZ$",name:"Belize Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"BZD",name_plural:"Belize dollars"},CDF:{symbol:"CDF",name:"Congolese Franc",symbol_native:"FrCD",decimal_digits:2,rounding:0,code:"CDF",name_plural:"Congolese francs"},CHF:{symbol:"CHF",name:"Swiss Franc",symbol_native:"CHF",decimal_digits:2,rounding:.05,code:"CHF",name_plural:"Swiss francs"},CLP:{symbol:"CL$",name:"Chilean Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"CLP",name_plural:"Chilean pesos"},CNY:{symbol:"CN¥",name:"Chinese Yuan",symbol_native:"CN¥",decimal_digits:2,rounding:0,code:"CNY",name_plural:"Chinese yuan"},COP:{symbol:"CO$",name:"Colombian Peso",symbol_native:"$",decimal_digits:0,rounding:0,code:"COP",name_plural:"Colombian pesos"},CRC:{symbol:"₡",name:"Costa Rican Colón",symbol_native:"₡",decimal_digits:0,rounding:0,code:"CRC",name_plural:"Costa Rican colóns"},CVE:{symbol:"CV$",name:"Cape Verdean Escudo",symbol_native:"CV$",decimal_digits:2,rounding:0,code:"CVE",name_plural:"Cape Verdean escudos"},CZK:{symbol:"Kč",name:"Czech Republic Koruna",symbol_native:"Kč",decimal_digits:2,rounding:0,code:"CZK",name_plural:"Czech Republic korunas"},DJF:{symbol:"Fdj",name:"Djiboutian Franc",symbol_native:"Fdj",decimal_digits:0,rounding:0,code:"DJF",name_plural:"Djiboutian francs"},DKK:{symbol:"Dkr",name:"Danish Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"DKK",name_plural:"Danish kroner"},DOP:{symbol:"RD$",name:"Dominican Peso",symbol_native:"RD$",decimal_digits:2,rounding:0,code:"DOP",name_plural:"Dominican pesos"},DZD:{symbol:"DA",name:"Algerian Dinar",symbol_native:"د.ج.‏",decimal_digits:2,rounding:0,code:"DZD",name_plural:"Algerian dinars"},EEK:{symbol:"Ekr",name:"Estonian Kroon",symbol_native:"kr",decimal_digits:2,rounding:0,code:"EEK",name_plural:"Estonian kroons"},EGP:{symbol:"EGP",name:"Egyptian Pound",symbol_native:"ج.م.‏",decimal_digits:2,rounding:0,code:"EGP",name_plural:"Egyptian pounds"},ERN:{symbol:"Nfk",name:"Eritrean Nakfa",symbol_native:"Nfk",decimal_digits:2,rounding:0,code:"ERN",name_plural:"Eritrean nakfas"},ETB:{symbol:"Br",name:"Ethiopian Birr",symbol_native:"Br",decimal_digits:2,rounding:0,code:"ETB",name_plural:"Ethiopian birrs"},GBP:{symbol:"£",name:"British Pound Sterling",symbol_native:"£",decimal_digits:2,rounding:0,code:"GBP",name_plural:"British pounds sterling"},GEL:{symbol:"GEL",name:"Georgian Lari",symbol_native:"GEL",decimal_digits:2,rounding:0,code:"GEL",name_plural:"Georgian laris"},GHS:{symbol:"GH₵",name:"Ghanaian Cedi",symbol_native:"GH₵",decimal_digits:2,rounding:0,code:"GHS",name_plural:"Ghanaian cedis"},GNF:{symbol:"FG",name:"Guinean Franc",symbol_native:"FG",decimal_digits:0,rounding:0,code:"GNF",name_plural:"Guinean francs"},GTQ:{symbol:"GTQ",name:"Guatemalan Quetzal",symbol_native:"Q",decimal_digits:2,rounding:0,code:"GTQ",name_plural:"Guatemalan quetzals"},HKD:{symbol:"HK$",name:"Hong Kong Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"HKD",name_plural:"Hong Kong dollars"},HNL:{symbol:"HNL",name:"Honduran Lempira",symbol_native:"L",decimal_digits:2,rounding:0,code:"HNL",name_plural:"Honduran lempiras"},HRK:{symbol:"kn",name:"Croatian Kuna",symbol_native:"kn",decimal_digits:2,rounding:0,code:"HRK",name_plural:"Croatian kunas"},HUF:{symbol:"Ft",name:"Hungarian Forint",symbol_native:"Ft",decimal_digits:0,rounding:0,code:"HUF",name_plural:"Hungarian forints"},IDR:{symbol:"Rp",name:"Indonesian Rupiah",symbol_native:"Rp",decimal_digits:0,rounding:0,code:"IDR",name_plural:"Indonesian rupiahs"},ILS:{symbol:"₪",name:"Israeli New Sheqel",symbol_native:"₪",decimal_digits:2,rounding:0,code:"ILS",name_plural:"Israeli new sheqels"},INR:{symbol:"Rs",name:"Indian Rupee",symbol_native:"টকা",decimal_digits:2,rounding:0,code:"INR",name_plural:"Indian rupees"},IQD:{symbol:"IQD",name:"Iraqi Dinar",symbol_native:"د.ع.‏",decimal_digits:0,rounding:0,code:"IQD",name_plural:"Iraqi dinars"},IRR:{symbol:"IRR",name:"Iranian Rial",symbol_native:"﷼",decimal_digits:0,rounding:0,code:"IRR",name_plural:"Iranian rials"},ISK:{symbol:"Ikr",name:"Icelandic Króna",symbol_native:"kr",decimal_digits:0,rounding:0,code:"ISK",name_plural:"Icelandic krónur"},JMD:{symbol:"J$",name:"Jamaican Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"JMD",name_plural:"Jamaican dollars"},JOD:{symbol:"JD",name:"Jordanian Dinar",symbol_native:"د.أ.‏",decimal_digits:3,rounding:0,code:"JOD",name_plural:"Jordanian dinars"},JPY:{symbol:"¥",name:"Japanese Yen",symbol_native:"￥",decimal_digits:0,rounding:0,code:"JPY",name_plural:"Japanese yen"},KES:{symbol:"Ksh",name:"Kenyan Shilling",symbol_native:"Ksh",decimal_digits:2,rounding:0,code:"KES",name_plural:"Kenyan shillings"},KHR:{symbol:"KHR",name:"Cambodian Riel",symbol_native:"៛",decimal_digits:2,rounding:0,code:"KHR",name_plural:"Cambodian riels"},KMF:{symbol:"CF",name:"Comorian Franc",symbol_native:"FC",decimal_digits:0,rounding:0,code:"KMF",name_plural:"Comorian francs"},KRW:{symbol:"₩",name:"South Korean Won",symbol_native:"₩",decimal_digits:0,rounding:0,code:"KRW",name_plural:"South Korean won"},KWD:{symbol:"KD",name:"Kuwaiti Dinar",symbol_native:"د.ك.‏",decimal_digits:3,rounding:0,code:"KWD",name_plural:"Kuwaiti dinars"},KZT:{symbol:"KZT",name:"Kazakhstani Tenge",symbol_native:"тңг.",decimal_digits:2,rounding:0,code:"KZT",name_plural:"Kazakhstani tenges"},LBP:{symbol:"LB£",name:"Lebanese Pound",symbol_native:"ل.ل.‏",decimal_digits:0,rounding:0,code:"LBP",name_plural:"Lebanese pounds"},LKR:{symbol:"SLRs",name:"Sri Lankan Rupee",symbol_native:"SL Re",decimal_digits:2,rounding:0,code:"LKR",name_plural:"Sri Lankan rupees"},LTL:{symbol:"Lt",name:"Lithuanian Litas",symbol_native:"Lt",decimal_digits:2,rounding:0,code:"LTL",name_plural:"Lithuanian litai"},LVL:{symbol:"Ls",name:"Latvian Lats",symbol_native:"Ls",decimal_digits:2,rounding:0,code:"LVL",name_plural:"Latvian lati"},LYD:{symbol:"LD",name:"Libyan Dinar",symbol_native:"د.ل.‏",decimal_digits:3,rounding:0,code:"LYD",name_plural:"Libyan dinars"},MAD:{symbol:"MAD",name:"Moroccan Dirham",symbol_native:"د.م.‏",decimal_digits:2,rounding:0,code:"MAD",name_plural:"Moroccan dirhams"},MDL:{symbol:"MDL",name:"Moldovan Leu",symbol_native:"MDL",decimal_digits:2,rounding:0,code:"MDL",name_plural:"Moldovan lei"},MGA:{symbol:"MGA",name:"Malagasy Ariary",symbol_native:"MGA",decimal_digits:0,rounding:0,code:"MGA",name_plural:"Malagasy Ariaries"},MKD:{symbol:"MKD",name:"Macedonian Denar",symbol_native:"MKD",decimal_digits:2,rounding:0,code:"MKD",name_plural:"Macedonian denari"},MMK:{symbol:"MMK",name:"Myanma Kyat",symbol_native:"K",decimal_digits:0,rounding:0,code:"MMK",name_plural:"Myanma kyats"},MOP:{symbol:"MOP$",name:"Macanese Pataca",symbol_native:"MOP$",decimal_digits:2,rounding:0,code:"MOP",name_plural:"Macanese patacas"},MUR:{symbol:"MURs",name:"Mauritian Rupee",symbol_native:"MURs",decimal_digits:0,rounding:0,code:"MUR",name_plural:"Mauritian rupees"},MXN:{symbol:"MX$",name:"Mexican Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"MXN",name_plural:"Mexican pesos"},MYR:{symbol:"RM",name:"Malaysian Ringgit",symbol_native:"RM",decimal_digits:2,rounding:0,code:"MYR",name_plural:"Malaysian ringgits"},MZN:{symbol:"MTn",name:"Mozambican Metical",symbol_native:"MTn",decimal_digits:2,rounding:0,code:"MZN",name_plural:"Mozambican meticals"},NAD:{symbol:"N$",name:"Namibian Dollar",symbol_native:"N$",decimal_digits:2,rounding:0,code:"NAD",name_plural:"Namibian dollars"},NGN:{symbol:"₦",name:"Nigerian Naira",symbol_native:"₦",decimal_digits:2,rounding:0,code:"NGN",name_plural:"Nigerian nairas"},NIO:{symbol:"C$",name:"Nicaraguan Córdoba",symbol_native:"C$",decimal_digits:2,rounding:0,code:"NIO",name_plural:"Nicaraguan córdobas"},NOK:{symbol:"Nkr",name:"Norwegian Krone",symbol_native:"kr",decimal_digits:2,rounding:0,code:"NOK",name_plural:"Norwegian kroner"},NPR:{symbol:"NPRs",name:"Nepalese Rupee",symbol_native:"नेरू",decimal_digits:2,rounding:0,code:"NPR",name_plural:"Nepalese rupees"},NZD:{symbol:"NZ$",name:"New Zealand Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"NZD",name_plural:"New Zealand dollars"},OMR:{symbol:"OMR",name:"Omani Rial",symbol_native:"ر.ع.‏",decimal_digits:3,rounding:0,code:"OMR",name_plural:"Omani rials"},PAB:{symbol:"B/.",name:"Panamanian Balboa",symbol_native:"B/.",decimal_digits:2,rounding:0,code:"PAB",name_plural:"Panamanian balboas"},PEN:{symbol:"S/.",name:"Peruvian Nuevo Sol",symbol_native:"S/.",decimal_digits:2,rounding:0,code:"PEN",name_plural:"Peruvian nuevos soles"},PHP:{symbol:"₱",name:"Philippine Peso",symbol_native:"₱",decimal_digits:2,rounding:0,code:"PHP",name_plural:"Philippine pesos"},PKR:{symbol:"PKRs",name:"Pakistani Rupee",symbol_native:"₨",decimal_digits:0,rounding:0,code:"PKR",name_plural:"Pakistani rupees"},PLN:{symbol:"zł",name:"Polish Zloty",symbol_native:"zł",decimal_digits:2,rounding:0,code:"PLN",name_plural:"Polish zlotys"},PYG:{symbol:"₲",name:"Paraguayan Guarani",symbol_native:"₲",decimal_digits:0,rounding:0,code:"PYG",name_plural:"Paraguayan guaranis"},QAR:{symbol:"QR",name:"Qatari Rial",symbol_native:"ر.ق.‏",decimal_digits:2,rounding:0,code:"QAR",name_plural:"Qatari rials"},RON:{symbol:"RON",name:"Romanian Leu",symbol_native:"RON",decimal_digits:2,rounding:0,code:"RON",name_plural:"Romanian lei"},RSD:{symbol:"din.",name:"Serbian Dinar",symbol_native:"дин.",decimal_digits:0,rounding:0,code:"RSD",name_plural:"Serbian dinars"},RUB:{symbol:"₽",name:"Russian Ruble",symbol_native:"₽",decimal_digits:2,rounding:0,code:"RUB",name_plural:"Russian rubles"},RWF:{symbol:"RWF",name:"Rwandan Franc",symbol_native:"FR",decimal_digits:0,rounding:0,code:"RWF",name_plural:"Rwandan francs"},SAR:{symbol:"SR",name:"Saudi Riyal",symbol_native:"ر.س.‏",decimal_digits:2,rounding:0,code:"SAR",name_plural:"Saudi riyals"},SDG:{symbol:"SDG",name:"Sudanese Pound",symbol_native:"SDG",decimal_digits:2,rounding:0,code:"SDG",name_plural:"Sudanese pounds"},SEK:{symbol:"Skr",name:"Swedish Krona",symbol_native:"kr",decimal_digits:2,rounding:0,code:"SEK",name_plural:"Swedish kronor"},SGD:{symbol:"S$",name:"Singapore Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"SGD",name_plural:"Singapore dollars"},SOS:{symbol:"Ssh",name:"Somali Shilling",symbol_native:"Ssh",decimal_digits:0,rounding:0,code:"SOS",name_plural:"Somali shillings"},SYP:{symbol:"SY£",name:"Syrian Pound",symbol_native:"ل.س.‏",decimal_digits:0,rounding:0,code:"SYP",name_plural:"Syrian pounds"},THB:{symbol:"฿",name:"Thai Baht",symbol_native:"฿",decimal_digits:2,rounding:0,code:"THB",name_plural:"Thai baht"},TND:{symbol:"DT",name:"Tunisian Dinar",symbol_native:"د.ت.‏",decimal_digits:3,rounding:0,code:"TND",name_plural:"Tunisian dinars"},TOP:{symbol:"T$",name:"Tongan Paʻanga",symbol_native:"T$",decimal_digits:2,rounding:0,code:"TOP",name_plural:"Tongan paʻanga"},TRY:{symbol:"TL",name:"Turkish Lira",symbol_native:"TL",decimal_digits:2,rounding:0,code:"TRY",name_plural:"Turkish Lira"},TTD:{symbol:"TT$",name:"Trinidad and Tobago Dollar",symbol_native:"$",decimal_digits:2,rounding:0,code:"TTD",name_plural:"Trinidad and Tobago dollars"},TWD:{symbol:"NT$",name:"New Taiwan Dollar",symbol_native:"NT$",decimal_digits:2,rounding:0,code:"TWD",name_plural:"New Taiwan dollars"},TZS:{symbol:"TSh",name:"Tanzanian Shilling",symbol_native:"TSh",decimal_digits:0,rounding:0,code:"TZS",name_plural:"Tanzanian shillings"},UAH:{symbol:"₴",name:"Ukrainian Hryvnia",symbol_native:"₴",decimal_digits:2,rounding:0,code:"UAH",name_plural:"Ukrainian hryvnias"},UGX:{symbol:"USh",name:"Ugandan Shilling",symbol_native:"USh",decimal_digits:0,rounding:0,code:"UGX",name_plural:"Ugandan shillings"},UYU:{symbol:"$U",name:"Uruguayan Peso",symbol_native:"$",decimal_digits:2,rounding:0,code:"UYU",name_plural:"Uruguayan pesos"},UZS:{symbol:"UZS",name:"Uzbekistan Som",symbol_native:"UZS",decimal_digits:0,rounding:0,code:"UZS",name_plural:"Uzbekistan som"},VEF:{symbol:"Bs.F.",name:"Venezuelan Bolívar",symbol_native:"Bs.F.",decimal_digits:2,rounding:0,code:"VEF",name_plural:"Venezuelan bolívars"},VND:{symbol:"₫",name:"Vietnamese Dong",symbol_native:"₫",decimal_digits:0,rounding:0,code:"VND",name_plural:"Vietnamese dong"},XAF:{symbol:"FCFA",name:"CFA Franc BEAC",symbol_native:"FCFA",decimal_digits:0,rounding:0,code:"XAF",name_plural:"CFA francs BEAC"},XOF:{symbol:"CFA",name:"CFA Franc BCEAO",symbol_native:"CFA",decimal_digits:0,rounding:0,code:"XOF",name_plural:"CFA francs BCEAO"},YER:{symbol:"YR",name:"Yemeni Rial",symbol_native:"ر.ي.‏",decimal_digits:0,rounding:0,code:"YER",name_plural:"Yemeni rials"},ZAR:{symbol:"R",name:"South African Rand",symbol_native:"R",decimal_digits:2,rounding:0,code:"ZAR",name_plural:"South African rand"},ZMK:{symbol:"ZK",name:"Zambian Kwacha",symbol_native:"ZK",decimal_digits:0,rounding:0,code:"ZMK",name_plural:"Zambian kwachas"}}},445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=s(n(0)),i=n(7),o=s(n(337));n(446);var u=s(n(92)),l=n(345);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.series,n=e.geoJson,s=e.minimalBounds,c=void 0===s?(0,l.computeMinimalBounds)(n.features):s,d=e.getColor,f=void 0===d?function(){return(0,i.color)("brand")}:d,p=e.onHoverFeature,m=void 0===p?function(){}:p,h=e.onClickFeature,v=void 0===h?function(){}:h,y=e.onRenderError;return a.default.createElement(o.default,{series:t,className:"spread",renderer:function(e,t){e.className="spread",e.style.backgroundColor="transparent";var a=u.default.map(e,{zoomSnap:0,worldCopyJump:!0,attributionControl:!1,dragging:!1,tap:!1,zoomControl:!1,touchZoom:!1,doubleClickZoom:!1,scrollWheelZoom:!1,boxZoom:!1,keyboard:!1}),i=function(e){return{fillColor:f(e),weight:1,opacity:1,color:"white",fillOpacity:1}},o=function(e,t){t.on({mousemove:function(t){m({feature:e,event:t.originalEvent})},mouseout:function(e){m(null)},click:function(t){v({feature:e,event:t.originalEvent})}})};return u.default.featureGroup([u.default.geoJson(n,{style:i,onEachFeature:o})]).addTo(a),u.default.featureGroup([u.default.geoJson(n,{style:i,onEachFeature:o,coordsToLatLng:function(e){var t=r(e,2),n=t[0],a=t[1];return u.default.latLng(a,n-360)}}),u.default.geoJson(n,{style:i,onEachFeature:o,coordsToLatLng:function(e){var t=r(e,2),n=t[0],a=t[1];return u.default.latLng(a,n+360)}})]).addTo(a),a.fitBounds(c),function(){a.remove()}},onRenderError:y})};c.displayName="LeafletChoropleth",t.default=c},448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=j(["Select a default value…"],["Select a default value…"]),l=j(["Select…"],["Select…"]),s=n(0),c=P(s),d=P(n(2)),f=n(6),p=n(1),m=P(n(37)),h=P(n(5)),v=P(n(689)),y=P(n(690)),g=P(n(691)),b=P(n(692)),_=P(n(693)),E=P(n(694)),w=P(n(695)),O=P(n(696)),S=n(21),C=n(27),x=n(100),k=P(n(348)),A=P(n(4)),T=P(n(3));function P(e){return e&&e.__esModule?e:{default:e}}function j(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var R={"date/single":v.default,"date/range":y.default,"date/relative":g.default,"date/month-year":b.default,"date/quarter-year":_.default,"date/all-options":E.default},D={fetchFieldValues:S.fetchFieldValues,fetchField:S.fetchField},L=(0,f.connect)(function(){var e=(0,C.makeGetMergedParameterFieldValues)();return function(t,n){return{metadata:(0,C.getMetadata)(t),values:e(t,n)}}},D)((i=a=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=M(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isFocused:!1},M(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),o(t,[{key:"getFields",value:function(){var e=this.props.metadata;return e?this.fieldIds(this.props).map(function(t){return e.field(t)}):[]}},{key:"getWidget",value:function(){var e=this.props.parameter;return R[e.type]?R[e.type]:this.getFields().length>0&&e.hasOnlyFieldTargets?O.default:w.default}},{key:"componentWillMount",value:function(){T.default.isEmpty(this.props.values)&&this.updateFieldValues(this.props)}},{key:"fieldIds",value:function(e){var t=e.parameter,n=t.field_ids,r=void 0===n?[]:n,a=t.field_id;return a?[a]:r}},{key:"componentWillReceiveProps",value:function(e){T.default.isEqual(this.fieldIds(this.props),this.fieldIds(e))||this.updateFieldValues(e)}},{key:"updateFieldValues",value:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=this.fieldIds(e)[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;e.fetchField(o),e.fetchFieldValues(o)}}catch(e){n=!0,r=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.parameter,a=n.value,i=n.values,o=n.setValue,s=n.isEditing,d=n.placeholder,f=n.isFullscreen,v=n.noReset,y=n.commitImmediately,g=n.className,b=n.focusChanged,_=null!=a,E=this.getWidget(),w=function(){return s||_||t.state.isFocused?null:c.default.createElement(h.default,{name:(0,x.getParameterIconName)(r.type),className:"flex-align-left mr1 flex-no-shrink",size:14})},O=function(){return f?null:_&&!v?c.default.createElement(h.default,{name:"close",className:"flex-align-right cursor-pointer flex-no-shrink",size:12,onClick:function(e){_&&(e.stopPropagation(),o(null))}}):E.noPopover&&t.state.isFocused?c.default.createElement(h.default,{name:"enter_or_return",className:"flex-align-right flex-no-shrink",size:12}):E.noPopover?c.default.createElement(h.default,{name:"empty",className:"flex-align-right cursor-pointer flex-no-shrink",size:12}):E.noPopover?void 0:c.default.createElement(h.default,{name:"chevrondown",className:"flex-align-right flex-no-shrink",size:12})};if(E.noPopover)return c.default.createElement("div",{className:(0,A.default)(k.default.parameter,k.default.noPopover,g,(e={},N(e,k.default.selected,_),N(e,k.default.isEditing,s),e))},w(),c.default.createElement(E,{placeholder:d,value:a,values:i,fields:this.getFields(),setValue:o,isEditing:s,commitImmediately:y,focusChanged:function(e){b&&b(e),t.setState({isFocused:e})}}),O());var S=s?(0,p.t)(u):d||(0,p.t)(l);return c.default.createElement(m.default,{ref:"valuePopover",triggerElement:c.default.createElement("div",{ref:"trigger",className:(0,A.default)(k.default.parameter,g,N({},k.default.selected,_))},w(),c.default.createElement("div",{className:"mr1 text-nowrap"},_?E.format(a,i):S),O()),target:function(){return t.refs.trigger},autoWidth:"date/all-options"===r.type},c.default.createElement(E,{value:a,values:i,setValue:o,onClose:function(){return t.refs.valuePopover.close()}}))}}]),t}(),a.propTypes={parameter:d.default.object.isRequired,name:d.default.string,value:d.default.any,setValue:d.default.func.isRequired,placeholder:d.default.string,isEditing:d.default.bool,noReset:d.default.bool,commitImmediately:d.default.bool,focusChanged:d.default.func,isFullscreen:d.default.bool,className:d.default.string,values:d.default.array,metadata:d.default.object.isRequired},a.defaultProps={values:[],isEditing:!1,noReset:!1,commitImmediately:!1,className:""},r=i))||r;L.displayName="ParameterValueWidget",t.default=L},449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDashboardActions=void 0;var r=m(["Daytime mode"],["Daytime mode"]),a=m(["Nighttime mode"],["Nighttime mode"]),i=m(["Exit fullscreen"],["Exit fullscreen"]),o=m(["Enter fullscreen"],["Enter fullscreen"]),u=p(n(0)),l=n(1),s=p(n(29)),c=p(n(697)),d=p(n(698)),f=p(n(699));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.getDashboardActions=function(e){var t=e.isEditing,n=void 0!==t&&t,p=e.isEmpty,m=void 0!==p&&p,h=e.isFullscreen,v=e.isNightMode,y=e.onNightModeChange,g=e.onFullscreenChange,b=e.refreshPeriod,_=e.setRefreshElapsedHook,E=e.onRefreshPeriodChange,w=[];return n||m||w.push(u.default.createElement(f.default,{key:"refresh","data-metabase-event":"Dashboard;Refresh Menu Open",className:"text-brand-hover",period:b,setRefreshElapsedHook:_,onChangePeriod:E})),!n&&h&&w.push(u.default.createElement(s.default,{key:"night",tooltip:v?(0,l.t)(r):(0,l.t)(a)},u.default.createElement("span",{"data-metabase-event":"Dashboard;Night Mode;"+!v},u.default.createElement(c.default,{className:"text-brand-hover cursor-pointer",isNightMode:v,onClick:function(){return y(!v)}})))),n||m||w.push(u.default.createElement(s.default,{key:"fullscreen",tooltip:h?(0,l.t)(i):(0,l.t)(o)},u.default.createElement("span",{"data-metabase-event":"Dashboard;Fullscreen Mode;"+!h},u.default.createElement(d.default,{className:"text-brand-hover cursor-pointer",isFullscreen:h,onClick:function(e){return g(!h,!e.altKey)}})))),w}},45:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModalFooter=t.ModalBody=t.ModalHeader=t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=d(o),l=d(n(2)),s=d(n(4)),c=d(n(5));function d(e){return e&&e.__esModule?e:{default:e}}var f=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"getChildContext",value:function(){return{isModal:!0}}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.footer,r=e.onClose,a=e.children,i=e.className,o=e.fullPageModal,l=e.formModal;return u.default.createElement("div",{id:this.props.id,className:(0,s.default)("ModalContent flex-full flex flex-column relative",i,{"full-height":o&&!l},{pb4:l&&!n})},r&&u.default.createElement(c.default,{className:"text-light text-medium-hover cursor-pointer absolute z2 m2 p2 top right",name:"close",size:o?24:16,onClick:r}),t&&u.default.createElement(p,{fullPageModal:o,formModal:l},t),u.default.createElement(m,{fullPageModal:o,formModal:l},a),n&&u.default.createElement(h,{fullPageModal:o,formModal:l},n))}}]),t}(),r.propTypes={id:l.default.string,title:l.default.string,onClose:l.default.func.isRequired,fullPageModal:l.default.bool,formModal:l.default.bool},r.defaultProps={formModal:!0},r.childContextTypes={isModal:l.default.bool},a);f.displayName="ModalContent",t.default=f;var p=t.ModalHeader=function(e){var t=e.children,n=e.fullPageModal;e.formModal;return u.default.createElement("div",{className:(0,s.default)("ModalHeader flex-no-shrink px4 py4 full")},u.default.createElement("h2",{className:(0,s.default)("text-bold",{"text-centered":n},{mr4:!n})},t))};p.displayName="ModalHeader";var m=t.ModalBody=function(e){var t=e.children,n=e.fullPageModal,r=e.formModal;return u.default.createElement("div",{className:(0,s.default)("ModalBody",{px4:r,"flex flex-full flex-basis-auto":!r})},u.default.createElement("div",{className:"flex-full ml-auto mr-auto flex flex-column",style:{maxWidth:r&&n?564:void 0}},t))};m.displayName="ModalBody";var h=t.ModalFooter=function(e){var t=e.children,n=e.fullPageModal,r=e.formModal;return u.default.createElement("div",{className:(0,s.default)("ModalFooter flex flex-no-shrink px4",n?"py4":"py3")},u.default.createElement("div",{className:"ml-auto flex align-center",style:{maxWidth:r&&n?564:void 0}},Array.isArray(t)?t.map(function(e,t){return u.default.createElement("span",{key:t,className:"ml2"},e)}):t))};h.displayName="ModalFooter"},450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartSettingsWithState=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=P(["Display"],["Display"]),u=P(["Cancel"],["Cancel"]),l=P(["Done"],["Done"]),s=P(["Reset to defaults"],["Reset to defaults"]),c=n(0),d=C(c),f=C(n(4)),p=n(11),m=C(n(3)),h=n(1),v=C(n(451)),y=C(n(19)),g=C(n(103)),b=C(n(122)),_=C(n(279)),E=n(101),w=C(n(16)),O=n(47),S=n(162);function C(e){return e&&e.__esModule?e:{default:e}}function x(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function P(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var j=[(0,h.t)(o)],N=function(e){function t(e){k(this,t);var n=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleShowSection=function(e){n.setState({currentSection:e,currentWidget:null})},n.handleShowWidget=function(e){n.setState({currentWidget:e})},n.handleEndShowWidget=function(){n.setState({currentWidget:null})},n.handleResetSettings=function(){w.default.trackEvent("Chart Settings","Reset Settings"),n.props.onChange({})},n.handleChangeSettings=function(e){n.props.onChange((0,S.updateSettings)(n._getSettings(),e))},n.handleDone=function(){n.props.onDone(n._getSettings()),n.props.onClose()},n.handleCancel=function(){n.props.onClose()},n.state={currentSection:e.initial&&e.initial.section||null,currentWidget:e.initial&&e.initial.widget||null},n}return T(t,c.Component),i(t,[{key:"_getSettings",value:function(){return this.props.settings||this.props.series[0].card.visualization_settings}},{key:"_getWidgets",value:function(){if(this.props.widgets)return this.props.widgets;var e=this.props.isDashboard,t=this._getTransformedSeries();return(0,E.getSettingsWidgetsForSeries)(t,this.handleChangeSettings,e)}},{key:"_getRawSeries",value:function(){var e=this.props.series,t=this._getSettings();return(0,p.assocIn)(e,[0,"card","visualization_settings"],t)}},{key:"_getTransformedSeries",value:function(){var e=this._getRawSeries();return(0,O.getVisualizationTransformed)((0,O.extractRemappings)(e)).series}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,i=t.question,o=t.addField,u=t.noPreview,l=t.children,s=t.setSidebarPropsOverride,c=this.state.currentWidget,p=this._getSettings(),h=this._getWidgets(),y=this._getRawSeries(),E={},w={},O=!0,S=!1,C=void 0;try{for(var k,A=h[Symbol.iterator]();!(O=(k=A.next()).done);O=!0){var T=k.value;E[T.id]=T,T.widget&&!T.hidden&&(w[T.section]=w[T.section]||[],w[T.section].push(T))}}catch(e){S=!0,C=e}finally{try{!O&&A.return&&A.return()}finally{if(S)throw C}}if(w[void 0]&&Object.values(w).length>1){var P,N=w[void 0];delete w[void 0],(P=Object.values(w)[0]).unshift.apply(P,x(N))}var R=Object.keys(w),D=["data","display","axes","labels"].concat(x(R.map(function(e){return e.toLowerCase()})));R.sort(function(e,t){var n=[e,t].map(function(e){return D.indexOf(e.toLowerCase())}),a=r(n,2);return a[0]-a[1]});var L=this.state.currentSection&&w[this.state.currentSection]?this.state.currentSection:m.default.find(j,function(e){return e in w})||R[0],I=void 0,F=c&&E[c.id];I=F?[F=a({},F,{hidden:!1,props:a({},F.props||{},c.props||{})})]:w[L]||[];var z=(w[L]||[]).some(function(e){return"column_settings"===e.id}),q={question:i,addField:o,onShowWidget:this.handleShowWidget,onEndShowWidget:this.handleEndShowWidget,currentSectionHasColumnSettings:z},B=d.default.createElement(g.default,{value:L,onChange:this.handleShowSection,options:R,optionNameFn:function(e){return e},optionValueFn:function(e){return e},bubble:!0}),U=I.map(function(e){return d.default.createElement(_.default,a({key:""+e.id},e,q,{setSidebarPropsOverride:s}))}),V=m.default.isEqual(p,{})?null:this.handleResetSettings;if(l)return l({sectionNames:R,sectionPicker:B,widgetList:U,onDone:this.handleDone,onCancel:this.handleCancel,onReset:V});var G=R.length>1&&!(1===I.length&&"column_settings"===I[0].id&&!z);return d.default.createElement("div",{className:(0,f.default)(n,"flex flex-column")},G&&d.default.createElement("div",{className:"flex flex-no-shrink pl4 pt2 pb1"},B),u?d.default.createElement("div",{className:"full-height relative scroll-y scroll-show py4"},U):d.default.createElement("div",{className:"Grid flex-full"},d.default.createElement("div",{className:"Grid-cell Cell--1of3 scroll-y scroll-show border-right py4"},U),d.default.createElement("div",{className:"Grid-cell flex flex-column pt2"},d.default.createElement("div",{className:"mx4 flex flex-column"},d.default.createElement(v.default,{className:"mx2 align-self-end text-gold",warnings:this.state.warnings,size:20})),d.default.createElement("div",{className:"mx4 flex-full relative"},d.default.createElement(b.default,{className:"spread",rawSeries:y,showTitle:!0,isEditing:!0,isDashboard:!0,isSettings:!0,showWarnings:!0,onUpdateVisualizationSettings:this.handleChangeSettings,onUpdateWarnings:function(t){return e.setState({warnings:t})}})),d.default.createElement(M,{onDone:this.handleDone,onCancel:this.handleCancel,onReset:V}))))}}]),t}();N.displayName="ChartSettings";var M=function(e){var t=e.className,n=e.onDone,r=e.onCancel,a=e.onReset;return d.default.createElement("div",{className:(0,f.default)("py2 px4",t)},d.default.createElement("div",{className:"float-right"},d.default.createElement(y.default,{className:"ml2",onClick:r,"data-metabase-event":"Chart Settings;Cancel"},(0,h.t)(u)),d.default.createElement(y.default,{primary:!0,className:"ml2",onClick:n,"data-metabase-event":"Chart Settings;Done"},(0,h.t)(l))),a&&d.default.createElement(y.default,{borderless:!0,icon:"refresh",className:"float-right ml2","data-metabase-event":"Chart Settings;Reset",onClick:a},(0,h.t)(s)))};M.displayName="ChartSettingsFooter",t.default=N;var R,D,L;t.ChartSettingsWithState=(R=N,L=D=function(e){function t(e){k(this,t);var n=A(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={settings:e.settings},n}return T(t,d.default.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){this.props.settings!==e.settings&&this.setState({settings:e.settings})}},{key:"render",value:function(){var e=this;return d.default.createElement(R,a({},this.props,{settings:this.state.settings,onChange:function(t){return e.setState({settings:t})},onDone:function(t){return e.props.onChange(t||e.state.settings)}}))}}]),t}(),D.displayName="withTransientSettingState["+(R.displayName||R.name)+"]",L)},451:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),a=o(n(29)),i=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.warnings,n=e.className,o=e.size,u=void 0===o?16:o;if(!t||0===t.length)return null;var l=r.default.createElement("ul",{className:"px2 pt2 pb1",style:{maxWidth:350}},t.map(function(e){return r.default.createElement("li",{className:"pb1",key:e},e)}));return r.default.createElement(a.default,{tooltip:l},r.default.createElement(i.default,{className:n,name:"warning",size:u}))};u.displayName="Warnings",t.default=u},452:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=f(i),u=n(6),l=n(30),s=f(n(16)),c=n(256),d=f(n(974));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=1;t.default=function(e){var t,n;return(0,u.connect)(null,{replace:l.replace})((n=t=function(t){function n(){var e,t,r,a,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var o=arguments.length,u=Array(o),l=0;l<o;l++)u[l]=arguments[l];return t=r=m(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(u))),r.state={isFullscreen:!1,isNightMode:!1,refreshPeriod:null,hideParameters:null},r.loadDashboardParams=function(){var e=r.props.location,t=(0,c.parseHashOptions)(e.hash);r.setRefreshPeriod(Number.isNaN(t.refresh)||0===t.refresh?null:t.refresh),r.setNightMode("night"===t.theme||t.night),r.setFullscreen(t.fullscreen),r.setHideParameters(t.hide_parameters)},r.updateDashboardParams=function(){var e=r.props,t=e.location,n=e.replace,a=(0,c.parseHashOptions)(t.hash),i=function(e,t){t?a[e]=t:delete a[e]};i("refresh",r.state.refreshPeriod),i("fullscreen",r.state.isFullscreen),i("theme",r.state.isNightMode?"night":null),delete a.night,delete a.add;var o=(0,c.stringifyHashOptions)(a);(o=o?"#"+o:"")!==t.hash&&n({pathname:t.pathname,search:t.search,hash:o})},r.setRefreshPeriod=function(e){r._clearRefreshInterval(),null!=e?(r._interval=setInterval(r._tickRefreshClock,1e3*h),r.setState({refreshPeriod:e}),r.setRefreshElapsed(0),s.default.trackEvent("Dashboard","Set Refresh",e)):(r.setState({refreshPeriod:null}),r.setRefreshElapsed(null))},r.setNightMode=function(e){e=!!e,r.setState({isNightMode:e})},r.setFullscreen=(a=p(regeneratorRuntime.mark(function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=!!t)===r.state.isFullscreen){e.next=17;break}if(!d.default.enabled||!n){e.next=16;break}if(!t){e.next=14;break}return e.prev=4,e.next=7,d.default.request();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.warn("Couldn't enable browser fullscreen: "+e.t0);case 12:e.next=16;break;case 14:return e.next=16,d.default.exit();case 16:r.setState({isFullscreen:t});case 17:case"end":return e.stop()}},e,i,[[4,9]])})),function(e){return a.apply(this,arguments)}),r.setHideParameters=function(e){r.setState({hideParameters:e})},r._tickRefreshClock=p(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r._refreshElapsed=(r._refreshElapsed||0)+h,!((t=r.state.refreshPeriod)&&r._refreshElapsed>=t)){e.next=7;break}return r._refreshElapsed=0,e.next=6,r.props.fetchDashboard(r.props.dashboardId,r.props.location.query);case 6:r.props.fetchDashboardCardData({reload:!0,clear:!1});case 7:r.setRefreshElapsed(r._refreshElapsed);case 8:case"end":return e.stop()}},e,i)})),r._fullScreenChanged=function(){r.setState({isFullscreen:!!d.default.isFullscreen})},r.setRefreshElapsedHook=function(e){r._refreshElapsedHook=e},r.setRefreshElapsed=function(e){r._refreshElapsedHook&&r._refreshElapsedHook(e)},m(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.Component),a(n,[{key:"componentWillMount",value:function(){d.default.enabled&&document.addEventListener(d.default.raw.fullscreenchange,this._fullScreenChanged),this.loadDashboardParams()}},{key:"componentDidUpdate",value:function(){this.updateDashboardParams(),this._showNav(!this.state.isFullscreen)}},{key:"componentWillUnmount",value:function(){this._showNav(!0),this._clearRefreshInterval(),d.default.enabled&&document.removeEventListener(d.default.raw.fullscreenchange,this._fullScreenChanged)}},{key:"_clearRefreshInterval",value:function(){null!=this._interval&&clearInterval(this._interval)}},{key:"_showNav",value:function(e){if(window.document){var t=window.document.querySelector(".Nav");e&&t?t.classList.remove("hide"):!e&&t&&t.classList.add("hide")}}},{key:"render",value:function(){return o.default.createElement(e,r({},this.props,this.state,{setRefreshElapsedHook:this.setRefreshElapsedHook,loadDashboardParams:this.loadDashboardParams,updateDashboardParams:this.updateDashboardParams,onNightModeChange:this.setNightMode,onFullscreenChange:this.setFullscreen,onRefreshPeriodChange:this.setRefreshPeriod}))}}]),n}(),t.displayName="DashboardControls["+(e.displayName||e.name)+"]",n))}},456:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.parseViewBox=o,t.loadIcon=function(e){var t=i[e];if(!t)return null;if(t.img)return a({},t,{attrs:a({},t.attrs,{className:"Icon Icon-"+e})});var n={attrs:{className:"Icon Icon-"+e,viewBox:"0 0 32 32",width:16,height:16,fill:"currentcolor"},svg:void 0,path:void 0};if("string"==typeof t)n.path=t;else if(null!=t){var u=t.svg,l=t.path,s=t.attrs;for(var c in s)n.attrs[c]=s[c];if(s&&s.viewBox){var d=o(s.viewBox),f=r(d,2),p=f[0],m=f[1];n.attrs.width=p/2,n.attrs.height=m/2}n.path=l,n.svg=u}return n};var i=t.ICON_PATHS={add:"M12.4285714,12.4285714 L12.4285714,0 L19.5714286,0 L19.5714286,12.4285714 L32,12.4285714 L32,19.5714286 L19.5714286,19.5714286 L19.5714286,32 L12.4285714,32 L12.4285714,19.5714286 L0,19.5714286 L0,12.4285714 L12.4285714,12.4285714 Z",add_data:"M0 8h5.926v6.208H0V8zm7.704 0h5.926v6.208H7.704V8zM0 16.07h5.926v6.209H0V16.07zm7.704 0h5.926v6.209H7.704V16.07zm7.703 0h5.926v6.209h-5.926V16.07zM0 24.142h5.926v6.208H0v-6.208zm7.704 0h5.926v6.208H7.704v-6.208zm7.703 0h5.926v6.208h-5.926v-6.208zM23.08 8.08V3h4.064v5.08h5.08v4.063h-5.08v5.08h-4.064v-5.08H18V8.079h5.08z",add_to_dash:{path:"M21,23 L16,23 L16,27 L21,27 L21,32 L25,32 L25,27 L30,27 L30,23 L25,23 L25,18 L21,18 L21,23 Z M32,7 L32,14 L28,14 L28,8 L0,8 L0,4 L0,4 C-2.705415e-16,1.790861 1.790861,4.05812251e-16 4,0 L4,0 L28,0 C30.209139,-4.05812251e-16 32,1.790861 32,4 L32,7 Z M0,8 L4,8 L4,28 L0,28 L0,8 Z M0,28 L12,28 L12,32 L4,32 C1.790861,32 2.705415e-16,30.209139 0,28 Z",attrs:{fillRule:"evenodd"}},alert:{path:"M14.677 7.339c-4.77.562-5.23 4.75-5.23 7.149 0 2.576 0 3.606-.53 4.121-.352.344-1.058.515-2.117.515V21.7h18v-2.576c-1.059 0-1.588 0-2.118-.515-.353-.343-.53-2.06-.53-5.151-.316-3.705-2.06-5.745-5.23-6.12a1.52 1.52 0 0 0 .466-1.093c0-.853-.71-1.545-1.588-1.545-.877 0-1.588.692-1.588 1.545 0 .427.178.814.465 1.094zM16.05 0c2.473 0 5.57 1.851 6.22 4.12 3.057 1.58 4.868 4.503 5.223 8.706l.013.158v.157c0 .905.014 1.682.042 2.327H30.6V25.73H1.5V15.468h3.091c.002-.326.003-.725.003-1.222 0-2.308.316-4.322 1.26-6.233.881-1.784 2.223-2.988 3.976-3.893C10.48 1.85 13.576 0 16.05 0zM13.1 25.8c.25 1.6 1.166 2.4 2.75 2.4s2.5-.8 2.75-2.4h-5.5zm-4.35-3.16h14.191l-.586 3.261c-.497 3.607-2.919 6.001-6.51 6.001-3.59 0-6.012-2.394-6.508-6L8.75 22.64z",attrs:{fillRule:"nonzero"}},alert_confirm:{path:"M24.326 7.184a9.604 9.604 0 0 0-.021-.034c-.876-1.39-2.056-2.47-3.518-3.19-.509-2.269-2.51-3.96-4.9-3.96-2.361 0-4.344 1.652-4.881 3.88C7.113 5.63 5.68 9.55 5.68 14.424c0 .88-.003 1.473-.01 1.902H2.8v9.605h26.175v-9.602h-3.297v6.257H6.097V19.67c1.152 0 1.92-.194 2.304-.583.576-.583.576-1.75.576-4.664 0-2.716.5-7.456 5.69-8.091a1.754 1.754 0 0 1-.507-1.238c0-.966.773-1.749 1.727-1.749.955 0 1.728.783 1.728 1.75 0 .483-.194.92-.507 1.237 2.2.27 3.768 1.308 4.705 3.112.037-.04.874-.793 2.513-2.26zm-11.312 18.7H9.741C10.214 29.398 12.48 32 15.887 32c3.409 0 5.674-2.602 6.147-6.116H18.76c-.27 1.911-1.228 2.77-2.874 2.77-1.645 0-2.603-.859-2.873-2.77zm.297-12.466l2.504-2.707 3.819 4.106 7.653-8.254L29.8 9.38 19.636 20.295l-6.325-6.877z",attrs:{fillRule:"nonzero"}},all:"M30.595 13.536c1.85.755 1.879 2.05.053 2.9l-11.377 5.287c-1.82.846-4.763.858-6.583.022L1.344 16.532c-1.815-.835-1.785-2.131.05-2.89l1.637-.677 8.977 4.125c2.194 1.009 5.74.994 7.934-.026l9.022-4.193 1.63.665zm-1.63 7.684l1.63.666c1.85.755 1.879 2.05.053 2.898l-11.377 5.288c-1.82.847-4.763.859-6.583.022L1.344 24.881c-1.815-.834-1.785-2.131.05-2.89l1.637-.677 8.977 4.126c2.194 1.008 5.74.993 7.934-.026l9.022-4.194zM12.686 1.576c1.843-.762 4.834-.77 6.687-.013l11.22 4.578c1.85.755 1.88 2.05.054 2.899l-11.377 5.288c-1.82.846-4.763.858-6.583.022L1.344 9.136c-1.815-.834-1.785-2.13.05-2.89l11.293-4.67z",archive:{path:"M27.557 1v2.356a1 1 0 0 1-1 1H5.443a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h21.114a1 1 0 0 1 1 1zM4.356 26.644h23.288v-15.57H4.356v15.57zM32 8.718V29a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V8.718a2 2 0 0 1 2-2h28a2 2 0 0 1 2 2zM16.116 25.076l5.974-6.57h-3.983V12.93h-3.982v5.575h-3.982l5.973 6.571z",attrs:{fillRule:"evenodd"}},area:"M31.154 28.846l.852.004V8.64l-1.15 2.138-6.818 6.37c-.13.122-9.148 1.622-9.148 1.622l-.545.096-.383.4-7.93 8.31-1.016 1.146 2.227.017 23.91.107L7.25 28.74l7.93-8.31 9.615-1.684 7.211-6.737v15.984a.855.855 0 0 1-.852.854zM0 28.74l11.79-13.362 11.788-3.369 8.077-8.07c.194-.193.351-.128.351.15V28.85L0 28.74z",attachment:{path:"M22.162 8.704c.029 8.782-.038 14.123-.194 15.926-.184 2.114-2.922 4.322-5.9 4.322-3.06 0-5.542-1.98-5.836-4.376-.294-2.392-.195-14.266.01-18.699.077-1.661 1.422-2.83 3.548-2.83 2.067 0 3.488 1.335 3.594 3.164.06 1.052.074 3.49.053 7.107-.006.928-.013 1.891-.023 3.072l-.023 2.527c-.006.824-.01 1.358-.01 1.718 0 1.547-.39 2.011-1.475 2.011-.804 0-1.202-.522-1.202-1.38V8.699a1.524 1.524 0 0 0-3.048 0v12.567c0 2.389 1.554 4.428 4.25 4.428 2.897 0 4.523-1.934 4.523-5.06 0-.348.003-.875.01-1.691l.022-2.526c.01-1.184.018-2.15.024-3.082.021-3.697.008-6.155-.058-7.3C20.227 2.592 17.469 0 13.79 0c-3.695 0-6.438 2.382-6.593 5.737-.213 4.613-.312 16.585.01 19.21C7.697 28.94 11.53 32 16.067 32c4.482 0 8.61-3.327 8.937-7.106.168-1.935.235-7.302.206-16.2a1.524 1.524 0 0 0-3.048.01z",attrs:{fillRule:"nonzero"}},arrow_up:{path:"M16 34.23a2.5 2.5 0 002.5-2.5V9.036l8.732 8.732a2.5 2.5 0 003.405.122l.13-.122a2.5 2.5 0 000-3.536l-13-13a2.5 2.5 0 00-3.535 0l-13 13a2.5 2.5 0 103.536 3.536L13.5 9.036V31.73a2.5 2.5 0 002.336 2.495z",attrs:{viewBox:"0 0 32 34"}},arrow_down:{path:"M16 .5A2.5 2.5 0 0118.5 3v22.694l8.732-8.732a2.5 2.5 0 013.405-.122l.13.122a2.5 2.5 0 010 3.536l-13 13a2.5 2.5 0 01-3.535 0l-13-13a2.5 2.5 0 113.536-3.536l8.732 8.732V3A2.5 2.5 0 0115.836.505z",attrs:{viewBox:"0 0 32 34"}},arrow_left:{path:"M14.502 1.232a2.5 2.5 0 113.536 3.536l-8.732 8.731L32 13.5a2.5 2.5 0 012.495 2.336L34.5 16a2.5 2.5 0 01-2.5 2.5l-22.696-.001 8.734 8.733a2.5 2.5 0 01.122 3.405l-.122.13a2.5 2.5 0 01-3.536 0l-13-13a2.5 2.5 0 010-3.535z",attrs:{viewBox:"0 0 35 32"}},arrow_left_to_line:{path:"M1,1v10 M3,6h8 M6,3L3,6L6,9",attrs:{viewBox:"0 0 12 12",style:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,stroke:"currentColor"}}},bar:"M2 23.467h6.4V32H2v-8.533zm10.667-12.8h6.4V32h-6.4V10.667zM23.333 0h6.4v32h-6.4V0z",beaker:"M4.31736354,31.1631075 C3.93810558,30.6054137 3.89343681,29.6635358 4.20559962,29.0817181 L11.806982,14.9140486 L11.8069821,10.5816524 L10.7015144,10.4653256 C10.0309495,10.394763 9.48734928,9.78799739 9.48734928,9.12166999 L9.48734928,7.34972895 C9.48734928,6.67821106 10.0368737,6.13383825 10.7172248,6.13383825 L21.8462005,6.13383825 C22.525442,6.13383825 23.0760761,6.68340155 23.0760761,7.34972895 L23.0760761,9.12166999 C23.0760761,9.79318788 22.5250158,10.3375607 21.856025,10.3375607 L20.9787023,10.3375607 L20.9787024,14.9281806 L28.77277,29.0827118 C29.0983515,29.6739888 29.0709073,30.6193105 28.7174156,31.1846409 L28.852457,30.9686726 C28.4963041,31.538259 27.6541076,32 26.9865771,32 L6.10749779,32 C5.43315365,32 4.58248747,31.5529687 4.19978245,30.9902061 L4.31736354,31.1631075 Z M15.5771418,17.6040443 C16.5170398,17.6040443 17.2789777,16.8377777 17.2789777,15.89254 C17.2789777,14.9473023 16.5170398,14.1810358 15.5771418,14.1810358 C14.6372438,14.1810358 13.8753059,14.9473023 13.8753059,15.89254 C13.8753059,16.8377777 14.6372438,17.6040443 15.5771418,17.6040443 Z M16.5496195,12.8974079 C17.8587633,12.8974079 18.9200339,11.830108 18.9200339,10.5135268 C18.9200339,9.1969457 17.8587633,8.1296458 16.5496195,8.1296458 C15.2404758,8.1296458 14.1792052,9.1969457 14.1792052,10.5135268 C14.1792052,11.830108 15.2404758,12.8974079 16.5496195,12.8974079 Z M5.71098553,30.2209651 L10.9595331,20.5151267 C10.9595331,20.5151267 12.6834557,21.2672852 14.3734184,21.2672852 C16.0633811,21.2672852 16.8198616,19.2872624 17.588452,18.6901539 C18.3570425,18.0930453 19.9467191,17.1113296 19.9467191,17.1113296 L27.0506095,30.1110325 L5.71098553,30.2209651 Z M13.6608671,4.37817079 C14.4114211,4.37817079 15.0198654,3.78121712 15.0198654,3.04483745 C15.0198654,2.30845779 14.4114211,1.71150412 13.6608671,1.71150412 C12.9103132,1.71150412 12.3018689,2.30845779 12.3018689,3.04483745 C12.3018689,3.78121712 12.9103132,4.37817079 13.6608671,4.37817079 Z M17.9214578,2.45333328 C18.6119674,2.45333328 19.1717361,1.90413592 19.1717361,1.22666664 C19.1717361,0.549197362 18.6119674,0 17.9214578,0 C17.2309481,0 16.6711794,0.549197362 16.6711794,1.22666664 C16.6711794,1.90413592 17.2309481,2.45333328 17.9214578,2.45333328 Z",bell:"M14.254 5.105c-7.422.874-8.136 7.388-8.136 11.12 0 4.007 0 5.61-.824 6.411-.549.535-1.647.802-3.294.802v4.006h28v-4.006c-1.647 0-2.47 0-3.294-.802-.55-.534-.824-3.205-.824-8.013-.493-5.763-3.205-8.936-8.136-9.518a2.365 2.365 0 0 0 .725-1.701C18.47 2.076 17.364 1 16 1s-2.47 1.076-2.47 2.404c0 .664.276 1.266.724 1.7zM11.849 29c.383 1.556 1.793 2.333 4.229 2.333s3.845-.777 4.229-2.333h-8.458z",bolt:"M21.697 0L8 16.809l7.549 2.538L11.687 32l12.652-16.6-7.695-2.317z",breakout:"M24.47 1H32v7.53h-7.53V1zm0 11.294H32v7.53h-7.53v-7.53zm0 11.294H32v7.53h-7.53v-7.53zM0 1h9.412v30.118H0V1zm11.731 13.714c.166-.183.452-.177.452-.177h6.475s-1.601-2.053-2.07-2.806c-.469-.753-.604-1.368 0-1.905.603-.536 1.226-.281 1.878.497.652.779 2.772 3.485 3.355 4.214.583.73.65 1.965 0 2.835-.65.87-2.65 4.043-3.163 4.65-.514.607-1.123.713-1.732.295-.609-.419-.838-1.187-.338-1.872.5-.684 2.07-3.073 2.07-3.073h-6.475s-.27 0-.46-.312-.151-.612-.151-.612l.007-1.246s-.014-.306.152-.488z",bubble:"M18.155 20.882c-5.178-.638-9.187-5.051-9.187-10.402C8.968 4.692 13.66 0 19.448 0c5.789 0 10.48 4.692 10.48 10.48 0 3.05-1.302 5.797-3.383 7.712a7.127 7.127 0 1 1-8.39 2.69zm-6.392 10.14a2.795 2.795 0 1 1 0-5.59 2.795 2.795 0 0 1 0 5.59zm-6.079-6.288a4.541 4.541 0 1 1 0-9.083 4.541 4.541 0 0 1 0 9.083z",burger:"M2.5 3.6h27a2.5 2.5 0 1 1 0 5h-27a2.5 2.5 0 0 1 0-5zm0 9.931h27a2.5 2.5 0 1 1 0 5h-27a2.5 2.5 0 1 1 0-5zm0 9.931h27a2.5 2.5 0 1 1 0 5h-27a2.5 2.5 0 0 1 0-5z",calendar:{path:"M21,2 L21,0 L18,0 L18,2 L6,2 L6,0 L3,0 L3,2 L2.99109042,2 C1.34177063,2 0,3.34314575 0,5 L0,6.99502651 L0,20.009947 C0,22.2157067 1.78640758,24 3.99005301,24 L20.009947,24 C22.2157067,24 24,22.2135924 24,20.009947 L24,6.99502651 L24,5 C24,3.34651712 22.6608432,2 21.0089096,2 L21,2 L21,2 Z M22,8 L22,20.009947 C22,21.1099173 21.1102431,22 20.009947,22 L3.99005301,22 C2.89008272,22 2,21.1102431 2,20.009947 L2,8 L22,8 L22,8 Z M6,12 L10,12 L10,16 L6,16 L6,12 Z",attrs:{viewBox:"0 0 24 24"}},check:"M1 14 L5 10 L13 18 L27 4 L31 8 L13 26 z ",chevrondown:"M1 12 L16 26 L31 12 L27 8 L16 18 L5 8 z ",chevronleft:"M20 1 L24 5 L14 16 L24 27 L20 31 L6 16 z",chevronright:"M12 1 L26 16 L12 31 L8 27 L18 16 L8 5 z ",chevronup:"M1 20 L16 6 L31 20 L27 24 L16 14 L5 24 z",clipboard:"M8.54667751,5.50894675 L6.00494659,5.50894675 C4.89702623,5.50894675 4,6.40070914 4,7.50075379 L4,30.0171397 C4,31.1120596 4.89764516,32.0089468 6.00494659,32.0089468 L25.9950534,32.0089468 C27.1029738,32.0089468 28,31.1171844 28,30.0171397 L28,7.50075379 C28,6.40583387 27.1023548,5.50894675 25.9950534,5.50894675 L23.5373296,5.50894675 L23.5373296,3.0446713 L19.9106557,3.0446713 C19.9106557,3.0446713 19.6485834,8.05825522e-08 16.0837607,0 C12.518938,-8.05825523e-08 12.1644547,3.04776207 12.1644547,3.04776207 L8.57253264,3.04776207 L8.54667751,5.50894675 Z M23.5373296,7.50894675 L26,7.50894675 L26,30.0089468 L6,30.0089468 L6,7.50894675 L8.52566721,7.50894675 L8.4996301,9.98745456 L23.5373296,9.98745456 L23.5373296,7.50894675 Z M10.573037,5.01478303 L13.9861608,5.01478303 L13.9861608,3.76128231 C13.9861608,3.76128231 14.0254332,1.94834752 16.0135743,1.94834752 C18.0017155,1.94834752 18.0017156,3.7055821 18.0017156,3.7055821 L18.0017156,4.94060459 L21.4955568,4.94060459 L21.4955568,8.03924122 L10.5173901,8.03924122 L10.573037,5.01478303 Z M16,5.00894675 C16.5522847,5.00894675 17,4.5612315 17,4.00894675 C17,3.456662 16.5522847,3.00894675 16,3.00894675 C15.4477153,3.00894675 15,3.456662 15,4.00894675 C15,4.5612315 15.4477153,5.00894675 16,5.00894675 Z M8.5,18.0089468 L8.5,21.0082323 L11.5,21.0082323 L11.5,18.0446111 L8.5,18.0089468 Z M8.5,23.0089468 L8.5,26.0082323 L11.5,26.0082323 L11.5,23.0446111 L8.5,23.0089468 Z M8.5,13.0089468 L8.5,16.0082323 L11.5,16.0082323 L11.5,13.0446111 L8.5,13.0089468 Z M13.5,13.0193041 L13.5,16 L23.5,16 L23.5,13 L13.5,13.0193041 Z M13.5,23.0193041 L13.5,26 L23.5,26 L23.5,23 L13.5,23.0193041 Z M13.5,18.0193041 L13.5,21 L23.5,21 L23.5,18 L13.5,18.0193041 Z",clock:"M16 0 A16 16 0 0 0 0 16 A16 16 0 0 0 16 32 A16 16 0 0 0 32 16 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 28 16 A12 12 0 0 1 16 28 A12 12 0 0 1 4 16 A12 12 0 0 1 16 4 M14 6 L14 17.25 L22 22 L24.25 18.5 L18 14.75 L18 6z",clone:{path:"M24,22 L32,22 L32,0 L10,0 L10,6 L24,6 L24,22 L24,22 Z M0,8 L22,8 L22,30 L0,30 L0,8 Z",attrs:{viewBox:"0 0 32 30"}},close:"M4 8 L8 4 L16 12 L24 4 L28 8 L20 16 L28 24 L24 28 L16 20 L8 28 L4 24 L12 16 z ",collection:"M16.5695046,2.82779686 L15.5639388,2.83217072 L30.4703127,11.5065092 L30.4818076,9.80229623 L15.5754337,18.2115855 L16.5436335,18.2077098 L1.65289961,9.96407638 L1.67877073,11.6677911 L16.5695046,2.82779686 Z M0.691634577,11.6826271 L15.5823685,19.9262606 C15.8836872,20.0930731 16.2506087,20.0916044 16.5505684,19.9223849 L31.4569423,11.5130957 C32.1196316,11.1392458 32.1260238,10.1915465 31.4684372,9.80888276 L16.5620632,1.1345443 C16.2511162,0.953597567 15.8658421,0.955273376 15.5564974,1.13891816 L0.665763463,9.97891239 C0.0118284022,10.3671258 0.0262104889,11.3142428 0.691634577,11.6826271 Z M15.5699489,25.798061 L16.0547338,26.0652615 L16.536759,25.7931643 L31.4991818,17.3470627 C31.973977,17.0790467 32.1404815,16.4788587 31.8710802,16.0065052 C31.6016788,15.5341517 30.9983884,15.3685033 30.5235933,15.6365193 L15.5611705,24.0826209 L16.5279806,24.0777242 L1.46763754,15.7768642 C0.99012406,15.5136715 0.388560187,15.6854222 0.124007019,16.16048 C-0.14054615,16.6355379 0.0320922897,17.2340083 0.509605765,17.497201 L15.5699489,25.798061 Z M15.5699489,31.7327994 L16.0547338,32 L16.536759,31.7279028 L31.4991818,23.2818011 C31.973977,23.0137852 32.1404815,22.4135972 31.8710802,21.9412437 C31.6016788,21.4688901 30.9983884,21.3032418 30.5235933,21.5712578 L15.5611705,30.0173594 L16.5279806,30.0124627 L1.46763754,21.7116027 C0.99012406,21.44841 0.388560187,21.6201606 0.124007019,22.0952185 C-0.14054615,22.5702764 0.0320922897,23.1687467 0.509605765,23.4319394 L15.5699489,31.7327994 Z",compare:"M24.5815137,18.6109617 L32.110976,18.6109617 L32.110976,25.7224662 L24.5815137,25.7224662 L24.5815137,31.7951059 L14.9536477,22.1672398 L24.5815137,12.5393738 L24.5815137,18.6109617 Z M7.52979828,20.2568769 L7.52941566,14.1855356 L0.000277209616,14.1851279 L-3.37507799e-14,7.07317197 L7.52913845,7.0735796 L7.5287557,1 L17.1577154,10.6289597 L7.52979828,20.2568769 Z",connections:{path:"M5.37815706,11.5570815 C5.55061975,11.1918363 5.64705882,10.783651 5.64705882,10.3529412 C5.64705882,9.93118218 5.55458641,9.53102128 5.38881053,9.1716274 L11.1846365,4.82475792 C11.6952189,5.33295842 12.3991637,5.64705882 13.1764706,5.64705882 C14.7358628,5.64705882 16,4.38292165 16,2.82352941 C16,1.26413718 14.7358628,0 13.1764706,0 C11.6170784,0 10.3529412,1.26413718 10.3529412,2.82352941 C10.3529412,3.2452884 10.4454136,3.64544931 10.6111895,4.00484319 L10.6111895,4.00484319 L4.81536351,8.35171266 C4.3047811,7.84351217 3.60083629,7.52941176 2.82352941,7.52941176 C1.26413718,7.52941176 0,8.79354894 0,10.3529412 C0,11.9123334 1.26413718,13.1764706 2.82352941,13.1764706 C3.59147157,13.1764706 4.28780867,12.8698929 4.79682555,12.3724528 L10.510616,16.0085013 C10.408473,16.3004758 10.3529412,16.6143411 10.3529412,16.9411765 C10.3529412,18.5005687 11.6170784,19.7647059 13.1764706,19.7647059 C14.7358628,19.7647059 16,18.5005687 16,16.9411765 C16,15.3817842 14.7358628,14.1176471 13.1764706,14.1176471 C12.3029783,14.1176471 11.5221273,14.5142917 11.0042049,15.1372938 L5.37815706,11.5570815 Z",attrs:{viewBox:"0 0 16 19.7647"}},contract:"M18.0015892,0.327942852 L18.0015892,14 L31.6736463,14 L26.6544389,8.98079262 L32,3.63523156 L28.3647684,0 L23.0192074,5.34556106 L18.0015892,0.327942852 Z M14,31.6720571 L14,18 L0.327942852,18 L5.34715023,23.0192074 L0.00158917013,28.3647684 L3.63682073,32 L8.98238179,26.6544389 L14,31.6720571 Z",copy:{path:"M10.329 6.4h-3.33c-.95 0-1.72.77-1.72 1.72v.413h17.118V8.12c0-.941-.77-1.719-1.72-1.719h-3.31l-1.432-1.705a2.137 2.137 0 0 0-2.097-2.562 2.137 2.137 0 0 0-2.054 2.73L10.329 6.4zm12.808 4.267h1.4v8.557h-4.42l.111-4.188-5.981 6.064 5.805 6.264v-3.966h4.485v6.469H3.14v-19.2h19.997zm3.54 12.731v6.888c0 .947-.769 1.714-1.725 1.714H2.725C1.772 32 1 31.23 1 30.286V5.981c0-.947.768-1.714 1.725-1.714h6.834A4.273 4.273 0 0 1 13.839 0c2.363 0 4.279 1.91 4.279 4.267h6.834c.953 0 1.725.77 1.725 1.714v13.243H31v4.174h-4.323zM5.279 12.8h10.7v2.133h-10.7V12.8zm0 4.267h5.564V19.2H5.279v-2.133zm0 4.266h5.564v2.134H5.279v-2.134zm0 4.267h8.56v2.133h-8.56V25.6z",attrs:{fillRule:"evenodd"}},curved:"M3.314 25.007c-.398.852-1.427 1.228-2.298.84a1.68 1.68 0 0 1-.86-2.247c3.754-8.047 7.654-12.229 12.06-12.229 2.93 0 4.406 1.185 6.481 4.098l.098.137c1.413 1.984 2.054 2.507 3.318 2.507 2.293 0 4.562-2.814 6.495-8.918.283-.895 1.254-1.396 2.17-1.119.915.277 1.427 1.227 1.144 2.122-2.337 7.38-5.503 11.307-9.809 11.307-2.765 0-4.15-1.132-6.166-3.961l-.097-.137c-1.479-2.075-2.187-2.644-3.635-2.644-2.58 0-5.667 3.31-8.901 10.244z",csv:"M28 10.105v18.728A3.166 3.166 0 0 1 24.834 32H6.166A3.163 3.163 0 0 1 3 28.844V3.156A3.163 3.163 0 0 1 6.16 0h13.553V10.105H28zm-.215-1.684h-6.4V.311l6.4 8.11zM17 13v2h2v-2h-2zm0 4v2h2v-2h-2zm4-4v2h2v-2h-2zM7 13v2h7v-2H7zm14 4v2h2v-2h-2zM7 17v2h7v-2H7zm10 4v2h2v-2h-2zm4 0v2h2v-2h-2zM7 21v2h7v-2H7z",database:"M0 9.32V4.054S1.584 0 15.657 0C29.731 0 31.89 3.669 31.89 4.054v5.24s-1.445 4.125-15.424 4.125S0 10.138 0 9.32zm.305 12.93s2.044 3.692 15.727 3.692 15.63-3.72 15.63-3.72.338.099.338.632v5S30.463 32 15.964 32C1.465 32 .041 27.817.041 27.817V22.9c0-.582.264-.65.264-.65zm0-9.368s2.044 3.692 15.727 3.692 15.63-3.72 15.63-3.72.338.099.338.632v5.001s-1.537 4.145-16.036 4.145C1.465 22.632.041 18.45.041 18.45v-4.918c0-.583.264-.65.264-.65z",dash:"M0 13h32v6.61H0z",dashboard:"M32 28a4 4 0 0 1-4 4H4a4.002 4.002 0 0 1-3.874-3H0V4a4 4 0 0 1 4-4h25a3 3 0 0 1 3 3v25zm-4 0V8H4v20h24zM7.273 18.91h10.182v4.363H7.273v-4.364zm0-6.82h17.454v4.365H7.273V12.09zm13.09 6.82h4.364v4.363h-4.363v-4.364z",curve:"M3.033 3.791v22.211H31.09c.403 0 .882.872.882 1.59 0 .717-.48 1.408-.882 1.408H0V3.791c0-.403.875-.914 1.487-.914.612 0 1.546.511 1.546.914zm3.804 17.912C5.714 21.495 5 20.318 5 19.355c0-.963.831-2.296 1.837-2.296 2.093 0 2.965-1.207 4.204-5.242l.148-.482C12.798 6.077 14.18 3 17.968 3c3.792 0 5.17 3.08 6.765 8.343l.145.478c1.227 4.034 2.093 5.238 4.181 5.238 1.006 0 1.875 1.29 1.875 2.296 0 1.007-.898 2.184-1.875 2.348-3.656.612-6.004-2.364-7.665-7.821l-.146-.482c-1.14-3.76-1.8-6.754-3.28-6.754-1.483 0-2.147 2.995-3.297 6.754l-.148.486c-1.675 5.454-3.93 8.514-7.686 7.817z",document:"M29,10.1052632 L29,28.8325291 C29,30.581875 27.5842615,32 25.8337327,32 L7.16626728,32 C5.41758615,32 4,30.5837102 4,28.8441405 L4,3.15585953 C4,1.41292644 5.42339685,9.39605581e-15 7.15970573,8.42009882e-15 L20.713352,8.01767853e-16 L20.713352,8.42105263 L22.3846872,8.42105263 L22.3846872,0.310375032 L28.7849894,8.42105263 L20.713352,8.42105263 L20.713352,10.1052632 L29,10.1052632 Z M7.3426704,12.8000006 L25.7273576,12.8000006 L25.7273576,14.4842112 L7.3426704,14.4842112 L7.3426704,12.8000006 Z M7.3426704,17.3473687 L25.7273576,17.3473687 L25.7273576,19.0315793 L7.3426704,19.0315793 L7.3426704,17.3473687 Z M7.3426704,21.8947352 L25.7273576,21.8947352 L25.7273576,23.5789458 L7.3426704,23.5789458 L7.3426704,21.8947352 Z M7.43137255,26.2736849 L16.535014,26.2736849 L16.535014,27.9578954 L7.43137255,27.9578954 L7.43137255,26.2736849 Z",download:{path:"M26 0c7.264 0 13.323 5.164 14.704 12.022C47.004 12.384 52 17.609 52 24c0 6.627-5.373 12-12 12H12C5.373 36 0 30.627 0 24c0-6.391 4.997-11.616 11.297-11.98C12.677 5.164 18.736 0 26 0zm0 6a3 3 0 00-3 3v13.649l-5.232-5.511-.13-.128a2.409 2.409 0 00-3.406.128c-.976 1.028-.976 2.696 0 3.724l10 10.533.13.129a2.409 2.409 0 003.406-.129l10-10.533.122-.138c.852-1.034.812-2.602-.122-3.586l-.13-.128a2.409 2.409 0 00-3.406.128L29 22.649V9a3 3 0 00-3-3z",attrs:{viewBox:"0 0 52 32"}},edit_document:"M19.27 20.255l-5.642 2.173 1.75-6.085L28.108 3.45 32 7.363 19.27 20.255zM20.442 6.9l-2.044-2.049H4.79v23.29h18.711v-6.577l4.787-4.83V31a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h18.024a1 1 0 0 1 .711.297L23.85 3.45 20.442 6.9z",ellipsis:{path:"M26.1111111,19 C27.7066004,19 29,17.6568542 29,16 C29,14.3431458 27.7066004,13 26.1111111,13 C24.5156218,13 23.2222222,14.3431458 23.2222222,16 C23.2222222,17.6568542 24.5156218,19 26.1111111,19 Z M5.88888889,19 C7.48437817,19 8.77777778,17.6568542 8.77777778,16 C8.77777778,14.3431458 7.48437817,13 5.88888889,13 C4.29339961,13 3,14.3431458 3,16 C3,17.6568542 4.29339961,19 5.88888889,19 Z M16,19 C17.5954893,19 18.8888889,17.6568542 18.8888889,16 C18.8888889,14.3431458 17.5954893,13 16,13 C14.4045107,13 13.1111111,14.3431458 13.1111111,16 C13.1111111,17.6568542 14.4045107,19 16,19 Z",attrs:{width:32,height:32}},embed:"M12.734 9.333L6.099 16l6.635 6.667a2.547 2.547 0 0 1 0 3.59 2.518 2.518 0 0 1-3.573 0L.74 17.795a2.547 2.547 0 0 1 0-3.59L9.16 5.743a2.518 2.518 0 0 1 3.573 0 2.547 2.547 0 0 1 0 3.59zm6.527 13.339l6.64-6.71-6.63-6.623a2.547 2.547 0 0 1-.01-3.59 2.518 2.518 0 0 1 3.573-.01l8.42 8.412c.99.988.995 2.596.011 3.59l-8.42 8.51a2.518 2.518 0 0 1-3.574.01 2.547 2.547 0 0 1-.01-3.59z",empty:" ",enter_or_return:"M6.81 16.784l6.14-4.694a1.789 1.789 0 0 0 .341-2.49 1.748 1.748 0 0 0-2.464-.344L.697 17a1.788 1.788 0 0 0-.01 2.826l10.058 7.806c.77.598 1.875.452 2.467-.326a1.79 1.79 0 0 0-.323-2.492l-5.766-4.475h23.118c.971 0 1.759-.796 1.759-1.777V6.777C32 5.796 31.212 5 30.24 5c-.971 0-1.759.796-1.759 1.777v10.007H6.811z",expand:"M29,13.6720571 L29,8.26132482e-16 L15.3279429,8.64083276e-16 L20.3471502,5.01920738 L15.0015892,10.3647684 L18.6368207,14 L23.9823818,8.65443894 L29,13.6720571 Z M0.00158917013,15.3279429 L0.00158917013,29 L13.6736463,29 L8.65443894,23.9807926 L14,18.6352316 L10.3647684,15 L5.01920738,20.3455611 L0.00158917013,15.3279429 Z",expand_arrow:"M16.429 28.429L.429 5.57h32z",external:"M13.7780693,4.44451732 L5.1588494,4.44451732 C2.32615959,4.44451732 0,6.75504816 0,9.60367661 L0,25.1192379 C0,27.9699171 2.30950226,30.2783972 5.1588494,30.2783972 L18.9527718,30.2783972 C21.7854617,30.2783972 24.1116212,27.9678664 24.1116212,25.1192379 L24.1116212,19.9448453 L20.6671039,19.9448453 L20.6671039,25.1192379 C20.6671039,26.0662085 19.882332,26.8338799 18.9527718,26.8338799 L5.1588494,26.8338799 C4.21204994,26.8338799 3.44451732,26.0677556 3.44451732,25.1192379 L3.44451732,9.60367661 C3.44451732,8.656706 4.22928927,7.88903464 5.1588494,7.88903464 L13.7780693,7.88903464 L13.7780693,4.44451732 L13.7780693,4.44451732 Z M30.9990919,14.455325 L30.9990919,1 L17.5437669,1 L22.4834088,5.93964193 L17.2225866,11.2004641 L20.8001918,14.7780693 L26.061014,9.51724709 L30.9990919,14.455325 L30.9990919,14.455325 L30.9990919,14.455325 Z",eye:"M30.622 18.49c-.549.769-1.46 1.86-2.737 3.273-1.276 1.414-2.564 2.614-3.866 3.602-2.297 1.757-4.963 2.635-8 2.635-3.062 0-5.741-.878-8.038-2.635-1.302-.988-2.59-2.188-3.866-3.602-1.276-1.413-2.188-2.504-2.737-3.272-.549-.769-.9-1.277-1.053-1.524-.433-.63-.433-1.276 0-1.934.128-.247.472-.755 1.034-1.524.561-.768 1.48-1.852 2.756-3.252 1.276-1.4 2.564-2.593 3.866-3.581C10.303 4.892 12.982 4 16.019 4c3.011 0 5.678.892 8 2.676 1.302.988 2.59 2.182 3.866 3.581 1.276 1.4 2.195 2.484 2.756 3.252.562.769.906 1.277 1.034 1.524.433.63.433 1.276 0 1.934-.153.247-.504.755-1.053 1.524zm-1.516-3.214c-.248.376-.248 1.089.034 1.499l-.11-.16-.088-.17a21.93 21.93 0 0 0-.784-1.121c-.483-.66-1.338-1.67-2.546-2.995-1.154-1.266-2.306-2.333-3.466-3.214-1.781-1.368-3.788-2.04-6.127-2.04-2.365 0-4.385.673-6.179 2.05-1.146.87-2.298 1.938-3.452 3.204-1.208 1.325-2.063 2.334-2.546 2.995a21.93 21.93 0 0 0-.784 1.12l-.075.145-.09.135c.249-.376.249-1.089-.033-1.499l.08.122c.105.17.432.644.941 1.356.466.653 1.313 1.666 2.517 3 1.152 1.275 2.3 2.346 3.451 3.22 1.752 1.339 3.773 2.001 6.17 2.001 2.37 0 4.379-.661 6.14-2.008 1.143-.867 2.291-1.938 3.443-3.214 1.204-1.333 2.05-2.346 2.517-2.999.509-.712.836-1.186.942-1.356l.045-.071zm-17.353 5.663C10.584 19.709 10 18.237 10 16.522c0-1.744.584-3.224 1.753-4.439 1.168-1.215 2.59-1.822 4.268-1.822 1.65 0 3.058.607 4.226 1.822C21.416 13.298 22 14.778 22 16.522c0 1.715-.584 3.187-1.753 4.417-1.168 1.229-2.577 1.844-4.226 1.844-1.677 0-3.1-.615-4.268-1.844zm6.265-2.12c.624-.655.906-1.368.906-2.297 0-.957-.281-1.67-.893-2.307-.592-.616-1.203-.879-2.01-.879-.84 0-1.462.266-2.052.88-.612.636-.893 1.35-.893 2.306 0 .929.282 1.642.906 2.298.59.62 1.207.887 2.039.887.8 0 1.405-.264 1.997-.887z",eye_crossed_out:"M21.775 3.183C20.007 2.393 18.082 2 16.017 2c-3.043 0-5.778.84-8.151 2.54-1.263.896-2.5 1.967-3.711 3.207-1.168 1.196-2.05 2.162-2.61 2.88-.457.582-.828 1.078-1.025 1.411-.305.451-.52.993-.52 1.607 0 .632.228 1.188.557 1.645.177.263.52.723.995 1.343.552.722 1.43 1.697 2.598 2.905.137.141.274.28.411.417l2.084-2.03c-.135-.134-.27-.27-.404-.41-1.152-1.19-1.933-2.067-2.378-2.65a30.87 30.87 0 0 1-.901-1.213l-.01-.016.033-.047.038-.069.014-.023.046-.07c.04-.06.095-.138.166-.236.142-.197.337-.452.586-.771.46-.587 1.249-1.46 2.4-2.64C7.344 8.646 8.45 7.693 9.552 6.912l.006-.005c1.848-1.325 3.984-1.998 6.46-1.998 1.236 0 2.388.17 3.463.51l2.295-2.236zm-5.093 4.962a6.109 6.109 0 0 0-.668-.036c-1.53 0-2.883.536-3.972 1.6-1.09 1.064-1.652 2.402-1.652 3.927 0 .207.01.41.031.61l6.26-6.1zm-1.583 10.95l6.453-6.29c.039.27.058.547.058.83 0 1.514-.566 2.841-1.646 3.908-1.083 1.07-2.426 1.619-3.95 1.619a6.1 6.1 0 0 1-.915-.068zm-2.78 2.707c1.133.373 2.363.562 3.698.562 2.482 0 4.606-.665 6.428-1.965l.004-.003c1.1-.78 2.204-1.737 3.31-2.88 1.152-1.192 1.933-2.068 2.378-2.65.506-.661.794-1.052.901-1.213l.01-.016-.025-.035-.046-.082-.014-.023a7.635 7.635 0 0 0-.212-.306 28.444 28.444 0 0 0-.586-.771c-.46-.587-1.249-1.46-2.4-2.64a29.152 29.152 0 0 0-.548-.545l2.085-2.031c.181.177.363.358.543.543 1.168 1.196 2.05 2.162 2.61 2.88.451.575.819 1.066 1.018 1.399.313.449.527.99.527 1.602 0 .633-.23 1.19-.55 1.65-.174.261-.52.726-1.002 1.355-.552.722-1.43 1.697-2.598 2.905-1.213 1.253-2.45 2.333-3.717 3.23-2.353 1.679-5.077 2.505-8.116 2.505-2.161 0-4.162-.412-5.98-1.246l2.282-2.225zM28.617 3L5 26.618l-2.121-2.122L26.496.88 28.617 3z",field:"M27 25v7H5V1h22v24zm-3 0H8v4h16v-4zm0-3v-4H8v4h16zM8 15h16v-4H8v4zm0-7h16V4H8v4z",fields:"M0,0 L7.51851852,0 L7.51851852,3.2 L0,3.2 L0,0 Z M10.7407407,0 L18.2592593,0 L18.2592593,3.2 L10.7407407,3.2 L10.7407407,0 Z M21.4814815,0 L29,0 L29,3.2 L21.4814815,3.2 L21.4814815,0 Z M0,5.33333333 L7.51851852,5.33333333 L7.51851852,29.8666667 L3.85540334,32 L0,29.8666667 L0,5.33333333 Z M10.7407407,5.33333333 L18.2592593,5.33333333 L18.2592593,29.8666667 L14.5690136,32 L10.7407407,29.8666667 L10.7407407,5.33333333 Z M21.4814815,5.33333333 L29,5.33333333 L29,29.8666667 L25.2114718,32 L21.4814815,29.8666667 L21.4814815,5.33333333 Z",filter:"M3.556 4h24.888a3.556 3.556 0 1 1 0 7.111H3.556a3.556 3.556 0 1 1 0-7.111zm4 11.556h16.888a2.222 2.222 0 1 1 0 4.444H7.556a2.222 2.222 0 0 1 0-4.444zM12 24.444h8a2.222 2.222 0 0 1 0 4.445h-8a2.222 2.222 0 0 1 0-4.445z",funnel:"M3.18586974,3.64621479 C2.93075885,3.28932022 3.08031197,3 3.5066208,3 L28.3780937,3 C28.9190521,3 29.0903676,3.34981042 28.7617813,3.77995708 L18.969764,16.5985181 L18.969764,24.3460671 C18.969764,24.8899179 18.5885804,25.5564176 18.133063,25.8254534 C18.133063,25.8254534 12.5698889,29.1260709 12.5673818,28.9963552 C12.4993555,25.4767507 12.5749031,16.7812673 12.5749031,16.7812673 L3.18586974,3.64621479 Z",funnel_add:"M22.5185184,5.27947653 L17.2510286,5.27947653 L17.2510286,9.50305775 L22.5185184,9.50305775 L22.5185184,14.7825343 L26.7325102,14.7825343 L26.7325102,9.50305775 L32,9.50305775 L32,5.27947653 L26.7325102,5.27947653 L26.7325102,0 L22.5185184,0 L22.5185184,5.27947653 Z M14.9369872,0.791920724 C14.9369872,0.791920724 2.77552871,0.83493892 1.86648164,0.83493892 C0.957434558,0.83493892 0.45215388,1.50534608 0.284450368,1.77831828 C0.116746855,2.05129048 -0.317642562,2.91298361 0.398382661,3.9688628 C1.11440788,5.024742 9.74577378,17.8573356 9.74577378,17.8573356 C9.74577378,17.8573356 9.74577394,28.8183645 9.74577378,29.6867194 C9.74577362,30.5550744 9.83306175,31.1834301 10.7557323,31.6997692 C11.6784029,32.2161084 12.4343349,31.9564284 12.7764933,31.7333621 C13.1186517,31.5102958 19.6904355,27.7639669 20.095528,27.4682772 C20.5006204,27.1725875 20.7969652,26.5522071 20.7969651,25.7441659 C20.7969649,24.9361247 20.7969651,18.2224765 20.7969651,18.2224765 L21.6163131,16.9859755 L18.152048,15.0670739 C18.152048,15.0670739 17.3822517,16.199685 17.2562629,16.4000338 C17.1302741,16.6003826 16.8393552,16.9992676 16.8393551,17.7062886 C16.8393549,18.4133095 16.8393551,24.9049733 16.8393551,24.9049733 L13.7519708,26.8089871 C13.7519708,26.8089871 13.7318369,18.3502323 13.7318367,17.820601 C13.7318366,17.2909696 13.8484216,16.6759061 13.2410236,15.87149 C12.6336257,15.0670739 5.59381579,4.76288686 5.59381579,4.76288686 L14.9359238,4.76288686 L14.9369872,0.791920724 Z",funnel_outline:{path:"M3.186 3.646C2.93 3.29 3.08 3 3.506 3h24.872c.541 0 .712.35.384.78L18.97 16.599v7.747c0 .544-.381 1.21-.837 1.48 0 0-5.563 3.3-5.566 3.17-.068-3.52.008-12.215.008-12.215L3.185 3.646z",attrs:{stroke:"currentcolor",strokeWidth:"4",fill:"none",fillRule:"evenodd"}},folder:"M0 5l.01 21.658a2 2 0 0 0 2 1.999H30a2 2 0 0 0 2-2V7.705a2 2 0 0 0-2-2H17.51a1 1 0 0 1-.924-.615l-.614-1.474A1 1 0 0 0 15.049 3H1.999a2 2 0 0 0-2 2z",gauge:"M5.197 29.803A15.958 15.958 0 0 1 0 18C0 9.163 7.163 2 16 2s16 7.163 16 16a15.96 15.96 0 0 1-5.344 11.936L22.983 26.5A10.978 10.978 0 0 0 27 18c0-6.075-4.925-11-11-11S5 11.925 5 18c0 3.292 1.446 6.246 3.738 8.262l-3.54 3.54zM13 21.25a3.774 3.774 0 0 1 1.122-5.975L23 11l-4.34 9.347a3.455 3.455 0 0 1-5.66.903z",gear:"M12.088.996c0-.55.441-.996 1.006-.996h6.189c.555 0 1.005.452 1.005 1.007V3.53c0 .556.375 1.235.848 1.524l1.806 1.102c.468.286 1.252.328 1.748.095l2.756-1.292a1.125 1.125 0 0 1 1.417.432l2.979 4.93a1.063 1.063 0 0 1-.307 1.408l-2.147 1.445c-.455.306-.823 1.011-.823 1.55v2.6c0 .55.353 1.278.774 1.614l2.279 1.818c.428.341.512.976.181 1.43l-3.211 4.394c-.328.448-.992.588-1.463.324l-2.27-1.272c-.48-.27-1.238-.242-1.709.071l-2.019 1.344c-.463.309-.839 1.013-.839 1.556v2.4c0 .55-.44.997-1.005.997h-6.19a1.006 1.006 0 0 1-1.005-.997v-2.4c0-.55-.372-1.26-.823-1.58l-1.829-1.295c-.454-.322-1.198-.35-1.664-.06l-2.9 1.808a.985.985 0 0 1-1.361-.325L.309 21.923a1.03 1.03 0 0 1 .318-1.393l2.566-1.666c.463-.3.838-.99.838-1.539v-2.494c0-.55-.391-1.226-.86-1.503L.485 11.74a.99.99 0 0 1-.35-1.36l3.14-5.236c.28-.47.907-.646 1.393-.397l3.308 1.7c.488.25 1.23.175 1.666-.178l1.665-1.345c.432-.348.781-1.074.781-1.627V.996zM16.002 22c3.33 0 6.028-2.686 6.028-6s-2.699-6-6.028-6c-3.329 0-6.027 2.686-6.027 6s2.698 6 6.027 6z",grabber:"M0,5 L32,5 L32,9.26666667 L0,9.26666667 L0,5 Z M0,13.5333333 L32,13.5333333 L32,17.8 L0,17.8 L0,13.5333333 Z M0,22.0666667 L32,22.0666667 L32,26.3333333 L0,26.3333333 L0,22.0666667 Z",grabber2:"M9.692 7.385a3.692 3.692 0 1 1 0-7.385 3.692 3.692 0 0 1 0 7.385zm0 12.307a3.692 3.692 0 1 1 0-7.384 3.692 3.692 0 0 1 0 7.384zM22 7.385A3.692 3.692 0 1 1 22 0a3.692 3.692 0 0 1 0 7.385zm0 12.307a3.692 3.692 0 1 1 0-7.384 3.692 3.692 0 0 1 0 7.384zM9.692 32a3.692 3.692 0 1 1 0-7.385 3.692 3.692 0 0 1 0 7.385zM22 32a3.692 3.692 0 1 1 0-7.385A3.692 3.692 0 0 1 22 32z",grid:"M2 2 L10 2 L10 10 L2 10z M12 2 L20 2 L20 10 L12 10z M22 2 L30 2 L30 10 L22 10z M2 12 L10 12 L10 20 L2 20z M12 12 L20 12 L20 20 L12 20z M22 12 L30 12 L30 20 L22 20z M2 22 L10 22 L10 30 L2 30z M12 22 L20 22 L20 30 L12 30z M22 22 L30 22 L30 30 L22 30z",group:"M11.044 4.805c4.38-.157 6.166 3.841 6.166 6.134s-1.132 5.67-3.048 7.412c-.424.385-.345 2.822.58 3.218 1.938.83 7.242 2.51 7.443 5.971.224 3.853-6.733 4.244-11.023 4.244S0 31.26 0 28.024c0-1.501.15-2.489 2.625-4.16 2.474-1.67 4.36-2.08 4.77-2.333.412-.254 1.17-1.574.677-3.048 0 0-2.973-3.248-2.973-6.824 0-3.577 1.566-6.698 5.945-6.854zm5.554-.51S17.686 1 21.591 1c3.905 0 5.502 3.217 5.502 5.87s-1.023 5.356-2.623 6.946c-.18.178-.408 1.742.302 2.09.71.347 7.228 2.274 7.228 5.74s-4.39 3.524-7.698 3.856c0 0-.639-3.165-7.78-5.943 0 0 3.315-3.944 3.165-8.697-.151-4.754-3.089-6.568-3.089-6.568z",google:{svg:'<g fill="none" fill-rule="evenodd"><path d="M16 32c4.32 0 7.947-1.422 10.596-3.876l-5.05-3.91c-1.35.942-3.164 1.6-5.546 1.6-4.231 0-7.822-2.792-9.102-6.65l-5.174 4.018C4.356 28.41 9.742 32 16 32z" fill="#34A853"/><path d="M6.898 19.164A9.85 9.85 0 0 1 6.364 16c0-1.102.196-2.169.516-3.164L1.707 8.818A16.014 16.014 0 0 0 0 16c0 2.578.622 5.013 1.707 7.182l5.19-4.018z" fill="#FBBC05"/><path d="M31.36 16.356c0-1.316-.107-2.276-.338-3.272H16v5.938h8.818c-.178 1.476-1.138 3.698-3.271 5.191l5.049 3.911c3.022-2.79 4.764-6.897 4.764-11.768z" fill="#4285F4"/><path d="M16 6.187c3.004 0 5.031 1.297 6.187 2.382l4.515-4.409C23.93 1.582 20.32 0 16 0 9.742 0 4.338 3.591 1.707 8.818l5.173 4.018c1.298-3.858 4.889-6.65 9.12-6.65z" fill="#EA4335"/></g>'},history:{path:"M4.03074198,15 C4.54693838,6.62927028 11.4992947,0 20,0 C28.836556,0 36,7.163444 36,16 C36,24.836556 28.836556,32 20,32 C16.9814511,32 14.1581361,31.164104 11.7489039,29.7111608 L14.1120194,26.4586113 C15.8515127,27.4400159 17.8603607,28 20,28 C26.627417,28 32,22.627417 32,16 C32,9.372583 26.627417,4 20,4 C13.7093362,4 8.54922468,8.84046948 8.04107378,15 L11,15 L6,22 L1.34313965,15 L4.03074198,15 Z M22,15.2218254 L24.5913352,17.8131606 L24.5913352,17.8131606 C25.3723838,18.5942092 25.3723838,19.8605392 24.5913352,20.6415878 C23.8176686,21.4152544 22.5633071,21.4152544 21.7896404,20.6415878 C21.7852062,20.6371536 21.7807931,20.6326983 21.7764012,20.6282222 L18.8194549,17.6145768 C18.3226272,17.2506894 18,16.6630215 18,16 L18,10 C18,8.8954305 18.8954305,8 20,8 C21.1045695,8 22,8.8954305 22,10 L22,15.2218254 Z",attrs:{viewBox:"0 0 36 33"}},info:"M16 0 A16 16 0 0 1 16 32 A16 16 0 0 1 16 0 M19 15 L13 15 L13 26 L19 26 z M16 6 A3 3 0 0 0 16 12 A3 3 0 0 0 16 6",info_outline:"M16 29c7.18 0 13-5.82 13-13S23.18 3 16 3 3 8.82 3 16s5.82 13 13 13zm0 3C7.163 32 0 24.837 0 16S7.163 0 16 0s16 7.163 16 16-7.163 16-16 16zm1.697-20h-4.185v14h4.185V12zm.432-3.834c0-.342-.067-.661-.203-.958a2.527 2.527 0 0 0-1.37-1.31 2.613 2.613 0 0 0-.992-.188c-.342 0-.661.062-.959.189a2.529 2.529 0 0 0-1.33 1.309c-.13.297-.195.616-.195.958 0 .334.065.646.196.939.13.292.31.549.54.77.23.22.492.395.79.526.297.13.616.196.958.196.351 0 .682-.066.992-.196.31-.13.583-.306.817-.527a2.47 2.47 0 0 0 .553-.77c.136-.292.203-.604.203-.938z",insight:"M12.6325203 19.3674797 0 16 12.6325203 12.6325203 16 0 19.3674797 12.6325203 32 16 19.3674797 19.3674797 16 32z",int:{path:"M15.141,15.512 L14.294,20 L13.051,20 C12.8309989,20 12.6403341,19.9120009 12.479,19.736 C12.3176659,19.5599991 12.237,19.343668 12.237,19.087 C12.237,19.0503332 12.2388333,19.0155002 12.2425,18.9825 C12.2461667,18.9494998 12.2516666,18.9146668 12.259,18.878 L12.908,15.512 L10.653,15.512 L10.015,19.01 C9.94899967,19.3620018 9.79866784,19.6149992 9.564,19.769 C9.32933216,19.9230008 9.06900143,20 8.783,20 L7.584,20 L8.42,15.512 L7.155,15.512 C6.92033216,15.512 6.74066729,15.4551672 6.616,15.3415 C6.49133271,15.2278328 6.429,15.0390013 6.429,14.775 C6.429,14.6723328 6.43999989,14.5550007 6.462,14.423 L6.605,13.554 L8.695,13.554 L9.267,10.518 L6.913,10.518 L7.122,9.385 C7.17333359,9.10633194 7.28699912,8.89916734 7.463,8.7635 C7.63900088,8.62783266 7.92499802,8.56 8.321,8.56 L9.542,8.56 L10.224,5.018 C10.282667,4.7246652 10.4183323,4.49733414 10.631,4.336 C10.8436677,4.17466586 11.0929986,4.094 11.379,4.094 L12.611,4.094 L11.775,8.56 L14.019,8.56 L14.866,4.094 L16.076,4.094 C16.3326679,4.094 16.5416659,4.1673326 16.703,4.314 C16.8643341,4.4606674 16.945,4.64766553 16.945,4.875 C16.945,4.9483337 16.9413334,5.00333315 16.934,5.04 L16.252,8.56 L18.485,8.56 L18.276,9.693 C18.2246664,9.97166806 18.1091676,10.1788327 17.9295,10.3145 C17.7498324,10.4501673 17.4656686,10.518 17.077,10.518 L15.977,10.518 L15.416,13.554 L16.978,13.554 C17.2126678,13.554 17.3904994,13.6108328 17.5115,13.7245 C17.6325006,13.8381672 17.693,14.0306653 17.693,14.302 C17.693,14.4046672 17.6820001,14.5219993 17.66,14.654 L17.528,15.512 L15.141,15.512 Z M10.928,13.554 L13.183,13.554 L13.744,10.518 L11.5,10.518 L10.928,13.554 Z",attrs:{viewBox:"0 0 24 24"}},io:"M1,9 L6,9 L6,24 L1,24 L1,9 Z M31,16 C31,11.581722 27.418278,8 23,8 C18.581722,8 15,11.581722 15,16 C15,20.418278 18.581722,24 23,24 C27.418278,24 31,20.418278 31,16 Z M19,16 C19,13.790861 20.790861,12 23,12 C25.209139,12 27,13.790861 27,16 C27,18.209139 25.209139,20 23,20 C20.790861,20 19,18.209139 19,16 Z M15.3815029,9 L13.4537572,9 L7,23.5 L8.92774566,23.5 L15.3815029,9 Z",join_full_outer:"M16.044 7.903A9.955 9.955 0 0 1 22 5.936c5.523 0 10 4.477 10 10s-4.477 10-10 10a9.955 9.955 0 0 1-5.903-1.928l-.097.065-.051-.034A9.955 9.955 0 0 1 10 26C4.477 26 0 21.523 0 16S4.477 6 10 6c2.211 0 4.255.718 5.911 1.933l.089-.06.044.03zm0 0l-.087.064-.046-.034-.25.168c-2.648 1.78-4.261 4.695-4.261 7.872 0 3.177 1.613 6.092 4.262 7.873l.287.193.094-.07.054.04.241-.163c2.649-1.781 4.262-4.696 4.262-7.873 0-3.177-1.613-6.091-4.262-7.872l-.294-.198zm-3.444 8.07c0-2.643 1.276-5.08 3.4-6.657 2.124 1.578 3.4 4.014 3.4 6.657 0 2.644-1.276 5.08-3.4 6.658-2.124-1.578-3.4-4.014-3.4-6.658z",join_inner:"M14.923 7.148c-.427.315-.826.66-1.195 1.03a8.865 8.865 0 0 0-3.546-.734C5.35 7.444 1.444 11.28 1.444 16c0 4.72 3.906 8.556 8.738 8.556 1.547 0 2.999-.393 4.258-1.083.26.217.533.423.816.616l.454.31A10.268 10.268 0 0 1 10.182 26C4.559 26 0 21.523 0 16S4.559 6 10.182 6c1.712 0 3.325.415 4.74 1.148zm1.879 0c.434.315.84.66 1.217 1.03a9.172 9.172 0 0 1 3.611-.734c4.921 0 8.9 3.836 8.9 8.556 0 4.72-3.979 8.556-8.9 8.556a9.137 9.137 0 0 1-4.337-1.083c-.265.217-.543.423-.83.616L16 24.4A10.6 10.6 0 0 0 21.63 26C27.357 26 32 21.523 32 16S27.357 6 21.63 6c-1.743 0-3.386.415-4.828 1.148zM16 8c2.418 1.651 4 4.395 4 7.5 0 3.105-1.582 5.849-4 7.5-2.418-1.651-4-4.395-4-7.5 0-3.105 1.582-5.849 4-7.5z",join_left_outer:"M17.077 7.148A10.285 10.285 0 0 1 21.818 6C27.441 6 32 10.477 32 16s-4.559 10-10.182 10c-2.038 0-3.936-.588-5.528-1.6l.454-.31c.283-.194.555-.4.816-.617a8.842 8.842 0 0 0 4.258 1.083c4.832 0 8.738-3.836 8.738-8.556 0-4.72-3.906-8.556-8.738-8.556a8.865 8.865 0 0 0-3.546.733 10.65 10.65 0 0 0-1.195-1.03zM15.71 24.399A10.268 10.268 0 0 1 10.182 26C4.559 26 0 21.523 0 16S4.559 6 10.182 6c1.712 0 3.325.415 4.74 1.148-2.643 1.957-4.241 5.022-4.241 8.352 0 3.468 1.733 6.649 4.575 8.59l.454.31zM16 8c2.418 1.651 4 4.395 4 7.5 0 3.105-1.582 5.849-4 7.5-2.418-1.651-4-4.395-4-7.5 0-3.105 1.582-5.849 4-7.5z",json:"M28 10.105v18.728A3.166 3.166 0 0 1 24.834 32H6.166A3.163 3.163 0 0 1 3 28.844V3.156A3.163 3.163 0 0 1 6.16 0h13.553V10.105H28zm-.215-1.684h-6.4V.311l6.4 8.11zM10.894 19.233v-.218c1.162-.13 1.79-.718 1.79-1.703v-1.394c0-.964.322-1.333 1.19-1.333h.3v-1.45h-.505c-2.03 0-2.885.766-2.885 2.55v1.094c0 1.005-.451 1.388-1.613 1.395v1.9c1.169.007 1.613.39 1.613 1.395v1.066c0 1.805.862 2.584 2.885 2.584h.506v-1.45h-.301c-.861 0-1.19-.361-1.19-1.332v-1.401c0-.992-.628-1.573-1.79-1.703zm8.184-.212v.22c-1.162.122-1.791.71-1.791 1.701v1.395c0 .964-.321 1.333-1.19 1.333h-.3v1.45h.505c2.03 0 2.892-.766 2.892-2.55v-1.094c0-1.012.444-1.388 1.607-1.395v-1.9c-1.17-.014-1.607-.39-1.607-1.395v-1.073c0-1.798-.861-2.577-2.892-2.577h-.505v1.449h.3c.862 0 1.19.362 1.19 1.326v1.408c0 .985.629 1.573 1.79 1.702z",key:{path:"M11.5035746,7.9975248 C10.8617389,5.26208051 13.0105798,1.44695394 16.9897081,1.44695394 C20.919315,1.44695394 23.1811258,5.37076315 22.2565255,8.42469226 C21.3223229,7.86427598 20.2283376,7.54198814 19.0589133,7.54198814 C17.3567818,7.54198814 15.8144729,8.22477622 14.6920713,9.33083544 C14.4930673,9.31165867 14.2913185,9.30184676 14.087273,9.30184676 C10.654935,9.30184676 7.87247532,12.0782325 7.87247532,15.5030779 C7.87247532,17.1058665 8.48187104,18.5666337 9.48208198,19.6672763 L8.98356958,20.658345 L9.19925633,22.7713505 L7.5350473,23.4587525 C7.37507672,23.5248284 7.30219953,23.707739 7.37031308,23.8681037 L7.95501877,25.2447188 L6.28291833,25.7863476 C6.10329817,25.8445303 6.01548404,26.0233452 6.06755757,26.1919683 L6.54426059,27.7356153 L5.02460911,28.2609385 C4.86686602,28.3154681 4.7743984,28.501653 4.83652351,28.6704172 L6.04508836,31.95351 C6.10987939,32.1295162 6.29662279,32.2151174 6.46814592,32.160881 L9.48965349,31.2054672 C9.66187554,31.1510098 9.86840241,30.9790422 9.95250524,30.8208731 L14.8228902,21.6613229 C15.8820565,21.5366928 16.8596786,21.1462953 17.6869404,20.558796 C17.5652123,20.567429 17.4424042,20.5718139 17.318643,20.5718139 C14.2753735,20.5718139 11.8083161,17.9204625 11.8083161,14.6498548 C11.8083161,12.518229 12.8562751,10.6496514 14.428709,9.60671162 C13.4433608,10.7041074 12.8441157,12.1538355 12.8441157,13.7432193 C12.8441157,16.9974306 15.3562245,19.6661883 18.5509945,19.9240384 L19.1273026,21.5699573 L20.7971002,22.8826221 L20.1355191,24.5572635 C20.0719252,24.7182369 20.1528753,24.8977207 20.3155476,24.9601226 L21.7119724,25.4957977 L20.9400489,27.0748531 C20.8571275,27.2444782 20.9247553,27.4318616 21.082226,27.5115385 L22.5237784,28.2409344 L21.8460256,29.6990003 C21.7756734,29.8503507 21.8453702,30.0462011 22.0099247,30.1187455 L25.2111237,31.5300046 C25.3827397,31.6056621 25.5740388,31.5307937 25.6541745,31.3697345 L27.0658228,28.5325576 C27.1462849,28.3708422 27.1660474,28.1028205 27.1106928,27.9324485 L23.8023823,17.7500271 C24.7201964,16.6692906 25.273711,15.270754 25.273711,13.7432193 C25.273711,12.0364592 24.582689,10.4907436 23.4645818,9.36943333 C25.0880384,5.38579616 22.187534,0 16.9897081,0 C12.1196563,0 9.42801686,4.46934651 10.0266074,7.9975248 L11.5035746,7.9975248 Z M19.0589133,14.7767578 C20.203026,14.7767578 21.1305126,13.8512959 21.1305126,12.7096808 C21.1305126,11.5680656 20.203026,10.6426037 19.0589133,10.6426037 C17.9148007,10.6426037 16.9873141,11.5680656 16.9873141,12.7096808 C16.9873141,13.8512959 17.9148007,14.7767578 19.0589133,14.7767578 Z",attrs:{fillRule:"evenodd"}},label:"M14.577 31.042a2.005 2.005 0 0 1-2.738-.733L1.707 12.759c-.277-.477-.298-1.265-.049-1.757L6.45 1.537C6.7 1.044 7.35.67 7.9.7l10.593.582c.551.03 1.22.44 1.498.921l10.132 17.55a2.002 2.002 0 0 1-.734 2.737l-14.812 8.552zm.215-22.763a3.016 3.016 0 1 0-5.224 3.016 3.016 3.016 0 0 0 5.224-3.016z",ldap:{path:"M1.006 3h13.702c.554 0 1.178.41 1.39.915l.363.874c.21.504.827.915 1.376.915h13.169c.54 0 .994.448.994 1.001v20.952a.99.99 0 0 1-.992 1H1.002c-.54 0-.993-.45-.993-1.005l-.01-23.646C0 3.446.45 3 1.007 3zM16.5 19.164c1.944 0 3.52-1.828 3.52-4.082 0-2.254-1.576-4.082-3.52-4.082-1.945 0-3.52 1.828-3.52 4.082 0 2.254 1.575 4.082 3.52 4.082zm6.5 4.665c0-1.872-1.157-3.521-2.913-4.484-.927.97-2.192 1.568-3.587 1.568s-2.66-.597-3.587-1.568C11.157 20.308 10 21.957 10 23.83h13z",attrs:{fillRule:"evenodd"}},lightbulb:"M16.1 11.594L18.756 8.9a1.03 1.03 0 0 1 1.446-.018c.404.39.412 1.03.018 1.43l-3.193 3.24v4.975c0 .559-.458 1.011-1.022 1.011a1.017 1.017 0 0 1-1.023-1.01v-5.17l-3.003-3.046c-.394-.4-.386-1.04.018-1.43a1.03 1.03 0 0 1 1.446.018l2.657 2.695zM11.03 28.815h9.938a1.01 1.01 0 1 1 0 2.02 376.72 376.72 0 0 0-2.964.002C18.005 31.857 16.767 32 16 32c-.767 0-1.993-.139-1.993-1.163H11.03a1.011 1.011 0 0 1 0-2.022zm0-3.033h9.938a1.011 1.011 0 0 1 0 2.022H11.03a1.011 1.011 0 1 1 0-2.022zM8.487 20.43A11.659 11.659 0 0 1 4.5 11.627C4.5 5.214 9.64 0 16 0s11.5 5.214 11.5 11.627c0 3.43-1.481 6.617-3.987 8.803v1.308c0 1.954-1.601 3.538-3.577 3.538h-7.872c-1.976 0-3.577-1.584-3.577-3.538V20.43zm2.469-1.915l.597.455v2.768c0 .279.23.505.511.505h7.872a.508.508 0 0 0 .51-.505V18.97l.598-.455a8.632 8.632 0 0 0 3.39-6.888c0-4.755-3.785-8.594-8.434-8.594-4.649 0-8.433 3.84-8.433 8.594a8.632 8.632 0 0 0 3.389 6.888z",link:"M12.56 17.04c-1.08 1.384-1.303 1.963 1.755 4.04 3.058 2.076 7.29.143 8.587-1.062 1.404-1.304 4.81-4.697 7.567-7.842 2.758-3.144 1.338-8.238-.715-9.987-5.531-4.71-9.5-.554-11.088.773-2.606 2.176-5.207 5.144-5.207 5.144s1.747-.36 2.784 0c1.036.36 2.102.926 2.102.926l4.003-3.969s2.367-1.907 4.575 0 .674 4.404 0 5.189c-.674.784-6.668 6.742-6.668 6.742s-1.52.811-2.37.811c-.85 0-2.582-.528-2.582-.932 0-.405-1.665-1.22-2.744.166zm7.88-2.08c1.08-1.384 1.303-1.963-1.755-4.04-3.058-2.076-7.29-.143-8.587 1.062-1.404 1.304-4.81 4.697-7.567 7.842-2.758 3.144-1.338 8.238.715 9.987 5.531 4.71 9.5.554 11.088-.773 2.606-2.176 5.207-5.144 5.207-5.144s-1.747.36-2.784 0a17.379 17.379 0 0 1-2.102-.926l-4.003 3.969s-2.367 1.907-4.575 0-.674-4.404 0-5.189c.674-.784 6.668-6.742 6.668-6.742s1.52-.811 2.37-.811c.85 0 2.582.528 2.582.932 0 .405 1.665 1.22 2.744-.166z",line:"M18.867 16.377l-3.074-3.184-.08.077-.002-.002.01-.01-.53-.528-.066-.07-.001.002-2.071-2.072L-.002 23.645l2.668 2.668 10.377-10.377 3.074 3.183.08-.076.001.003-.008.008.5.501.094.097.002-.001 2.072 2.072L31.912 8.669 29.244 6 18.867 16.377z",lineandbar:"M3.056 24.041h6.706v7.78H3.056v-7.78zm10.06-6.483h6.706v14.264h-6.707V17.558zm9.8-4.631h6.707v18.895h-6.706V12.927zm-11.812-1.582l-9.061 6.412L0 14.864l10.517-7.442 7.144 2.353L29.425 1l2.115 2.84-13.238 9.876-7.198-2.37z",list:"M3 8 A3 3 0 0 0 9 8 A3 3 0 0 0 3 8 M12 6 L28 6 L28 10 L12 10z M3 16 A3 3 0 0 0 9 16 A3 3 0 0 0 3 16 M12 14 L28 14 L28 18 L12 18z M3 24 A3 3 0 0 0 9 24 A3 3 0 0 0 3 24 M12 22 L28 22 L28 26 L12 26z",location:{path:"M19.4917776,13.9890373 C20.4445763,12.5611169 21,10.8454215 21,9 C21,4.02943725 16.9705627,0 12,0 C7.02943725,0 3,4.02943725 3,9 C3,10.8454215 3.5554237,12.5611168 4.50822232,13.9890371 L4.49999986,14.0000004 L4.58010869,14.0951296 C4.91305602,14.5790657 5.29212089,15.0288088 5.71096065,15.4380163 L12.5,23.5 L19.4999993,13.9999996 L19.4917776,13.9890373 L19.4917776,13.9890373 Z M12,12 C13.6568542,12 15,10.6568542 15,9 C15,7.34314575 13.6568542,6 12,6 C10.3431458,6 9,7.34314575 9,9 C9,10.6568542 10.3431458,12 12,12 Z",attrs:{viewBox:"0 0 24 24",fillRule:"evenodd"}},lock:{path:"M7.30894737,12.4444444 L4.91725192,12.4444444 C3.2943422,12.4444444 2,13.7457504 2,15.3509926 L2,29.0934518 C2,30.7017608 3.30609817,32 4.91725192,32 L27.0827481,32 C28.7056578,32 30,30.6986941 30,29.0934518 L30,15.3509926 C30,13.7426837 28.6939018,12.4444444 27.0827481,12.4444444 L24.6910526,12.4444444 L24.6910526,7.44176009 C24.6910526,3.33441301 21.3568185,0 17.2438323,0 L14.7561677,0 C10.6398254,0 7.30894737,3.33178948 7.30894737,7.44176009 L7.30894737,12.4444444 Z M10.8678947,8.21027479 C10.8678947,5.65010176 12.9450109,3.57467145 15.5045167,3.57467145 L16.4954833,3.57467145 C19.0562189,3.57467145 21.1321053,5.65531119 21.1321053,8.21027479 L21.1321053,12.8458781 L10.8678947,12.8458781 L10.8678947,8.21027479 Z M16,26.6666667 C17.9329966,26.6666667 19.5,25.0747902 19.5,23.1111111 C19.5,21.147432 17.9329966,19.5555556 16,19.5555556 C14.0670034,19.5555556 12.5,21.147432 12.5,23.1111111 C12.5,25.0747902 14.0670034,26.6666667 16,26.6666667 Z",attrs:{fillRule:"evenodd"}},lock_outline:"M7 12H5.546A3.548 3.548 0 0 0 2 15.553v12.894A3.547 3.547 0 0 0 5.546 32h20.908C28.414 32 30 30.41 30 28.447V15.553A3.547 3.547 0 0 0 26.454 12H25V8.99C25 4.029 20.97 0 16 0c-4.972 0-9 4.025-9 8.99V12zm4-3.766c0-2.338 1.89-4.413 4.219-4.634L16 3.525l.781.075C19.111 3.82 21 5.896 21 8.234V12H11V8.234zm-5 9.537C6 16.793 6.796 16 7.775 16h16.45c.98 0 1.775.787 1.775 1.77v8.46c0 .977-.796 1.77-1.775 1.77H7.775A1.77 1.77 0 0 1 6 26.23v-8.46zM16 25a3 3 0 1 0 0-6 3 3 0 0 0 0 6z",mail:{path:"M36 0a6 6 0 016 6v20a6 6 0 01-6 6H6a6 6 0 01-6-6V6a6 6 0 016-6h30zm-3.292 5.473L21 15.38 9.292 5.473a2 2 0 10-2.584 3.054l13 11a2 2 0 002.584 0l13-11a2 2 0 10-2.584-3.054z",attrs:{viewBox:"0 0 42 32"}},moon:"M11.6291702,1.84239429e-11 C19.1234093,1.22958025 24.8413559,7.73631246 24.8413559,15.5785426 C24.8413559,24.2977683 17.7730269,31.3660972 9.05380131,31.3660972 C7.28632096,31.3660972 5.58667863,31.0756481 4,30.5398754 C11.5007933,28.2096945 16.9475786,21.2145715 16.9475786,12.9472835 C16.9475786,7.90001143 14.9174312,3.32690564 11.6291702,1.70246039e-11 L11.6291702,1.84239429e-11 Z",move:"M23 27h-8v-5h8v-4l8 6-8 7v-4zM17.266 0h.86a2 2 0 0 1 1.42.592L27.49 8.61a2 2 0 0 1 .58 1.407v6h-5.01v-5.065L17.133 5H0V2a2 2 0 0 1 2-2h15.266zM5 27h7v5H2a2 2 0 0 1-2-2V5h5v22z",notebook:"M10.105 15.023c0-1.048.859-1.898 1.905-1.898h18.085c1.052 0 1.905.855 1.905 1.898v2.954a1.905 1.905 0 0 1-1.905 1.898H12.01a1.905 1.905 0 0 1-1.905-1.898v-2.954zm0 10.125c0-1.048.844-1.898 1.901-1.898h6.304c1.05 0 1.9.855 1.9 1.898v2.954A1.895 1.895 0 0 1 18.31 30h-6.304c-1.05 0-1.9-.855-1.9-1.898v-2.954zM0 15.023a1.9 1.9 0 0 1 1.895-1.898h2.947a1.9 1.9 0 0 1 1.895 1.898v2.954a1.9 1.9 0 0 1-1.895 1.898H1.895A1.9 1.9 0 0 1 0 17.977v-2.954zm0 10.125a1.9 1.9 0 0 1 1.895-1.898h2.947a1.9 1.9 0 0 1 1.895 1.898v2.954A1.9 1.9 0 0 1 4.842 30H1.895A1.9 1.9 0 0 1 0 28.102v-2.954zm10.105-20.25c0-1.048.848-1.898 1.89-1.898h11.379c1.043 0 1.89.855 1.89 1.898v2.954a1.895 1.895 0 0 1-1.89 1.898h-11.38a1.897 1.897 0 0 1-1.889-1.898V4.898zM0 4.898A1.9 1.9 0 0 1 1.895 3h2.947a1.9 1.9 0 0 1 1.895 1.898v2.954A1.9 1.9 0 0 1 4.842 9.75H1.895A1.9 1.9 0 0 1 0 7.852V4.898z",number:"M0 .503A.5.5 0 0 1 .503 0h30.994A.5.5 0 0 1 32 .503v30.994a.5.5 0 0 1-.503.503H.503A.5.5 0 0 1 0 31.497V.503zM8.272 22V10.8H6.464c-.064.427-.197.784-.4 1.072-.203.288-.45.52-.744.696a2.984 2.984 0 0 1-.992.368c-.368.07-.75.099-1.144.088v1.712H6V22h2.272zm2.96-5.648c0 1.12.11 2.056.328 2.808.219.752.515 1.352.888 1.8.373.448.808.768 1.304.96a4.327 4.327 0 0 0 1.576.288c.565 0 1.096-.096 1.592-.288a3.243 3.243 0 0 0 1.312-.96c.379-.448.677-1.048.896-1.8.219-.752.328-1.688.328-2.808 0-1.088-.11-2.003-.328-2.744-.219-.741-.517-1.336-.896-1.784a3.243 3.243 0 0 0-1.312-.96 4.371 4.371 0 0 0-1.592-.288c-.555 0-1.08.096-1.576.288-.496.192-.93.512-1.304.96-.373.448-.67 1.043-.888 1.784-.219.741-.328 1.656-.328 2.744zm2.272 0c0-.192.003-.424.008-.696.005-.272.024-.552.056-.84.032-.288.085-.573.16-.856a2.95 2.95 0 0 1 .312-.76 1.67 1.67 0 0 1 .512-.544c.208-.139.467-.208.776-.208.31 0 .57.07.784.208.213.139.39.32.528.544.139.224.243.477.312.76a7.8 7.8 0 0 1 .224 1.696 25.247 25.247 0 0 1-.024 1.856c-.021.453-.088.89-.2 1.312a2.754 2.754 0 0 1-.544 1.08c-.25.299-.61.448-1.08.448-.459 0-.81-.15-1.056-.448a2.815 2.815 0 0 1-.536-1.08 6.233 6.233 0 0 1-.2-1.312c-.021-.453-.032-.84-.032-1.16zm6.624 0c0 1.12.11 2.056.328 2.808.219.752.515 1.352.888 1.8.373.448.808.768 1.304.96a4.327 4.327 0 0 0 1.576.288c.565 0 1.096-.096 1.592-.288a3.243 3.243 0 0 0 1.312-.96c.379-.448.677-1.048.896-1.8.219-.752.328-1.688.328-2.808 0-1.088-.11-2.003-.328-2.744-.219-.741-.517-1.336-.896-1.784a3.243 3.243 0 0 0-1.312-.96 4.371 4.371 0 0 0-1.592-.288c-.555 0-1.08.096-1.576.288-.496.192-.93.512-1.304.96-.373.448-.67 1.043-.888 1.784-.219.741-.328 1.656-.328 2.744zm2.272 0c0-.192.003-.424.008-.696.005-.272.024-.552.056-.84.032-.288.085-.573.16-.856a2.95 2.95 0 0 1 .312-.76 1.67 1.67 0 0 1 .512-.544c.208-.139.467-.208.776-.208.31 0 .57.07.784.208.213.139.39.32.528.544.139.224.243.477.312.76a7.8 7.8 0 0 1 .224 1.696 25.247 25.247 0 0 1-.024 1.856c-.021.453-.088.89-.2 1.312a2.754 2.754 0 0 1-.544 1.08c-.25.299-.61.448-1.08.448-.459 0-.81-.15-1.056-.448a2.815 2.815 0 0 1-.536-1.08 6.233 6.233 0 0 1-.2-1.312c-.021-.453-.032-.84-.032-1.16z",pencil:"M26.87 12.988L19.8 5.917l4.033-4.034a2 2 0 0 1 2.829 0l4.243 4.243a2 2 0 0 1 0 2.828l-4.034 4.034zm-1.414 1.414L10.65 29.21a3 3 0 0 1-1.468.807l-7.246 1.617a1 1 0 0 1-1.179-1.254l1.99-6.882a3 3 0 0 1 .761-1.288L18.385 7.331l7.071 7.071z",permissions_limited:"M0,16 C0,7.163444 7.163444,0 16,0 C24.836556,0 32,7.163444 32,16 C32,24.836556 24.836556,32 16,32 C7.163444,32 0,24.836556 0,16 Z M29,16 C29,8.82029825 23.1797017,3 16,3 C8.82029825,3 3,8.82029825 3,16 C3,23.1797017 8.82029825,29 16,29 C23.1797017,29 29,23.1797017 29,16 Z M16,5 C11.0100706,5.11743299 5.14533409,7.90852303 5,15.5 C4.85466591,23.091477 11.0100706,26.882567 16,27 L16,5 Z",person:"M16.068.005c5.181-.185 7.295 4.545 7.295 7.258s-1.34 6.71-3.607 8.77c-.5.456-.408 3.34.686 3.808 2.294.982 8.57 2.97 8.808 7.065.265 4.558-7.968 5.022-13.043 5.022-5.075 0-13.207-.62-13.207-4.45 0-1.776.178-2.944 3.106-4.92 2.927-1.978 5.16-2.462 5.645-2.763.486-.3 1.384-1.861.8-3.606 0 0-3.518-3.842-3.518-8.074 0-4.232 1.853-7.925 7.035-8.11z",pie:"M22.9192471,17.0666667 C22.9724214,16.7188743 23,16.3626578 23,16 C23,14.3667929 22.4406801,12.8642219 21.5031397,11.6733866 L28.0205298,5.44000778 C30.4977559,8.25762919 32,11.9533806 32,16 C32,16.3584305 31.988214,16.7141081 31.9650085,17.0666667 L22.9192471,17.0666667 Z M16,9 L16,-3.10862447e-15 C20.0533476,-3.55271368e-15 23.7546596,1.50724379 26.5740394,3.99183486 L20.2205338,10.4149697 C19.0471112,9.52684227 17.5850809,9 16,9 Z M13.8666667,9.33102327 C11.0439201,10.2332367 9,12.8779268 9,16 C9,19.8659932 12.1340068,23 16,23 C18.7129744,23 21.0654761,21.4566333 22.2274052,19.2 L31.679942,19.2 C30.197477,26.503169 23.7406653,32 16,32 C7.163444,32 -3.55271368e-15,24.836556 -3.55271368e-15,16 C-3.55271368e-15,7.88676941 6.03869982,1.18395273 13.8666667,0.140982757 L13.8666667,9.33102327 Z",pin:"M9.417 4.226A2.183 2.183 0 0 1 10.182 0h12.636a2.182 2.182 0 0 1 .765 4.226v9.003a2.183 2.183 0 0 1-.765 4.226H10.182a2.182 2.182 0 0 1-.765-4.226V4.226zm4.25 14.683h5.666L16.5 32l-2.833-13.09z",pinmap:"M13.4 18.987v8.746L15.533 32l2.134-4.25v-8.763a10.716 10.716 0 0 1-4.267 0zm2.133-1.92a8.533 8.533 0 1 0 0-17.067 8.533 8.533 0 0 0 0 17.067z",play:"M2 2.432v27.136a2 2 0 0 0 2.986 1.74L28.929 17.74a2 2 0 0 0 0-3.48L4.986.692A2 2 0 0 0 2 2.432z",popular:"M23.29 11.224l-7.067 7.067-2.658-2.752.007-.007-.386-.385-.126-.131-.003.002-1.789-1.79L.705 23.793A.994.994 0 0 0 .704 25.2l.896.897a1 1 0 0 0 1.408-.002l8.253-8.252 2.654 2.748.226-.218-.161.161 1.152 1.152c.64.64 1.668.636 2.304 0l8.158-8.159L32 19.933V5H17.067l6.223 6.224z",progress:{path:"M0 11.996A3.998 3.998 0 0 1 4.004 8h23.992A4 4 0 0 1 32 11.996v8.008A3.998 3.998 0 0 1 27.996 24H4.004A4 4 0 0 1 0 20.004v-8.008zM22 11h3.99A3.008 3.008 0 0 1 29 14v4c0 1.657-1.35 3-3.01 3H22V11z",attrs:{fillRule:"evenodd"}},pulse:"M16.9862306,27.387699 C17.4904976,29.2137955 20.0148505,29.3806482 20.7550803,27.6368095 L24.8588086,17.9692172 L31.7352165,17.9692172 L31.7352165,13.9692172 L23.5350474,13.9692172 C22.7324769,13.9692172 22.0076375,14.4489743 21.6940431,15.1877423 L19.314793,20.7927967 L14.8067319,4.4678059 C14.3010535,2.63659841 11.7668377,2.47581319 11.033781,4.22842821 L6.99549907,13.8832799 L0,13.8832799 L0,17.8832799 L8.32686781,17.8832799 C9.13327931,17.8832799 9.86080237,17.3989791 10.1719732,16.655022 L12.491241,11.1100437 L16.9862306,27.387699 Z",recents:"M15.689 17.292l-.689.344V6.992c0-.55.448-.992 1.001-.992h.907c.547 0 1.001.445 1.001.995v9.187l-.372.186 4.362 5.198a1.454 1.454 0 1 1-2.228 1.87L15 17.87l.689-.578zM16 32c8.837 0 16-7.163 16-16S24.837 0 16 0 0 7.163 0 16s7.163 16 16 16z",share:{path:"M13.714 8.96H9.143L16 0l6.857 8.96h-4.571v19.16h-4.572V8.96zM4.571 32.52a4 4 0 0 0 4 4H23.43a4 4 0 0 0 4-4V20.36a4 4 0 0 0-4-4h-.572v-4.48H28a4 4 0 0 1 4 4V37a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V15.88a4 4 0 0 1 4-4h5.143v4.48H8.57a4 4 0 0 0-4 4v12.16z",attrs:{fillRule:"evenodd",viewBox:"0 0 32 41"}},sql:{path:"M4,0 L28,0 C30.209139,-4.05812251e-16 32,1.790861 32,4 L32,28 C32,30.209139 30.209139,32 28,32 L4,32 C1.790861,32 2.705415e-16,30.209139 0,28 L0,4 L0,4 C-2.705415e-16,1.790861 1.790861,4.05812251e-16 4,0 L4,0 Z M6,6 C4.8954305,6 4,6.8954305 4,8 L4,26 C4,27.1045695 4.8954305,28 6,28 L26,28 C27.1045695,28 28,27.1045695 28,26 L28,8 C28,6.8954305 27.1045695,6 26,6 L6,6 Z M14,20 L25,20 L25,24 L14,24 L14,20 Z M14,13.5 L8,17 L8,10 L14,13.5 Z",attrs:{fillRule:"evenodd"}},straight:"M2.1 27.101L0 23.516 29.9 6 32 9.585z",stepped:"M13.946 17.892v8H1V22h9.054v-8h9V6H32v3.892h-9.054v8z",sort:"M14.615.683c.765-.926 2.002-.93 2.77 0L26.39 11.59c.765.927.419 1.678-.788 1.678H6.398c-1.2 0-1.557-.747-.788-1.678L14.615.683zm2.472 30.774c-.6.727-1.578.721-2.174 0l-9.602-11.63c-.6-.727-.303-1.316.645-1.316h20.088c.956 0 1.24.595.645 1.316l-9.602 11.63z",sum:"M3 27.41l1.984 4.422L27.895 32l.04-5.33-17.086-.125 8.296-9.457-.08-3.602L11.25 5.33H27.43V0H5.003L3.08 4.51l10.448 10.9z",sync:"M19.506 8.633a9.3 9.3 0 0 0-7.864-.534C6.81 9.966 4.395 15.422 6.251 20.285c1.855 4.863 7.276 7.292 12.11 5.425a9.332 9.332 0 0 0 3.72-2.622l4.746 3.101a14.935 14.935 0 0 1-6.451 4.805C12.643 33.98 3.968 30.094 1 22.313c-2.968-7.781.894-16.51 8.627-19.497 4.395-1.698 9.096-1.175 12.879 1.022L24.907 0 31 12.733H16.94l2.566-4.1z",question:"M16,32 C24.836556,32 32,24.836556 32,16 C32,7.163444 24.836556,0 16,0 C7.163444,0 0,7.163444 0,16 C0,24.836556 7.163444,32 16,32 L16,32 Z M16,29.0909091 C8.77009055,29.0909091 2.90909091,23.2299095 2.90909091,16 C2.90909091,8.77009055 8.77009055,2.90909091 16,2.90909091 C23.2299095,2.90909091 29.0909091,8.77009055 29.0909091,16 C29.0909091,23.2299095 23.2299095,29.0909091 16,29.0909091 Z M12,9.56020942 C12.2727286,9.34380346 12.5694087,9.1413622 12.8900491,8.95287958 C13.2106896,8.76439696 13.5552807,8.59860455 13.9238329,8.45549738 C14.2923851,8.31239021 14.6885728,8.20069848 15.1124079,8.12041885 C15.5362429,8.04013921 15.9950835,8 16.4889435,8 C17.1818216,8 17.8065083,8.08725916 18.3630221,8.2617801 C18.919536,8.43630105 19.3931184,8.68586225 19.7837838,9.0104712 C20.1744491,9.33508016 20.4748147,9.7260012 20.6848894,10.1832461 C20.8949642,10.6404909 21,11.1483393 21,11.7068063 C21,12.2373499 20.9226052,12.6963331 20.7678133,13.0837696 C20.6130213,13.4712061 20.4176916,13.8080265 20.1818182,14.0942408 C19.9459448,14.3804552 19.6861194,14.6282712 19.4023342,14.8376963 C19.1185489,15.0471215 18.8495099,15.2408368 18.5952088,15.4188482 C18.3409078,15.5968595 18.1197798,15.773123 17.9318182,15.947644 C17.7438566,16.1221649 17.6240789,16.3176254 17.5724816,16.5340314 L17.2628993,18 L14.9189189,18 L14.6756757,16.3141361 C14.6167073,15.9720751 14.653562,15.6736487 14.7862408,15.4188482 C14.9189196,15.1640476 15.1013502,14.9336834 15.3335381,14.7277487 C15.565726,14.521814 15.8255514,14.3263535 16.1130221,14.1413613 C16.4004928,13.9563691 16.6695319,13.7574182 16.9201474,13.5445026 C17.1707629,13.3315871 17.3826773,13.0942421 17.5558968,12.8324607 C17.7291163,12.5706793 17.8157248,12.2582915 17.8157248,11.895288 C17.8157248,11.4764377 17.6701489,11.1431077 17.3789926,10.895288 C17.0878364,10.6474682 16.6879632,10.5235602 16.1793612,10.5235602 C15.7886958,10.5235602 15.462532,10.5619542 15.20086,10.6387435 C14.9391879,10.7155327 14.7143744,10.8010466 14.5264128,10.895288 C14.3384511,10.9895293 14.1744479,11.0750432 14.034398,11.1518325 C13.8943482,11.2286217 13.7543005,11.2670157 13.6142506,11.2670157 C13.2972957,11.2670157 13.0614258,11.1378721 12.9066339,10.8795812 L12,9.56020942 Z M14,22 C14,21.7192968 14.0511359,21.4580909 14.1534091,21.2163743 C14.2556823,20.9746577 14.3958324,20.7641335 14.5738636,20.5847953 C14.7518948,20.4054572 14.96212,20.2631584 15.2045455,20.1578947 C15.4469709,20.0526311 15.7121198,20 16,20 C16.2803044,20 16.5416655,20.0526311 16.7840909,20.1578947 C17.0265164,20.2631584 17.2386355,20.4054572 17.4204545,20.5847953 C17.6022736,20.7641335 17.7443177,20.9746577 17.8465909,21.2163743 C17.9488641,21.4580909 18,21.7192968 18,22 C18,22.2807032 17.9488641,22.5438584 17.8465909,22.7894737 C17.7443177,23.0350889 17.6022736,23.2475625 17.4204545,23.4269006 C17.2386355,23.6062387 17.0265164,23.7465882 16.7840909,23.8479532 C16.5416655,23.9493182 16.2803044,24 16,24 C15.7121198,24 15.4469709,23.9493182 15.2045455,23.8479532 C14.96212,23.7465882 14.7518948,23.6062387 14.5738636,23.4269006 C14.3958324,23.2475625 14.2556823,23.0350889 14.1534091,22.7894737 C14.0511359,22.5438584 14,22.2807032 14,22 Z",return:"M15.3040432,11.8500793 C22.1434689,13.0450349 27.291257,18.2496116 27.291257,24.4890512 C27.291257,25.7084278 27.0946472,26.8882798 26.7272246,28.0064033 L26.7272246,28.0064033 C25.214579,22.4825472 20.8068367,18.2141694 15.3040432,17.0604596 L15.3040432,25.1841972 L4.70874296,14.5888969 L15.3040432,3.99359668 L15.3040432,3.99359668 L15.3040432,11.8500793 Z",reference:"M32 25h-5V7a2 2 0 0 0-2-2H7a2 2 0 1 0 0 4h16v23H4a4 4 0 0 1-4-4V6a6 6 0 0 1 6-6h22a4 4 0 0 1 4 4v21z",refresh:"M19.506 8.633a9.3 9.3 0 0 0-7.864-.534C6.81 9.966 4.395 15.422 6.251 20.285c1.855 4.863 7.276 7.292 12.11 5.425a9.332 9.332 0 0 0 3.72-2.622l4.746 3.101a14.935 14.935 0 0 1-6.451 4.805C12.643 33.98 3.968 30.094 1 22.313c-2.968-7.781.894-16.51 8.627-19.497 4.395-1.698 9.096-1.175 12.879 1.022L24.907 0 31 12.733H16.94l2.566-4.1z",ruler:"M0.595961814,24.9588734 C-0.196619577,24.166292 -0.200005392,22.8846495 0.593926984,22.0907171 L22.0908075,0.593836573 C22.8822651,-0.197621013 24.1641442,-0.198948234 24.9589638,0.595871404 L31.4040382,7.04094576 C32.1966196,7.83352715 32.2000054,9.11516967 31.406073,9.90910205 L9.90919246,31.4059826 C9.11773487,32.1974402 7.83585581,32.1987674 7.04103617,31.4039478 L0.595961814,24.9588734 Z M17.8319792,7.8001489 L16.3988585,9.23326963 L18.548673,11.3830842 C18.9443414,11.7787526 18.9470387,12.4175604 18.5485351,12.816064 C18.1527906,13.2118086 17.5140271,13.2146738 17.1155553,12.816202 L14.9657407,10.6663874 L13.5326229,12.0995052 L15.6824375,14.2493198 C16.0781059,14.6449881 16.0808032,15.283796 15.6822996,15.6822996 C15.286555,16.0780441 14.6477916,16.0809094 14.2493198,15.6824375 L12.0995052,13.5326229 L10.6663845,14.9657436 C10.6670858,14.9664411 10.6677865,14.9671398 10.6684864,14.9678397 L14.2470828,18.5464361 C14.6439866,18.9433399 14.6476854,19.5831493 14.2491818,19.9816529 C13.8534373,20.3773974 13.2188552,20.384444 12.813965,19.9795538 L9.23536867,16.4009575 C9.23466875,16.4002576 9.23397006,16.3995569 9.2332726,16.3988555 L7.80015186,17.8319762 L9.94996646,19.9817908 C10.3456348,20.3774592 10.3483321,21.016267 9.94982851,21.4147706 C9.55408397,21.8105152 8.91532053,21.8133804 8.51684869,21.4149086 L6.3670341,19.265094 L4.93391633,20.6982118 L7.08373093,22.8480263 C7.47939928,23.2436947 7.48209658,23.8825026 7.08359298,24.2810062 C6.68784844,24.6767507 6.049085,24.6796159 5.65061316,24.2811441 L3.50079857,22.1313295 L2.02673458,23.6053935 L8.47576453,30.0544235 L30.0544235,8.47576453 L23.6053935,2.02673458 L22.1313295,3.50079857 L24.2811441,5.65061316 C24.6768125,6.04628152 24.6795098,6.68508938 24.2810062,7.08359298 C23.8852616,7.47933752 23.2464982,7.48220276 22.8480263,7.08373093 L20.6982118,4.93391633 L19.2650911,6.36703697 C19.2657924,6.36773446 19.2664931,6.36843318 19.267193,6.36913314 L22.8457894,9.94772948 C23.2426932,10.3446333 23.246392,10.9844427 22.8478884,11.3829463 C22.4521439,11.7786908 21.8175617,11.7857374 21.4126716,11.3808472 L17.8340753,7.8022509 C17.8333753,7.80155099 17.8326767,7.80085032 17.8319792,7.8001489 Z",search:"M22.805 25.734c-5.582 4.178-13.543 3.718-18.632-1.37-5.58-5.581-5.595-14.615-.031-20.179 5.563-5.563 14.597-5.55 20.178.031 5.068 5.068 5.545 12.985 1.422 18.563l5.661 5.661a2.08 2.08 0 0 1 .003 2.949 2.085 2.085 0 0 1-2.95-.003l-5.651-5.652zm-1.486-4.371c3.895-3.895 3.885-10.218-.021-14.125-3.906-3.906-10.23-3.916-14.125-.021-3.894 3.894-3.885 10.218.022 14.124 3.906 3.907 10.23 3.916 14.124.022z",segment:"M2.99631547,14.0294075 L2.99631579,1.99517286 C2.99631582,0.893269315 3.89614282,0 4.98985651,0 L30.0064593,0 C31.1074614,0 32,0.895880847 32,2.00761243 L32,26.8688779 C32,27.9776516 31.1071386,28.8764903 30.0003242,28.8764903 L17.7266598,28.8764903 L17.7266594,14.0294075 L2.99631547,14.0294075 Z M-7.10651809e-15,16.9955967 L-7.10651809e-15,30.0075311 C-7.10651809e-15,31.1079413 0.900469916,32 2.00155906,32 L14.3949712,32 L14.3949712,16.9955967 L-7.10651809e-15,16.9955967 Z",smartscalar:"M9.806 9.347v13.016h-2.79V9.593L3.502 14.12a1.405 1.405 0 0 1-1.957.254 1.372 1.372 0 0 1-.256-1.937L7.418 4.54a1.404 1.404 0 0 1 2.219.008l6.08 7.953a1.372 1.372 0 0 1-.27 1.935c-.615.46-1.49.34-1.955-.268l-3.686-4.82zM24.806 23.016V13h-2.79v9.77l-3.514-4.527a1.405 1.405 0 0 0-1.957-.254 1.372 1.372 0 0 0-.256 1.937l6.129 7.897c.56.723 1.663.72 2.219-.008l6.08-7.953a1.372 1.372 0 0 0-.27-1.935 1.405 1.405 0 0 0-1.955.268l-3.686 4.82z",snippet:{path:"M1,2H8M1,5H9M1,8H6",attrs:{viewBox:"0 0 10 10",style:{strokeWidth:2,stroke:"currentcolor",strokeLinecap:"round"}}},star:"M16 0 L21 11 L32 12 L23 19 L26 31 L16 25 L6 31 L9 19 L0 12 L11 11",star_outline:"M16 21.935l5.967 3.14-1.14-6.653 4.828-4.712-6.671-.97L16 6.685l-2.984 6.053-6.67.971 4.827 4.712-1.14 6.654L16 21.935zm-9.892 8.547l1.89-11.029L0 11.647l11.053-1.609L16 0l4.947 10.038L32 11.647l-7.997 7.806 1.889 11.03L16 25.274l-9.892 5.207z",string:{path:"M14.022,18 L11.533,18 C11.2543319,18 11.0247509,17.935084 10.84425,17.80525 C10.6637491,17.675416 10.538667,17.5091677 10.469,17.3065 L9.652,14.8935 L4.389,14.8935 L3.572,17.3065 C3.50866635,17.4838342 3.38516758,17.6437493 3.2015,17.78625 C3.01783241,17.9287507 2.79300133,18 2.527,18 L0.019,18 L5.377,4.1585 L8.664,4.1585 L14.022,18 Z M5.13,12.7085 L8.911,12.7085 L7.638,8.918 C7.55566626,8.67733213 7.45908389,8.3939183 7.34825,8.06775 C7.23741611,7.7415817 7.12816721,7.3885019 7.0205,7.0085 C6.91916616,7.39483527 6.8146672,7.75266502 6.707,8.082 C6.5993328,8.41133498 6.49800047,8.69633213 6.403,8.937 L5.13,12.7085 Z M21.945,18 C21.6663319,18 21.4557507,17.9620004 21.31325,17.886 C21.1707493,17.8099996 21.0520005,17.6516679 20.957,17.411 L20.748,16.8695 C20.5009988,17.078501 20.2635011,17.2621659 20.0355,17.4205 C19.8074989,17.5788341 19.5715846,17.7134161 19.32775,17.82425 C19.0839154,17.9350839 18.8242514,18.0174164 18.54875,18.07125 C18.2732486,18.1250836 17.9676683,18.152 17.632,18.152 C17.1823311,18.152 16.7738352,18.0934173 16.4065,17.97625 C16.0391648,17.8590827 15.7272513,17.6865011 15.47075,17.4585 C15.2142487,17.2304989 15.016334,16.947085 14.877,16.60825 C14.737666,16.269415 14.668,15.8783355 14.668,15.435 C14.668,15.0866649 14.7566658,14.7288352 14.934,14.3615 C15.1113342,13.9941648 15.4184978,13.6600848 15.8555,13.35925 C16.2925022,13.0584152 16.8814963,12.8066677 17.6225,12.604 C18.3635037,12.4013323 19.297661,12.2873335 20.425,12.262 L20.425,11.844 C20.425,11.2676638 20.3062512,10.8512513 20.06875,10.59475 C19.8312488,10.3382487 19.4940022,10.21 19.057,10.21 C18.7086649,10.21 18.4236678,10.2479996 18.202,10.324 C17.9803322,10.4000004 17.7824175,10.4854995 17.60825,10.5805 C17.4340825,10.6755005 17.2646675,10.7609996 17.1,10.837 C16.9353325,10.9130004 16.7390011,10.951 16.511,10.951 C16.3083323,10.951 16.1357507,10.9019172 15.99325,10.80375 C15.8507493,10.7055828 15.7383337,10.5836674 15.656,10.438 L15.124,9.5165 C15.7193363,8.99083071 16.3795797,8.59975128 17.10475,8.34325 C17.8299203,8.08674872 18.6073292,7.9585 19.437,7.9585 C20.0323363,7.9585 20.5690809,8.05508237 21.04725,8.24825 C21.5254191,8.44141763 21.9307483,8.71058161 22.26325,9.05575 C22.5957517,9.40091839 22.8506658,9.81099763 23.028,10.286 C23.2053342,10.7610024 23.294,11.2803305 23.294,11.844 L23.294,18 L21.945,18 Z M18.563,16.2045 C18.9430019,16.2045 19.2754986,16.1380007 19.5605,16.005 C19.8455014,15.8719993 20.1336652,15.6566682 20.425,15.359 L20.425,13.991 C19.8359971,14.0163335 19.3515019,14.0669996 18.9715,14.143 C18.5914981,14.2190004 18.2906678,14.3139994 18.069,14.428 C17.8473322,14.5420006 17.6937504,14.6718326 17.60825,14.8175 C17.5227496,14.9631674 17.48,15.1214991 17.48,15.2925 C17.48,15.6281683 17.5718324,15.8640827 17.7555,16.00025 C17.9391676,16.1364173 18.2083316,16.2045 18.563,16.2045 L18.563,16.2045 Z",attrs:{viewBox:"0 0 24 24"}},sun:"M18.2857143,27.1999586 L18.2857143,29.7130168 C18.2857143,30.9760827 17.2711661,32 16,32 C14.7376349,32 13.7142857,30.9797942 13.7142857,29.7130168 L13.7142857,27.1999586 C14.4528227,27.3498737 15.2172209,27.4285714 16,27.4285714 C16.7827791,27.4285714 17.5471773,27.3498737 18.2857143,27.1999586 Z M13.7142857,4.80004141 L13.7142857,2.28698322 C13.7142857,1.02391726 14.7288339,0 16,0 C17.2623651,0 18.2857143,1.02020582 18.2857143,2.28698322 L18.2857143,4.80004141 C17.5471773,4.65012631 16.7827791,4.57142857 16,4.57142857 C15.2172209,4.57142857 14.4528227,4.65012631 13.7142857,4.80004141 Z M10.5518048,26.0488463 L8.93640145,27.9740091 C8.1245183,28.9415738 6.68916799,29.0738009 5.71539825,28.2567111 C4.74837044,27.4452784 4.62021518,26.0059593 5.43448399,25.0355515 L7.05102836,23.1090289 C8.00526005,24.3086326 9.1956215,25.3120077 10.5518048,26.0488463 Z M21.4481952,5.95115366 L23.0635986,4.02599087 C23.8754817,3.05842622 25.310832,2.92619908 26.2846018,3.74328891 C27.2516296,4.55472158 27.3797848,5.99404073 26.565516,6.96444852 L24.9489716,8.89097108 C23.9947399,7.69136735 22.8043785,6.68799226 21.4481952,5.95115366 Z M7.05102836,8.89097108 L5.43448399,6.96444852 C4.62260085,5.99688386 4.7416285,4.56037874 5.71539825,3.74328891 C6.68242605,2.93185624 8.12213263,3.05558308 8.93640145,4.02599087 L10.5518048,5.95115366 C9.1956215,6.68799226 8.00526005,7.69136735 7.05102836,8.89097108 Z M24.9489716,23.1090289 L26.565516,25.0355515 C27.3773992,26.0031161 27.2583715,27.4396213 26.2846018,28.2567111 C25.317574,29.0681438 23.8778674,28.9444169 23.0635986,27.9740091 L21.4481952,26.0488463 C22.8043785,25.3120077 23.9947399,24.3086326 24.9489716,23.1090289 Z M27.1999586,13.7142857 L29.7130168,13.7142857 C30.9760827,13.7142857 32,14.7288339 32,16 C32,17.2623651 30.9797942,18.2857143 29.7130168,18.2857143 L27.1999586,18.2857143 C27.3498737,17.5471773 27.4285714,16.7827791 27.4285714,16 C27.4285714,15.2172209 27.3498737,14.4528227 27.1999586,13.7142857 Z M4.80004141,18.2857143 L2.28698322,18.2857143 C1.02391726,18.2857143 2.7533531e-14,17.2711661 2.84217094e-14,16 C2.84217094e-14,14.7376349 1.02020582,13.7142857 2.28698322,13.7142857 L4.80004141,13.7142857 C4.65012631,14.4528227 4.57142857,15.2172209 4.57142857,16 C4.57142857,16.7827791 4.65012631,17.5471773 4.80004141,18.2857143 Z M16,22.8571429 C19.7870954,22.8571429 22.8571429,19.7870954 22.8571429,16 C22.8571429,12.2129046 19.7870954,9.14285714 16,9.14285714 C12.2129046,9.14285714 9.14285714,12.2129046 9.14285714,16 C9.14285714,19.7870954 12.2129046,22.8571429 16,22.8571429 Z",table:"M11.077 11.077h9.846v9.846h-9.846v-9.846zm11.077 11.077H32V32h-9.846v-9.846zm-11.077 0h9.846V32h-9.846v-9.846zM0 22.154h9.846V32H0v-9.846zM0 0h9.846v9.846H0V0zm0 11.077h9.846v9.846H0v-9.846zM22.154 0H32v9.846h-9.846V0zm0 11.077H32v9.846h-9.846v-9.846zM11.077 0h9.846v9.846h-9.846V0z",table2:"M1.6 0h28.8A1.6 1.6 0 0 1 32 1.6v28.8a1.6 1.6 0 0 1-1.6 1.6H1.6A1.6 1.6 0 0 1 0 30.4V1.6A1.6 1.6 0 0 1 1.6 0zm1.6 3.2v6.4h6.4V3.2H3.2zm9.6 0v6.4h16V3.2h-16zm-9.6 9.6v6.4h6.4v-6.4H3.2zm9.6 0v6.4h16v-6.4h-16zm-9.6 9.6v6.4h6.4v-6.4H3.2zm9.6 0v6.4h16v-6.4h-16z",table_spaced:"M0 0h7.784v7.784H0V0zm12.108 0h7.784v7.784h-7.784V0zm12.108 0H32v7.784h-7.784V0zM0 12.108h7.784v7.784H0v-7.784zm12.108 0h7.784v7.784h-7.784v-7.784zm12.108 0H32v7.784h-7.784v-7.784zM0 24.216h7.784V32H0v-7.784zm12.108 0h7.784V32h-7.784v-7.784zm12.108 0H32V32h-7.784v-7.784z",trash:"M4.31904507,29.7285487 C4.45843264,30.9830366 5.59537721,32 6.85726914,32 L20.5713023,32 C21.8337371,32 22.9701016,30.9833707 23.1095264,29.7285487 L25.1428571,11.4285714 L2.28571429,11.4285714 L4.31904507,29.7285487 L4.31904507,29.7285487 Z M6.85714286,4.57142857 L8.57142857,0 L18.8571429,0 L20.5714286,4.57142857 L25.1428571,4.57142857 C27.4285714,4.57142857 27.4285714,9.14285714 27.4285714,9.14285714 L13.7142857,9.14285714 L-1.0658141e-14,9.14285714 C-1.0658141e-14,9.14285714 -1.0658141e-14,4.57142857 2.28571429,4.57142857 L6.85714286,4.57142857 L6.85714286,4.57142857 Z M9.14285714,4.57142857 L18.2857143,4.57142857 L17.1428571,2.28571429 L10.2857143,2.28571429 L9.14285714,4.57142857 L9.14285714,4.57142857 Z",triangle_left:"M21,0 L5,16 L21,32 L21,5.47117907e-13 L21,0 Z",triangle_right:"M9,0 L25,16 L9,32 L9,5.47117907e-13 L9,0 Z",unarchive:"M18,7.95916837 L22.98085,7.97386236 L15.9779702,-0.00230793315 L9.02202984,7.93268248 L14,7.94736798 L14,22.8635899 L18,22.8635899 L18,7.95916837 Z M7,12.1176568 L0,12.1176568 L0,17.0882426 L3,17.0882426 L3,32 L29,32 L29,17.0882426 L32,17.0882426 L32,12.1176568 L25,12.1176568 L25,27.8341757 L7,27.8341757 L7,12.1176568 Z",unknown:"M16.5,26.5 C22.0228475,26.5 26.5,22.0228475 26.5,16.5 C26.5,10.9771525 22.0228475,6.5 16.5,6.5 C10.9771525,6.5 6.5,10.9771525 6.5,16.5 C6.5,22.0228475 10.9771525,26.5 16.5,26.5 L16.5,26.5 Z M16.5,23.5 C12.6340068,23.5 9.5,20.3659932 9.5,16.5 C9.5,12.6340068 12.6340068,9.5 16.5,9.5 C20.3659932,9.5 23.5,12.6340068 23.5,16.5 C23.5,20.3659932 20.3659932,23.5 16.5,23.5 L16.5,23.5 Z",variable:"M32,3.85760518 C32,5.35923081 31.5210404,6.55447236 30.5631068,7.4433657 C29.6051732,8.33225903 28.4358214,8.77669903 27.0550162,8.77669903 C26.2265331,8.77669903 25.4110072,8.67314019 24.6084142,8.46601942 C23.8058212,8.25889864 23.111114,8.05178097 22.5242718,7.84466019 C22.2481108,8.03452091 21.8425054,8.44875625 21.3074434,9.08737864 C20.7723814,9.72600104 20.1682882,10.5026923 19.4951456,11.4174757 C20.116508,14.0582656 20.6170423,15.9352695 20.9967638,17.0485437 C21.3764852,18.1618179 21.7389411,19.2880202 22.0841424,20.4271845 C22.3775635,21.3419679 22.8090586,22.0582498 23.3786408,22.5760518 C23.9482229,23.0938537 24.8457328,23.3527508 26.0711974,23.3527508 C26.5199591,23.3527508 27.0809028,23.2664518 27.7540453,23.0938511 C28.4271878,22.9212505 28.9795016,22.7486524 29.4110032,22.5760518 L28.8414239,24.9061489 C27.1326775,25.6310716 25.6397043,26.1574957 24.3624595,26.4854369 C23.0852148,26.8133781 21.9460676,26.9773463 20.9449838,26.9773463 C20.2200611,26.9773463 19.5037792,26.9083071 18.7961165,26.7702265 C18.0884539,26.632146 17.4412111,26.3818788 16.8543689,26.0194175 C16.2157465,25.6396961 15.6763776,25.1650514 15.236246,24.5954693 C14.7961143,24.0258871 14.4207135,23.2319361 14.1100324,22.2135922 C13.9029116,21.5749698 13.7130537,20.850058 13.5404531,20.038835 C13.3678524,19.2276119 13.1952544,18.51133 13.0226537,17.8899676 C12.5221118,18.6321504 12.1596559,19.1844642 11.9352751,19.5469256 C11.7108942,19.9093869 11.3829579,20.4185512 10.9514563,21.0744337 C9.5879112,23.1629015 8.4056145,24.6515597 7.40453074,25.5404531 C6.40344699,26.4293464 5.20389049,26.8737864 3.80582524,26.8737864 C2.75296129,26.8737864 1.85545139,26.5199604 1.11326861,25.8122977 C0.371085825,25.1046351 0,24.1812355 0,23.0420712 C0,21.5059254 0.478959612,20.2934241 1.4368932,19.4045307 C2.3948268,18.5156374 3.56417864,18.0711974 4.94498382,18.0711974 C5.77346693,18.0711974 6.56741799,18.1704413 7.32686084,18.368932 C8.08630369,18.5674228 8.80258563,18.7874853 9.47572816,19.0291262 C9.73462913,18.8220054 10.1359196,18.4164 10.6796117,17.8122977 C11.2233037,17.2081955 11.814452,16.4573939 12.4530744,15.5598706 C11.8834923,13.2470219 11.4174775,11.5037815 11.0550162,10.3300971 C10.6925548,9.15641269 10.321469,7.99137579 9.94174757,6.83495146 C9.63106641,5.90290796 9.18231146,5.18231107 8.59546926,4.67313916 C8.00862706,4.16396725 7.12837696,3.90938511 5.95469256,3.90938511 C5.43689061,3.90938511 4.85868712,3.99999909 4.22006472,4.18122977 C3.58144233,4.36246045 3.04638835,4.53074356 2.61488673,4.68608414 L3.18446602,2.35598706 C4.73787184,1.66558447 6.20927029,1.14779029 7.5987055,0.802588997 C8.98814071,0.457387702 10.1488627,0.284789644 11.0809061,0.284789644 C11.9266493,0.284789644 12.6515612,0.345198964 13.2556634,0.466019417 C13.8597657,0.586839871 14.4983785,0.845736958 15.171521,1.24271845 C15.7928834,1.62243987 16.3322523,2.10139948 16.789644,2.67961165 C17.2470357,3.25782382 17.6224365,4.04745994 17.9158576,5.04854369 C18.1229784,5.73894628 18.3128362,6.45522822 18.4854369,7.197411 C18.6580375,7.93959379 18.8047459,8.5782066 18.9255663,9.11326861 C19.2880277,8.56094654 19.6634285,7.99137294 20.0517799,7.40453074 C20.4401314,6.81768854 20.7723827,6.29989437 21.0485437,5.85113269 C22.3775687,3.76266485 23.5684953,2.2653767 24.6213592,1.3592233 C25.6742232,0.453069903 26.8651498,0 28.1941748,0 C29.2815588,0 30.1876986,0.358140971 30.9126214,1.07443366 C31.6375441,1.79072634 32,2.71844091 32,3.85760518 L32,3.85760518 Z",view_archive:{path:"M2.783 12.8h26.434V29H2.783V12.8zm6.956 3.4h12.522v2.6H9.739v-2.6zM0 4h32v6.4H0V4z",attrs:{fillRule:"evenodd"}},warning:{path:"M12.3069589,4.52260192 C14.3462632,1.2440969 17.653446,1.24541073 19.691933,4.52260192 L31.2249413,23.0637415 C33.2642456,26.3422466 31.7889628,29 27.9115531,29 L4.08733885,29 C0.218100769,29 -1.26453645,26.3409327 0.77395061,23.0637415 L12.3069589,4.52260192 Z M18.0499318,23.0163223 C18.0499772,23.0222378 18.05,23.0281606 18.05,23.0340907 C18.05,23.3266209 17.9947172,23.6030345 17.8840476,23.8612637 C17.7737568,24.1186089 17.6195847,24.3426723 17.4224081,24.5316332 C17.2266259,24.7192578 16.998292,24.8660439 16.7389806,24.9713892 C16.4782454,25.0773129 16.1979962,25.1301134 15.9,25.1301134 C15.5950083,25.1301134 15.3111795,25.0774024 15.0502239,24.9713892 C14.7901813,24.8657469 14.5629613,24.7183609 14.3703047,24.5298034 C14.177545,24.3411449 14.0258626,24.1177208 13.9159524,23.8612637 C13.8052827,23.6030345 13.75,23.3266209 13.75,23.0340907 C13.75,22.7411889 13.8054281,22.4661013 13.9165299,22.2109786 C14.0264627,21.9585404 14.1779817,21.7374046 14.3703047,21.5491736 C14.5621821,21.3613786 14.7883231,21.2126553 15.047143,21.1034656 C15.3089445,20.9930181 15.593871,20.938068 15.9,20.938068 C16.1991423,20.938068 16.4804862,20.9931136 16.7420615,21.1034656 C17.0001525,21.2123478 17.2274115,21.360472 17.4224081,21.5473437 C17.6191428,21.7358811 17.7731504,21.957652 17.88347,22.2109786 C17.9124619,22.2775526 17.9376628,22.3454862 17.9590769,22.414741 C18.0181943,22.5998533 18.05,22.7963729 18.05,23 C18.05,23.0054459 18.0499772,23.0108867 18.0499318,23.0163223 L18.0499318,23.0163223 Z M17.7477272,14.1749999 L17.7477272,8.75 L14.1170454,8.75 L14.1170454,14.1749999 C14.1170454,14.8471841 14.1572355,15.5139742 14.2376219,16.1753351 C14.3174838,16.8323805 14.4227217,17.5019113 14.5533248,18.1839498 L14.5921937,18.3869317 L17.272579,18.3869317 L17.3114479,18.1839498 C17.442051,17.5019113 17.5472889,16.8323805 17.6271507,16.1753351 C17.7075371,15.5139742 17.7477272,14.8471841 17.7477272,14.1749999 Z",attrs:{fillRule:"evenodd"}},zoom_in:"M12.416 12.454V8.37h3.256v4.083h4.07v3.266h-4.07v4.083h-3.256V15.72h-4.07v-3.266h4.07zm10.389 13.28c-5.582 4.178-13.543 3.718-18.632-1.37-5.58-5.581-5.595-14.615-.031-20.179 5.563-5.563 14.597-5.55 20.178.031 5.068 5.068 5.545 12.985 1.422 18.563l5.661 5.661a2.08 2.08 0 0 1 .003 2.949 2.085 2.085 0 0 1-2.95-.003l-5.651-5.652zm-1.486-4.371c3.895-3.895 3.885-10.218-.021-14.125-3.906-3.906-10.23-3.916-14.125-.021-3.894 3.894-3.885 10.218.022 14.124 3.906 3.907 10.23 3.916 14.124.022z",xlsx:"M28 10.105v18.728A3.166 3.166 0 0 1 24.834 32H6.166A3.163 3.163 0 0 1 3 28.844V3.156A3.163 3.163 0 0 1 6.16 0h13.553V10.105H28zm-.215-1.684h-6.4V.311l6.4 8.11zM9.446 25h2.427l2.796-3.37h.055L16.207 25h2.256l-2.18-4.888 4.32-4.976h-2.468l-2.769 3.343h-.054l-1.477-3.343h-2.256l2.18 4.874L9.447 25z",zoom_out:"M22.8048272,25.7342559 C17.2227958,29.9120922 9.26170192,29.4524812 4.17264358,24.3634229 C-1.40785877,18.7829205 -1.42162182,9.74890155 4.14190296,4.18537677 C9.70542774,-1.37814801 18.7394467,-1.36438497 24.319949,4.21611739 C29.3880584,9.28422669 29.8647559,17.2007749 25.7421403,22.7792454 L31.4029793,28.4400843 C32.2180024,29.2551074 32.2248604,30.569663 31.4056282,31.3888951 C30.5920681,32.2024552 29.2715215,32.2009502 28.4568175,31.3862462 L22.8048272,25.7342559 Z M21.3193717,21.3628455 C25.213839,17.4683781 25.2042049,11.1445649 21.2978532,7.23821321 C17.3915016,3.33186156 11.0676883,3.32222743 7.17322097,7.21669477 C3.27875362,11.1111621 3.28838776,17.4349754 7.1947394,21.341327 C11.1010911,25.2476787 17.4249043,25.2573128 21.3193717,21.3628455 Z M8.34528717,12.453545 L19.7423242,12.453545 L19.7423242,15.7197782 L8.34528717,15.7197782 L8.34528717,12.453545 Z",slack:{img:"app/assets/img/slack.png"}};function o(e){return e.split(" ").map(function(e){return Number(e)}).slice(2,4)}i.horizontal_bar={path:i.bar,attrs:{style:{transform:"rotate(90deg) scaleX(-1)"}}},i.arrow_right={path:i.arrow_left.path,attrs:a({},i.arrow_left.attrs,{style:{transform:"rotate(-180deg)"}})},i.join_right_outer={path:i.join_left_outer,attrs:{style:{transform:"rotate(-180deg)"}}},i.scalar=i.number},459:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enhanceRequestsReducer=t.requestsReducer=t.reducer=t.entities=void 0;var r=n(34),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(154));var i=Object.values(a),o=(0,r.combineEntities)(i),u=o.entities,l=o.reducer,s=o.requestsReducer;t.entities=u,t.reducer=l,t.requestsReducer=s,t.default=l;t.enhanceRequestsReducer=function(e){return function(t,n){return e(s(t,n),n)}};(window.Metabase=window.Metabase||{}).entities=u},460:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];"loading"!==document.readyState?x.apply(void 0,t):document.addEventListener("DOMContentLoaded",function(){return x.apply(void 0,t)})},n(808),n(830),n(831),n(832),n(476);var r=n(294);n(7),n(487);var a=n(28),i=w(n(631)),o=w(n(0)),u=w(n(15)),l=n(6),s=n(70),c=n(16),d=w(c),f=w(n(14)),p=w(n(64)),m=n(226),h=n(686),v=n(191),y=n(22),g=n(964),b=n(30),_=w(n(786)),E=n(346);function w(e){return e&&e.__esModule?e:{default:e}}var O=window.MetabaseRoot.replace(/\/+$/,"");p.default.basename=O;var S=(0,y.useRouterHistory)(g.createHistory)({basename:O}),C={space:[4,8,16,32,64,128]};function x(e,t,n){var p,g,w=this,O=(0,h.getStore)(e,S),x=t(O),k=(0,b.syncHistoryWithStore)(S,O),A=void 0;u.default.render(o.default.createElement(l.Provider,{store:O,ref:function(e){return A=e}},o.default.createElement(E.DragDropContextProvider,{backend:_.default,context:{window:window}},o.default.createElement(s.ThemeProvider,{theme:C},o.default.createElement(y.Router,{history:k},x)))),document.getElementById("root")),k.listen(function(e){d.default.trackPageView(e.pathname)}),(0,i.default)(),(0,m.initializeEmbedding)(O),(0,c.registerAnalyticsClickListener)(),O.dispatch((0,v.refreshSiteSettings)()),f.default.on("anon-tracking-enabled",function(){window["ga-disable-"+f.default.get("ga-code")]=!f.default.isTrackingEnabled()||null}),f.default.on("user-locale",(p=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,r.loadLocalization)(t),O.dispatch((0,v.refreshSiteSettings)({locale:t}))]);case 2:A.forceUpdate();case 3:case"end":return e.stop()}},e,w)}),g=function(){var e=p.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(e){return g.apply(this,arguments)})),a.PLUGIN_APP_INIT_FUCTIONS.forEach(function(e){return e({root:A})}),window.Metabase=window.Metabase||{},window.Metabase.store=O,window.Metabase.settings=f.default,n&&n(O)}},47:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractRemappings=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=m(["Visualization is null"],["Visualization is null"]),o=m(["Visualization must define an 'identifier' static variable: "],["Visualization must define an 'identifier' static variable: "]),u=m(["Visualization with that identifier is already registered: "],["Visualization with that identifier is already registered: "]),l=m(["No visualization for ",""],["No visualization for ",""]);t.getSensibleDisplays=function(e){return Array.from(h).filter(function(t){var n=a(t,2),r=n[1];return e.rows.length<=1||r.isSensible&&r.isSensible(e)}).map(function(e){var t=a(e,1),n=t[0];return n})},t.setDefaultVisualization=function(e){y=e},t.registerVisualization=function(e){if(null==e)throw new Error((0,c.t)(i));var t=e.identifier;if(null==t)throw new Error((0,c.t)(o)+e.name);if(h.has(t))throw new Error((0,c.t)(u)+e.name);h.set(t,e);var n=!0,r=!1,a=void 0;try{for(var l,s=(e.aliases||[])[Symbol.iterator]();!(n=(l=s.next()).done);n=!0){var d=l.value;v.set(d,e)}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}},t.getVisualizationRaw=g,t.getVisualizationTransformed=function(e){if(f.default.any(e,function(e){return null==e.data}))return g(e);var t=void 0,n=void 0;do{if(!(t=h.get(e[0].card.display)))throw new Error((0,c.t)(l,e[0].card.display));n=e,"function"==typeof t.transformSeries&&(e=t.transformSeries(e)),e!==n&&((e=[].concat(p(e)))._raw=n)}while(e!==n);return{series:e,visualization:t}},t.getIconForVisualizationType=function(e){var t=h.get(e);return t&&t.iconName};var s,c=n(1),d=n(3),f=(s=d)&&s.__esModule?s:{default:s};function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h=new Map,v=new Map;h.get=function(e){return Map.prototype.get.call(this,e)||v.get(e)||y};var y=void 0;function g(e){return{series:e,visualization:h.get(e[0].card.display)}}t.extractRemappings=function(e){return e.map(function(e){return r({},e,{data:e.data&&b(e.data)})})};var b=function(e){var t=e.cols.map(function(t){return r({},t,{remapped_from_index:t.remapped_from&&f.default.findIndex(e.cols,function(e){return e.name===t.remapped_from}),remapping:t.remapped_to&&new Map})}),n=e.rows.map(function(e,n){return e.filter(function(n,r){var a=t[r];return null==a.remapped_from||(t[a.remapped_from_index]&&t[a.remapped_from_index].remapping?(t[a.remapped_from_index].remapped_to_column=a,t[a.remapped_from_index].remapping.set(e[a.remapped_from_index],e[r]),!1):(console.warn("Invalid remapped_from",a),!0))})});return r({},e,{rows:n,cols:t.filter(function(e){return null==e.remapped_from})})};t.default=h},476:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.enableTranslatedStringReplacement=s;var r,a=n(0),i=(r=a)&&r.__esModule?r:{default:r},o=n(25);var u=new Set(["Count","CumulativeCount","Sum","CumulativeSum","Distinct","StandardDeviation","Average","Min","Max"]),l=function(e,t){return u.has(e)?t.toUpperCase():new Array(Math.ceil(t.length/2)+1).join("█")};function s(){var e=n(1),t=e.t,r=e.jt,a=e.ngettext;e.t=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return l(n[0][0],t.apply(void 0,n))},e.ngettext=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return l(t[0][0],a.apply(void 0,t))},e.jt=function(){var e=r.apply(void 0,arguments);return i.default.createElement("span",{style:{backgroundColor:"currentcolor"}},e)}}o.HAS_LOCAL_STORAGE&&window.localStorage["metabase-i18n-debug"]&&s()},485:function(e,t,n){e.exports=function(){return new Promise(function(e){n.e(1).then(function(t){e(n(1007))}.bind(null,n)).catch(n.oe)})}},486:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function a(e){for(var t=0,n=0;n<e.length;n++)t=Math.imul(31,t)+e.charCodeAt(n)|0;return t}t.deterministicAssign=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],o=arguments[4],u=new Set(e.slice().sort()),l=void 0,s=void 0,c=void 0,d=[t].concat(o||[]),f=-1,p=function(){f=(f+1)%d.length,c=d[f],l=new Set(c),s=new Set};p();var m={},h=function(e,t){m[e]=t,u.delete(e),l.has(t)&&s.add(t)},v=!0,y=!1,g=void 0;try{for(var b,_=Object.entries(n)[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var E=r(b.value,2),w=E[0],O=E[1];h(w,O)}}catch(e){y=!0,g=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw g}}if(i){var S=!0,C=!1,x=void 0;try{for(var k,A=u[Symbol.iterator]();!(S=(k=A.next()).done);S=!0){var T=k.value,P=i(T,c);void 0===P||s.has(P)||h(T,P)}}catch(e){C=!0,x=e}finally{try{!S&&A.return&&A.return()}finally{if(C)throw x}}}var j=0;for(;u.size>0;){l.size-s.size<=0&&p();var N=!0,M=!1,R=void 0;try{for(var D,L=u[Symbol.iterator]();!(N=(D=L.next()).done);N=!0){var I=D.value,F=Math.abs(a(I))+j,z=c[F%c.length];s.has(z)||h(I,z)}}catch(e){M=!0,R=e}finally{try{!N&&L.return&&L.return()}finally{if(M)throw R}}j++}return m}},487:function(e,t,n){"use strict";n(488),n(616),n(620)},488:function(e,t,n){"use strict";var r,a,i=(r=["Sign in with email"],a=["Sign in with email"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=n(28),u=c(n(0)),l=n(1),s=c(n(489));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){e.children;return u.default.createElement("div",{className:"pt2 cursor-pointer text-grey-1 text-right"},(0,l.t)(i))};d.displayName="EmailButton";var f={name:"password",Button:d,Panel:s.default};o.PLUGIN_AUTH_PROVIDERS.push(function(e){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e),[f])})},489:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=O(["Username or email address"],["Username or email address"]),o=O(["Email address"],["Email address"]),u=O(["youlooknicetoday@email.com"],["youlooknicetoday@email.com"]),l=O(["Password"],["Password"]),s=O(["Shhh..."],["Shhh..."]),c=O(["Remember me"],["Remember me"]),d=O(["Sign in"],["Sign in"]),f=O(["I seem to have forgotten my password"],["I seem to have forgotten my password"]),p=n(0),m=w(p),h=n(22),v=n(6),y=n(1),g=w(n(14)),b=w(n(35)),_=w(n(195)),E=w(n(209));function w(e){return e&&e.__esModule?e:{default:e}}function O(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C={login:n(165).login},x=(0,v.connect)(null,C)(r=function(e){function t(){var e,n,r,a,i,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var u=arguments.length,l=Array(u),s=0;s<u;s++)l[s]=arguments[s];return n=r=S(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.onSubmit=(a=regeneratorRuntime.mark(function e(t){var n,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props,a=n.login,i=n.location,e.next=3,a(t,i.query.redirect);case 3:case"end":return e.stop()}},e,o)}),i=function(){var e=a.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(e){return i.apply(this,arguments)}),S(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.Component),a(t,[{key:"render",value:function(){var e=g.default.ldapEnabled();return m.default.createElement(E.default,{onSubmit:this.onSubmit},function(t){var n=t.values,r=t.Form,a=t.FormField,f=t.FormSubmit,p=t.FormMessage;return m.default.createElement(r,null,m.default.createElement(a,{name:"username",type:e?"input":"email",title:e?(0,y.t)(i):(0,y.t)(o),placeholder:(0,y.t)(u),validate:e?_.default.required():_.default.email()}),m.default.createElement(a,{name:"password",type:"password",title:(0,y.t)(l),placeholder:(0,y.t)(s),validate:_.default.required()}),m.default.createElement(a,{name:"remember",type:"checkbox",title:(0,y.t)(c),initial:!0,horizontal:!0}),m.default.createElement(p,null),m.default.createElement("div",{className:"Form-actions flex align-center"},m.default.createElement(f,null,(0,y.t)(d)),m.default.createElement(k,{credentials:n})))})}}]),t}())||r;x.displayName="LdapAndEmailForm",t.default=x;var k=function(e){var t=e.credentials,n=void 0===t?{}:t;return m.default.createElement(h.Link,{to:"/auth/forgot_password"+(b.default.validEmail(n.username)?"?email="+encodeURIComponent(n.username):""),className:"text-right ml-auto link",onClick:function(e){window.OSX&&window.OSX.resetPassword()}},(0,y.t)(f))};k.displayName="ForgotPasswordLink"},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=s(n(0)),i=n(22),o=s(n(70)),u=n(132),l=n(35);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.to,n=e.className,o=e.children,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","className","children"]);return a.default.createElement(i.Link,r({to:t,className:n||"link"},(0,l.stripLayoutProps)(u)),o)};c.displayName="BaseLink";var d=(0,o.default)(c).withConfig({displayName:"Link",componentId:"sc-1fq3w5c-0"})([""," "," "," ",""],u.display,u.space,u.hover,u.color);t.default=d},493:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=d(u),s=d(n(2)),c=d(n(4));function d(e){return e&&e.__esModule?e:{default:e}}var f=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.formField,r=e.title,a=void 0===r?n&&n.title:r,o=e.description,u=void 0===o?n&&n.description:o,s=e.hidden,d=void 0===s?n&&(null!=n.hidden?n.hidden:"hidden"===n.type):s,f=e.horizontal,p=void 0===f?n&&(null!=n.horizontal?n.horizontal:"boolean"===n.type):f,m=e.children;if(d)return null;var h=i({},this.props.field||{},this.props),v=h.name,y=h.error,g=h.visited,b=h.active;return!1!==g&&!0!==b||(y=null),l.default.createElement("div",{className:(0,c.default)("Form-field",t,{"Form--fieldError":!!y,flex:p}),id:"formField-"+v.replace(/\./g,"-")},(a||u)&&l.default.createElement("div",null,a&&l.default.createElement("label",{className:(0,c.default)("Form-label",{"mr-auto":p}),htmlFor:v,id:v+"-label"},a," ",y&&l.default.createElement("span",{className:"text-error"},": ",y)),u&&l.default.createElement("div",{className:"mb1"},u)),l.default.createElement("div",{className:(0,c.default)("flex-no-shrink",{"ml-auto":p})},m))}}]),t}(),r.propTypes={field:s.default.object,formField:s.default.object,name:s.default.string,error:s.default.any,visited:s.default.bool,active:s.default.bool,hidden:s.default.bool,title:s.default.string,description:s.default.string,children:s.default.oneOfType([s.default.arrayOf(s.default.node),s.default.node])},a);f.displayName="FormField",t.default=f},494:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=g(n(0)),i=g(n(227)),o=g(n(497)),u=g(n(498)),l=g(n(499)),s=g(n(500)),c=g(n(508)),d=g(n(514)),f=g(n(522)),p=g(n(523)),m=g(n(525)),h=g(n(611)),v=g(n(612)),y=g(n(613));function g(e){return e&&e.__esModule?e:{default:e}}var b={input:i.default,email:o.default,text:u.default,checkbox:s.default,color:c.default,password:l.default,select:d.default,integer:f.default,boolean:p.default,collection:m.default,snippetCollection:h.default,hidden:v.default,textFile:y.default},_=function(e){var t=e.field,n=e.formField,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["field","formField"]),u=("string"==typeof n.type?b[n.type]:n.type)||i.default;return a.default.createElement(u,r({field:t},n,o))};_.displayName="FormWidget",t.default=_},497:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(0)),i=o(n(227));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return a.default.createElement(i.default,r({},e,{type:"email"}))};u.displayName="FormEmailWidget",t.default=u},498:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(0)),i=u(n(4)),o=n(18);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.placeholder,n=e.field,u=e.className,l=e.rows;return a.default.createElement("textarea",r({className:(0,i.default)(u,"Form-input full"),rows:l,placeholder:t,"aria-labelledby":n.name+"-label"},(0,o.formDomOnlyProps)(n)))};l.displayName="FormTextAreaWidget",t.default=l},499:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(0)),i=o(n(227));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return a.default.createElement(i.default,r({},e,{type:"password"}))};u.displayName="FormPasswordWidget",t.default=u},5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconWrapper=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=y(u),s=y(n(177)),c=y(n(70)),d=n(132),f=y(n(4)),p=n(7),m=n(456),h=n(35),v=y(n(501));function y(e){return e&&e.__esModule?e:{default:e}}(t.IconWrapper=(0,c.default)("div").withConfig({displayName:"Icon__IconWrapper",componentId:"sc-1x67v3y-0"})(["",";display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:99px;cursor:pointer;color:",';"> .icon.icon-share":{transform:translateY(-2px);}',";transition:all 300ms ease-in-out;"],d.space,function(e){return e.open?(0,p.color)("brand"):"inherit"},d.hover)).defaultProps={hover:{backgroundColor:(0,p.color)("bg-medium"),color:(0,p.color)("brand")}};var g=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.defaultName,r=e.className,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["name","defaultName","className"]),o=(0,m.loadIcon)(t)||(0,m.loadIcon)(n);if(!o)return console.warn('Icon "'+t+'" does not exist.'),l.default.createElement("span",null);for(var u=i({},o.attrs,(0,h.stripLayoutProps)(a),{className:(0,f.default)(o.attrs.className,r)}),c=["width","height","size","scale"],d=0;d<c.length;d++){var p=c[d];"string"==typeof u[p]&&(u[p]=parseInt(u[p],10))}return null!=u.size&&(u.width=u.size,u.height=u.size),null!=u.scale&&null!=u.width&&null!=u.height&&(u.width*=u.scale,u.height*=u.scale),delete u.size,u.scale,o.img?l.default.createElement(s.default,i({forceOriginalDimensions:!1,src:o.img},u)):o.svg?l.default.createElement("svg",i({},u,{dangerouslySetInnerHTML:{__html:o.svg}})):o.path?l.default.createElement("svg",u,l.default.createElement("path",{d:o.path})):(console.warn('Icon "'+t+'" must have an img, svg, or path'),l.default.createElement("span",null))}}]),t}(),r.defaultProps={defaultName:"unknown"},a);g.displayName="BaseIcon";var b=(0,c.default)(g).withConfig({displayName:"Icon",componentId:"sc-1x67v3y-1"})([""," "," "," flex-shrink:0"],d.space,d.color,d.hover);t.default=(0,v.default)(b)},500:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(110)),i=u(n(0)),o=n(18);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.field;return i.default.createElement(a.default,r({},(0,o.formDomOnlyProps)(t),{onChange:function(e){return t.onChange(e.target.checked)}}))};l.displayName="FormCheckBoxWidget",t.default=l},501:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=u(a),o=u(n(29));function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t,n;return n=t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.Component),r(n,[{key:"render",value:function(){var t=this.props,n=t.tooltip,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["tooltip"]);return n?i.default.createElement(o.default,{tooltip:n},i.default.createElement(e,r)):i.default.createElement(e,r)}}]),n}(),t.displayName="Tooltipify["+(e.displayName||e.name)+"]",n}},507:function(e,t){},508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(0)),i=o(n(114));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.field,n=e.initial;return a.default.createElement("div",null,a.default.createElement(i.default,r({},t,{value:t.value||n()})))};u.displayName="FormColorWidget",t.default=u},514:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(0)),i=n(42),o=u(i);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.placeholder,n=e.options,u=void 0===n?[]:n,l=e.field;return a.default.createElement(o.default,r({placeholder:t},l,{onChange:function(e){return l.onChange(e.target.value)},buttonProps:{style:{minWidth:200}}}),u.map(function(e){var t=e.name,n=e.value;return a.default.createElement(i.Option,{key:n,value:n},t)}))};l.displayName="FormSelectWidget",t.default=l},515:function(e,t){},52:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=c(i),u=c(n(15)),l=c(n(427)),s=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selector,n=e.wrapped;return function(e){var c,d;return d=c=function(c){function d(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e,t));return n._updateSize=function(){var e=n._getElement();if(e){var t=e.getBoundingClientRect(),r=t.width,a=t.height;n.state.width===r&&n.state.height===a||n.setState({width:r,height:a})}},n.state={width:null,height:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(d,i.Component),a(d,[{key:"_getElement",value:function(){var e=u.default.findDOMNode(this);return t?e.querySelector(t)||e:e}},{key:"componentDidMount",value:function(){this._initMediaQueryListener(),this._initResizeObserver(),this._updateResizeObserver(),setTimeout(this._updateSize,0)}},{key:"componentDidUpdate",value:function(){this._updateResizeObserver(),this._updateSize()}},{key:"componentWillUnmount",value:function(){this._teardownResizeObserver(),this._teardownQueryMediaListener()}},{key:"_initResizeObserver",value:function(){var e=this;this._ro=new l.default(function(t,n){var r=e._getElement(),a=!0,i=!1,o=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){if(u.value.target===r)return void e._updateSize()}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}})}},{key:"_updateResizeObserver",value:function(){var e=this._getElement();this._currentElement!==e&&(this._currentElement=e,this._ro.observe(this._currentElement))}},{key:"_teardownResizeObserver",value:function(){this._ro&&(this._ro.disconnect(),this._ro=null)}},{key:"_initMediaQueryListener",value:function(){window.matchMedia&&(this._mql=window.matchMedia("print"),this._mql.addListener(this._updateSize))}},{key:"_teardownQueryMediaListener",value:function(){this._mql&&(this._mql.removeListener(this._updateSize),this._mql=null)}},{key:"render",value:function(){if(n){var t=this.props,a=t.className,i=t.style,u=void 0===i?{}:i,l=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["className","style"]),c=this.state,d=c.width,f=c.height;return o.default.createElement("div",{className:(0,s.default)(a,"relative"),style:u},o.default.createElement(e,r({style:{position:"absolute",top:0,left:0,width:d,height:f}},l,this.state)))}return o.default.createElement(e,r({},this.props,this.state))}}]),d}(),c.displayName="ExplicitSize["+(e.displayName||e.name)+"]",d}}},520:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=l(n(0)),o=l(n(2)),u=n(521);function l(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return function(e){var t,n;return n=t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleChange=function(e){t.setState({value:e.target.value})},t.state={value:e.defaultValue},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default.Component),a(n,[{key:"render",value:function(){return void 0!==this.props.value?i.default.createElement(e,this.props):i.default.createElement(e,r({},this.props,{value:this.state.value,onChange:this.handleChange}))}}]),n}(),t.displayName="Uncontrollable("+(0,u.getDisplayName)(e)+")",t.propTypes=r({},e.propTypes,{value:o.default.any,onChange:o.default.func,defaultValue:o.default.any}),n}}},521:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDisplayName=function(e){return e.displayName||e.name||"Component"}},522:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(0)),i=n(18),o=u(n(135));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.placeholder,n=e.field;return a.default.createElement(o.default,r({className:"Form-input full",placeholder:t},(0,i.formDomOnlyProps)(n)))};l.displayName="FormInputWidget",t.default=l},523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(0)),i=o(n(86));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.field;return a.default.createElement(i.default,r({"aria-labelledby":t.name+"-label"},t))};u.displayName="FormToggleWidget",t.default=u},524:function(e,t){e.exports={toggle:"_2lChr",selected:"_3MRMF",small:"Zff1D"}},525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(426));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.field;return r.default.createElement(a.default,t)};o.displayName="FormCollectionWidget",t.default=o},526:function(e,t){e.exports={breadcrumbs:"_3_Ba_",breadcrumb:"_2TF9W",breadcrumbDivider:"_2gIyS",breadcrumbPath:"_22hhf",breadcrumbPage:"_3fU6E",sidebarBreadcrumbs:"_3d7eA _38618 _3_Ba_",sidebarBreadcrumb:"eVgJF _2TF9W"}},527:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.addEntityContainers=function(e){var t=e.nameOne;e.load=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,a=f(t,["id"]);return(0,u.entityObjectLoader)(r({entityType:e.name,entityId:n},a))},e.Loader=function(t){var n=t.id,i=f(t,["id"]);return a.default.createElement(l.default,r({entityType:e.name,entityId:n},i))},e.Loader.displayName=t+".Loader",e.loadList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.query,a=f(t,["query"]);return(0,i.entityListLoader)(r({entityType:e.name,entityQuery:n},a))},e.ListLoader=function(t){var n=t.query,i=f(t,["query"]);return a.default.createElement(o.default,r({entityType:e.name,entityQuery:n},i))},e.ListLoader.displayName=t+".ListLoader",e.Name=function(t){var n=t.id,i=f(t,["id"]);return a.default.createElement(s.default,r({entityType:e.name,entityId:n},i))},e.Name.displayName=t+".Name",e.Form=function(t){var n=t.object,i=f(t,["object"]);return a.default.createElement(c.default,r({entityType:e.name,entityObject:n||i[e.nameOne]},i))},e.Form.displayName=t+".Form",e.ModalForm=function(t){var n=t.object,i=f(t,["object"]);return a.default.createElement(c.default,r({modal:!0,entityType:e.name,entityObject:n||i[e.nameOne]},i))},e.ModalForm.displayName=t+".ModalForm"};var a=d(n(0)),i=n(285),o=d(i),u=n(286),l=d(u),s=d(n(528)),c=d(n(395));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(286));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.entityType,n=e.entityId,i=e.name,o=void 0===i?"name":i;return r.default.createElement(a.default,{entityType:t,entityId:n,properties:[o],loadingAndErrorWrapper:!1,wrapped:!0},function(e){var t=e.object;return t?r.default.createElement("span",null,t.getName()):null})};o.displayName="EntityName",t.default=o},529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(139),o=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"replace",value:function(e){return null!=e?this._query.updateBreakout(this._index,e):this._query.updateBreakout(this._index,this)}},{key:"add",value:function(){return this._query.breakout(this)}},{key:"remove",value:function(){return this._query.removeBreakout(this._index)}},{key:"displayName",value:function(){var e=this.dimension();return e&&e.render()}},{key:"isValid",value:function(){var e=this.query();return!e||e.breakoutOptions(this).hasDimension(this.dimension())}},{key:"dimension",value:function(){return this._query.parseFieldReference(this)}},{key:"field",value:function(){return this.dimension().field()}}]),t}();t.default=u},53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NUMBER_COLUMN_SETTINGS=t.DATE_COLUMN_SETTINGS=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=H(["Formatting"],["Formatting"]),o=H(["Date style"],["Date style"]),u=H(["Date separators"],["Date separators"]),l=H(["Abbreviate names of days and months"],["Abbreviate names of days and months"]),s=H(["Show the time"],["Show the time"]),c=H(["Off"],["Off"]),d=H(["HH:MM"],["HH:MM"]),f=H(["HH:MM:SS"],["HH:MM:SS"]),p=H(["HH:MM:SS.MS"],["HH:MM:SS.MS"]),m=H(["On"],["On"]),h=H(["Time style"],["Time style"]),v=H(["12-hour clock"],["12-hour clock"]),y=H(["24-hour clock"],["24-hour clock"]),g=H(["Style"],["Style"]),b=H(["Unit of currency"],["Unit of currency"]),_=H(["Currency label style"],["Currency label style"]),E=H(["Symbol"],["Symbol"]),w=H(["Code"],["Code"]),O=H(["Name"],["Name"]),S=H(["Where to display the unit of currency"],["Where to display the unit of currency"]),C=H(["In the column heading"],["In the column heading"]),x=H(["In every table cell"],["In every table cell"]),k=H(["Separator style"],["Separator style"]),A=H(["Minimum number of decimal places"],["Minimum number of decimal places"]),T=H(["Multiply by a number"],["Multiply by a number"]),P=H(["Add a prefix"],["Add a prefix"]),j=H(["Add a suffix"],["Add a suffix"]);t.columnSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getColumns,n=void 0===t?Q:t,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["getColumns"]);return(0,D.nestedSettings)("column_settings",a({section:(0,N.t)(i),objectName:"column",getObjects:n,getObjectKey:I.keyForColumn,getSettingDefintionsForObject:ae,component:L.default,getInheritedSettingsForObject:K,useRawSeries:!0},r))},t.getGlobalSettingsForColumn=Y,t.getSettingDefintionsForColumn=ae;var N=n(1),M=G(n(8)),R=G(n(3)),D=n(331),L=G(n(634)),I=n(33),F=n(13),z=n(10),q=n(306),B=G(n(442)),U=G(n(14)),V=n(41);function G(e){return e&&e.__esModule?e:{default:e}}function H(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function W(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Q=function(e,t){var n;return(n=[]).concat.apply(n,W(e.map(function(e){return e.data.cols})))};function Y(e){var t={},n=U.default.get("custom-formatting"),a=!0,i=!1,o=void 0;try{for(var u,l=Object.entries(n||{})[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=r(u.value,2),c=s[0],d=s[1];(0,V.isa)(e.special_type||e.base_type,c)&&Object.assign(t,d)}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return t}function K(e){return a({},Y(e),e.settings||{})}var Z=(0,M.default)("2018-01-07 17:24");function J(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2];if("hour-of-day"===e)return[];var r=[X("MMMM D, YYYY",e,null,t,n),X("D MMMM, YYYY",e,null,t,n),X("dddd, MMMM D, YYYY",e,null,t,n),X("M/D/YYYY",e,(0,q.hasDay)(e)?"month, day, year":null,t,n),X("D/M/YYYY",e,(0,q.hasDay)(e)?"day, month, year":null,t,n),X("YYYY/M/D",e,(0,q.hasDay)(e)?"year, month, day":null,t,n)],a=new Set;return r.filter(function(t){var n=(0,q.getDateFormatFromStyle)(t.value,e);return!a.has(n)&&(a.add(n),!0)})}function X(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments[4],i=(0,q.getDateFormatFromStyle)(e,t,a);return r&&(i=i.replace(/MMMM/,"MMM").replace(/dddd/,"ddd")),{name:Z.format(i)+(n?" ("+n+")":""),value:e}}function $(e,t){var n=e;return{name:Z.format(n)+(t?" ("+t+")":""),value:e}}var ee=t.DATE_COLUMN_SETTINGS={date_style:{title:(0,N.t)(o),widget:"select",getDefault:function(e){var t=J(e.unit),n=r(t,1)[0],a=(n=void 0===n?{}:n).value;return void 0===a?"":a},isValid:function(e,t){var n=J(e.unit);return!!R.default.findWhere(n,{value:t.date_style})},getProps:function(e,t){return{options:J(e.unit,t.date_abbreviate,t.date_separator)}},getHidden:function(e){return J(e.unit).length<2}},date_separator:{title:(0,N.t)(u),widget:"radio",default:"/",getProps:function(e,t){var n=/\//.test(t.date_style)?t.date_style:"M/D/YYYY";return{options:[{name:n,value:"/"},{name:n.replace(/\//g,"-"),value:"-"},{name:n.replace(/\//g,"."),value:"."}]}},getHidden:function(e,t){e.unit;return!/\//.test(t.date_style||"")}},date_abbreviate:{title:(0,N.t)(l),widget:"toggle",default:!1,getHidden:function(e,t){var n=e.unit;return!(0,q.getDateFormatFromStyle)(t.date_style,n).match(/MMMM|dddd/)},readDependencies:["date_style"]},time_enabled:{title:(0,N.t)(s),widget:"radio",isValid:function(e,t){var n=e.unit;return!t.time_enabled||(0,q.hasHour)(n)},getProps:function(e,t){var n=e.unit,r=[{name:(0,N.t)(c),value:null},{name:(0,N.t)(d),value:"minutes"}];return n&&"default"!==n&&"second"!==n&&"millisecond"!==n||r.push({name:(0,N.t)(f),value:"seconds"}),n&&"default"!==n&&"millisecond"!==n||r.push({name:(0,N.t)(p),value:"milliseconds"}),2===r.length&&(r[1].name=(0,N.t)(m)),{options:r}},getHidden:function(e,t){var n=e.unit;return!(0,q.hasHour)(n)},getDefault:function(e){var t=e.unit;return(0,q.hasHour)(t)?"minutes":null}},time_style:{title:(0,N.t)(h),widget:"radio",default:"h:mm A",getProps:function(e,t){return{options:[$("h:mm A",(0,N.t)(v))].concat(W("hour-of-day"===e.unit?[$("h A","12-hour clock without minutes")]:[]),[$("k:mm",(0,N.t)(y))])}},getHidden:function(e,t){return!t.time_enabled},readDependencies:["time_enabled"]}};function te(e,t){return(0).toLocaleString("en",{style:"currency",currency:e,currencyDisplay:t}).replace(/0([.,]0+)?/,"").trim()}var ne=t.NUMBER_COLUMN_SETTINGS={number_style:{title:(0,N.t)(g),widget:"select",props:{options:[{name:"Normal",value:"decimal"},{name:"Percent",value:"percent"},{name:"Scientific",value:"scientific"},{name:"Currency",value:"currency"}]},getDefault:function(e,t){return(0,F.isCurrency)(e)&&t.currency?"currency":"decimal"},getHidden:function(e,t){return(0,F.isCurrency)(e)&&"currency"===t.number_style},readDependencies:["currency"]},currency:{title:(0,N.t)(b),widget:"select",props:{options:Object.values(B.default).map(function(e){return{name:e.name,value:e.code}}),searchProp:"name",searchCaseSensitive:!1},default:"USD",getHidden:function(e,t){return!(0,F.isCurrency)(e)}},currency_style:{title:(0,N.t)(_),widget:"radio",getProps:function(e,t){var n=t.currency||"USD";return{options:[{name:(0,N.t)(E)+" ("+te(n,"symbol")+")",value:"symbol"},{name:(0,N.t)(w)+" ("+te(n,"code")+")",value:"code"},{name:(0,N.t)(O)+" ("+te(n,"name")+")",value:"name"}]}},default:"symbol",getHidden:function(e,t){return"currency"!==t.number_style},readDependencies:["number_style"]},currency_in_header:{title:(0,N.t)(S),widget:"radio",props:{options:[{name:(0,N.t)(C),value:!0},{name:(0,N.t)(x),value:!1}]},default:!0,getHidden:function(e,t,n){var r=n.series;return"currency"!==t.number_style||"table"!==r[0].card.display},readDependencies:["number_style"]},number_separators:{title:(0,N.t)(k),widget:"select",props:{options:[{name:"100,000.00",value:".,"},{name:"100 000,00",value:", "},{name:"100.000,00",value:",."},{name:"100000.00",value:"."}]},default:".,"},decimals:{title:(0,N.t)(A),widget:"number"},scale:{title:(0,N.t)(T),widget:"number",props:{placeholder:"1"}},prefix:{title:(0,N.t)(P),widget:"input"},suffix:{title:(0,N.t)(j),widget:"input"},_numberFormatter:{getValue:function(e,t){return(0,z.numberFormatterForOptions)(t)},readDependencies:["number_style","currency_style","currency","decimals"]},_header_unit:{getValue:function(e,t){return"currency"===t.number_style&&t.currency_in_header?te(t.currency,t.currency_style):null},readDependencies:["number_style","currency","currency_style","currency_header_only"]}},re={column:{getValue:function(e){return e}},_column_title_full:{getValue:function(e,t){var n=t.column_title||(0,z.formatColumn)(e),r=t._header_unit;return r&&(n+=" ("+r+")"),n},readDependencies:["column_title","_header_unit"]}};function ae(e,t){var r=function(){var e;return(e=n(47)).getVisualizationRaw.apply(e,arguments)}(e).visualization,i="function"==typeof r.columnSettings?r.columnSettings(t):r.columnSettings||{};return(0,F.isDate)(t)?a({},i,ee,re):(0,F.isNumber)(t)&&!(0,F.isCoordinate)(t)?a({},i,ne,re):a({},i,re)}},530:function(e,t,n){"use strict"},531:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(139),o=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"replace",value:function(e){return null!=e?this._query.updateSort(this._index,e):this._query.updateSort(this._index,this)}},{key:"add",value:function(){return this._query.addSort(this)}},{key:"remove",value:function(){return this._query.removeSort(this._index)}},{key:"displayName",value:function(){var e=this.dimension();return e&&e.render()}},{key:"isValid",value:function(){var e=this.query();return!e||e.sortOptions(this).hasDimension(this.dimension())}},{key:"dimension",value:function(){return this._query.parseFieldReference(this[1])}},{key:"field",value:function(){return this.dimension().field()}}]),t}();t.default=u},532:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(138),o=(r=i)&&r.__esModule?r:{default:r};var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,null,[{key:"isDatasetQueryType",value:function(e){return"internal"===e.type}}]),t}();t.default=u},533:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMode=function(e){if(!e)return null;var t=e.query();if(t instanceof f.default)return s.default;if(t instanceof d.default){var n=t.aggregations(),p=t.breakouts(),m=t.filters();if(0===n.length&&0===p.length){return m.some(function(e){if(e.isFieldFilter()){var n=e.field();if(n&&n.isPK()&&n.table&&n.table.id===t.sourceTableId()&&"="===e.operatorName()&&1===e.arguments().length)return!0}return!1})?r.default:a.default}if(n.length>0&&0===p.length)return i.default;if(n.length>0&&p.length>0){var h=p.map(function(e){return e.field()});if(1===h.length&&h[0].isDate()||2===h.length&&h[0].isDate()&&h[1].isCategory())return o.default;if(1===h.length&&h[0].isAddress())return u.default;if(1===h.length&&h[0].isCategory()||2===h.length&&h[0].isCategory()&&h[1].isCategory())return l.default}}return c.default};var r=p(n(534)),a=p(n(535)),i=p(n(591)),o=p(n(592)),u=p(n(596)),l=p(n(597)),s=p(n(598)),c=p(n(599)),d=p(n(26)),f=p(n(97));function p(e){return e&&e.__esModule?e:{default:e}}},534:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(312),i=(r=a)&&r.__esModule?r:{default:r};var o={name:"object",drills:function(){return[i.default]}};t.default=o},535:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(98),a=u(n(588)),i=u(n(589)),o=u(n(590));function u(e){return e&&e.__esModule?e:{default:e}}var l={name:"segment",drills:function(){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,r.getDefaultDrills)()),[a.default,i.default,o.default])}};t.default=l},536:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=c(["Ascending"],["Ascending"]),i=c(["Descending"],["Descending"]),o=s(n(26)),u=s(n(31)),l=n(1);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.default=function(e){var t=e.question,n=e.clicked,s=t.query();if(!(s instanceof o.default))return[];if(!n||!n.column||void 0!==n.value||!n.column.source)return[];var c=n.column,d=s.fieldReferenceForColumn(c);if(!d)return[];var f=s.sorts()[0]||[],p=r(f,2),m=p[0],h=p[1],v=null!=h&&u.default.isEqual(d,h),y=[];return v&&"desc"!==m||y.push({name:"sort-ascending",section:"sort",title:(0,l.t)(a),question:function(){return s.replaceSort(["asc",d]).question()}}),v&&"asc"!==m||y.push({name:"sort-descending",section:"sort",title:(0,l.t)(i),question:function(){return s.replaceSort(["desc",d]).question()}}),y}},537:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=(r=["View this ","'s ",""],a=["View this ","'s ",""],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=d(n(0)),u=n(1),l=n(41),s=n(10),c=d(n(26));function d(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.question,n=e.clicked,r=t.query();if(!(r instanceof c.default&&n&&n.column&&null!=n.column.id&&void 0!==n.value))return[];var a,d=n.value,f=n.column;return(0,l.isPK)(f.special_type)?[]:(0,l.isFK)(f.special_type)?[{name:"view-fks",section:"filter",title:o.default.createElement("span",null,(0,u.jt)(i,(0,s.singularize)((0,s.stripId)(f.display_name)),(0,s.pluralize)(r.table().display_name))),question:function(){return t.filter("=",f,d)}}]:(a=f,((0,l.isa)(a.base_type,l.TYPE.Number)||(0,l.isa)(a.base_type,l.TYPE.Temporal)?[{name:"<",operator:"<"},{name:"=",operator:"="},{name:"≠",operator:"!="},{name:">",operator:">"}]:[{name:"=",operator:"="},{name:"≠",operator:"!="}])||[]).map(function(e){var n=e.name,r=e.operator;return{name:r,section:"filter",title:o.default.createElement("span",{className:"h2"},n),question:function(){return t.filter(r,f,d)}}})}},538:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["Filter"],a=["Filter"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}})));t.default=function(e){var t=e.question,n=e.clicked,r=t.query();if(!(r instanceof l.default&&n&&n.column&&null!=n.column.field_ref&&void 0===n.value))return[];var a=n.column,d=new s.default([],null,r).setDimension(a.field_ref,{useDefaultOperator:!0});return[{name:"filter-column",section:"filter",title:(0,u.t)(i),popover:function(e){var t=e.onChangeCardAndRun,n=e.onClose;return o.default.createElement(c.default,{query:r,filter:d,onClose:n,onChangeFilter:function(e){var a=r.filter(e).question().card();t({nextCard:a}),n()},showFieldPicker:!1})}}]};var o=d(n(0)),u=n(1),l=d(n(26)),s=d(n(203)),c=d(n(250));function d(e){return e&&e.__esModule?e:{default:e}}},539:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.className,n=e.showFieldPicker,u=e.filter,l=e.onFilterChange,s=e.onBack,c=e.isSidebar,d=u.dimension().field(),f=u.operatorName(),p=!(d.isTime()||d.isDate()),m=c||!n;return n||p?r.default.createElement("div",{className:(0,a.default)(t,"text-medium",{"flex align-center":!m})},n&&r.default.createElement(o.default,{className:(0,a.default)("text-default py1"),title:(d.table?d.table.displayName()+" – ":"")+d.displayName(),onBack:s}),p&&r.default.createElement(i.default,{className:(0,a.default)("flex-no-shrink block",{"ml-auto":!m,my1:m}),operator:f,operators:u.filterOperators(f),onOperatorChange:function(e){u.operatorName()!==e&&l(u.setOperator(e))}})):null};var r=u(n(0)),a=u(n(4)),i=u(n(540)),o=u(n(251));function u(e){return e&&e.__esModule?e:{default:e}}},540:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=f(o),l=f(n(2)),s=n(42),c=f(s),d=f(n(4));function f(e){return e&&e.__esModule?e:{default:e}}var p=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.operator,n=e.operators,r=e.onOperatorChange,a=e.className;return u.default.createElement(c.default,{value:t,onChange:function(e){return r(e.target.value)},className:(0,d.default)("border-medium text-default",a)},n.map(function(e){return u.default.createElement(s.Option,{key:e.name,value:e.name},e.verboseName)}))}}]),t}(),r.propTypes={operator:l.default.string,operators:l.default.array.isRequired,onOperatorChange:l.default.func.isRequired},a);p.displayName="OperatorSelector",t.default=p},541:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(0)),i=l(n(141)),o=l(n(546)),u=l(n(547));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleKeyDown=function(e){"Enter"===e.key&&r.props.onCommit()},s(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"componentWillMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.filter,r=e.onFilterChange,l=e.onCommit,s=e.isSidebar,c=e.minWidth,d=e.maxWidth,f=n.dimension().field();return f.isTime()?a.default.createElement(o.default,{className:t,filter:n,onFilterChange:r,minWidth:c,maxWidth:d,isSidebar:s}):f.isDate()?a.default.createElement(i.default,{className:t,filter:n,onFilterChange:r,minWidth:c,maxWidth:d,isSidebar:s}):a.default.createElement(u.default,{className:t,filter:n,setValue:function(e,t){r(n.setArgument(e,t))},setValues:function(e){r(n.setArguments(e))},onCommit:l,minWidth:c,maxWidth:d,isSidebar:s})}}]),t}();c.displayName="FilterPopoverPicker",t.default=c},542:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=E(["Hide calendar"],["Hide calendar"]),u=E(["Show calendar"],["Show calendar"]),l=E(["Add a time"],["Add a time"]),s=n(0),c=_(s),d=_(n(2)),f=n(1),p=_(n(171)),m=_(n(73)),h=_(n(5)),v=_(n(433)),y=_(n(313)),g=_(n(8)),b=_(n(4));function _(e){return e&&e.__esModule?e:{default:e}}function E(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var w="YYYY-MM-DD",O="YYYY-MM-DDTHH:mm:ss",S=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChange=function(e,t,r){var a=(0,g.default)(e);a.isValid()||n.props.onChange(null);var i=!1;null!=t&&(a.hours(t),i=!0),null!=r&&(a.minutes(r),i=!0),i?n.props.onChange(a.format(O)):n.props.onChange(a.format(w))},n.state={showCalendar:!0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.calendar,a=t.hideTimeSelectors,i=t.className,s=this.state.showCalendar,d=void 0,_=void 0,E=void 0;return(0,g.default)(n,O,!0).isValid()?(d=(0,g.default)(n,O,!0),_=d.hours(),E=d.minutes(),d.startOf("day")):(0,g.default)(n,w,!0).isValid()&&(d=(0,g.default)(n,w,!0)),c.default.createElement("div",{className:i},c.default.createElement("div",{className:"mb2 full bordered rounded flex align-center"},c.default.createElement(m.default,{placeholder:(0,g.default)().format("MM/DD/YYYY"),className:"borderless full p1 h3",style:{outline:"none"},value:d?d.format("MM/DD/YYYY"):"",onBlurChange:function(t){var n=t.target.value,r=(0,g.default)(n,"MM/DD/YYYY");r.isValid()?e.onChange(r,_,E):e.onChange(null)},ref:"value"}),r&&c.default.createElement(h.default,{className:"mr1 text-purple-hover cursor-pointer",name:"calendar",onClick:function(){return e.setState({showCalendar:!e.state.showCalendar})},tooltip:s?(0,f.t)(o):(0,f.t)(u)})),r&&c.default.createElement(v.default,{isOpen:s},c.default.createElement(p.default,{selected:d,initial:d||(0,g.default)(),onChange:function(t){return e.onChange(t,_,E)},isRangePicker:!1})),!a&&c.default.createElement("div",{className:(0,b.default)({py2:r},{mb3:!r})},null==_||null==E?c.default.createElement("div",{className:"text-purple-hover cursor-pointer flex align-center",onClick:function(){return e.onChange(d,12,30)}},c.default.createElement(h.default,{className:"mr1",name:"clock"}),(0,f.t)(l)):c.default.createElement(y.default,{onClear:function(){return e.onChange(d,null,null)},hours:_,minutes:E,onChangeHours:function(t){return e.onChange(d,t,E)},onChangeMinutes:function(t){return e.onChange(d,_,t)}})))}}]),t}(),r.propTypes={value:d.default.string,onChange:d.default.func.isRequired},a);S.displayName="SpecificDatePicker",t.default=S},543:function(e,t){},544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.DATE_PERIODS=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=f(o),l=f(n(4)),s=f(n(135)),c=f(n(314)),d=n(11);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=t.DATE_PERIODS=["day","week","month","year"],h=m.concat(["minute","hour"]),v=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={showUnits:!1},p(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.filter,r=t.onFilterChange,a=t.formatter,i=t.className,o=n[2],f=n[3];return u.default.createElement("div",{className:(0,l.default)(i,"flex align-center")},u.default.createElement(s.default,{className:"mr2 input border-purple text-right",style:{width:65,fontSize:14,fontWeight:700,padding:8},"data-ui-tag":"relative-date-input",value:"number"==typeof o?Math.abs(o):o,onChange:function(e){return r((0,d.assoc)(n,2,a(e)))},placeholder:"30"}),u.default.createElement("div",{className:"flex-full"},u.default.createElement(c.default,{open:this.state.showUnits,value:f,onChange:function(t){r((0,d.assoc)(n,3,t)),e.setState({showUnits:!1})},togglePicker:function(){return e.setState({showUnits:!e.state.showUnits})},intervals:o,formatter:a,periods:this.props.hideTimeSelectors?m:h})))}}]),t}(),r.defaultProps={formatter:function(e){return e}},a);v.displayName="RelativeDatePicker",t.default=v},545:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=c(a),o=c(n(3)),u=c(n(4)),l=n(42),s=c(l);function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.operator,r=e.operators,a=e.onOperatorChange;return i.default.createElement("div",{className:(0,u.default)(t,"relative z3"),style:{minWidth:100}},i.default.createElement(s.default,{value:o.default.findWhere(r,{name:n}),onChange:function(e){return a(e.target.value)},width:150,compact:!0},r.map(function(e){return i.default.createElement(l.Option,{key:e.name,value:e},e.displayName)})))}}]),t}();d.displayName="DateOperatorSelector",t.default=d},546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TIME_OPERATORS=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=h(["Before"],["Before"]),o=h(["After"],["After"]),u=h(["Between"],["Between"]),l=m(n(0)),s=n(1),c=n(141),d=m(c),f=m(n(313)),p=n(117);function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var y=function(e){var t=e.value,n=e.onChange,r=(0,p.parseTime)(t);return l.default.createElement(f.default,{hours:r.hour(),minutes:r.minute(),onChangeHours:function(e){return n(r.hour(e).format("HH:mm:00.000"))},onChangeMinutes:function(e){return n(r.minute(e).format("HH:mm:00.000"))}})};y.displayName="TimeInput";var g=function(e){var t=e.filter,n=e.onFilterChange;return l.default.createElement("div",{className:"mx2 mb2"},l.default.createElement(y,{value:E(t[2]),onChange:function(e){return n([t[0],t[1],e])}}))};g.displayName="SingleTimePicker",g.horizontalLayout=!0;var b=function(e){var t=e.filter,n=e.onFilterChange;return l.default.createElement("div",{className:"flex align-center justify-between mx2 mb1",style:{minWidth:480}},l.default.createElement(y,{value:E(t[2]),onChange:function(e){return n([t[0],t[1]].concat(v(_(e,t[3]))))}}),l.default.createElement("span",{className:"h3"},"and"),l.default.createElement(y,{value:E(t[3]),onChange:function(e){return n([t[0],t[1]].concat(v(_(t[2],e))))}}))};b.displayName="MultiTimePicker";var _=function(e,t){return console.log((0,p.parseTime)(e).isAfter((0,p.parseTime)(t))),(0,p.parseTime)(e).isAfter((0,p.parseTime)(t))?[t,e]:[e,t]},E=function(e){return"string"==typeof e&&/^\d+:\d+(:\d+(.\d+(\+\d+:\d+)?)?)?$/.test(e)?e:"00:00:00.000+00:00"},w=t.TIME_OPERATORS=[{name:"before",displayName:(0,s.t)(i),init:function(e){return["<",(0,c.getDateTimeFieldTarget)(e[1]),E(e[2])]},test:function(e){return"<"===a(e,1)[0]},widget:g},{name:"after",displayName:(0,s.t)(o),init:function(e){return[">",(0,c.getDateTimeFieldTarget)(e[1]),E(e[2])]},test:function(e){return">"===a(e,1)[0]},widget:g},{name:"between",displayName:(0,s.t)(u),init:function(e){return["between",(0,c.getDateTimeFieldTarget)(e[1]),E(e[2]),E(e[3])]},test:function(e){return"between"===a(e,1)[0]},widget:b}],O=function(e){return l.default.createElement(d.default,r({},e,{operators:w}))};O.displayName="TimePicker",t.default=O},547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.filter,n=e.setValue,s=e.setValues,d=e.onCommit,f=e.className,p=e.isSidebar,m=e.minWidth,h=e.maxWidth,v=t.operator();if(!v)return r.default.createElement("div",{className:f});var y=t.dimension(),g=y&&y.field(),b=(v.fields||[]).map(function(e,c){var f=void 0,y=void 0,b=v.placeholders&&v.placeholders[c]||void 0;if(v.multi?(f=t.arguments(),y=function(e){return s(e)}):(f=[t.arguments()[c]],y=function(e){return n(c,e[0])}),"hidden"===e.type)return null;if("select"===e.type)return r.default.createElement(i.default,{key:c,options:e.values,values:f,onValuesChange:y,placeholder:b,multi:v.multi,onCommit:d});if(g&&null!=g.id){for(var _=g,E=void 0;E=_.sourceField();)_=E;return r.default.createElement(u.default,{className:"input",value:f,onChange:y,multi:v.multi,placeholder:b,fields:_?[_]:[],disablePKRemappingForSearch:!0,autoFocus:0===c,alwaysShowOptions:1===v.fields.length,formatOptions:(0,l.getFilterArgumentFormatOptions)(v,c),minWidth:m,maxWidth:h,optionsMaxHeight:p?null:void 0})}return"text"===e.type?r.default.createElement(o.default,{key:c,values:f,onValuesChange:y,placeholder:b,multi:v.multi,onCommit:d}):"number"===e.type?r.default.createElement(a.default,{key:c,values:f,onValuesChange:y,placeholder:b,multi:v.multi,onCommit:d}):null}).filter(function(e){return e});if(b.length>0){var _=c;return r.default.createElement(_,{className:f,fieldWidgets:b})}return r.default.createElement("div",{className:f})};var r=s(n(0)),a=s(n(548)),i=s(n(549)),o=s(n(315)),u=s(n(316)),l=n(13);function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){var t=e.className,n=e.fieldWidgets;return r.default.createElement("div",{className:t},n.map(function(e,t){return r.default.createElement("div",{key:t,className:t<n.length-1?"mb1":null},e)}))};c.displayName="DefaultLayout"},548:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(i=["Enter desired number"],o=["Enter desired number"],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),c=n(0),d=h(c),f=h(n(2)),p=n(1),m=h(n(315));function h(e){return e&&e.__esModule?e:{default:e}}var v=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={stringValues:e.values.map(function(e){return"number"==typeof e?String(e):String(e||"")}),validations:n._validate(e.values)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.Component),l(t,[{key:"_validate",value:function(e){return e.map(function(e){return void 0===e||!isNaN(e)})}},{key:"onValuesChange",value:function(e){var t=e.map(function(e){return parseFloat(e)});this.props.onValuesChange(t.map(function(e){return isNaN(e)?null:e})),this.setState({stringValues:e,validations:this._validate(t)})}},{key:"render",value:function(){var e=this,t=this.state.stringValues.slice(0,this.props.values.length);return d.default.createElement(m.default,u({},this.props,{values:t,validations:this.state.validations,onValuesChange:function(t){return e.onValuesChange(t)}}))}}]),t}(),r.propTypes={values:f.default.array.isRequired,onValuesChange:f.default.func.isRequired,placeholder:f.default.string,multi:f.default.bool},r.defaultProps={placeholder:(0,p.t)(s)},a);v.displayName="NumberPicker",t.default=v},549:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=g(["Empty"],["Empty"]),u=g(["Find a value"],["Find a value"]),l=n(0),s=y(l),c=y(n(2)),d=n(1),f=y(n(110)),p=y(n(304)),m=n(10),h=n(249),v=y(n(4));function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var b=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.updateSearchText=function(e){var t=null;e&&(t=(0,h.createMultiwordSearchRegex)(e)),n.setState({searchText:e,searchRegex:t})},n.state={searchText:"",searchRegex:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),i(t,[{key:"selectValue",value:function(e,t){var n=void 0;n=this.props.multi?this.props.values.slice().filter(function(e){return null!=e}):[],t?n.push(e):n=n.filter(function(t){return t!==e}),this.props.onValuesChange(n)}},{key:"nameForOption",value:function(e){return""===e.name?(0,d.t)(o):e.name instanceof String||"string"==typeof e.name?e.name:(0,m.capitalize)(String(e.name))}},{key:"render",value:function(){var e=this,t=this.props,n=t.values,r=t.options,a=t.placeholder,i=t.multi,o=new Set(n),l=[],c=this.state.searchRegex;if(c){var m=!0,h=!1,y=void 0;try{for(var g,b=r[Symbol.iterator]();!(m=(g=b.next()).done);m=!0){var _=g.value;(c.test(_.key)||c.test(_.name))&&l.push(_)}}catch(e){h=!0,y=e}finally{try{!m&&b.return&&b.return()}finally{if(h)throw y}}}else l=r.slice();return s.default.createElement("div",null,l.length<=10&&!c?null:s.default.createElement("div",{className:"px1 pt1"},s.default.createElement(p.default,{onChange:this.updateSearchText,searchText:this.state.searchText,placeholder:(0,d.t)(u),autoFocus:!0})),s.default.createElement("div",{className:"px1 pt1",style:{maxHeight:"400px",overflowY:"scroll"}},a?s.default.createElement("h5",null,a):null,i?s.default.createElement("ul",null,l.map(function(t,n){return s.default.createElement("li",{key:n},s.default.createElement("label",{className:"flex align-center cursor-pointer p1",onClick:function(){return e.selectValue(t.key,!o.has(t.key))}},s.default.createElement(f.default,{checked:o.has(t.key),color:"purple"}),s.default.createElement("h4",{className:"ml1"},e.nameForOption(t))))})):s.default.createElement("div",{className:"flex flex-wrap py1"},l.map(function(t,r){return s.default.createElement("div",{className:"half",style:{padding:"0.15em"}},s.default.createElement("button",{style:{height:"95px"},className:(0,v.default)("full rounded bordered border-purple text-centered text-bold",{"text-purple bg-white":n[0]!==t.key,"text-white bg-purple":n[0]===t.key}),onClick:function(){return e.selectValue(t.key,!0)}},e.nameForOption(t)))}))))}}]),t}(),r.propTypes={options:c.default.array.isRequired,values:c.default.array.isRequired,onValuesChange:c.default.func.isRequired,placeholder:c.default.string,multi:c.default.bool},a);b.displayName="SelectPicker",t.default=b},550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestRemappedValue=t.FieldRemappedValue=t.AutoLoadRemappedValue=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(0)),i=n(10),o=u(n(551));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var s=function(e){var t=e.value;e.column;return a.default.createElement("span",{className:"text-bold"},t)};s.displayName="defaultRenderNormal";var c=function(e){var t=e.value,n=e.displayValue,r=e.column;e.displayColumn;return a.default.createElement("span",null,a.default.createElement("span",{className:"text-bold"},n),r.isID()&&a.default.createElement("span",{style:{opacity:.5}}," - "+t))};c.displayName="defaultRenderRemapped";var d=function(e){var t=e.value,n=e.column,a=e.displayValue,o=e.displayColumn,u=e.renderNormal,d=void 0===u?s:u,f=e.renderRemapped,p=void 0===f?c:f,m=l(e,["value","column","displayValue","displayColumn","renderNormal","renderRemapped"]);return null!=n&&(t=(0,i.formatValue)(t,r({},m,{column:n,jsx:!0,remap:!1}))),null!=o&&(a=(0,i.formatValue)(a,r({},m,{column:o,jsx:!0,remap:!1}))),null!=a?p({value:t,displayValue:a,column:n,displayColumn:o}):d({value:t,column:n})},f=t.AutoLoadRemappedValue=(0,o.default)(d),p=t.FieldRemappedValue=function(e){return a.default.createElement(d,r({},e,{displayValue:e.column.remappedValue(e.value),displayColumn:e.column.remappedField()}))};p.displayName="FieldRemappedValue";t.default=function(e){var t=e.autoLoad,n=void 0===t||t,r=l(e,["autoLoad"]);return n?a.default.createElement(f,r):a.default.createElement(p,r)};t.TestRemappedValue=d},551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=(r=o)&&r.__esModule?r:{default:r},l=n(6),s=n(27);var c=function(e,t){return{metadata:(0,s.getMetadata)(e,t)}},d={fetchRemapping:n(21).fetchRemapping};t.default=function(e){var t,n,r;return(0,l.connect)(c,d)((r=n=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o.Component),i(n,[{key:"componentWillMount",value:function(){this.props.column&&this.props.fetchRemapping(this.props.value,this.props.column.id)}},{key:"componentWillReceiveProps",value:function(e){!e.column||this.props.value===e.value&&this.props.column===e.column||this.props.fetchRemapping(e.value,e.column.id)}},{key:"render",value:function(){var t=this.props,n=t.metadata,r=(t.fetchRemapping,function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["metadata","fetchRemapping"])),i=n.field(r.column&&r.column.id),o=i&&i.remappedValue(r.value),l=null!=o&&i&&i.remappedField()||null;return u.default.createElement(e,a({},r,{displayValue:o,displayColumn:l}))}}]),n}(),n.displayName="Remapped["+(e.displayName||e.name)+"]",t=r))||t}},552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_SCHEDULES=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=J(["Use an SSH-tunnel for database connections"],["Use an SSH-tunnel for database connections"]),o=J(["Some database installations can only be accessed by connecting through an SSH bastion host. This option also provides an extra layer of security when a VPN is not available. Enabling this is usually slower than a direct connection."],["Some database installations can only be accessed by connecting through an SSH bastion host. This option also provides an extra layer of security when a VPN is not available. Enabling this is usually slower than a direct connection."]),u=J(["Use the Java Virtual Machine (JVM) timezone"],["Use the Java Virtual Machine (JVM) timezone"]),l=J(["We suggest you leave this off unless you're doing manual timezone casting in many or most of your queries with this data."],["We suggest you leave this off unless you're doing manual timezone casting in many or most of your queries with this data."]),s=J(["Use DNS SRV when connecting"],["Use DNS SRV when connecting"]),c=J(["Using this option requires that provided host is a FQDN.  If connecting to an Atlas cluster, you might need to enable this option.  If you don't know what this means, leave this disabled."],["Using this option requires that provided host is a FQDN.  If connecting to an Atlas cluster, you might need to enable this option.  If you don't know what this means, leave this disabled."]),d=J(["required"],["required"]),f=J(["invalid JSON"],["invalid JSON"]),p=J(["SSH private key"],["SSH private key"]),m=J(["Paste the contents of your ssh private key here"],["Paste the contents of your ssh private key here"]),h=J(["Passphrase for the SSH private key"],["Passphrase for the SSH private key"]),v=J(["SSH Authentication"],["SSH Authentication"]),y=J(["SSH Key"],["SSH Key"]),g=J(["Password"],["Password"]),b=J(["Server SSL certificate chain"],["Server SSL certificate chain"]),_=J(["Paste the contents of the server's SSL certificate chain here"],["Paste the contents of the server's SSL certificate chain here"]),E=J([""," to generate a Client ID and Client Secret for your project."],[""," to generate a Client ID and Client Secret for your project."]),w=J(["Click here"],["Click here"]),O=J(['Choose "Other" as the application type. Name it whatever you\'d like.'],['Choose "Other" as the application type. Name it whatever you\'d like.']),S=J([""," to get an auth code."],[""," to get an auth code."]),C=J(["or"],["or"]),x=J(["with Google Drive permissions"],["with Google Drive permissions"]),k=J(["To use Metabase with this data you must enable API access in the Google Developers Console."],["To use Metabase with this data you must enable API access in the Google Developers Console."]),A=J([""," to go to the console if you haven't already done so."],[""," to go to the console if you haven't already done so."]),T=J(["Database type"],["Database type"]),P=J(["Select a database"],["Select a database"]),j=J(["Name"],["Name"]),N=J(["How would you like to refer to this database?"],["How would you like to refer to this database?"]),M=J(["Automatically run queries when doing simple filtering and summarizing"],["Automatically run queries when doing simple filtering and summarizing"]),R=J(["When this is on, Metabase will automatically run queries when users do simple explorations with the Summarize and Filter buttons when viewing a table or chart. You can turn this off if querying this database is slow. This setting doesn’t affect drill-throughs or SQL queries."],["When this is on, Metabase will automatically run queries when users do simple explorations with the Summarize and Filter buttons when viewing a table or chart. You can turn this off if querying this database is slow. This setting doesn’t affect drill-throughs or SQL queries."]),D=J(["This is a large database, so let me choose when Metabase syncs and scans"],["This is a large database, so let me choose when Metabase syncs and scans"]),L=J(["By default, Metabase does a lightweight hourly sync and an intensive daily scan of field values. If you have a large database, we recommend turning this on and reviewing when and how often the field value scans happen."],["By default, Metabase does a lightweight hourly sync and an intensive daily scan of field values. If you have a large database, we recommend turning this on and reviewing when and how often the field value scans happen."]),I=J(["Database syncing"],["Database syncing"]),F=J(["This is a lightweight process that checks for updates to this database’s schema. In most cases, you should be fine leaving this set to sync hourly."],["This is a lightweight process that checks for updates to this database’s schema. In most cases, you should be fine leaving this set to sync hourly."]),z=J(["Scanning for Filter Values"],["Scanning for Filter Values"]),q=J(["Metabase can scan the values present in each field in this database to enable checkbox filters in dashboards and questions. This can be a somewhat resource-intensive process, particularly if you have a very large database."],["Metabase can scan the values present in each field in this database to enable checkbox filters in dashboards and questions. This can be a somewhat resource-intensive process, particularly if you have a very large database."]),B=J(["When should Metabase automatically scan and cache field values?"],["When should Metabase automatically scan and cache field values?"]),U=Z(n(0)),V=n(1),G=Z(n(14)),H=Z(n(116)),W=Z(n(553)),Q=Z(n(554)),Y=Z(n(555)),K=Z(n(556));function Z(e){return e&&e.__esModule?e:{default:e}}function J(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var X={"tunnel-enabled":function(e,t){return{title:(0,V.t)(i),description:(0,V.t)(o)}},"use-jvm-timezone":function(e,t){return{title:(0,V.t)(u),description:(0,V.t)(l)}},"use-srv":function(e,t){return{title:(0,V.t)(s),description:(0,V.t)(c)}},"client-id":function(e,t){return{description:function(e,t){if(te[e]){var n=te[e]+(t["project-id"]||"");return U.default.createElement("span",null,(0,V.jt)(E,U.default.createElement(H.default,{className:"link",href:n},(0,V.t)(w)))," ",(0,V.t)(O))}}(e,t)}},"auth-code":function(e,t){return{description:U.default.createElement("div",null,U.default.createElement("div",null,function(e,t){if($[e]&&t["client-id"])return U.default.createElement("span",null,(0,V.jt)(S,U.default.createElement(H.default,{href:$[e]+t["client-id"]},(0,V.t)(w))),"bigquery"===e&&U.default.createElement("span",null," ","(",(0,V.t)(C)," ",U.default.createElement(H.default,{href:$.bigquery_with_drive+t["client-id"]},(0,V.t)(x)),")"))}(e,t)),U.default.createElement("div",null,function(e,t){if($[e]&&t["client-id"]){var n=t["client-id"]&&(t["client-id"].match(/^\d+/)||[])[0];if(ee[e]&&n){var r=ee[e]+n;return U.default.createElement("span",null,(0,V.t)(k)," ",(0,V.jt)(A,U.default.createElement(H.default,{href:r},(0,V.t)(w))))}}}(e,t)))}},"service-account-json":function(e,t){return{validate:function(e){if(!e)return(0,V.t)(d);try{JSON.parse(e)}catch(e){return(0,V.t)(f)}return null}}},"tunnel-private-key":function(e,t){return{title:(0,V.t)(p),placeholder:(0,V.t)(m),type:"text"}},"tunnel-private-key-passphrase":function(e,t){return{title:(0,V.t)(h)}},"tunnel-auth-option":function(e,t){return{title:(0,V.t)(v),options:[{name:(0,V.t)(y),value:"ssh-key"},{name:(0,V.t)(g),value:"password"}]}},"ssl-cert":function(e,t){return{title:(0,V.t)(b),placeholder:(0,V.t)(_),type:"text"}}},$={bigquery:"https://accounts.google.com/o/oauth2/auth?redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/bigquery&client_id=",bigquery_with_drive:"https://accounts.google.com/o/oauth2/auth?redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/bigquery%20https://www.googleapis.com/auth/drive&client_id=",googleanalytics:"https://accounts.google.com/o/oauth2/auth?access_type=offline&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/analytics.readonly&client_id="},ee={googleanalytics:"https://console.developers.google.com/apis/api/analytics.googleapis.com/overview?project="},te={bigquery:"https://console.developers.google.com/apis/credentials/oauthclient?project=",googleanalytics:"https://console.developers.google.com/apis/credentials/oauthclient?project="},ne=t.DEFAULT_SCHEDULES={cache_field_values:{schedule_day:null,schedule_frame:null,schedule_hour:0,schedule_type:"daily"},metadata_sync:{schedule_day:null,schedule_frame:null,schedule_hour:null,schedule_type:"hourly"}};var re=Object.entries(G.default.get("engines")||{}).map(function(e){var t=r(e,2),n=t[0];return{name:t[1]["driver-name"],value:n}}).sort(function(e,t){return e.name.localeCompare(t.name)}),ae={details:{fields:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.engine,r=e.details,i=void 0===r?{}:r;return[{name:"engine",title:(0,V.t)(T),type:"select",options:re,placeholder:(0,V.t)(P)},{name:"name",title:(0,V.t)(j),placeholder:(0,V.t)(N),validate:function(e){return!e&&(0,V.t)(d)},hidden:!n}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(function(e,t,n){var r=(G.default.get("engines")||{})[e];if("bigquery"===e&&(r=(0,W.default)(t)),"mongo"===e&&(r=(0,Q.default)(t,r,n)),r){var i=[],o=!0,u=!1,l=void 0;try{for(var s,c=function(){var n=s.value;if(n.name.startsWith("tunnel-")&&"tunnel-enabled"!==n.name&&!t["tunnel-enabled"])return"continue";if(n.name.startsWith("tunnel-private-")&&"ssh-key"!==t["tunnel-auth-option"])return"continue";if("tunnel-pass"===n.name&&"ssh-key"===t["tunnel-auth-option"])return"continue";if("ssl-cert"===n.name&&!t.ssl)return"continue";var r=X[n.name];i.push(a({name:"details."+n.name,title:n["display-name"],type:n.type,placeholder:n.placeholder||n.default,options:n.options,validate:function(e){return n.required&&!e?(0,V.t)(d):null},normalize:function(e){return""===e||null==e?"default"in n?n.default:null:e},horizontal:"boolean"===n.type,initial:n.default,readOnly:n.readOnly||!1},r&&r(e,t)))},f=r["details-fields"][Symbol.iterator]();!(o=(s=f.next()).done);o=!0)c()}catch(e){u=!0,l=e}finally{try{!o&&f.return&&f.return()}finally{if(u)throw l}}return i}return[]}(n,i,t)||[]),[{name:"auto_run_queries",type:"boolean",title:(0,V.t)(M),description:(0,V.t)(R),initial:!0,hidden:!n},{name:"details.let-user-control-scheduling",type:"boolean",title:(0,V.t)(D),description:(0,V.t)(L),hidden:!n},{name:"is_full_sync",type:"hidden"},{name:"is_on_demand",type:"hidden"},{name:"schedules.metadata_sync",type:Y.default,title:(0,V.t)(I),description:(0,V.t)(F),hidden:!n||!i["let-user-control-scheduling"]},{name:"schedules.cache_field_values",type:K.default,title:(0,V.t)(z),description:(0,V.t)(q)+" "+(0,V.t)(B),hidden:!n||!i["let-user-control-scheduling"]}])},normalize:function(e){return e.details["let-user-control-scheduling"]?e:a({},e,{is_full_sync:!0,schedules:ne})}}};ae.connection=a({},ae.details,{fields:function(){var e;return(e=ae.details).fields.apply(e,arguments).map(function(e){return a({},e,{hidden:e.hidden||ie.has(e.name)})})}}),ae.scheduling=a({},ae.details,{fields:function(){var e;return(e=ae.details).fields.apply(e,arguments).map(function(e){return a({},e,{hidden:e.hidden||!ie.has(e.name)})})}});var ie=new Set(["schedules.metadata_sync","schedules.cache_field_values"]);t.default=ae},553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(["Service Accounts"],["Service Accounts"]),a=h(["Metabase connects to Big Query via ","."],["Metabase connects to Big Query via ","."]),i=h(["Continue using an OAuth application to connect"],["Continue using an OAuth application to connect"]),o=h(["We recommend switching to use "," instead of an OAuth application to connect to BigQuery"],["We recommend switching to use "," instead of an OAuth application to connect to BigQuery"]),u=h(["Connect to a Service Account instead"],["Connect to a Service Account instead"]);t.default=function(e){var t=null==e["use-service-account"]?["client-id","client-secret"].every(function(t){return null==e[t]}):e["use-service-account"];return{"details-fields":[{name:"use-service-account",type:function(e){var t=e.field,n=t.value,p=t.onChange,m=e.values.details,h=l.default.createElement(d.default,{href:v},(0,s.t)(r)),y=["client-id","client-secret"].every(function(e){return null==m[e]});return!n&&y||!0===n?l.default.createElement("div",null,l.default.createElement("p",null,(0,s.jt)(a,h)),!0===n&&l.default.createElement(f.default,{className:"link",onClick:function(){return p(!1)}},(0,s.t)(i))):l.default.createElement("div",{style:{borderLeftWidth:3,borderLeftStyle:"solid",borderLeftColor:(0,c.color)("brand")},className:"pl1"},l.default.createElement("p",null,(0,s.jt)(o,h)),l.default.createElement(f.default,{className:"link",onClick:function(){return p(!0)}},(0,s.t)(u)))},hidden:!0}].concat(m(t?[]:[{name:"project-id","display-name":"Project ID",placeholder:"praxis-beacon-120871",required:!0}]),[{name:"dataset-id","display-name":"Dataset ID",placeholder:"toucanSightings",required:!0}],m(t?[{name:"service-account-json","display-name":"Service account JSON file",type:"textFile",required:!0}]:[{name:"client-id","display-name":"Client ID",placeholder:"1201327674725-y6ferb0feo1hfssr7t40o4aikqll46d4.apps.googleusercontent.com",required:!0},{name:"client-secret","display-name":"Client Secret",placeholder:"dJNi4utWgMzyIFo2JbnsK6Np",required:!0},{name:"auth-code","display-name":"Auth Code",placeholder:"4/HSk-KtxkSzTt61j5zcbee2Rmm5JHkRFbL5gD5lgkXek",required:!0}]),[{name:"use-jvm-timezone","display-name":"Use JVM Time Zone",default:!1,type:"boolean"}])}};var l=p(n(0)),s=n(1),c=n(7),d=p(n(116)),f=p(n(49));function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v="https://developers.google.com/identity/protocols/OAuth2ServiceAccount"},554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(["Paste a connection string"],["Paste a connection string"]),a=s(["Fill out individual fields"],["Fill out individual fields"]);t.default=function(e,t,n){var r=null==e["use-connection-uri"]||e["use-connection-uri"],a=["host","dbname","port","user","pass","authdb","additional-options","use-srv","ssl"],i=t["details-fields"].filter(function(e){return!(r&&a.includes(e.name)||!r&&"conn-uri"===e.name)}).map(function(e){return"conn-uri"===e.name&&n&&(e.type="password"),e});return{"details-fields":[{name:"use-connection-uri",type:c,hidden:!0,default:!1}].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i))}};var i=l(n(0)),o=n(1),u=l(n(49));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function c(e){var t=e.field,n=t.value,l=t.onChange;return i.default.createElement("div",null,i.default.createElement(u.default,{className:"link",onClick:function(){return l(!n)}},!1===n?(0,o.t)(r):(0,o.t)(a)))}c.displayName="MongoConnectionStringToggle"},555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["Scan"],a=["Scan"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}})));t.default=d;var o=c(n(0)),u=c(n(3)),l=n(1),s=c(n(233));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){var t=e.field;return o.default.createElement(s.default,{schedule:u.default.isString(t.value)?{schedule_day:"mon",schedule_frame:null,schedule_hour:0,schedule_type:"daily"}:t.value,scheduleOptions:["hourly","daily"],onScheduleChange:t.onChange,textBeforeInterval:(0,l.t)(i)})}d.displayName="MetadataSyncScheduleWidget"},556:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncOption=void 0;var r=h(["Regularly, on a schedule"],["Regularly, on a schedule"]),a=h(["Scan"],["Scan"]),i=h(["Only when adding a new filter widget"],["Only when adding a new filter widget"]),o=h(["When a user adds a new filter to a dashboard or a SQL question, Metabase will\n                                                  scan the field(s) mapped to that filter in order to show the list of selectable values."],["When a user adds a new filter to a dashboard or a SQL question, Metabase will\n                                                  scan the field(s) mapped to that filter in order to show the list of selectable values."]),u=h(["Never, I'll do this manually if I need to"],["Never, I'll do this manually if I need to"]);t.default=v;var l=m(n(0)),s=m(n(3)),c=n(1),d=m(n(4)),f=n(7),p=m(n(233));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function v(e){var t=e.field,n=e.values,d=e.onChangeField,f=function(e,t){d("is_full_sync",e),d("is_on_demand",t)};return l.default.createElement("ol",{className:"bordered shadowed mt3"},l.default.createElement("li",{className:"border-bottom"},l.default.createElement(y,{selected:n.is_full_sync,name:(0,c.t)(r),select:function(){return f(!0,!1)}},l.default.createElement("div",{className:"flex align-center"},l.default.createElement(p.default,{schedule:s.default.isString(t.value)?{schedule_day:"mon",schedule_frame:null,schedule_hour:0,schedule_type:"daily"}:t.value,scheduleOptions:["daily","weekly","monthly"],onScheduleChange:t.onChange,textBeforeInterval:(0,c.t)(a)})))),l.default.createElement("li",{className:"border-bottom pr2"},l.default.createElement(y,{selected:!n.is_full_sync&&n.is_on_demand,name:(0,c.t)(i),select:function(){return f(!1,!0)}},l.default.createElement("p",{className:"text-paragraph text-measure"},(0,c.t)(o)))),l.default.createElement("li",null,l.default.createElement(y,{selected:!n.is_full_sync&&!n.is_on_demand,name:(0,c.t)(u),select:function(){return f(!1,!1)}})))}v.displayName="CacheFieldValuesScheduleWidget";var y=t.SyncOption=function(e){var t=e.selected,n=e.name,r=e.children,a=e.select;return l.default.createElement("div",{className:(0,d.default)("py3 relative",{"cursor-pointer":!t}),onClick:function(){return a(n.toLowerCase())}},l.default.createElement("div",{className:(0,d.default)("circle ml2 flex align-center justify-center absolute"),style:{width:18,height:18,borderWidth:2,borderColor:t?(0,f.color)("brand"):(0,f.color)("text-light"),borderStyle:"solid"}},t&&l.default.createElement("div",{className:"circle",style:{width:8,height:8,backgroundColor:t?(0,f.color)("brand"):(0,f.color)("text-light")}})),l.default.createElement("div",{className:"ml4 pl2"},l.default.createElement("div",{className:(0,d.default)({"text-brand":t})},l.default.createElement("h3",null,n)),t&&r&&l.default.createElement("div",{className:"mt2"},r)))};y.displayName="SyncOption"},557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(0)),o=u(n(52));function u(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){var t;return(0,o.default)()(t=function(t){function n(){var e,t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return t=r=l(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),r.state={expand:!1},l(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.default.Component),a(n,[{key:"componentWillReceiveProps",value:function(e){null!=e.width&&null!=this.props.width&&e.width>this.props.width&&this.setState({expand:!0})}},{key:"render",value:function(){return i.default.createElement(e,r({},this.props,this.state))}}]),n}())||t}},558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(["Add filter"],["Add filter"]),a=f(["Update filter"],["Update filter"]);t.default=p;var i=d(n(0)),o=n(1),u=d(n(4)),l=d(n(19)),s=d(n(317)),c=n(141);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function p(e){var t=e.filter,n=e.isNew,d=e.onFilterChange,f=e.onCommit,p=e.className,m=t.dimension().field();return i.default.createElement("div",{className:(0,u.default)(p,"flex align-center")},i.default.createElement(s.default,{filter:t,onFilterChange:d,operator:m.isDate()?(0,c.getOperator)(t):t.operator()}),f&&i.default.createElement(l.default,{"data-ui-tag":"add-filter",purple:!0,disabled:!t.isValid(),ml:"auto",onClick:f},n?(0,o.t)(r):(0,o.t)(a)))}p.displayName="FilterPopoverFooter"},559:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.processSource=function(e){var t=e.source,n=e.targetOffset,l=void 0,s=[],c=void 0,d=void 0,f=void 0,p=(0,a.parse)(r({},e,{recover:!0})),m=p.cst,h=p.tokenVector,v=p.parserErrors;if(v.length>0)f=v;else try{l=(0,i.compile)(r({cst:m,tokenVector:h},e))}catch(e){console.warn("compile error",e),f=e}if(null!=n)try{var y=(0,o.suggest)(r({cst:m,tokenVector:h},e)),g=y.suggestions;s=void 0===g?[]:g,c=y.helpText}catch(e){console.warn("suggest error",e)}try{d=(0,u.syntax)(r({cst:m,tokenVector:h},e))}catch(e){console.warn("syntax error",e)}return{source:t,expression:l,helpText:c,suggestions:s,syntaxTree:d,compileError:f}};var a=n(186),i=n(564),o=n(565),u=n(567)},564:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.compile=function(e){var t=e.cst,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["cst"]);if(!t){var r=(0,i.parse)(n);t=r.cst}return new o(n).visit(t)},t.parseOperators=function(e,t){for(var n=e[0],r=[],i=1;i<e.length;i++){var o=t[i-1],u=e[i],l=r[r.length-1];if(l)if(l[0]===o)l.push(u);else{var s=a.OPERATOR_PRECEDENCE[o],c=a.OPERATOR_PRECEDENCE[l[0]];if(c<s)l[l.length-1]=[o,l[l.length-1],u],r.push(l[l.length-1]);else{do{r.pop()}while(r.length>0&&a.OPERATOR_PRECEDENCE[r[r.length-1][0]]>s);r.length>0?r[r.length-1].push(u):(n=[o,n,u],r.push(n))}}else n=[o,n,u],r.push(n)}return n};var a=n(68),i=n(186);var o=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._options=e,n.validateVisitor(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.ExpressionCstVisitor),r(t,[{key:"any",value:function(e){return this.visit(e.expression)}},{key:"expression",value:function(e){return this.visit(e.expression)}},{key:"aggregation",value:function(e){return this.visit(e.expression)}},{key:"number",value:function(e){return this.visit(e.expression)}},{key:"string",value:function(e){return this.visit(e.expression)}},{key:"boolean",value:function(e){return this.visit(e.expression)}},{key:"additionExpression",value:function(e){return this._collapseOperators(e.operands,e.operators)}},{key:"multiplicationExpression",value:function(e){return this._collapseOperators(e.operands,e.operators)}},{key:"functionExpression",value:function(e){var t=this,n=e.functionName[0].image,r=(0,a.getMBQLName)(n);if(!r)throw new Error("Unknown Function: "+n);var i=(e.arguments||[]).map(function(e){return t.visit(e)});return[r].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i))}},{key:"caseExpression",value:function(e){for(var t=this,n=["case",[]],r=e.arguments.map(function(e){return t.visit(e)}),a=0;a<r.length;a++)a===r.length-1?n.push({default:r[a]}):n[1].push([r[a],r[++a]]);return n}},{key:"metricExpression",value:function(e){var t=this.visit(e.metricName),n=(0,a.parseMetric)(t,this._options);if(!n)throw new Error("Unknown Metric: "+t);return["metric",n.id]}},{key:"segmentExpression",value:function(e){var t=this.visit(e.segmentName),n=(0,a.parseSegment)(t,this._options);if(!n)throw new Error("Unknown Segment: "+t);return["segment",n.id]}},{key:"dimensionExpression",value:function(e){var t=this.visit(e.dimensionName),n=(0,a.parseDimension)(t,this._options);if(!n)throw new Error("Unknown Field: "+t);return n.mbql()}},{key:"identifier",value:function(e){return e.Identifier[0].image}},{key:"identifierString",value:function(e){return(0,a.parseIdentifierString)(e.IdentifierString[0].image)}},{key:"stringLiteral",value:function(e){return(0,a.parseStringLiteral)(e.StringLiteral[0].image)}},{key:"numberLiteral",value:function(e){return parseFloat(e.NumberLiteral[0].image)*(e.Minus?-1:1)}},{key:"atomicExpression",value:function(e){return this.visit(e.expression)}},{key:"parenthesisExpression",value:function(e){return this.visit(e.expression)}},{key:"booleanExpression",value:function(e){return this._collapseOperators(e.operands,e.operators)}},{key:"comparisonExpression",value:function(e){return[e.operators[0].image.toLowerCase(),this.visit(e.operands[0]),this.visit(e.operands[1])]}},{key:"booleanUnaryExpression",value:function(e){return[e.operators[0].image.toLowerCase(),this.visit(e.operands[0])]}},{key:"_collapseOperators",value:function(e,t){for(var n=this.visit(e[0]),r=1;r<e.length;r++){var a=t[r-1].image.toLowerCase(),i=this.visit(e[r]);Array.isArray(n)&&n[0]===a?n.push(i):n=[a,n,i]}return n}},{key:"_getOperators",value:function(e){return(e||[]).map(function(e){return e.image.toLowerCase()})}},{key:"_getOperands",value:function(e){var t=this;return(e||[]).map(function(e){return t.visit(e)})}}]),t}()},565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionContextVisitor=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.suggest=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.source,n=e.cst,r=e.query,o=e.startRule,p=e.targetOffset,v=void 0===p?t.length:p,y=e.expressionName,g=t.slice(0,v),b=s.lexerWithRecovery.tokenize(g);if(b.errors.length>0)throw b.errors;var _=!1,E=b.tokens,w=i.default.last(b.tokens),C=w&&(0,s.isTokenType)(w.tokenType,s.UnclosedQuotedString)&&(0,s.isTokenType)(w.tokenType,s.IdentifierString);w&&((0,s.isTokenType)(w.tokenType,s.Identifier)&&s.Identifier.PATTERN.test(g[g.length-1])||C)&&(E=E.slice(0,-1),_=!0);var k=C?{prefixTrim:new RegExp(w.tokenType.PATTERN.source+"$")}:{prefixTrim:new RegExp(s.Identifier.PATTERN.source+"$"),postfixTrim:new RegExp("^"+s.Identifier.PATTERN.source+"\\s*")},A=x({cst:n,tokenVector:E,targetOffset:v,startRule:o})||{expectedType:o},T=A.clause&&(0,c.default)(A.clause.name);if(!_&&T)return{helpText:T};var P=A.expectedType,j=[],N=l.parserWithRecovery.computeContentAssist(o,E),M=!0,R=!1,D=void 0;try{for(var L,I=N[Symbol.iterator]();!(M=(L=I.next()).done);M=!0){var F=L.value,z=F.nextTokenType,q=F.ruleStack;if(z===s.Identifier||z===s.IdentifierString){var B,U,V=q.slice(-2,-1)[0],G="dimensionExpression"===V&&((0,f.isExpressionType)(P,"expression")||(0,f.isExpressionType)(P,"boolean")),H="segmentExpression"===V&&(0,f.isExpressionType)(P,"boolean"),W="metricExpression"===V&&(0,f.isExpressionType)(P,"aggregation");if(G){var Q,Y=[];if(A.token&&A.clause&&(0,s.isTokenType)(A.token.tokenType,s.AggregationFunctionName))Y=r.aggregationFieldOptions(A.clause.name).all();else{Y=r.dimensionOptions(function(e){if(e instanceof d.ExpressionDimension&&e.name()===y)return!1;if("expression"===P||"boolean"===P)return!0;var t=e.field();return(0,f.isExpressionType)("number",P)&&t.isNumeric()||(0,f.isExpressionType)("string",P)&&t.isString()}).all()}(Q=j).push.apply(Q,m(Y.map(function(e){return a({type:"fields",name:(0,u.getDimensionName)(e),text:(0,u.formatDimensionName)(e)+" ",alternates:f.EDITOR_FK_SYMBOLS.symbols.map(function(t){return(0,u.getDimensionName)(e,t)})},k)})))}if(H)(B=j).push.apply(B,m(r.table().segments.map(function(e){return a({type:"segments",name:e.name,text:(0,u.formatSegmentName)(e)},k)})));if(W)(U=j).push.apply(U,m(r.table().metrics.map(function(e){return a({type:"metrics",name:e.name,text:(0,u.formatMetricName)(e)},k)})))}else if(C);else if(z===s.AdditiveOperator||z===s.MultiplicativeOperator){if((0,f.isExpressionType)("number",P)||(0,f.isExpressionType)("aggregation",P)){var K,Z=(0,s.getSubTokenTypes)(z);(K=j).push.apply(K,m(Z.map(function(e){return O(s.CLAUSE_TOKENS.get(e).name)})))}}else if(z===s.BooleanOperatorUnary||z===s.BooleanOperatorBinary||z===s.FilterOperator){if((0,f.isExpressionType)(P,"boolean")){var J,X=(0,s.getSubTokenTypes)(z);(J=j).push.apply(J,m(X.map(function(e){return O(s.CLAUSE_TOKENS.get(e).name)})))}}else(0,s.isTokenType)(z,s.FunctionName)||z===s.Case?function(){var e,t,n,a=r.database(),i=[];(0,f.isExpressionType)(P,"aggregation")?((t=j).push.apply(t,m(h.aggregation.filter(function(e){return a.hasFeature(e.requiresFeature)}).map(function(e){return S("aggregations",e.name,e.args.length>0)}))),(n=j).push.apply(n,m(["sum-where","count-where","share"].map(function(e){return S("aggregations",e,!0)}))),i=h.number):i=h[P];(e=j).push.apply(e,m(i.filter(function(e){return a.hasFeature(e.requiresFeature)}).map(function(e){return S("functions",e.name)})))}():z===s.LParen?j.push({type:"other",name:"(",text:" (",postfixText:")",prefixTrim:/\s*$/,postfixTrim:/^\s*\(?\s*/}):z===s.RParen?j.push({type:"other",name:")",text:") ",prefixTrim:/\s*$/,postfixTrim:/^\s*\)?\s*/}):z===s.Comma?A.clause&&(A.clause.multiple||A.index<A.clause.args.length-1)&&j.push({type:"other",name:",",text:", ",postfixText:",",prefixTrim:/\s*$/,postfixTrim:/^\s*,?\s*/}):z===s.StringLiteral||z===s.NumberLiteral||z===s.Minus||console.warn("non exhaustive match",z.name)}}catch(e){R=!0,D=e}finally{try{!M&&I.return&&I.return()}finally{if(R)throw D}}if(_){var $=w.image,ee=C?$.slice(1).toLowerCase():$.toLowerCase(),te=!0,ne=!1,re=void 0;try{for(var ae,ie=j[Symbol.iterator]();!(te=(ae=ie.next()).done);te=!0){var oe=ae.value,ue=[oe.name,oe.text].concat(m(oe.alternates||[]));e:for(var le=0;le<ue.length;le++){var se=ue[le],ce=(se||"").toLowerCase();if(ce.startsWith(ee)){oe.range=[0,ee.length];break e}var de=0,fe=!0,pe=!1,me=void 0;try{for(var he,ve=ce.split(/\b/g)[Symbol.iterator]();!(fe=(he=ve.next()).done);fe=!0){var ye=he.value;if(ye.startsWith(ee)){oe.range=[de,de+ee.length];break e}de+=ye.length}}catch(e){pe=!0,me=e}finally{try{!fe&&ve.return&&ve.return()}finally{if(pe)throw me}}}}}catch(e){ne=!0,re=e}finally{try{!te&&ie.return&&ie.return()}finally{if(ne)throw re}}j=j.filter(function(e){return e.range})}var ge=!0,be=!1,_e=void 0;try{for(var Ee,we=j[Symbol.iterator]();!(ge=(Ee=we.next()).done);ge=!0){var Oe=Ee.value;Oe.index=v,Oe.name||(Oe.name=Oe.text)}}catch(e){be=!0,_e=e}finally{try{!ge&&we.return&&we.return()}finally{if(be)throw _e}}return{suggestions:i.default.chain(j).uniq(function(e){return e.text}).sortBy("name").sortBy("type").value()}},t.getContext=x;var i=p(n(3)),o=p(n(437)),u=n(68),l=n(186),s=n(234),c=p(n(566)),d=n(31),f=n(181);function p(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var h={},v={},y=!0,g=!1,b=void 0;try{for(var _,E=function(){var e=_.value;h[e]=Array.from(f.FUNCTIONS).filter(function(t){return(0,f.isExpressionType)(f.MBQL_CLAUSES[t].type,e)}).map(function(e){return f.MBQL_CLAUSES[e]}),v[e]=Array.from(f.OPERATORS).filter(function(t){return(0,f.isExpressionType)(f.MBQL_CLAUSES[t].type,e)}).map(function(e){return f.MBQL_CLAUSES[e]})},w=f.EXPRESSION_TYPES[Symbol.iterator]();!(y=(_=w.next()).done);y=!0)E()}catch(e){g=!0,b=e}finally{try{!y&&w.return&&w.return()}finally{if(g)throw b}}function O(e){var t=(0,u.getExpressionName)(e);return{type:"operators",name:t,text:" "+t+" ",prefixTrim:/\s*$/,postfixTrim:new RegExp("/^s*"+(0,o.default)(t)+"?s*/")}}function S(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=(0,u.getExpressionName)(t);return{type:e,name:r,text:r+(n?"(":" "),postfixText:n?")":" ",prefixTrim:/\w+$/,postfixTrim:n?/^\w+(\(\)?|$)/:/^\w+\s*/}}var C=new l.ExpressionParser({recoveryEnabled:!0,tokenRecoveryEnabled:!1});function x(e){var t=e.source,n=e.cst,r=e.tokenVector,i=void 0===r?s.lexerWithRecovery.tokenize(t).tokens:r,o=e.targetOffset,u=void 0===o?t.length:o,l=e.startRule,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["source","cst","tokenVector","targetOffset","startRule"]);return n||(C.input=i,n=C[l]()),new A(a({targetOffset:u,tokenVector:i},c)).visit(n)}function k(e,t){for(var n=e.findIndex(function(e){return e.endOffset===t})+1;n>=0&&n<e.length;n++)if(!/^\s+$/.test(e[n].image))return e[n];return null}var A=t.ExpressionContextVisitor=function(e){function t(e){var n=e.targetOffset,r=e.tokenVector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.targetOffset=n,a.tokenVector=r,a.stack=[],a.validateVisitor(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.ExpressionCstVisitor),r(t,[{key:"_context",value:function(e,t,n){var r=s.CLAUSE_TOKENS.get(e.tokenType),a=(0,f.getFunctionArgType)(r,t);return"expression"!==a&&"number"!==a||!n||"aggregation"!==n.expectedType||"aggregation"===r.type||(a="aggregation"),{clause:r,index:t,expectedType:a,clauseToken:e}}},{key:"_isTarget",value:function(e){var t=this.targetOffset,n=k(this.tokenVector,e.endOffset);return t>e.endOffset&&(null===n||t<=n.startOffset)}},{key:"_function",value:function(e,t){var n=this.tokenVector,r=e.functionName[0],a=e.LParen?e.LParen[0]:k(n,r.endOffset);if(a&&a.tokenType===s.LParen)for(var i=[a].concat(m(e.Comma||[])),o=0;o<i.length;o++){var u=i[o];if(this._isTarget(u))return this._context(r,o,t);if(e.arguments&&o<e.arguments.length){var l=this.visit(e.arguments[o],this._context(r,o,t));if(l)return l}}}},{key:"_operator",value:function(e,t){for(var n=0;n<e.operators.length;n++){var r=e.operators[n];if(this._isTarget(r))return this._context(r,0,t);var a=this.visit(e.operands[n],this._context(r,0,t));if(a)return a}}}]),t}(),T=new Set(["expression","aggregation","boolean","string","number"]),P=!0,j=!1,N=void 0;try{for(var M,R=function(){var e=M.value;A.prototype[e]=function(t,n){if(!n&&T.has(e)&&(n={expectedType:e}),t.operators){var r=this._operator(t,n);if(r)return r}if(t.functionName){var a=this._function(t,n);if(a)return a}for(var i in t){var o=!0,u=!1,l=void 0;try{for(var s,c=t[i][Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value;if(d.tokenType){if(this._isTarget(d))return n}else{var f=this.visit(d,n);if(f)return f}}}catch(e){u=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(u)throw l}}}}},D=["any","expression","aggregation","boolean","string","number","additionExpression","multiplicationExpression","functionExpression","caseExpression","metricExpression","segmentExpression","dimensionExpression","identifier","identifierString","stringLiteral","numberLiteral","atomicExpression","parenthesisExpression","booleanExpression","comparisonExpression","booleanUnaryExpression"][Symbol.iterator]();!(P=(M=D.next()).done);P=!0)R()}catch(e){j=!0,N=e}finally{try{!P&&D.return&&D.return()}finally{if(j)throw N}}},566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Ke(["column"],["column"]),a=Ke(["Returns the average of the values in the column."],["Returns the average of the values in the column."]),i=Ke(["Quantity"],["Quantity"]),o=Ke(["The column whose values to average."],["The column whose values to average."]),u=Ke(["start"],["start"]),l=Ke(["end"],["end"]),s=Ke(["Checks a date or numeric column's values to see if they're within the specified range."],["Checks a date or numeric column's values to see if they're within the specified range."]),c=Ke(["Rating"],["Rating"]),d=Ke(["condition"],["condition"]),f=Ke(["output"],["output"]),p=Ke(["Tests a list of cases and returns the corresponding value of the first true case, with an optional default value if nothing else is met."],["Tests a list of cases and returns the corresponding value of the first true case, with an optional default value if nothing else is met."]),m=Ke(["Weight"],["Weight"]),h=Ke(["Large"],["Large"]),v=Ke(["Medium"],["Medium"]),y=Ke(["Small"],["Small"]),g=Ke(["Something that should evaluate to true or false."],["Something that should evaluate to true or false."]),b=Ke(["The value that will be returned if the preceeding condition is true."],["The value that will be returned if the preceeding condition is true."]),_=Ke(["value1"],["value1"]),E=Ke(["value2"],["value2"]),w=Ke(["Looks at the values in each argument in order and returns the first non-null value for each row."],["Looks at the values in each argument in order and returns the first non-null value for each row."]),O=Ke(["Comments"],["Comments"]),S=Ke(["Notes"],["Notes"]),C=Ke(["No comments"],["No comments"]),x=Ke(["A column or value."],["A column or value."]),k=Ke(["If value1 is empty, value2 gets returned if it's not empty, and so on."],["If value1 is empty, value2 gets returned if it's not empty, and so on."]),A=Ke(["Combines two or more strings of text together."],["Combines two or more strings of text together."]),T=Ke(["Last Name"],["Last Name"]),P=Ke(["First Name"],["First Name"]),j=Ke(["value2 will be added on to the end of this."],["value2 will be added on to the end of this."]),N=Ke(["This will be added to the end of value1."],["This will be added to the end of value1."]),M=Ke(["string1"],["string1"]),R=Ke(["string2"],["string2"]),D=Ke(["Checks to see if string1 contains string2 within it."],["Checks to see if string1 contains string2 within it."]),L=Ke(["Status"],["Status"]),I=Ke(["Pass"],["Pass"]),F=Ke(["The contents of this string will be checked."],["The contents of this string will be checked."]),z=Ke(["The string of text to look for."],["The string of text to look for."]),q=Ke(["Returns the count of rows in the source data."],["Returns the count of rows in the source data."]),B=Ke(["Only counts rows where the condition is true."],["Only counts rows where the condition is true."]),U=Ke(["Subtotal"],["Subtotal"]),V=Ke(["The additive total of rows across a breakout."],["The additive total of rows across a breakout."]),G=Ke(["The rolling sum of a column across a breakout."],["The rolling sum of a column across a breakout."]),H=Ke(["The column to sum."],["The column to sum."]),W=Ke(["The number of distinct values in this column."],["The number of distinct values in this column."]),Q=Ke(["The column whose distinct values to count."],["The column whose distinct values to count."]),Y=Ke(["text"],["text"]),K=Ke(["comparison"],["comparison"]),Z=Ke(["Returns true if the end of the text matches the comparison text."],["Returns true if the end of the text matches the comparison text."]),J=Ke(["Appetite"],["Appetite"]),X=Ke(["hungry"],["hungry"]),$=Ke(["A column or string of text to check."],["A column or string of text to check."]),ee=Ke(["The string of text that the original text should end with."],["The string of text that the original text should end with."]),te=Ke(["regular_expression"],["regular_expression"]),ne=Ke(["Extracts matching substrings according to a regular expression."],["Extracts matching substrings according to a regular expression."]),re=Ke(["Address"],["Address"]),ae=Ke(["The column or string of text to search though."],["The column or string of text to search though."]),ie=Ke(["The regular expression to match."],["The regular expression to match."]),oe=Ke(["Returns the string of text in all lowercase."],["Returns the string of text in all lowercase."]),ue=Ke(["The column with values to convert to lowercase."],["The column with values to convert to lowercase."]),le=Ke(["Removes leading whitespace from a string of text."],["Removes leading whitespace from a string of text."]),se=Ke(["Comment"],["Comment"]),ce=Ke(["The column with values you want to trim."],["The column with values you want to trim."]),de=Ke(["Returns the largest value found in the column."],["Returns the largest value found in the column."]),fe=Ke(["Age"],["Age"]),pe=Ke(["The numeric column whose maximum you want to find."],["The numeric column whose maximum you want to find."]),me=Ke(["Returns the smallest value found in the column."],["Returns the smallest value found in the column."]),he=Ke(["Salary"],["Salary"]),ve=Ke(["The numeric column whose minimum you want to find."],["The numeric column whose minimum you want to find."]),ye=Ke(["find"],["find"]),ge=Ke(["replace"],["replace"]),be=Ke(["Replaces a part of the input text with new text."],["Replaces a part of the input text with new text."]),_e=Ke(["Title"],["Title"]),Ee=Ke(["The text that will be modified."],["The text that will be modified."]),we=Ke(["The text to find."],["The text to find."]),Oe=Ke(["The text to use as the replacement."],["The text to use as the replacement."]),Se=Ke(["Removes trailing whitespace from a string of text."],["Removes trailing whitespace from a string of text."]),Ce=Ke(["Returns the percent of rows in the data that match the condition, as a decimal."],["Returns the percent of rows in the data that match the condition, as a decimal."]),xe=Ke(["Source"],["Source"]),ke=Ke(["Returns true if the beginning of the text matches the comparison text."],["Returns true if the beginning of the text matches the comparison text."]),Ae=Ke(["Course Name"],["Course Name"]),Te=Ke(["Computer Science"],["Computer Science"]),Pe=Ke(["The string of text that the original text should start with."],["The string of text that the original text should start with."]),je=Ke(["Calculates the standard deviation of the column."],["Calculates the standard deviation of the column."]),Ne=Ke(["Population"],["Population"]),Me=Ke(["A numeric column."],["A numeric column."]),Re=Ke(["position"],["position"]),De=Ke(["length"],["length"]),Le=Ke(["Returns a portion of the supplied text."],["Returns a portion of the supplied text."]),Ie=Ke(["The text to return a portion of."],["The text to return a portion of."]),Fe=Ke(["The position to start copying characters."],["The position to start copying characters."]),ze=Ke(["The number of characters to return."],["The number of characters to return."]),qe=Ke(["Adds up all the values of the column."],["Adds up all the values of the column."]),Be=Ke(["The numeric column to sum."],["The numeric column to sum."]),Ue=Ke(["Sums up values in a column where rows match the condition."],["Sums up values in a column where rows match the condition."]),Ve=Ke(["Order Status"],["Order Status"]),Ge=Ke(["Valid"],["Valid"]),He=Ke(["Removes leading and trailing whitespace from a string of text."],["Removes leading and trailing whitespace from a string of text."]),We=Ke(["Returns the string of text in all upper case."],["Returns the string of text in all upper case."]),Qe=Ke(["The column with values to convert to upper case."],["The column with values to convert to upper case."]),Ye=n(1);function Ke(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ze=[{name:"average",structure:"avg("+(0,Ye.t)(r)+")",description:(0,Ye.t)(a),example:"avg( ["+(0,Ye.t)(i)+"] )",args:[{name:(0,Ye.t)(r),description:(0,Ye.t)(o)}]},{name:"between",structure:"between("+(0,Ye.t)(r)+","+(0,Ye.t)(u)+","+(0,Ye.t)(l)+")",description:(0,Ye.t)(s),example:"between( ["+(0,Ye.t)(c)+"], 3.75, 5 )",args:[{name:(0,Ye.t)(r),description:(0,Ye.t)(o)}]},{name:"case",structure:"case("+(0,Ye.t)(d)+", "+(0,Ye.t)(f)+", "+(0,Ye.t)(d)+", "+(0,Ye.t)(f)+"…)",description:(0,Ye.t)(p),example:"case( ["+(0,Ye.t)(m)+'] > 200, "'+(0,Ye.t)(h)+'", ['+(0,Ye.t)(m)+'] > 150, "'+(0,Ye.t)(v)+'", "'+(0,Ye.t)(y)+'" )',args:[{name:(0,Ye.t)(d),description:(0,Ye.t)(g)},{name:(0,Ye.t)(f),description:(0,Ye.t)(b)}]},{name:"coalesce",structure:"coalesce("+(0,Ye.t)(_)+", "+(0,Ye.t)(E)+", …)",description:(0,Ye.t)(w),example:"coalesce( ["+(0,Ye.t)(O)+"], ["+(0,Ye.t)(S)+'], "'+(0,Ye.t)(C)+'" )',args:[{name:(0,Ye.t)(_),description:(0,Ye.t)(x)},{name:(0,Ye.t)(E),description:(0,Ye.t)(k)}]},{name:"concat",structure:"concat("+(0,Ye.t)(_)+", "+(0,Ye.t)(E)+", …)",description:(0,Ye.t)(A),example:"concat(["+(0,Ye.t)(T)+'] , ", ", ['+(0,Ye.t)(P)+"])",args:[{name:(0,Ye.t)(_),description:(0,Ye.t)(j)},{name:(0,Ye.t)(E),description:(0,Ye.t)(N)}]},{name:"contains",structure:"contains("+(0,Ye.t)(M)+", "+(0,Ye.t)(R)+", …)",description:(0,Ye.t)(D),example:"contains(["+(0,Ye.t)(L)+'] , "'+(0,Ye.t)(I)+'")',args:[{name:(0,Ye.t)(M),description:(0,Ye.t)(F)},{name:(0,Ye.t)(R),description:(0,Ye.t)(z)}]},{name:"count",structure:"count",description:(0,Ye.t)(q),example:"count"},{name:"countif",structure:"countif("+(0,Ye.t)(d)+")",description:(0,Ye.t)(B),example:"countif( ["+(0,Ye.t)(U)+"] > 100 )",args:[{name:(0,Ye.t)(d),description:(0,Ye.t)(g)}]},{name:"CumulativeCount",structure:"CumulativeCount",description:(0,Ye.t)(V),example:"CumulativeCount"},{name:"CumulativeSum",structure:"CumulativeSum("+(0,Ye.t)(r)+")",description:(0,Ye.t)(G),example:"CumulativeSum( ["+(0,Ye.t)(U)+"] )",args:[{name:(0,Ye.t)(r),description:(0,Ye.t)(H)}]},{name:"distinct",structure:"distinct("+(0,Ye.t)(r)+")",description:(0,Ye.t)(W),example:"distinct( ["+(0,Ye.t)(T)+"] )",args:[{name:(0,Ye.t)(r),description:(0,Ye.t)(Q)}]},{name:"endsWith",structure:"endsWith("+(0,Ye.t)(Y)+", "+(0,Ye.t)(K)+")",description:(0,Ye.t)(Z),example:"endsWith(["+(0,Ye.t)(J)+'] , "'+(0,Ye.t)(X)+'" )',args:[{name:(0,Ye.t)(Y),description:(0,Ye.t)($)},{name:(0,Ye.t)(K),description:(0,Ye.t)(ee)}]},{name:"regexextract",structure:"regexextract("+(0,Ye.t)(Y)+", "+(0,Ye.t)(te)+")",description:(0,Ye.t)(ne),example:"regexextract(["+(0,Ye.t)(re)+'] , "[0-9]+")',args:[{name:(0,Ye.t)(Y),description:(0,Ye.t)(ae)},{name:(0,Ye.t)(te),description:(0,Ye.t)(ie)}]},{name:"lower",structure:"lower("+(0,Ye.t)(Y)+")",description:(0,Ye.t)(oe),example:"lower( ["+(0,Ye.t)(L)+"] )",args:[{name:(0,Ye.t)(Y),description:(0,Ye.t)(ue)}]},{name:"ltrim",structure:"ltrim("+(0,Ye.t)(Y)+")",description:(0,Ye.t)(le),example:"ltrim( ["+(0,Ye.t)(se)+"] )",args:[{name:(0,Ye.t)(Y),description:(0,Ye.t)(ce)}]},{name:"max",structure:"max("+(0,Ye.t)(r)+")",description:(0,Ye.t)(de),example:"max( ["+(0,Ye.t)(fe)+"] )",args:[{name:(0,Ye.t)(r),description:(0,Ye.t)(pe)}]},{name:"min",structure:"min("+(0,Ye.t)(r)+")",description:(0,Ye.t)(me),example:"min( ["+(0,Ye.t)(he)+"] )",args:[{name:(0,Ye.t)(r),description:(0,Ye.t)(ve)}]},{name:"replace",structure:"replace("+(0,Ye.t)(Y)+", "+(0,Ye.t)(ye)+", "+(0,Ye.t)(ge)+")",description:(0,Ye.t)(be),example:"replace(["+(0,Ye.t)(_e)+'] , "Enormous", "Gigantic")',args:[{name:(0,Ye.t)(Y),description:(0,Ye.t)(Ee)},{name:(0,Ye.t)(ye),description:(0,Ye.t)(we)},{name:(0,Ye.t)(ge),description:(0,Ye.t)(Oe)}]},{name:"rtrim",structure:"rtrim("+(0,Ye.t)(Y)+")",description:(0,Ye.t)(Se),example:"rtrim( ["+(0,Ye.t)(se)+"] )",args:[{name:(0,Ye.t)(Y),description:(0,Ye.t)(ce)}]},{name:"share",structure:"share("+(0,Ye.t)(d)+")",description:(0,Ye.t)(Ce),example:"share( ["+(0,Ye.t)(xe)+'] = "Google" )',args:[{name:(0,Ye.t)(d),description:(0,Ye.t)(g)}]},{name:"startsWith",structure:"startsWith("+(0,Ye.t)(Y)+", "+(0,Ye.t)(K)+")",description:(0,Ye.t)(ke),example:"startsWith(["+(0,Ye.t)(Ae)+'] , "'+(0,Ye.t)(Te)+'" )',args:[{name:(0,Ye.t)(Y),description:(0,Ye.t)($)},{name:(0,Ye.t)(K),description:(0,Ye.t)(Pe)}]},{name:"StandardDeviation",structure:"StandardDeviation("+(0,Ye.t)(r)+")",description:(0,Ye.t)(je),example:"StandardDeviation( ["+(0,Ye.t)(Ne)+"] )",args:[{name:(0,Ye.t)(r),description:(0,Ye.t)(Me)}]},{name:"substring",structure:"substring("+(0,Ye.t)(Y)+", "+(0,Ye.t)(Re)+", "+(0,Ye.t)(De)+")",description:(0,Ye.t)(Le),example:"substring(["+(0,Ye.t)(_e)+"], 0, 10 )",args:[{name:(0,Ye.t)(Y),description:(0,Ye.t)(Ie)},{name:(0,Ye.t)(Re),description:(0,Ye.t)(Fe)},{name:(0,Ye.t)(De),description:(0,Ye.t)(ze)}]},{name:"sum",structure:"sum("+(0,Ye.t)(r)+")",description:(0,Ye.t)(qe),example:"sum( ["+(0,Ye.t)(U)+"] )",args:[{name:(0,Ye.t)(r),description:(0,Ye.t)(Be)}]},{name:"sumif",structure:"sumif("+(0,Ye.t)(r)+", "+(0,Ye.t)(d)+")",description:(0,Ye.t)(Ue),example:"sumif( ["+(0,Ye.t)(U)+"], ["+(0,Ye.t)(Ve)+'] = "'+(0,Ye.t)(Ge)+'" )',args:[{name:(0,Ye.t)(r),description:(0,Ye.t)(H)},{name:(0,Ye.t)(d),description:(0,Ye.t)(g)}]},{name:"trim",structure:"trim("+(0,Ye.t)(Y)+")",description:(0,Ye.t)(He),example:"trim( ["+(0,Ye.t)(se)+"] )",args:[{name:(0,Ye.t)(Y),description:(0,Ye.t)(ce)}]},{name:"upper",structure:"upper("+(0,Ye.t)(Y)+")",description:(0,Ye.t)(We),example:"upper( ["+(0,Ye.t)(L)+"] )",args:[{name:(0,Ye.t)(Y),description:(0,Ye.t)(Qe)}]}];t.default=function(e){return Ze.find(function(t){return t.name===e})}},567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExpressionSyntaxVisitor=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.defaultParser=p,t.recoveryParser=m,t.fallbackParser=h,t.syntax=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.strategies,n=void 0===t?g:t,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["strategies"]),a=!0,i=!1,o=void 0;try{for(var u,l=n[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value;try{return s(r)}catch(e){}}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}throw new Error("Unable to parse: "+r.source)},t.serialize=function e(t){return t.children?t.children.map(e).join(""):t.text||""};var o=n(186),u=n(234),l=n(68);var s=new Set(["dimension","metric","aggregation"]);function c(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{type:e,tokenized:s.has(e),children:n.filter(function(e){return e})}}function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=1===t.length?["token",t[0]]:t,a=i(r,2),o=a[0],u=a[1];return Array.isArray(u)&&(1!==u.length&&console.warn("Passed token array of length "+u.length+" to tokenNode()",u),u=u[0]),u&&{type:o,text:u.image,start:u.startOffset,end:u.endOffset,_token:u}}var f=t.ExpressionSyntaxVisitor=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._options=e,n.validateVisitor(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.ExpressionCstVisitor),a(t,[{key:"any",value:function(e){return this.visit(e.expression)}},{key:"expression",value:function(e){return this.visit(e.expression)}},{key:"aggregation",value:function(e){return this.visit(e.expression)}},{key:"number",value:function(e){return this.visit(e.expression)}},{key:"string",value:function(e){return this.visit(e.expression)}},{key:"boolean",value:function(e){return this.visit(e.expression)}},{key:"additionExpression",value:function(e){return this._arithmeticExpression(e.operands,e.operators)}},{key:"multiplicationExpression",value:function(e){return this._arithmeticExpression(e.operands,e.operators)}},{key:"_arithmeticExpression",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0;r<e.length;r++)n.push(this.visit(e[r])),r<t.length&&n.push(d(t[r]));return 0===n.length?null:1===n.length?n[0]:c.apply(void 0,["math"].concat(n))}},{key:"functionExpression",value:function(e){var t=[];if(t.push(d("function-name",e.functionName)),e.LParen){var n=[];if(e.arguments)for(var r=0;r<e.arguments.length;r++)n.push(this.visit(e.arguments[r])),e.Comma&&e.Comma[r]&&n.push(d(e.Comma[r]));t.push(c.apply(void 0,["group",d("open-paren",e.LParen)].concat(n,[d("close-paren",e.RParen)])))}var a=(0,l.getMBQLName)(e.functionName[0].image),i=l.MBQL_CLAUSES[a];return c.apply(void 0,[i.type].concat(t))}},{key:"caseExpression",value:function(e){return this.functionExpression(e)}},{key:"metricExpression",value:function(e){return c("metric",this.visit(e.metricName))}},{key:"segmentExpression",value:function(e){return c("segment",this.visit(e.segmentName))}},{key:"dimensionExpression",value:function(e){return c("dimension",this.visit(e.dimensionName))}},{key:"identifier",value:function(e){return c("identifier",d(e.Identifier))}},{key:"identifierString",value:function(e){return c("identifier",d(e.IdentifierString))}},{key:"stringLiteral",value:function(e){return c("string-literal",d(e.StringLiteral))}},{key:"numberLiteral",value:function(e){return c("number-literal",d(e.Minus),d(e.NumberLiteral))}},{key:"atomicExpression",value:function(e){return this.visit(e.expression)}},{key:"parenthesisExpression",value:function(e){return c("group",d(e.LParen),this.visit(e.expression),d(e.RParen))}},{key:"booleanExpression",value:function(e){return this._arithmeticExpression(e.operands,e.operators)}},{key:"comparisonExpression",value:function(e){return c("filter",this.visit(e.operands[0]),d(e.operators),this.visit(e.operands[1]))}},{key:"booleanUnaryExpression",value:function(e){return c("filter",d(e.operators),this.visit(e.operands))}}]),t}();function p(e){var t=(0,o.parse)(e),n=t.cst,a=t.tokenVector,i=new f(r({tokenVector:a},e)),u=n&&i.visit(n);return u&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y,a=function(e,r){return n(t.substring(e,r),{start:e,end:r-1})};var i=function e(t){if(t.children){var n=[],i=null,o=!0,u=!1,l=void 0;try{for(var s,c=t.children[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=s.value,f=e(d);i&&f.start>i.end+1&&n.push(a(i.end+1,f.start)),n.push(f),i=f}}catch(e){u=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(u)throw l}}return r({},t,{children:n,start:n[0].start,end:n[n.length-1].end})}return t}(e);i.start>0&&(i.children.unshift(a(0,i.start)),i.start=0);i.end<t.length-1&&(i.children.push(a(i.end+1,t.length)),i.end=t.length-1);return i}(u,e.source,e.recover?y:v)}function m(e){return p(r({},e,{recover:!0}))}function h(e){var t=e.source,n=e.startRule,a=function(e){var t=[],n=[e.tokens].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.values(e.groups)));for(;;){for(var a=-1,i=1/0,o=0;o<n.length;o++){var u=n[o][0];u&&u.startOffset<i&&(i=u.startOffset,a=o)}if(!(a>=0))break;t.push(n[a].shift())}return r({},e,{tokens:t,groups:{}})}(u.lexerWithRecovery.tokenize(t)).tokens;function i(e){for(;++e<a.length&&a[e].tokenType===u.WhiteSpace;);return a[e]}for(var o={type:"group",children:[]},l=o,s="aggregation"===n,f=[],p=function(e){l.children.push(e),f.push(l),l=e},m=function(){0!==f.length&&(l=f.pop())},h=0;h<a.length;h++){var v=a[h],y=i(h);if((0,u.isTokenType)(v.tokenType,u.FunctionName)){var g=u.CLAUSE_TOKENS.get(v.tokenType).type,b=c(g,d("function-name",v));y&&y.tokenType===u.LParen?("aggregation"===g&&(s=!1),p(b)):l.children.push(b)}else(0,u.isTokenType)(v.tokenType,u.Identifier)||(0,u.isTokenType)(v.tokenType,u.IdentifierString)?l.children.push(c(s?"metric":"unknown",c("identifier",d(v)))):v.tokenType===u.LParen?(p(c("group")),l.children.push(d("open-paren",v))):v.tokenType===u.RParen?(l.children.push(d("close-paren",v)),m(),"aggregation"===l.type&&(s=!0,m())):l.children.push(d(v))}return o}function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!/^\s+$/.test(e))throw new Error("Recovered non-whitespace: "+e);return r({type:"whitespace"},t,{text:e})}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r({type:/^\s+$/.test(e)?"whitespace":"recovered"},t,{text:e})}var g=[m,h]},568:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=p(l),c=p(n(15)),d=p(n(569)),f=n(25);function p(e){return e&&e.__esModule?e:{default:e}}var m=8,h=37,v=39,y=46,g=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSelectionChange=function(e){c.default.findDOMNode(n).selectionStart=(0,f.getCaretPosition)(c.default.findDOMNode(n))},n.onClick=function(e){return n._isTyping=!1,n.props.onClick(e)},n.onInput=function(e){n._setValue(e.target.textContent)},n.onKeyDownNormal=function(e){n.props.onKeyDown(e)},n.onKeyDownTokenized=function(e){var t=n._isTyping;n._isTyping=e.keyCode>=65||e.keyCode===m&&t;var r=c.default.findDOMNode(n),a=(0,f.getSelectionPosition)(r),i=o(a,2);if(i[0]===i[1]){for(var u=window.getSelection().focusNode;u&&u!==r;){if(u.classList&&u.classList.contains("Expression-tokenized")){var l=(0,f.getCaretPosition)(u),s=0===l,d=l===u.textContent.length,p=u.classList.contains("Expression-selected");if(!p&&!t&&(d&&e.keyCode===m||s&&e.keyCode===y))return u.classList.add("Expression-selected"),e.stopPropagation(),void e.preventDefault();if(p&&(d&&e.keyCode===m||s&&e.keyCode===y))return u.parentNode.removeChild(u),n._setValue(r.textContent),e.stopPropagation(),void e.preventDefault();if(p&&(d&&e.keyCode===h||s&&e.keyCode===v))return u.classList.remove("Expression-selected"),n._isTyping=!0,e.stopPropagation(),void e.preventDefault()}u=u.parentNode}n.props.onKeyDown(e)}},n.state={value:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),u(t,[{key:"_getValue",value:function(){return null!=this.props.value?this.props.value:this.state.value}},{key:"_setValue",value:function(e){c.default.findDOMNode(this).value=e,"function"==typeof this.props.onChange?this.props.onChange({target:{value:e}}):this.setState({value:e})}},{key:"componentDidMount",value:function(){c.default.findDOMNode(this).focus(),this.componentDidUpdate(),document.addEventListener("selectionchange",this.onSelectionChange,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("selectionchange",this.onSelectionChange,!1)}},{key:"componentDidUpdate",value:function(){var e=c.default.findDOMNode(this),t=(0,f.saveSelection)(e);for(c.default.unmountComponentAtNode(e);e.firstChild;)e.removeChild(e.firstChild);c.default.render(s.default.createElement(d.default,{source:this._getValue(),syntaxTree:this.props.syntaxTree,parserOptions:this.props.parserOptions}),e),document.activeElement===e&&t()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.onFocus,r=e.onBlur,a=e.style;return s.default.createElement("div",{className:t,style:i({},a),contentEditable:!0,onKeyDown:this.props.tokenizedEditing?this.onKeyDownTokenized:this.onKeyDownNormal,onInput:this.onInput,onFocus:n,onBlur:r,onClick:this.onClick})}}]),t}(),r.defaultProps={style:{},tokenizedEditing:!1},a);g.displayName="TokenizedInput",t.default=g},569:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=o(n(0));n(570);var i=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.syntaxTree,n=e.source;return t?l(t):a.default.createElement("span",{className:"Expression-node"},n)}}]),t}();u.displayName="TokenizedExpression",t.default=u;var l=function e(t,n){return a.default.createElement("span",{key:n,className:(0,i.default)("Expression-node","Expression-"+t.type,{"Expression-tokenized":t.tokenized})},null!=t.text?t.text:t.children?t.children.map(e):null)};l.displayName="renderSyntaxTree"},57:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=d(n(39)),u=d(n(96)),l=(d(n(79)),d(n(182)),d(n(77)),d(n(31)),n(10)),s=n(13),c=n(82);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var p=(f((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),i(t,[{key:"hasSchema",value:function(){return this.schema_name&&this.db&&this.db.schemas.length>1||!1}},{key:"newQuestion",value:function(){return this.question().setDefaultQuery().setDefaultDisplay()}},{key:"question",value:function(){return o.default.create({databaseId:this.db&&this.db.id,tableId:this.id,metadata:this.metadata})}},{key:"query",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.question().query().updateQuery(function(t){return a({},t,e)})}},{key:"dimensions",value:function(){return this.fields.map(function(e){return e.dimension()})}},{key:"displayName",value:function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeSchema&&this.schema?this.schema.displayName()+".":"")+this.display_name}},{key:"objectName",value:function(){return(0,l.singularize)(this.displayName())}},{key:"dateFields",value:function(){return this.fields.filter(function(e){return e.isDate()})}},{key:"aggregationOperators",value:function(){return(0,s.getAggregationOperatorsWithFields)(this)}},{key:"aggregationOperatorsLookup",value:function(){return(0,c.createLookupByProperty)(this.aggregationOperators(),"short")}},{key:"aggregationOperator",value:function(e){return this.aggregation_operators_lookup[e]}},{key:"fieldsLookup",value:function(){return(0,c.createLookupByProperty)(this.fields,"id")}},{key:"database",get:function(){return this.db}},{key:"aggregation_operators",get:function(){return this.aggregationOperators()}},{key:"aggregation_operators_lookup",get:function(){return this.aggregationOperatorsLookup()}},{key:"fields_lookup",get:function(){return this.fieldsLookup()}}]),t}()).prototype,"aggregationOperators",[c.memoize],Object.getOwnPropertyDescriptor(r.prototype,"aggregationOperators"),r.prototype),f(r.prototype,"aggregationOperatorsLookup",[c.memoize],Object.getOwnPropertyDescriptor(r.prototype,"aggregationOperatorsLookup"),r.prototype),f(r.prototype,"fieldsLookup",[c.memoize],Object.getOwnPropertyDescriptor(r.prototype,"fieldsLookup"),r.prototype),r);t.default=p},570:function(e,t){},571:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=d(["record"],["record"]),i=d(["View this ",""],["View this ",""]),o=n(1),u=n(10),l=n(26),s=(r=l)&&r.__esModule?r:{default:r},c=n(31);function d(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.default=function(e){var t=e.question,n=e.clicked;n=n&&t.topLevelClicked(n);var r=(t=t.topLevelQuestion()).query();if(!(r instanceof s.default))return[];var l=n&&n.dimensions||[];if(!n||0===l.length)return[];var d="number"==typeof n.value?n.value:2,f=null,p=n.column&&r.parseFieldReference(n.column.field_ref);if(p instanceof c.AggregationDimension){var m=p.aggregation();f="count-where"===m[0]||"share"===m[0]?m[1]:"sum-where"===m[0]?m[2]:null}var h=r.table()&&r.table().displayName(),v=h?(0,u.inflect)(h,d):(0,o.ngettext)((0,o.msgid)(a),"records",d);return[{name:"underlying-records",section:"records",title:(0,o.ngettext)((0,o.msgid)(i,v),"View these "+v,d),question:function(){var e=t.drillUnderlyingRecords(l);return f?e.query().filter(f).question():e}}]}},572:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["X-ray"],a=["X-ray"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=s(n(26)),u=n(1),l=s(n(14));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.question,n=e.clicked,r=t.query();if(!(r instanceof o.default))return[];var a=n&&n.dimensions||[];return n&&0!==a.length&&l.default.get("enable-xrays")?[{name:"exploratory-dashboard",section:"auto",icon:"bolt",title:(0,u.t)(i),url:function(){var e=r.clearFilters().question().drillUnderlyingRecords(a).query().filters();return t.getAutomaticDashboardUrl(e)}}]:[]}},573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["Compare to the rest"],a=["Compare to the rest"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=s(n(26)),u=n(1),l=s(n(14));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.question,n=e.clicked,r=t.query();if(!(r instanceof o.default))return[];var a=n&&n.dimensions||[];return n&&0!==a.length&&l.default.get("enable-xrays")?[{name:"compare-dashboard",section:"auto",icon:"bolt",title:(0,u.t)(i),url:function(){var e=r.clearFilters().question().drillUnderlyingRecords(a).query().filters();return t.getComparisonDashboardUrl(e)}}]:[]}},574:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["Zoom in"],a=["Zoom in"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=n(187),u=n(1);t.default=function(e){var t=e.question,n=e.clicked,r=(e.settings,n&&n.dimensions||[]),a=(0,o.drillDownForDimensions)(r,t.metadata());return a?[{name:"timeseries-zoom",section:"zoom",title:(0,u.t)(i),question:function(){return t.pivot(a.breakouts,r)}}]:[]}},575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drillDownForDimensions=function(e,t){var n=t&&(o=e,u=t,l=(0,s.getIn)(o,[0,"column","id"]),c=u.field(l),c&&c.table),r=!0,a=!1,i=void 0;var o,u,l,c;try{for(var d,f=p[Symbol.iterator]();!(r=(d=f.next()).done);r=!0)for(var m=d.value,v=0;v<m.length-1;v++){var g=m[v],b=m[v+1];if(h(g,e)){var _=y(b,e,n);if(_)return{breakouts:_}}}}catch(e){a=!0,i=e}finally{try{!r&&f.return&&f.return()}finally{if(a)throw i}}return null};var r,a=n(41),i=n(13),o=n(33),u=n(3),l=(r=u)&&r.__esModule?r:{default:r},s=n(11);var c=function(e){return[function(t){return(0,a.isa)(t.special_type,e)}]},d=function(e){return[["datetime-field",i.isDate,e]]},f=function(e,t){return[["binning-strategy",i.isLatitude,e,t],["binning-strategy",i.isLongitude,e,t]]},p=[[d("year"),d("quarter"),d("month"),d("week"),d("day"),d("hour"),d("minute")],[c(a.TYPE.Country),c(a.TYPE.State)],[c(a.TYPE.Country),f("bin-width",10)],[c(a.TYPE.State),f("bin-width",1)],[c(a.TYPE.City),f("bin-width",.1)],[f("bin-width",function(e){return e>=20}),f("bin-width",10)],[f("bin-width",function(){return!0}),f("bin-width",function(e){return e/10})],[[["binning-strategy",i.isAny,"num-bins",function(){return!0}]],[["binning-strategy",i.isAny,"default"]]],[[["binning-strategy",i.isAny,"bin-width",function(){return!0}]],[["binning-strategy",i.isAny,"bin-width",function(e){return e/10}]]]];function m(e,t){var n=g(t.column);if(Array.isArray(e)!==Array.isArray(n))return!1;if(Array.isArray(e)){if(!e[1](t.column))return!1;for(var r=2;r<e.length;r++)if("function"==typeof e[r]){if(!e[r](n[r]))return!1}else if(e[r]!==n[r])return!1;return!0}return e(t.column)}function h(e,t){return t=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)),l.default.all(e,function(e){var n=l.default.findIndex(t,function(t){return m(e,t)});return n>=0&&(t.splice(n,1),!0)})}function v(e,t,n){var r=Array.isArray(e)?e[1]:e,a=t.map(function(e){return e.column}).find(r)||n&&n.fields.find(r);if(!a)return null;var i=(0,o.fieldRefForColumn)(t[0].column);if(Array.isArray(i)&&"field-id"===i[0]?i=["field-id",a.id]:Array.isArray(i)&&"fk->"===i[0]&&(i=["fk->",i[1],a.id]),Array.isArray(e)){for(var u=l.default.find(t,function(t){return m(e,t)}),s=[e[0],i],c=2;c<e.length;c++){var d=e[c];if("function"==typeof d){if(!u)return null;var f=g(u.column);s.push(d(f[c]))}else s.push(d)}return s}return i}function y(e,t,n){var r=[],a=!0,i=!1,o=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=v(u.value,t,n);if(!s)return null;r.push(s)}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return r}function g(e){if(e.unit)return["datetime-field",e.id,e.unit];if(!e.binning_info)return e.id;switch(e.binning_info.binning_strategy){case"bin-width":return["binning-strategy",e.id,"bin-width",e.binning_info.bin_width];case"num-bins":return["binning-strategy",e.id,"num-bins",e.binning_info.num_bins];default:return null}}},576:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["Formatting"],a=["Formatting"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=n(1),u=n(33);t.default=function(e){e.question;var t=e.clicked;if(!t||void 0!==t.value||!t.column)return[];var r=t.column;return[{name:"formatting",section:"formatting",title:(0,o.t)(i),action:function(){return function(){var e;return(e=n(147)).showChartSettings.apply(e,arguments)}({widget:{id:"column_settings",props:{initialKey:(0,u.keyForColumn)(r)}}})}}]}},577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RestfulRequest=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(3),o=(r=i)&&r.__esModule?r:{default:r};function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.RestfulRequest=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.endpoint,i=n.actionPrefix,l=n.resultPropName,s=n.storeAsDictionary;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endpoint=null,this.actionPrefix=null,this.resultPropName="result",this.storeAsDictionary=!1,this.trigger=function(e){return n=regeneratorRuntime.mark(function n(r){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r.action(t.actions.requestStarted),n.prev=1,n.next=4,t.endpoint(e);case 4:a=n.sent,r.action(t.actions.requestSuccessful,{result:a}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),r.action(t.actions.requestFailed,{error:n.t0}),n.t0;case 12:case"end":return n.stop()}},n,t,[[1,8]])}),r=function(){var e=n.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(e){return r.apply(this,arguments)};var n,r},this.reset=function(){return function(e){return e(t.actions.reset)}},this.mergeToDictionary=function(e,t){return e=e||{},t=o.default.isArray(t)?o.default.indexBy(t,"id"):u({},t.id,t),a({},e,t)},this.getReducers=function(){var e;return u(e={},t.actions.requestStarted,function(e){return a({},e,{loading:!0,error:null})}),u(e,t.actions.requestSuccessful,function(e,n){var r,i=n.payload.result;return a({},e,(u(r={},t.resultPropName,t.storeAsDictionary?t.mergeToDictionary(e[t.resultPropName],i):i),u(r,"loading",!1),u(r,"fetched",!0),u(r,"error",null),r))}),u(e,t.actions.requestFailed,function(e,t){var n=t.payload.error;return a({},e,{loading:!1,error:n})}),u(e,t.actions.resetRequest,function(e){return a({},e,t.getDefaultState())}),e},this.getDefaultState=function(){var e;return u(e={},t.resultPropName,null),u(e,"loading",!1),u(e,"fetched",!1),u(e,"error",null),e},this.endpoint=r,this.actionPrefix=i,this.resultPropName=l||this.resultPropName,this.storeAsDictionary=s,this.actions={requestStarted:this.actionPrefix+"/REQUEST_STARTED",requestSuccessful:this.actionPrefix+"/REQUEST_SUCCESSFUL",requestFailed:this.actionPrefix+"/REQUEST_FAILED",resetRequest:this.actionPrefix+"/REQUEST_RESET"}}},578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartClickAction=t.default=void 0;var r,a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=h(o),l=n(6),s=h(n(5)),c=h(n(60)),d=n(22),f=h(n(16)),p=n(321),m=h(n(3));function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y={zoom:{icon:"zoom_in"},records:{icon:"table2"},details:{icon:"document"},sort:{icon:"sort"},breakout:{icon:"breakout"},sum:{icon:"sum"},averages:{icon:"curve"},distribution:{icon:"bar"},filter:{icon:"funnel_outline"},dashboard:{icon:"dashboard"},auto:{icon:"bolt"},formatting:{icon:"pencil"}};Object.values(y).map(function(e,t){e.index=t});var g=function(e){return e?(e.section||"")+":"+(e.name||""):null},b=(0,l.connect)()(r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={popoverAction:null},r.close=function(){r.setState({popoverAction:null}),r.props.onClose&&r.props.onClose()},r.handleClickAction=function(e){var t=r.props,n=t.dispatch,a=t.onChangeCardAndRun;e.popover?(f.default.trackEvent("Actions","Open Click Action Popover",g(e)),r.setState({popoverAction:e})):(0,p.performAction)(e,{dispatch:n,onChangeCardAndRun:a})?(f.default.trackEvent("Actions","Executed Click Action",g(e)),r.close()):console.warn("No action performed",e)},v(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.clicked,r=t.clickActions,i=t.onChangeCardAndRun;if(!n||!r||0===r.length)return null;var o=this.state.popoverAction,l=void 0;if(o&&o.popover){var d=o.popover;l=u.default.createElement(d,{onChangeCardAndRun:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=e.nextCard;o&&f.default.trackEvent("Action","Executed Click Action",g(o)),i({nextCard:t})}),onClose:function(){f.default.trackEvent("Action","Dismissed Click Action Menu",g(o)),e.close()}})}var p=m.default.chain(r).groupBy("section").pairs().sortBy(function(e){var t=a(e,1)[0];return y[t]?y[t].index:99}).value();return u.default.createElement(c.default,{target:n.element,targetEvent:n.event,onClose:function(){f.default.trackEvent("Action","Dismissed Click Action Menu"),e.close()},verticalAttachments:["top","bottom"],horizontalAttachments:["left","center","right"],sizeToFit:!0,pinInitialAttachment:!0},l||u.default.createElement("div",{className:"text-bold"},p.map(function(t){var n=a(t,2),r=n[0],i=n[1];return u.default.createElement("div",{key:r,className:"border-row-divider flex align-center"},u.default.createElement(s.default,{name:y[r]&&y[r].icon||"unknown",className:"mr1 pl2 text-medium",size:16}),i.map(function(t,n){return u.default.createElement(_,{index:n,action:t,isLastItem:n===i.length-1,handleClickAction:e.handleClickAction})}))})))}}]),t}())||r;b.displayName="ChartClickActions",t.default=b;var _=t.ChartClickAction=function(e){var t=e.action,n=(e.isLastItem,e.handleClickAction),r="text-brand-hover cursor-pointer no-decoration p2 flex-auto";return t.url?u.default.createElement(d.Link,{to:t.url(),className:r,onClick:function(){return f.default.trackEvent("Actions","Executed Click Action",g(t))}},t.title):u.default.createElement("div",{className:r,onClick:function(){return n(t)}},t.title)}},579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(0)),i=o(n(73));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.value,n=e.onChange,o=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value","onChange"]);return a.default.createElement(i.default,r({},o,{className:"input block full",value:t,onBlurChange:function(e){return n(e.target.value)}}))};u.displayName="ChartSettingInput",t.default=u},58:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateSchemaId=t.parseSchemaId=t.ObjectUnionSchema=t.ENTITIES_SCHEMA_MAP=t.entityTypeForObject=t.entityTypeForModel=t.SnippetCollectionSchema=t.SnippetSchema=t.MetricSchema=t.SegmentSchema=t.FieldSchema=t.TableSchema=t.SchemaSchema=t.DatabaseSchema=t.CollectionSchema=t.PulseSchema=t.DashboardSchema=t.QuestionSchema=void 0;var r=n(128);var a=t.QuestionSchema=new r.schema.Entity("questions"),i=t.DashboardSchema=new r.schema.Entity("dashboards"),o=t.PulseSchema=new r.schema.Entity("pulses"),u=t.CollectionSchema=new r.schema.Entity("collections"),l=t.DatabaseSchema=new r.schema.Entity("databases"),s=t.SchemaSchema=new r.schema.Entity("schemas"),c=new r.schema.Entity("tables",{},{processStrategy:function(e){var t=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,[]),n="string"==typeof t.id?-1337:t.db_id;return"string"!=typeof t.schema&&null!==t.schema||(t.schema_name=t.schema,t.schema={id:_(n,t.schema_name),name:t.schema_name,database:{id:n}}),t}});t.TableSchema=c;var d=t.FieldSchema=new r.schema.Entity("fields"),f=t.SegmentSchema=new r.schema.Entity("segments"),p=t.MetricSchema=new r.schema.Entity("metrics"),m=t.SnippetSchema=new r.schema.Entity("snippets"),h=t.SnippetCollectionSchema=new r.schema.Entity("snippetCollections");l.define({tables:[c],schemas:[s]}),s.define({database:l,tables:[c]}),c.define({db:l,fields:[d],segments:[f],metrics:[p],schema:s}),d.define({target:d,table:c,name_field:d,dimensions:{human_readable_field:d}}),f.define({table:c}),p.define({table:c});var v=t.entityTypeForModel=function(e){return"card"===e?"questions":e+"s"},y=t.entityTypeForObject=function(e){return e&&v(e.model)},g=t.ENTITIES_SCHEMA_MAP={questions:a,dashboards:i,pulses:o,collections:u,segments:f,metrics:p,snippets:m,snippetCollections:h},b=t.ObjectUnionSchema=new r.schema.Union(g,function(e,t,n){return y(e)});u.define({items:[b]});t.parseSchemaId=function(e){return String(e||"").split(":")};var _=t.generateSchemaId=function(e,t){return e+":"+(t||"")}},580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=i(n(0)),a=i(n(73));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e.value,n=e.onChange,i=t.map(function(e,i){return r.default.createElement(a.default,{key:i,className:"input block full mb1",value:e,onBlurChange:function(e){var r=e.target.value.trim();if(r&&r.length){var a=t.slice();a[i]=r,n(a)}}})});return r.default.createElement("div",null,i)}o.displayName="ChartSettingInputGroup"},581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=l(i),u=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={value:String(null==e.value?"":e.value)},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({value:String(null==e.value?"":e.value)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.onChange,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["onChange"]);return o.default.createElement("input",r({type:"number"},a,{className:(0,u.default)("input block full",{"border-error":""!==this.state.value&&isNaN(parseFloat(this.state.value))}),value:this.state.value,onChange:function(t){var r=parseFloat(t.target.value);isNaN(r)||r===e.props.value||n(r),e.setState({value:t.target.value})},onBlur:function(e){var t=parseFloat(e.target.value);isNaN(t)?n(void 0):n(t)}}))}}]),t}();s.displayName="ChartSettingInputNumeric",t.default=s},582:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(103));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.value,n=e.onChange,i=e.options,o=void 0===i?[]:i,u=e.className;return r.default.createElement(a.default,{className:u,value:t,onChange:n,options:o,vertical:!0})};o.displayName="ChartSettingRadio",t.default=o},583:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(86));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.value,n=e.onChange;return r.default.createElement(a.default,{value:t,onChange:n})};o.displayName="ChartSettingToggle",t.default=o},584:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(0)),i=u(n(5)),o=u(n(323));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.value,n=e.onChange,u=e.options,l=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value","onChange","options"]);return a.default.createElement(o.default,r({},l,{value:t,onChange:n,options:u,optionNameFn:function(e){return e.icon?a.default.createElement(i.default,{name:e.icon}):e.name}}))};l.displayName="ChartSettingButtonGroup",t.default=l},585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=(r=["error"],a=["error"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),u=c(n(0)),l=n(1),s=c(n(324));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var f=function(e){var t=e.value,n=void 0===t?[]:t,r=e.options,a=e.onChange,c=e.addAnother,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["value","options","onChange","addAnother"]);return u.default.createElement("div",null,Array.isArray(n)?n.map(function(e,t){return u.default.createElement(s.default,i({},f,{className:t>0?"mt1":null,key:t,value:e,options:r,onChange:function(e){var r=[].concat(d(n)),i=n.indexOf(e);i>=0&&r.splice(i,1,n[t]),r.splice(t,1,e),a(r)},onRemove:n.filter(function(e){return null!=e}).length>1||n.length>1&&null==e?function(){return a([].concat(d(n.slice(0,t)),d(n.slice(t+1))))}:null}))}):u.default.createElement("span",{className:"text-error"},(0,l.t)(o)),c&&u.default.createElement("div",{className:"mt2 mb3"},u.default.createElement("a",{className:"text-brand text-bold py1 px2 rounded bg-light bg-medium-hover",onClick:function(){var e=r.filter(function(e){return n.indexOf(e.value)<0});1===e.length?a(n.concat([e[0].value])):a(n.concat([void 0]))}},c)))};f.displayName="ChartSettingFieldsPicker",t.default=f},586:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=l(i),u=l(n(325));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.onChange,a=e.seriesTitles;return o.default.createElement("div",null,a.map(function(e,a){return o.default.createElement(u.default,{key:a,onChange:function(a){return n(r({},t,(u=a,(o=e)in(i={})?Object.defineProperty(i,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[o]=u,i)));var i,o,u},title:e,value:t[e]})}))}}]),t}();s.displayName="ChartSettingColorsPicker",t.default=s},587:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getAlerts=function(e){return e.alert.alerts.result}},588:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=v(["Sum"],["Sum"]),u=v(["Avg"],["Avg"]),l=v(["Min"],["Min"]),s=v(["Max"],["Max"]),c=v(["Distincts"],["Distincts"]),d=n(33),f=n(13),p=n(1),m=n(26),h=(r=m)&&r.__esModule?r:{default:r};function v(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y={sum:{section:"sum",title:(0,p.t)(o)},avg:{section:"sum",title:(0,p.t)(u)},min:{section:"sum",title:(0,p.t)(l)},max:{section:"sum",title:(0,p.t)(s)},distinct:{section:"sum",title:(0,p.t)(c)}};t.default=function(e){var t=e.question,n=e.clicked,r=void 0===n?{}:n,o=r.column,u=r.value;if(!o||"fields"!==o.source||void 0!==u)return[];var l=t.query();return l instanceof h.default?Object.entries(y).map(function(e){var t=i(e,2),n=t[0],r=t[1];return[(0,f.getAggregationOperator)(n),r]}).filter(function(e){var t=i(e,1)[0];return(0,f.isCompatibleAggregationOperatorForField)(t,o)}).map(function(e){var t=i(e,2),n=t[0],r=t[1];return a({name:r.title.toLowerCase()},r,{question:function(){return l.aggregate([n.short,(0,d.fieldRefForColumn)(o)]).question().setDefaultDisplay()},action:function(){return function(e){setTimeout(function(){e({type:"metabase/qb/EDIT_SUMMARY"})})}}})}):[]}},589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["over time"],a=["over time"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=f(n(0)),u=n(1),l=f(n(26)),s=n(33),c=n(13),d=n(10);function f(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.question,n=e.clicked,r=void 0===n?{}:n,a=r.column,f=r.value,p=t.query();if(!(a&&void 0===f&&p instanceof l.default))return[];var m=p.dimensionOptions(function(e){return e.field().isDate()}).all()[0];return m?["sum"].map(c.getAggregationOperator).filter(function(e){return(0,c.isCompatibleAggregationOperatorForField)(e,a)}).map(function(e){return{name:"summarize-by-time",section:"distribution",title:o.default.createElement("span",null,(0,d.capitalize)(e.short)," ",(0,u.t)(i)),question:function(){return t.aggregate(e.requiresField?[e.short,(0,s.fieldRefForColumn)(a)]:[e.short]).pivot([m.defaultBreakout()])}}}):[]}},590:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i,o=(r=["Distribution"],a=["Distribution"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),u=n(1),l=n(41),s=n(3),c=(i=s)&&i.__esModule?i:{default:i};var d=[l.TYPE.PK,l.TYPE.SerializedJSON,l.TYPE.Description,l.TYPE.Comment];t.default=function(e){var t=e.question,n=e.clicked;if(!n||!n.column||void 0!==n.value||"fields"!==n.column.source||c.default.any(d,function(e){return(0,l.isa)(n.column.special_type,e)}))return[];var r=n.column;return[{name:"distribution",title:(0,u.t)(o),section:"distribution",question:function(){return t.distribution(r)}}]}},591:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(98),a=u(n(189)),i=u(n(238)),o=u(n(239));function u(e){return e&&e.__esModule?e:{default:e}}var l={name:"metric",drills:function(){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,r.getDefaultDrills)()),[a.default,i.default,o.default])}};t.default=l},592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeseriesModeFooter=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=c(n(0)),i=c(n(593)),o=n(98),u=c(n(189)),l=c(n(238)),s=c(n(594));function c(e){return e&&e.__esModule?e:{default:e}}var d=t.TimeseriesModeFooter=function(e){return a.default.createElement("div",{className:"flex layout-centered"},a.default.createElement("span",{className:"mr1"},"View"),a.default.createElement(i.default,r({},e,{card:e.lastRunCard})),a.default.createElement("span",{className:"mx1"},"by"),a.default.createElement(s.default,r({},e,{card:e.lastRunCard})))};d.displayName="TimeseriesModeFooter";var f={name:"timeseries",drills:function(){return[u.default,l.default].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,o.getDefaultDrills)()))},ModeFooter:d};t.default=f},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=k(["After ",""],["After ",""]),o=k(["Before ",""],["Before ",""]),u=k(["Is Empty"],["Is Empty"]),l=k(["Not Empty"],["Not Empty"]),s=k(["All Time"],["All Time"]),c=k(["Apply"],["Apply"]),d=n(0),f=x(d),p=n(1),m=x(n(141)),h=x(n(37)),v=x(n(124)),y=x(n(19)),g=C(n(109)),b=C(n(152)),_=C(n(88)),E=C(n(80)),w=n(78),O=x(n(4)),S=x(n(3));function C(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function x(e){return e&&e.__esModule?e:{default:e}}function k(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=A(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={filter:null,filterIndex:-1,currentFilter:null},A(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),a(t,[{key:"componentWillMount",value:function(){this.componentWillReceiveProps(this.props)}},{key:"componentWillReceiveProps",value:function(e){var t=E.getQuery(e.card);if(t){var n=g.getBreakouts(t),r=g.getFilters(t),a=(0,w.parseFieldTargetId)(n[0]),i=(0,w.parseFieldTarget)(n[0]),o=S.default.findIndex(r,function(e){return b.isFieldFilter(e)&&_.getFieldTargetId(e[1])===a}),u=void 0,l=void 0;u=o>=0?l=r[o]:["time-interval",i,-30,"day"],this.setState({filter:u,filterIndex:o,currentFilter:l})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.card,d=t.setDatasetQuery,b=this.state,_=b.filter,S=b.filterIndex,C=b.currentFilter,x=void 0;return C?(x=(0,w.generateTimeFilterValuesDescriptions)(C).join(" - "),">"===C[0]?x=(0,p.t)(i,x):"<"===C[0]?x=(0,p.t)(o,x):"is-null"===C[0]?x=(0,p.t)(u):"not-null"===C[0]&&(x=(0,p.t)(l))):x=(0,p.t)(s),f.default.createElement(h.default,{triggerElement:f.default.createElement(v.default,{hasValue:!0},x),triggerClasses:(0,O.default)(n,"my2"),ref:function(t){return e._popover=t},sizeToFit:!0,autoWidth:!0},f.default.createElement(m.default,{className:"m2",filter:this.state.filter,onFilterChange:function(t){e.setState({filter:t})},includeAllTime:!0}),f.default.createElement("div",{className:"p1"},f.default.createElement(y.default,{purple:!0,className:"full",onClick:function(){var t=E.getQuery(a);if(t){t=S>=0?g.updateFilter(t,S,_):g.addFilter(t,_);var n=r({},a.dataset_query,{query:t});d(n,{run:!0})}e._popover&&e._popover.close()}},(0,p.t)(c))))}}]),t}();T.displayName="TimeseriesFilterWidget",t.default=T},594:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=m(i),u=m(n(595)),l=m(n(37)),s=m(n(124)),c=p(n(109)),d=p(n(80)),f=n(78);function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.card,a=t.setDatasetQuery;if(d.isStructured(n)){var i=d.getQuery(n),p=i&&c.getBreakouts(i);return p&&0!==p.length?o.default.createElement(l.default,{triggerElement:o.default.createElement(s.default,{hasValue:!0},(0,f.formatBucketing)((0,f.parseFieldBucketing)(p[0]))),triggerClasses:"my2",ref:function(t){return e._popover=t}},o.default.createElement(u.default,{className:"text-brand",field:p[0],onFieldChange:function(t){var i=d.getQuery(n);if(i){i=c.updateBreakout(i,0,t);var o=r({},n.dataset_query,{query:i});a(o,{run:!0}),e._popover&&e._popover.close()}},title:null,groupingOptions:["minute","hour","day","week","month","quarter","year"]})):null}return null}}]),t}();h.displayName="TimeseriesGroupingWidget",t.default=h},595:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(i=["Group time by"],o=["Group time by"],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),s=n(0),c=h(s),d=h(n(2)),f=n(78),p=n(1),m=h(n(4));function h(e){return e&&e.__esModule?e:{default:e}}var v=["default","minute","hour","day","week","month","quarter","year",null,"minute-of-hour","hour-of-day","day-of-week","day-of-month","day-of-year","week-of-year","month-of-year","quarter-of-year"],y=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),u(t,[{key:"setField",value:function(e){this.props.onFieldChange(["datetime-field",this.props.field[1],e])}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.field,a=t.className,i=t.groupingOptions,o=new Set(i);return c.default.createElement("div",{className:(0,m.default)(a,"px2 py1"),style:{width:"250px"}},n&&c.default.createElement("h3",{className:"List-section-header pt1 mx2"},n),c.default.createElement("ul",{className:"py1"},v.filter(function(e){return null==e||o.has(e)}).map(function(t,n){return null==t?c.default.createElement("hr",{key:n,style:{border:"none"}}):c.default.createElement("li",{key:n,className:(0,m.default)("List-item",{"List-item--selected":(0,f.parseFieldBucketing)(r)===t})},c.default.createElement("a",{className:"List-item-title full px2 py1 cursor-pointer",onClick:e.setField.bind(e,t)},(0,f.formatBucketing)(t)))})))}}]),t}(),r.propTypes={field:d.default.oneOfType([d.default.number,d.default.array]),onFieldChange:d.default.func.isRequired},r.defaultProps={title:(0,p.t)(l),groupingOptions:["minute","hour","day","week","month","quarter","year","hour-of-day","day-of-week","day-of-month","week-of-year","month-of-year","quarter-of-year"]},a);y.displayName="TimeGroupingPopover",t.default=y},596:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(98),a=o(n(189)),i=o(n(239));function o(e){return e&&e.__esModule?e:{default:e}}var u={name:"geo",drills:function(){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,r.getDefaultDrills)()),[a.default,i.default])}};t.default=u},597:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(98),a=u(n(189)),i=u(n(238)),o=u(n(239));function u(e){return e&&e.__esModule?e:{default:e}}var l={name:"pivot",drills:function(){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}((0,r.getDefaultDrills)()),[a.default,i.default,o.default])}};t.default=l},598:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"native",drills:n(98).getDefaultDrills};t.default=r},599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"default",drills:n(98).getDefaultDrills};t.default=r},60:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=h(u),s=h(n(2)),c=h(n(15)),d=h(n(214)),f=h(n(886)),p=n(25),m=h(n(4));function h(e){return e&&e.__esModule?e:{default:e}}n(507);var v=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={width:null,height:null},r.handleDismissal=r.handleDismissal.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"_getPopoverElement",value:function(e){var t=this;return!this._popoverElement&&e&&(this._popoverElement=document.createElement("span"),this._popoverElement.className="PopoverContainer",document.body.appendChild(this._popoverElement),this._timer=setInterval(function(){var e=t._popoverElement.getBoundingClientRect(),n=e.width,r=e.height;t.state.width===n&&t.state.height===r||t.setState({width:n,height:r})},100)),this._popoverElement}},{key:"componentDidMount",value:function(){this._renderPopover(this.props.isOpen)}},{key:"componentDidUpdate",value:function(){this._renderPopover(this.props.isOpen)}},{key:"componentWillUnmount",value:function(){this._tether&&(this._tether.destroy(),delete this._tether),this._popoverElement&&(this._renderPopover(!1),c.default.unmountComponentAtNode(this._popoverElement),this._popoverElement.parentNode&&this._popoverElement.parentNode.removeChild(this._popoverElement),delete this._popoverElement,clearInterval(this._timer),delete this._timer)}},{key:"handleDismissal",value:function(){var e;this.props.onClose&&(e=this.props).onClose.apply(e,arguments)}},{key:"_popoverComponent",value:function(){var e={maxHeight:this._getMaxHeight()},t=l.default.createElement("div",{id:this.props.id,className:(0,m.default)("PopoverBody",{"PopoverBody--withBackground":this.props.hasBackground,"PopoverBody--withArrow":this.props.hasArrow&&this.props.hasBackground,"PopoverBody--autoWidth":this.props.autoWidth},this.props.className),style:this.props.style},"function"==typeof this.props.children?this.props.children(e):1!==l.default.Children.count(this.props.children)||Array.isArray(this.props.children)?this.props.children:l.default.cloneElement(l.default.Children.only(this.props.children),e));return this.props.noOnClickOutsideWrapper?t:l.default.createElement(d.default,{handleDismissal:this.handleDismissal,dismissOnEscape:this.props.dismissOnEscape,dismissOnClickOutside:this.props.dismissOnClickOutside},t)}},{key:"_setTetherOptions",value:function(e,t){t&&(e=i({},e,{attachment:t.attachmentY+" "+t.attachmentX,targetAttachment:t.targetAttachmentY+" "+t.targetAttachmentX,targetOffset:t.offsetY+"px "+t.offsetX+"px"})),this._tether?this._tether.setOptions(e):this._tether=new f.default(e)}},{key:"_getMaxHeight",value:function(){var e=this,t=this._getTargetElement().getBoundingClientRect(),n=t.top,r=t.bottom,a=(this.props.pinInitialAttachment&&this._best?[this._best.attachmentY]:this.props.verticalAttachments).map(function(t){return"top"===t?window.innerHeight-r-e.props.targetOffsetY-10:"bottom"===t?n-e.props.targetOffsetY-10:0});return Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a))-2}},{key:"_getBestAttachmentOptions",value:function(e,t,n,r,a){var o=this,u=i({},t),l=-1/0,s=!0,c=!1,d=void 0;try{for(var p,m=function(){var t=p.value,n=a(u,t);o._setTetherOptions(e,n);var i=f.default.Utils.getBounds(e.element),s=document.documentElement,c=(window.pageXOffset||s.scrollLeft)-(s.clientLeft||0),d=(window.pageYOffset||s.scrollTop)-(s.clientTop||0);i.top-=d,i.bottom+=d,i.left-=c,i.right+=c;var m=r.map(function(e){return Math.min(i[e],0)}).reduce(function(e,t){return e+t});if(0===m)return u=n,"break";m>l&&(u=n,l=m)},h=n[Symbol.iterator]();!(s=(p=h.next()).done);s=!0){if("break"===m())break}}catch(e){c=!0,d=e}finally{try{!s&&h.return&&h.return()}finally{if(c)throw d}}return u}},{key:"_getTargetElement",value:function(){var e=void 0;return this.props.targetEvent?((e=document.getElementById("popover-event-target"))||((e=document.createElement("div")).id="popover-event-target",document.body.appendChild(e)),e.style.left=this.props.targetEvent.clientX-3+"px",e.style.top=this.props.targetEvent.clientY-3+"px"):this.props.target&&(e="function"==typeof this.props.target?c.default.findDOMNode(this.props.target()):c.default.findDOMNode(this.props.target)),null==e&&(e=c.default.findDOMNode(this).parentNode),e}},{key:"_renderPopover",value:function(e){var t=this,n=this._getPopoverElement(e);if(n&&(e?n.classList.add("PopoverContainer--open"):n.classList.remove("PopoverContainer--open")),e){c.default.unstable_renderSubtreeIntoContainer(this,l.default.createElement("span",null,e?this._popoverComponent():null),n);var r={element:n,target:this._getTargetElement()};if(this.props.tetherOptions)this._setTetherOptions(i({},r,this.props.tetherOptions));else{if(!this._best||!this.props.pinInitialAttachment){var a={attachmentX:"center",attachmentY:"top",targetAttachmentX:"center",targetAttachmentY:"bottom",offsetX:0,offsetY:0};a=this._getBestAttachmentOptions(r,a,this.props.horizontalAttachments,["left","right"],function(e,n){return i({},e,{attachmentX:n,targetAttachmentX:t.props.alignHorizontalEdge?n:"center",offsetX:{center:0,left:-t.props.targetOffsetX,right:t.props.targetOffsetX}[n]})}),a=this._getBestAttachmentOptions(r,a,this.props.verticalAttachments,["top","bottom"],function(e,n){return i({},e,{attachmentY:n,targetAttachmentY:(t.props.alignVerticalEdge?"bottom"===n:"top"===n)?"bottom":"top",offsetY:{top:t.props.targetOffsetY,bottom:-t.props.targetOffsetY}[n]})}),this._best=a}this._setTetherOptions(r,this._best)}if(this.props.sizeToFit){var o=r.element.querySelector(".PopoverBody");"top"===this._tether.attachment.top?(0,p.constrainToScreen)(o,"bottom",10)&&(o.classList.add("scroll-y"),o.classList.add("scroll-show")):"bottom"===this._tether.attachment.top&&(0,p.constrainToScreen)(o,"top",10)&&(o.classList.add("scroll-y"),o.classList.add("scroll-show"))}}else this._popoverElement&&c.default.unmountComponentAtNode(this._popoverElement)}},{key:"render",value:function(){return l.default.createElement("span",{className:"hide"})}}]),t}(),r.propTypes={id:s.default.string,isOpen:s.default.bool,hasArrow:s.default.bool,hasBackground:s.default.bool,tetherOptions:s.default.object,sizeToFit:s.default.bool,pinInitialAttachment:s.default.bool,autoWidth:s.default.bool,verticalAttachments:s.default.array,horizontalAttachments:s.default.array,alignVerticalEdge:s.default.bool,alignHorizontalEdge:s.default.bool,noOnClickOutsideWrapper:s.default.bool},r.defaultProps={isOpen:!0,hasArrow:!1,hasBackground:!0,verticalAttachments:["top","bottom"],horizontalAttachments:["left","right"],alignVerticalEdge:!1,alignHorizontalEdge:!0,targetOffsetX:0,targetOffsetY:5,sizeToFit:!1,autoWidth:!1,noOnClickOutsideWrapper:!1},a);v.displayName="Popover",t.default=v},600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getField=function(e,t){if(e)return e.fields_lookup?e.fields_lookup[t]:i.default.find(e.fields,function(e){return i.default.isEqual(e.id,t)})};var r,a=n(3),i=(r=a)&&r.__esModule?r:{default:r}},601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBreakouts=a,t.getBreakoutClause=i,t.addBreakout=function(e,t){return i((0,r.add)(a(e),t))},t.updateBreakout=function(e,t,n){return i((0,r.update)(a(e),t,n))},t.removeBreakout=function(e,t){return i((0,r.remove)(a(e),t))},t.clearBreakouts=function(e){return i((0,r.clear)())};var r=n(115);function a(e){return(e||[]).filter(function(e){return null!=e})}function i(e){return 0===(e=a(e)).length?void 0:e}},602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getJoins=a,t.getJoinClause=i,t.addJoin=function(e,t){return i((0,r.add)(a(e),t))},t.updateJoin=function(e,t,n){return i((0,r.update)(a(e),t,n))},t.removeJoin=function(e,t){return i((0,r.remove)(a(e),t))},t.clearJoins=function(e){return i((0,r.clear)())};var r=n(115);function a(e){return(e||[]).filter(function(e){return null!=e})}function i(e){return 0===(e=a(e)).length?void 0:e}},603:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLimit=function(e){return e},t.updateLimit=function(e,t){return t},t.clearLimit=function(e){return}},604:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrderBys=a,t.getOrderByClause=i,t.addOrderBy=function(e,t){return i((0,r.add)(a(e),t))},t.updateOrderBy=function(e,t,n){return i((0,r.update)(a(e),t,n))},t.removeOrderBy=function(e,t){return i((0,r.remove)(a(e),t))},t.clearOrderBy=function(e){return i((0,r.clear)())};var r=n(115);function a(e){return(e||[]).filter(function(e){return null!=e})}function i(e){return 0===(e=a(e)).length?void 0:e}},605:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getExpressions=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},t.getExpressionsList=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.entries(e).map(function(e){var t=a(e,2),n=t[0],r=t[1];return{name:n,expression:r}})},t.addExpression=l,t.updateExpression=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=arguments[3];null!=r&&(e=s(e,r));return l(e,t,n)},t.removeExpression=s,t.clearExpressions=function(e){return{}};var i,o=n(3),u=(i=o)&&i.__esModule?i:{default:i};function l(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments[1],o=arguments[2];return r({},a,(n=o,(t=i)in(e={})?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e))}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return u.default.omit(e,t)}},606:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=k(["First name"],["First name"]),i=k(["Last name"],["Last name"]),o=k(["Email"],["Email"]),u=k(["Language"],["Language"]),l=k(["Use site default"],["Use site default"]),s=k(["Create a password"],["Create a password"]),c=k(["Shhh..."],["Shhh..."]),d=k(["Confirm your password"],["Confirm your password"]),f=k(["Shhh... but one more time so we get it right"],["Shhh... but one more time so we get it right"]),p=k(["required"],["required"]),m=k(["passwords do not match"],["passwords do not match"]),h=k(["Groups"],["Groups"]),v=k(["Your company or team name"],["Your company or team name"]),y=k(["Department of Awesome"],["Department of Awesome"]),g=k(["Current password"],["Current password"]),b=C(n(3)),_=n(1),E=C(n(14)),w=n(28),O=C(n(195)),S=C(n(607));function C(e){return e&&e.__esModule?e:{default:e}}function x(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function k(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var A=function(){return[{name:"first_name",title:(0,_.t)(a),placeholder:"Johnny",validate:O.default.required().maxLength(100)},{name:"last_name",title:(0,_.t)(i),placeholder:"Appleseed",validate:O.default.required().maxLength(100)},{name:"email",title:(0,_.t)(o),placeholder:"youlooknicetoday@email.com",validate:O.default.required().email()}]},T={name:"locale",title:(0,_.t)(u),type:"select",options:[[null,(0,_.t)(l)]].concat(x(b.default.sortBy(E.default.get("available-locales")||[["en","English"]],function(e){var t=r(e,2);t[0];return t[1]}))).map(function(e){var t=r(e,2),n=t[0];return{name:t[1],value:n}})},P=function(){return[{name:"password",title:(0,_.t)(s),type:"password",placeholder:(0,_.t)(c),validate:O.default.required().passwordComplexity()},{name:"password_confirm",title:(0,_.t)(d),type:"password",placeholder:(0,_.t)(f),validate:function(e,t){var n=t.values,r=(n=void 0===n?{}:n).password;return!e&&(0,_.t)(p)||e!==r&&(0,_.t)(m)}}]};t.default={admin:{fields:[].concat(x(A()),[{name:"group_ids",title:(0,_.t)(h),type:S.default}],x(w.PLUGIN_ADMIN_USER_FORM_FIELDS))},user:{fields:[].concat(x(A()),[T])},setup:function(){return{fields:[].concat(x(A()),x(P()),[{name:"site_name",title:(0,_.t)(v),placeholder:(0,_.t)(y),validate:O.default.required()}])}},password:{fields:[{name:"old_password",type:"password",title:(0,_.t)(g),placeholder:(0,_.t)(c),validate:O.default.required()}].concat(x(P()))},password_reset:{fields:[].concat(x(P()))}}},607:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["Make this user an admin"],a=["Make this user an admin"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=p(n(0)),u=p(n(276)),l=p(n(86)),s=p(n(190)),c=n(1),d=p(n(3)),f=n(125);function p(e){return e&&e.__esModule?e:{default:e}}t.default=s.default.loadList()(function(e){var t=e.field,n=t.value,r=t.onChange,a=e.groups,s=d.default.find(a,f.isAdminGroup),p=d.default.find(a,f.isDefaultGroup);n||(n=[p.id]);var m=new Set(n);function h(e,t){var n=new Set(m);t?n.add(e.id):n.delete(e.id),r(Array.from(n))}var v=d.default.filter(a,function(e){return(0,f.canEditMembership)(e)||(0,f.isDefaultGroup)(e)}),y=!!s;return d.default.any(a,function(e){return(0,f.canEditMembership)(e)&&!(0,f.isAdminGroup)(e)})?o.default.createElement(u.default,{groups:v,selectedGroupIds:n,onGroupChange:h}):y?o.default.createElement("div",{className:"flex align-center"},o.default.createElement(l.default,{value:m.has(s.id),onChange:function(e){h(s,e)}}),o.default.createElement("span",{className:"ml2"},(0,c.t)(i))):null})},608:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=f(["Admin"],["Admin"]),i=f(["and"],["and"]),o=f([""," other group"],[""," other group"]),u=f(["Default"],["Default"]),l=n(0),s=(r=l)&&r.__esModule?r:{default:r},c=n(1),d=n(125);function f(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}t.default=function(e){var t,n,r=e.groups,l=e.selectedGroupIds,f=r.find(d.isAdminGroup),p=r.filter(function(e){return l.includes(e.id)&&!(0,d.isAdminGroup)(e)&&!(0,d.isDefaultGroup)(e)});return f&&l.includes(f.id)?s.default.createElement("span",null,s.default.createElement("span",{className:"text-purple"},(0,c.t)(a)),p.length>0&&" "+(0,c.t)(i)+" ",p.length>0&&s.default.createElement("span",{className:"text-brand"},(n=p.length,(0,c.ngettext)((0,c.msgid)(o,n),n+" other groups",n)))):1===p.length?s.default.createElement("span",{className:"text-brand"},p[0].name):p.length>1?s.default.createElement("span",{className:"text-brand"},(t=p.length,(0,c.ngettext)((0,c.msgid)(o,t),t+" other groups",t))):s.default.createElement("span",null,(0,c.t)(u))}},609:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=(r=o)&&r.__esModule?r:{default:r};t.default=function(){return function(e){return function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleChangeHasMorePages=function(e){t.setState({hasMorePages:e})},t.handleNextPage=function(){t.setState({page:t.state.page+1,hasMorePages:null})},t.handlePreviousPage=function(){t.setState({page:t.state.page-1,hasMorePages:!0})},t.state={page:e.initialPage||0,hasMorePages:null},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,u.default.Component),i(n,[{key:"render",value:function(){var t="number"==typeof this.props.pageSize?a({},this.state,{onChangeHasMorePages:this.handleChangeHasMorePages,onNextPage:this.state.hasMorePages?this.handleNextPage:null,onPreviousPage:this.state.page>0?this.handlePreviousPage:null}):{};return u.default.createElement(e,a({},t,this.props))}}]),n}()}}},610:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),a=n(43),i=o(a);function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.id;return void 0===t||isNaN(t)?null:"root"===t||null===t?r.default.createElement("span",null,a.ROOT_COLLECTION.name):r.default.createElement(i.default.Name,{id:t})}},611:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(0)),i=l(n(269)),o=l(n(270)),u=l(n(204));function l(e){return e&&e.__esModule?e:{default:e}}var s=(0,i.default)(o.default,u.default.Name,"collection"),c=function(e){var t=e.field;return a.default.createElement(s,r({entity:u.default,showSearch:!1},t,{value:t.value||"root"}))};c.displayName="FormSnippetCollectionWidget",t.default=c},612:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=n(0),o=(r=i)&&r.__esModule?r:{default:r},u=n(18);var l=function(e){var t=e.type,n=void 0===t?"hidden":t,r=e.field;return o.default.createElement("input",a({type:n},(0,u.formDomOnlyProps)(r)))};l.displayName="FormHiddenWidget",t.default=l},613:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=u(n(0)),i=u(n(4)),o=n(18);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.field,n=(0,o.formDomOnlyProps)(t),u=n.value,l=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(n,["value"]);return a.default.createElement("input",r({type:"file",className:(0,i.default)({"Form-file-input--has-value":u},"Form-file-input"),"aria-labelledby":t.name+"-label"},l,{onChange:s(t.onChange),onBlur:s(t.onBlur)}))};function s(e){return function(t){var n=t.target.files;0===n.length&&e("");var r=new FileReader;r.onload=function(){return e(r.result)},r.readAsText(n[0])}}l.displayName="FormTextFileWidget",t.default=l},614:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(["Update"],["Update"]),a=s(["Create"],["Create"]),i=l(n(0)),o=l(n(299)),u=n(1);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var c=function(e){var t=e.onClose,n=e.submitTitle,l=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["onClose","submitTitle"]);return i.default.createElement(o.default,l,function(e){var o=e.values,s=e.formFields,c=e.Form,d=e.FormField,f=e.FormFooter;return i.default.createElement(c,null,s.map(function(e){return i.default.createElement(d,{key:e.name,name:e.name})}),i.default.createElement(f,{footerExtraButtons:l.footerExtraButtons,onCancel:t,submitTitle:n||(null!=o.id?(0,u.t)(r):(0,u.t)(a))}))})};c.displayName="StandardForm",t.default=c},615:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a;t.clearGoogleAuthCredentials=(r=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="undefined"!=typeof gapi&&gapi&&gapi.auth2?gapi.auth2.getAuthInstance():void 0){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,t.signOut();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Problem clearing Google Auth credentials",e.t0);case 11:case"end":return e.stop()}},e,this,[[3,8]])}),a=function(){var e=r.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(){return a.apply(this,arguments)})},616:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=m(["Sign in with Google"],["Sign in with Google"]),i=m(["Allows users with existing Metabase accounts to login with a Google account that matches their email address in addition to their Metabase username and password."],["Allows users with existing Metabase accounts to login with a Google account that matches their email address in addition to their Metabase username and password."]),o=n(1),u=n(11),l=n(28),s=p(n(14)),c=p(n(617)),d=p(n(329)),f=p(n(619));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var v={name:"google",Button:c.default};l.PLUGIN_AUTH_PROVIDERS.push(function(e){return s.default.googleAuthEnabled()?[v].concat(h(e)):e}),l.PLUGIN_ADMIN_SETTINGS_UPDATES.push(function(e){return(0,u.updateIn)(e,["authentication","settings"],function(e){return[].concat(h(e),[{authName:(0,o.t)(a),authDescription:(0,o.t)(i),authType:"google",authEnabled:function(e){return!!e["google-auth-client-id"]},widget:d.default}])})}),l.PLUGIN_ADMIN_SETTINGS_UPDATES.push(function(e){return r({},e,{"authentication/google":{component:f.default,sidebar:!1,settings:[{key:"google-auth-client-id"},{key:"google-auth-auto-create-accounts-domain"}]}})})},617:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=v(["The window was closed before completing Google Authentication."],["The window was closed before completing Google Authentication."]),o=v(["There was an issue signing in with Google. Pleast contact an administrator."],["There was an issue signing in with Google. Pleast contact an administrator."]),u=n(0),l=h(u),s=h(n(15)),c=n(6),d=n(1),f=h(n(618)),p=h(n(14)),m=n(165);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y={popup_closed_by_user:(0,d.t)(i)},g=(0,c.connect)(null,{loginGoogle:m.loginGoogle})(r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={errorMessage:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),a(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.loginGoogle,r=t.location,a=s.default.findDOMNode(this);!function t(){if(window.gapi)try{window.gapi.load("auth2",function(){window.gapi.auth2.init({client_id:p.default.get("google-auth-client-id"),cookiepolicy:"single_host_origin"}).attachClickHandler(a,{},function(t){e.setState({errorMessage:null}),n(t,r.query.redirect)},function(t){e.setState({errorMessage:y[t.error]||(0,d.t)(o)})})})}catch(e){console.error("Error attaching Google Auth handler: ",e)}else window.setTimeout(t,100)}()}},{key:"render",value:function(){var e=this.state.errorMessage;return l.default.createElement("div",null,l.default.createElement(f.default,{provider:"google"}),e&&l.default.createElement("div",{className:"bg-error p1 rounded text-white text-bold mt3"},e))}}]),t}())||r;g.displayName="GoogleButton",t.default=g},618:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=p(["Sign in with ",""],["Sign in with ",""]),i=p(["Sign in"],["Sign in"]),o=n(0),u=f(o),l=f(n(2)),s=f(n(5)),c=n(271),d=n(1);function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m={provider:l.default.string,onClick:l.default.func},h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.provider,n=e.onClick;return u.default.createElement("div",{className:"relative z2 bg-white p2 cursor-pointer shadow-hover text-centered sm-text-left rounded bordered shadowed flex",onClick:n},u.default.createElement("div",{className:"flex align-center ml-auto mr-auto"},t&&u.default.createElement(s.default,{className:"mr1",name:t}),u.default.createElement("h4",null,t?(0,d.t)(a,(0,c.capitalize)(t)):(0,d.t)(i))))}}]),t}();h.displayName="AuthProviderButton",h.proptypes=m,t.default=h},619:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=C(["Authentication"],["Authentication"]),u=C(["Google Sign-In"],["Google Sign-In"]),l=C(["Sign in with Google"],["Sign in with Google"]),s=C(["Allows users with existing Metabase accounts to login with a Google account that matches their email address in addition to their Metabase username and password."],["Allows users with existing Metabase accounts to login with a Google account that matches their email address in addition to their Metabase username and password."]),c=C(["To allow users to sign in with Google you'll need to give Metabase a Google Developers console application client ID. It only takes a few steps and instructions on how to create a key can be found ","."],["To allow users to sign in with Google you'll need to give Metabase a Google Developers console application client ID. It only takes a few steps and instructions on how to create a key can be found ","."]),d=C(["Be sure to include the full client ID, including the apps.googleusercontent.com suffix."],["Be sure to include the full client ID, including the apps.googleusercontent.com suffix."]),f=C(["Your Google client ID"],["Your Google client ID"]),p=C(["Allow users to sign up on their own if their Google account email address is from:"],["Allow users to sign up on their own if their Google account email address is from:"]),m=C(["Changes saved!"],["Changes saved!"]),h=C(["Save Changes"],["Save Changes"]),v=n(0),y=S(v),g=S(n(2)),b=S(n(4)),_=S(n(3)),E=n(1),w=S(n(93)),O=S(n(73));function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var x=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.updateClientID=r.updateClientID.bind(r),r.updateDomain=r.updateDomain.bind(r),r.onCheckboxClicked=r.onCheckboxClicked.bind(r),r.saveChanges=r.saveChanges.bind(r),r.clientIDChanged=r.clientIDChanged.bind(r),r.domainChanged=r.domainChanged.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,v.Component),i(t,[{key:"componentWillMount",value:function(){var e=this.props.elements,t=_.default.findWhere(e,{key:"google-auth-client-id"}),n=_.default.findWhere(e,{key:"google-auth-auto-create-accounts-domain"});this.setState({clientID:t,domain:n,clientIDValue:t.value,domainValue:n.value,recentlySaved:!1})}},{key:"updateClientID",value:function(e){e!==this.state.clientIDValue&&this.setState({clientIDValue:e&&e.length?e:null,recentlySaved:!1})}},{key:"updateDomain",value:function(e){e!==this.state.domain.value&&this.setState({domainValue:e&&e.length?e:null,recentlySaved:!1})}},{key:"clientIDChanged",value:function(){return this.state.clientID.value!==this.state.clientIDValue}},{key:"domainChanged",value:function(){return this.state.domain.value!==this.state.domainValue}},{key:"saveChanges",value:function(){var e=this.state,t=e.clientID,n=e.clientIDValue,r=e.domain,a=e.domainValue;this.clientIDChanged()&&(this.props.updateSetting(t,n),this.setState({clientID:{value:n},recentlySaved:!0})),this.domainChanged()&&(this.props.updateSetting(r,a),this.setState({domain:{value:a},recentlySaved:!0}))}},{key:"onCheckboxClicked",value:function(){this.setState({domainValue:this.state.domainValue?null:this.state.domain.value,recentlySaved:!1})}},{key:"render",value:function(){var e=this,t=this.domainChanged()||this.clientIDChanged(),n=this.state.clientIDValue;return y.default.createElement("form",{noValidate:!0},y.default.createElement("div",{className:"px2",style:{maxWidth:"585px"}},y.default.createElement(w.default,{crumbs:[[(0,E.t)(o),"/admin/settings/authentication"],[(0,E.t)(u)]],className:"mb2"}),y.default.createElement("h2",null,(0,E.t)(l)),y.default.createElement("p",{className:"text-medium"},(0,E.t)(s)),y.default.createElement("p",{className:"text-medium"},(0,E.jt)(c,y.default.createElement("a",{className:"link",href:"https://developers.google.com/identity/sign-in/web/devconsole-project",target:"_blank"},"here"))),y.default.createElement("p",{className:"text-medium"},(0,E.t)(d)),y.default.createElement(O.default,{className:"SettingsInput AdminInput bordered rounded h3",type:"text",value:this.state.clientIDValue,placeholder:(0,E.t)(f),onChange:function(t){return e.updateClientID(t.target.value)}}),y.default.createElement("div",{className:"py3"},y.default.createElement("div",{className:"flex align-center"},y.default.createElement("p",{className:"text-medium"},(0,E.t)(p))),y.default.createElement("div",{className:"mt1 bordered rounded inline-block"},y.default.createElement("div",{className:"inline-block px2 h2"},"@"),y.default.createElement(O.default,{className:"SettingsInput inline-block AdminInput h3 border-left",type:"text",value:this.state.domainValue,onChange:function(t){return e.updateDomain(t.target.value)},disabled:!n}))),y.default.createElement("button",{className:(0,b.default)("Button mr2",{"Button--primary":t}),disabled:!t,onClick:this.saveChanges},this.state.recentlySaved?(0,E.t)(m):(0,E.t)(h))))}}]),t}(),r.propTypes={elements:g.default.array,updateSetting:g.default.func.isRequired},a);x.displayName="SettingsSingleSignOnForm",t.default=x},620:function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=T(["LDAP"],["LDAP"]),i=T(["Allows users within your LDAP directory to log in to Metabase with their LDAP credentials, and allows automatic mapping of LDAP groups to Metabase groups."],["Allows users within your LDAP directory to log in to Metabase with their LDAP credentials, and allows automatic mapping of LDAP groups to Metabase groups."]),o=T(["LDAP Authentication"],["LDAP Authentication"]),u=T(["LDAP Host"],["LDAP Host"]),l=T(["LDAP Port"],["LDAP Port"]),s=T(["That's not a valid port number"],["That's not a valid port number"]),c=T(["LDAP Security"],["LDAP Security"]),d=T(["Username or DN"],["Username or DN"]),f=T(["Password"],["Password"]),p=T(["User search base"],["User search base"]),m=T(["User filter"],["User filter"]),h=T(["Check your parentheses"],["Check your parentheses"]),v=T(["Email attribute"],["Email attribute"]),y=T(["First name attribute"],["First name attribute"]),g=T(["Last name attribute"],["Last name attribute"]),b=T(["Synchronize group memberships"],["Synchronize group memberships"]),_=T(["Distinguished Name"],["Distinguished Name"]),E=T(["Group search base"],["Group search base"]),w=n(1),O=n(11),S=n(28),C=A(n(621)),x=A(n(329)),k=A(n(628));function A(e){return e&&e.__esModule?e:{default:e}}function T(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}S.PLUGIN_ADMIN_SETTINGS_UPDATES.push(function(e){return(0,O.updateIn)(e,["authentication","settings"],function(e){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e),[{authName:(0,w.t)(a),authDescription:(0,w.t)(i),authType:"ldap",authEnabled:function(e){return e["ldap-enabled"]},widget:x.default}])})},function(e){return r({},e,{"authentication/ldap":{sidebar:!1,component:C.default,settings:[{key:"ldap-enabled",display_name:(0,w.t)(o),description:null,type:"boolean"},{key:"ldap-host",display_name:(0,w.t)(u),placeholder:"ldap.yourdomain.org",type:"string",required:!0,autoFocus:!0},{key:"ldap-port",display_name:(0,w.t)(l),placeholder:"389",type:"string",validations:[["integer",(0,w.t)(s)]]},{key:"ldap-security",display_name:(0,w.t)(c),description:null,type:"radio",options:{none:"None",ssl:"SSL",starttls:"StartTLS"},defaultValue:"none"},{key:"ldap-bind-dn",display_name:(0,w.t)(d),type:"string"},{key:"ldap-password",display_name:(0,w.t)(f),type:"password"},{key:"ldap-user-base",display_name:(0,w.t)(p),type:"string",required:!0},{key:"ldap-user-filter",display_name:(0,w.t)(m),type:"string",validations:[function(e){return(e.match(/\(/g)||[]).length!==(e.match(/\)/g)||[]).length?(0,w.t)(h):null}]},{key:"ldap-attribute-email",display_name:(0,w.t)(v),type:"string"},{key:"ldap-attribute-firstname",display_name:(0,w.t)(y),type:"string"},{key:"ldap-attribute-lastname",display_name:(0,w.t)(g),type:"string"},{key:"ldap-group-sync",display_name:(0,w.t)(b),description:null,widget:k.default,props:{mappingSetting:"ldap-group-mappings",groupHeading:(0,w.t)(_),groupPlaceholder:"cn=People,ou=Groups,dc=metabase,dc=com"}},{key:"ldap-group-base",display_name:(0,w.t)(E),type:"string"},{key:"ldap-group-mappings"}]}})})},621:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=g(["Authentication"],["Authentication"]),u=g(["LDAP"],["LDAP"]),l=g(["Server Settings"],["Server Settings"]),s=g(["User Schema"],["User Schema"]),c=g(["Attributes"],["Attributes"]),d=g(["Group Schema"],["Group Schema"]),f=y(n(0)),p=n(1),m=n(6),h=n(206),v=y(n(440));function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var b=(0,m.connect)(null,{updateSettings:h.updateLdapSettings})(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),i(t,[{key:"render",value:function(){return f.default.createElement(v.default,a({},this.props,{breadcrumbs:[[(0,p.t)(o),"/admin/settings/authentication"],[(0,p.t)(u)]],enabledKey:"ldap-enabled",layout:[{title:(0,p.t)(l),settings:["ldap-enabled","ldap-host","ldap-port","ldap-security","ldap-bind-dn","ldap-password"]},{title:(0,p.t)(s),settings:["ldap-user-base","ldap-user-filter"]},{title:(0,p.t)(c),collapse:!0,settings:["ldap-attribute-email","ldap-attribute-firstname","ldap-attribute-lastname"]},{title:(0,p.t)(d),settings:["ldap-group-sync","ldap-group-base"]}]}))}}]),t}())||r;b.displayName="SettingsLdapForm",t.default=b},622:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(0)),i=o(n(207));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){e.type;var t=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["type"]);return a.default.createElement(i.default,r({},t,{type:"number"}))};u.displayName="SettingNumber",t.default=u},623:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(0)),i=o(n(207));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){return a.default.createElement(i.default,r({},e,{type:"password"}))};u.displayName="SettingPassword",t.default=u},624:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=u(n(0)),i=u(n(103)),o=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.setting,n=e.onChange,u=e.disabled;return a.default.createElement(i.default,{className:(0,o.default)({disabled:u}),value:t.value,onChange:function(e){return n(e)},options:Object.entries(t.options).map(function(e){var t=r(e,2),n=t[0];return{name:t[1],value:n}})})};l.displayName="SettingRadio",t.default=l},625:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=u(n(0)),i=n(42),o=u(i);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.setting,n=t.placeholder,u=t.value,l=t.options,s=t.defaultValue,c=e.onChange;e.disabled;return a.default.createElement(o.default,{className:"full-width",placeholder:n,value:u,defaultValue:s,onChange:function(e){return c(e.target.value)}},l.map(function(e){var t="object"===(void 0===e?"undefined":r(e))?e.name:e,n="object"===(void 0===e?"undefined":r(e))?e.value:e;return a.default.createElement(i.Option,{key:n,name:t,value:n},t)}))};l.displayName="SettingSelect",t.default=l},626:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.setting,n=e.onChange,i=(e.disabled,e.autoFocus),o=e.errorMessage,u=e.fireOnChange;return r.default.createElement("textarea",{className:(0,a.default)("AdminInput bordered rounded h3 SettingsInput",{"border-error bg-error-input":o}),defaultValue:t.value||"",placeholder:t.placeholder,onChange:u?function(e){return n(e.target.value)}:null,onBlur:u?null:function(e){return n(e.target.value)},autoFocus:i})};o.displayName="SettingText",t.default=o},627:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(0)),a=i(n(114));function i(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var t=e.setting,n=e.onChange;return r.default.createElement(a.default,{value:t.value||t.default,onChange:n})};o.displayName="SettingColor",t.default=o},628:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=T(["Edit Mappings"],["Edit Mappings"]),u=T(["Group Mappings"],["Group Mappings"]),l=T(["Create a mapping"],["Create a mapping"]),s=T(["Mappings allow Metabase to automatically add and remove users from groups based on the membership information provided by the\n                                    directory server. Membership to the Admin group can be granted through mappings, but will not be automatically removed as a\n                                    failsafe measure."],["Mappings allow Metabase to automatically add and remove users from groups based on the membership information provided by the\n                                    directory server. Membership to the Admin group can be granted through mappings, but will not be automatically removed as a\n                                    failsafe measure."]),c=T(["Groups"],["Groups"]),d=T(["Cancel"],["Cancel"]),f=T(["Save"],["Save"]),p=T(["Add"],["Add"]),m=T(["No mappable groups"],["No mappable groups"]),h=T(["Remove"],["Remove"]),v=A(n(0)),y=n(45),g=A(n(383)),b=A(n(19)),_=A(n(276)),E=A(n(66)),w=A(n(84)),O=n(1),S=n(17),C=n(125),x=A(n(3)),k=A(n(278));function A(e){return e&&e.__esModule?e:{default:e}}function T(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function M(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var R=function(e){return!(0,C.isSpecialGroup)(e)},D=function(e){function t(e,n){var r=this;j(this,t);var i,o,u=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return u._showEditModal=(i=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.t0=x.default,e.next=4,S.SettingsApi.list();case 4:e.t1=e.sent,e.t2={key:u.props.mappingSetting},n=e.t0.findWhere.call(e.t0,e.t1,e.t2),u.setState({mappings:n&&n.value||{},showEditModal:!0}),S.PermissionsApi.groups().then(function(e){return u.setState({groups:e.filter(R)})});case 9:case"end":return e.stop()}},e,r)}),o=function(){var e=i.apply(this,arguments);return new Promise(function(t,n){return function r(a,i){try{var o=e[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});t(u)}("next")})},function(e){return o.apply(this,arguments)}),u._showAddRow=function(e){e.preventDefault(),u.setState({showAddRow:!0})},u._hideAddRow=function(){u.setState({showAddRow:!1})},u._addMapping=function(e){u.setState(function(t){return{mappings:a({},t.mappings,P({},e,[])),showAddRow:!1}})},u._changeMapping=function(e){return function(t,n){n?u.setState(function(n){return{mappings:a({},n.mappings,P({},e,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.mappings[e]),[t.id])))}}):u.setState(function(n){return{mappings:a({},n.mappings,P({},e,n.mappings[e].filter(function(e){return e!==t.id})))}})}},u._deleteMapping=function(e){return function(t){t.preventDefault(),u.setState(function(t){return{mappings:x.default.omit(t.mappings,e)}})}},u._cancelClick=function(e){e.preventDefault(),u.setState({showEditModal:!1,showAddRow:!1})},u._saveClick=function(e){e.preventDefault();var t=u.state.mappings,n=u.props.onChangeSetting;S.SettingsApi.put({key:u.props.mappingSetting,value:t}).then(function(){n(u.props.mappingSetting,t),u.setState({showEditModal:!1,showAddRow:!1,saveError:null})},function(e){return u.setState({saveError:e})})},u.state={showEditModal:!1,showAddRow:!1,groups:null,mappings:{},saveError:null},u}return M(t,v.default.Component),i(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.showEditModal,a=t.showAddRow,i=t.groups,p=t.mappings,m=t.saveError;return v.default.createElement("div",{className:"flex align-center"},v.default.createElement(k.default,this.props),v.default.createElement("div",{className:"flex align-center pt1"},v.default.createElement(b.default,{type:"button",className:"ml1",medium:!0,onClick:this._showEditModal},(0,O.t)(o))),n?v.default.createElement(w.default,{wide:!0},v.default.createElement("div",null,v.default.createElement("div",{className:"pt4 px4"},v.default.createElement("h2",null,(0,O.t)(u))),v.default.createElement("div",{className:"px4"},v.default.createElement(b.default,{className:"float-right",primary:!0,onClick:this._showAddRow},(0,O.t)(l)),v.default.createElement("p",{className:"text-measure"},(0,O.t)(s)),v.default.createElement(g.default,{columnTitles:[this.props.groupHeading,(0,O.t)(c),""]},a?v.default.createElement(L,{mappings:p,onCancel:this._hideAddRow,onAdd:this._addMapping,placeholder:this.props.groupPlaceholder}):null,Object.entries(p).map(function(t){var n=r(t,2),a=n[0],o=n[1];return v.default.createElement(F,{key:a,dn:a,groups:i||[],selectedGroups:o,onChange:e._changeMapping(a),onDelete:e._deleteMapping(a)})}))),v.default.createElement(y.ModalFooter,null,m&&m.data&&m.data.message?v.default.createElement("span",{className:"text-error text-bold"},m.data.message):null,v.default.createElement(b.default,{type:"button",onClick:this._cancelClick},(0,O.t)(d)),v.default.createElement(b.default,{primary:!0,onClick:this._saveClick},(0,O.t)(f))))):null)}}]),t}();D.displayName="GroupMappingsWidget",t.default=D;var L=function(e){function t(e,n){j(this,t);var r=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._handleCancelClick=function(e){e.preventDefault();var t=r.props.onCancel;t&&t(),r.setState({value:""})},r._handleAddClick=function(e){e.preventDefault();var t=r.props.onAdd;t&&t(r.state.value),r.setState({value:""})},r.state={value:""},r}return M(t,v.default.Component),i(t,[{key:"render",value:function(){var e=this,t=this.state.value,n=t&&void 0===this.props.mappings[t];return v.default.createElement("tr",null,v.default.createElement("td",{colSpan:"3",style:{padding:0}},v.default.createElement("div",{className:"my2 pl1 p1 bordered border-brand rounded relative flex align-center"},v.default.createElement("input",{className:"input--borderless h3 ml1 flex-full",type:"text",value:t,placeholder:this.props.placeholder,autoFocus:!0,onChange:function(t){return e.setState({value:t.target.value})}}),v.default.createElement("span",{className:"link no-decoration cursor-pointer",onClick:this._handleCancelClick},(0,O.t)(d)),v.default.createElement(b.default,{className:"ml2",primary:!!n,disabled:!n,onClick:this._handleAddClick},(0,O.t)(p)))))}}]),t}();L.displayName="AddMappingRow";var I=function(e){function t(){return j(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return M(t,v.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.groups,n=e.selectedGroups,r=e.onGroupChange;return t?v.default.createElement(_.default,{groups:t,selectedGroupIds:n,onGroupChange:r,emptyListMessage:(0,O.t)(m)}):v.default.createElement(E.default,null)}}]),t}();I.displayName="MappingGroupSelect";var F=function(e){function t(){return j(this,t),N(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return M(t,v.default.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.dn,n=e.groups,r=e.selectedGroups,a=e.onChange,i=e.onDelete;return v.default.createElement("tr",null,v.default.createElement("td",null,t),v.default.createElement("td",null,v.default.createElement(I,{groups:n,selectedGroups:r,onGroupChange:a})),v.default.createElement("td",{className:"Table-actions"},v.default.createElement(b.default,{warning:!0,onClick:i},(0,O.t)(h))))}}]),t}();F.displayName="MappingRow"},630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=c(i),u=n(6),l=n(30),s=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e,t){return{_routeless_location:e.routing.locationBeforeTransitions}},f={_routeless_push:l.push,_routeless_goBack:l.goBack};t.default=function(e){var t,n;return(0,u.connect)(d,f)((n=t=function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i.Component),a(n,[{key:"componentWillMount",value:function(){var e=this.props._routeless_push,t=this.props._routeless_location,n=t.pathname,a=t.query,i=t.search,o=t.hash,u=t.state;this._state="object"===(void 0===u?"undefined":r(u))?Object.create(u):{},e({pathname:n,query:a,search:i,hash:o,state:this._state})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.props._routeless_location,r=e._routeless_location;n.state===this._state&&r.state!==this._state&&(this._timeout=setTimeout(function(){t.props.onClose()},100))}},{key:"componentWillUnmount",value:function(){var e=this.props._routeless_location,t=this.props._routeless_goBack;null!=this._timeout&&clearTimeout(this._timeout),e.state===this._state&&t()}},{key:"render",value:function(){var t=s.default.omit(this.props,"_routeless_location","_routeless_goBack","_routeless_push");return o.default.createElement(e,t)}}]),n}(),t.displayName="Routeless["+(e.displayName||e.name)+"]",n))}},631:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){(0,r.registerVisualization)(a.default),(0,r.registerVisualization)(i.default),(0,r.registerVisualization)(o.default),(0,r.registerVisualization)(g.default),(0,r.registerVisualization)(u.default),(0,r.registerVisualization)(l.default),(0,r.registerVisualization)(s.default),(0,r.registerVisualization)(p.default),(0,r.registerVisualization)(c.default),(0,r.registerVisualization)(m.default),(0,r.registerVisualization)(d.default),(0,r.registerVisualization)(v.default),(0,r.registerVisualization)(f.default),(0,r.registerVisualization)(h.default),(0,r.registerVisualization)(y.default),(0,r.registerVisualization)(b.default),(0,r.setDefaultVisualization)(u.default)};var r=n(47),a=_(n(632)),i=_(n(635)),o=_(n(636)),u=_(n(637)),l=_(n(646)),s=_(n(648)),c=_(n(343)),d=_(n(658)),f=_(n(660)),p=_(n(665)),m=_(n(666)),h=_(n(667)),v=_(n(676)),y=_(n(677)),g=_(n(681)),b=_(n(683));function _(e){return e&&e.__esModule?e:{default:e}}},632:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=S(["Name"],["Name"]),s=S(["Number"],["Number"]),c=S(["Field to show"],["Field to show"]),d=n(0),f=O(d),p=n(1),m=O(n(67)),h=n(10),v=n(41),y=n(118),g=n(53),b=O(n(4)),_=O(n(3)),E=n(333),w=O(E);function O(e){return e&&e.__esModule?e:{default:e}}function S(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var C=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),o(t,[{key:"_getColumnIndex",value:function(e,t){var n=_.default.findIndex(e,function(e){return e.name===t["scalar.field"]});return n<0?0:n}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.actionButtons,a=u(n.series,1)[0],o=a.card,l=a.data,s=l.cols,c=l.rows,d=n.isDashboard,p=n.onChangeCardAndRun,v=n.settings,y=n.visualizationIsClickable,g=n.onVisualizationClick,O=n.width,S=this._getColumnIndex(s,v),C=c[0]&&c[0][S],x=s[S],k=i({},(e=v,_.default.chain(e).pairs().filter(function(e){var t=u(e,2),n=t[0],r=t[1];return n.startsWith("scalar.")&&void 0!==r}).map(function(e){var t=u(e,2),n=t[0],r=t[1];return[n.replace(/^scalar\./,""),r]}).object().value()),v.column(x),{jsx:!0}),A=(0,h.formatValue)(C,k),T=(0,h.formatValue)(C,i({},k,{compact:!0})),P=A.length>6&&O<250?T:A,j={value:C,column:x},N=y(j);return f.default.createElement(E.ScalarWrapper,null,f.default.createElement("div",{className:"Card-title absolute top right p1 px2"},r),f.default.createElement(m.default,{className:(0,b.default)("fullscreen-normal-text fullscreen-night-text",{"text-brand-hover cursor-pointer":N}),tooltip:A,alwaysShowTooltip:A!==P,style:{maxWidth:"100%"}},f.default.createElement("span",{onClick:N&&function(){return t._scalar&&g(i({},j,{element:t._scalar}))},ref:function(e){return t._scalar=e}},f.default.createElement(w.default,{value:P}))),d&&f.default.createElement(E.ScalarTitle,{title:v["card.title"],description:v["card.description"],onClick:p&&function(){return p({nextCard:o})}}))}}],[{key:"isSensible",value:function(e){var t=e.cols;return 1===e.rows.length&&1===t.length}},{key:"checkRenderable",value:function(e){var t=u(e,1)[0].data;t.cols,t.rows}},{key:"seriesAreCompatible",value:function(e,t){return!(!t.data.cols||1!==t.data.cols.length)}},{key:"transformSeries",value:function(e){return e.length>1?e.map(function(e,t){return{card:i({},e.card,{display:"funnel",visualization_settings:i({},e.card.visualization_settings,{"graph.x_axis.labels_enabled":!1}),_seriesIndex:t}),data:{cols:[{base_type:v.TYPE.Text,display_name:(0,p.t)(l),name:"name",source:"query-transform"},i({},e.data.cols[0])],rows:[[e.card.name,e.data.rows[0][0]]]}}}):e}}]),t}(),r.uiName=(0,p.t)(s),r.identifier="scalar",r.iconName="number",r.noHeader=!0,r.supportsSeries=!0,r.minSize={width:3,height:3},r.settings=i({},(0,y.fieldSetting)("scalar.field",{title:(0,p.t)(c),getDefault:function(e){return u(e,1)[0].data.cols[0].name},getHidden:function(e){return u(e,1)[0].data.cols.length<2}}),(0,g.columnSettings)({getColumns:function(e,t){var n=u(e,1)[0].data.cols;return[_.default.find(n,function(e){return e.name===t["scalar.field"]})||n[0]]},readDependencies:["scalar.field"]}),{"scalar.locale":{},"scalar.decimals":{},"scalar.prefix":{},"scalar.suffix":{},"scalar.scale":{}}),a);C.displayName="Scalar",t.default=C},633:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(0)),o=s(n(279)),u=s(n(3)),l=n(162);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.getObjectKey,n=e.getSettingsWidgetsForObject;return function(e){return function(s){function c(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,e));return n.handleChangeEditingObject=function(e){n.setState({editingObjectKey:e?t(e):null}),!e&&n.props.onEndShowWidget&&n.props.onEndShowWidget()},n.handleChangeSettingsForEditingObject=function(e){var t=n.state.editingObjectKey;t&&n.handleChangeSettingsForObjectKey(t,e)},n.handleChangeSettingsForObject=function(e,r){var a=t(e);a&&n.handleChangeSettingsForObjectKey(a,r)},n.handleChangeSettingsForObjectKey=function(e,t){var a,i,o,u=n.props.onChange,s=n.props.value||{},c=s[e]||{},d=(0,l.updateSettings)(c,t);u(r({},s,(o=d,(i=e)in(a={})?Object.defineProperty(a,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[i]=o,a)))},n.state={editingObjectKey:e.initialKey||(1===e.objects.length?t(e.objects[0]):null)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(c,i.default.Component),a(c,[{key:"componentWillReceiveProps",value:function(e){1===e.objects.length&&this.state.editingObjectKey!==t(e.objects[0])&&this.setState({editingObjectKey:t(e.objects[0])})}},{key:"render",value:function(){var a=this.props,l=a.series,s=a.objects,c=a.extra,d=this.state.editingObjectKey;if(d){var f=u.default.find(s,function(e){return t(e)===d});if(f){var p=(this.props.value||{})[d]||{},m=n(l,f,p,this.handleChangeSettingsForEditingObject,c);return i.default.createElement(e,r({},this.props,{getObjectKey:t,onChangeEditingObject:this.handleChangeEditingObject,onChangeObjectSettings:this.handleChangeSettingsForObject,object:f,objectSettingsWidgets:m.map(function(e){return i.default.createElement(o.default,r({key:e.id},e))})}))}}return i.default.createElement(e,r({},this.props,{getObjectKey:t,onChangeEditingObject:this.handleChangeEditingObject,onChangeObjectSettings:this.handleChangeSettingsForObject}))}}]),c}()}}},634:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=o(n(0)),i=o(n(332));function o(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){return e?e.display_name||e.name:"[Unknown]"},d=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,a.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.object,n=e.objects,r=e.onChangeEditingObject;return t?a.default.createElement(f,this.props):a.default.createElement("div",null,n.map(function(e){return a.default.createElement(i.default,{title:c(e),onEdit:function(){return r(e)},onClick:function(){return r(e)}})}))}}]),t}();d.displayName="ChartNestedSettingColumns",t.default=d;var f=function(e){function t(){return u(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,a.default.Component),r(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setSidebarPropsOverride,n=e.object,r=e.onEndShowWidget,a=e.currentSectionHasColumnSettings;t&&!a&&t({title:c(n),onBack:r})}},{key:"componentWillUnmount",value:function(){var e=this.props.setSidebarPropsOverride;e&&e(null)}},{key:"render",value:function(){return a.default.createElement("div",null,this.props.objectSettingsWidgets)}}]),t}();f.displayName="ColumnWidgets"},635:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=A(["last ",""],["last ",""]),s=A(["Nothing to compare for the previous ","."],["Nothing to compare for the previous ","."]),c=A(["No change from last ",""],["No change from last ",""]),d=A([""," was "," ",""],[""," was "," ",""]),f=A(["Group by a time field to see how this has changed over time"],["Group by a time field to see how this has changed over time"]),p=A(["Trend"],["Trend"]),m=A(["Switch positive / negative colors?"],["Switch positive / negative colors?"]),h=k(n(0)),v=n(20),y=n(1),g=k(n(3)),b=n(10),_=n(7),E=k(n(5)),w=n(78),O=n(53),S=n(83),C=n(333),x=k(C);function k(e){return e&&e.__esModule?e:{default:e}}function A(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,h.default.Component),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.actionButtons,r=t.onChangeCardAndRun,a=t.onVisualizationClick,u=t.isDashboard,f=t.isFullscreen,p=t.settings,m=t.visualizationIsClickable,O=o(t.series,1)[0],S=O.card,k=O.data,A=k.rows,T=k.cols,P=t.rawSeries,j=A[A.length-1],N=j&&j[1],M=T[1],R=P&&P[0].data&&P[0].data.insights,D=g.default.findWhere(R,{col:M.name});if(!D)return null;var L=(0,w.formatBucketing)(D.unit).toLowerCase(),I=D["last-change"],F=D["previous-value"],z=I<0,q=(p["scalar.switch_positive_negative"]?!z:z)?(0,_.color)("error"):(0,_.color)("success"),B=h.default.createElement("span",{style:{fontWeight:900}},(0,b.formatNumber)(Math.abs(I),{number_style:"percent"})),U=h.default.createElement("span",{style:{color:(0,_.color)("text-light"),fontSize:"0.7rem",marginLeft:4,marginRight:4}},"•"),V=h.default.createElement("span",{style:{marginLeft:5}},(0,y.jt)(l,L)),G={value:N,column:M,dimensions:[{value:A[A.length-1][0],column:T[0]}]},H=m(G);return h.default.createElement(C.ScalarWrapper,null,h.default.createElement("div",{className:"Card-title absolute top right p1 px2"},n),h.default.createElement("span",{onClick:H&&function(){return e._scalar&&a(i({},G,{element:e._scalar}))},ref:function(t){return e._scalar=t}},h.default.createElement(x.default,{value:(0,b.formatValue)(D["last-value"],p.column(M))})),u&&h.default.createElement(C.ScalarTitle,{title:p["card.title"],description:p["card.description"],onClick:r&&function(){return r({nextCard:S})}}),h.default.createElement(v.Box,{className:"SmartWrapper"},null==I||null==F?h.default.createElement(v.Box,{className:"text-centered text-bold mt1",color:(0,_.color)("text-medium")},(0,y.jt)(s,L)):0===I?(0,y.t)(c,L):h.default.createElement(v.Flex,{align:"center",mt:1,flexWrap:"wrap"},h.default.createElement(v.Flex,{align:"center",color:q},h.default.createElement(E.default,{size:13,pr:1,name:z?"arrow_down":"arrow_up"}),B),h.default.createElement("h4",{id:"SmartScalar-PreviousValue",className:"flex align-center hide lg-show",style:{color:(0,_.color)("text-medium")}},!f&&(0,y.jt)(d,U,(0,b.formatValue)(F,p.column(M)),V)))))}}],[{key:"isSensible",value:function(e){var t=e.insights;return t&&t.length>0}},{key:"checkRenderable",value:function(e,t){var n=o(e,1)[0].data.insights;if(!n||0===n.length)throw new S.NoBreakoutError((0,y.t)(f))}}]),t}(),r.uiName=(0,y.t)(p),r.identifier="smartscalar",r.iconName="smartscalar",r.minSize={width:3,height:3},r.noHeader=!0,r.settings=i({},(0,O.columnSettings)({getColumns:function(e,t){var n=o(e,1)[0].data.cols;return[n.find(function(e){return e.name===t["scalar.field"]})||n[1]||n[0]]}}),{"scalar.switch_positive_negative":{title:(0,y.t)(m),widget:"toggle"}}),a);T.displayName="Smart",t.default=T},636:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=P(["Goal met"],["Goal met"]),s=P(["Goal exceeded"],["Goal exceeded"]),c=P(["Goal ",""],["Goal ",""]),d=P(["Progress visualization requires a number."],["Progress visualization requires a number."]),f=P(["Progress"],["Progress"]),p=P(["Display"],["Display"]),m=P(["Goal"],["Goal"]),h=P(["Color"],["Color"]),v=n(0),y=T(v),g=T(n(15)),b=n(1),_=n(10),E=n(13),w=T(n(5)),O=T(n(219)),S=n(7),C=T(n(3)),x=n(53),k=T(n(263)),A=T(n(4));function T(e){return e&&e.__esModule?e:{default:e}}function P(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var j=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,v.Component),u(t,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=g.default.findDOMNode(this),t=g.default.findDOMNode(this.refs.pointer),n=g.default.findDOMNode(this.refs.label),r=g.default.findDOMNode(this.refs.container);if(g.default.findDOMNode(this.refs.bar).style.height=Math.min(65,e.offsetHeight)+"px",this.props.gridSize&&this.props.gridSize.height<4)return t.parentNode.style.display="none",void(n.parentNode.style.display="none");t.parentNode.style.display=null,n.parentNode.style.display=null,t.style.transform=null;var a=r.offsetWidth,i=n.offsetWidth,o=t.offsetWidth,u=t.offsetLeft+o/2,l=-o/2+5;u-i/2<l?(n.style.left=l+"px",n.style.right=null):u+i/2>a-l?(n.style.left=null,n.style.right=l+"px"):(n.style.left=u-i/2+"px",n.style.right=null),u<5?t.style.transform="translate(5px,0)":u>a-5&&(t.style.transform="translate(-5px,0)")}},{key:"render",value:function(){var e=this.props,t=o(e.series,1)[0].data,n=t.rows,r=t.cols,a=e.settings,u=e.onVisualizationClick,d=e.visualizationIsClickable,f=n[0]&&"number"==typeof n[0][0]?n[0][0]:0,p=r[0],m=a["progress.goal"]||0,h=a["progress.color"],v=(0,k.default)(h).lighten(.25).rgb().string(),g=(0,k.default)(h).darken(.3).rgb().string(),E=h,S=f>m?g:v,C=f>m?g:h,x=Math.max(0,f<m?f/m:m/f),T=Math.max(0,f<m?f/m:1),P=void 0;f===m?P=(0,b.t)(l):f>m&&(P=(0,b.t)(s));var j={value:f,column:p},N=d(j);return y.default.createElement("div",{className:(0,A.default)(this.props.className,"flex layout-centered")},y.default.createElement("div",{className:"flex-full full-height flex flex-column justify-center",style:{padding:10,paddingTop:0}},y.default.createElement("div",{ref:"container",className:"relative text-bold text-medium",style:{height:20}},y.default.createElement("div",{ref:"label",style:{position:"absolute"}},(0,_.formatValue)(f,a.column(p)))),y.default.createElement("div",{className:"relative",style:{height:10,marginBottom:5}},y.default.createElement("div",{ref:"pointer",style:{width:0,height:0,position:"absolute",left:100*T+"%",marginLeft:-10,borderLeft:"10px solid transparent",borderRight:"10px solid transparent",borderTop:"10px solid "+C}})),y.default.createElement("div",{ref:"bar",className:(0,A.default)("relative",{"cursor-pointer":N}),style:{backgroundColor:S,borderRadius:5,overflow:"hidden"},onClick:N&&function(e){return u(i({},j,{event:e.nativeEvent}))}},y.default.createElement("div",{style:{backgroundColor:E,width:100*x+"%",height:"100%"}}),P&&y.default.createElement("div",{className:"flex align-center absolute spread text-white text-bold px2"},y.default.createElement(O.default,{borderWidth:2},y.default.createElement(w.default,{name:"check",size:14})),y.default.createElement("div",{className:"pl2"},P))),y.default.createElement("div",{className:"mt1"},y.default.createElement("span",{className:"float-left"},"0"),y.default.createElement("span",{className:"float-right"},(0,b.t)(c,(0,_.formatValue)(m,a.column(p)))))))}}],[{key:"isSensible",value:function(e){var t=e.cols;return 1===e.rows.length&&1===t.length}},{key:"checkRenderable",value:function(e){var t=o(e,1)[0].data,n=t.cols;t.rows;if(!(0,E.isNumeric)(n[0]))throw new Error((0,b.t)(d))}}]),t}(),r.uiName=(0,b.t)(f),r.identifier="progress",r.iconName="progress",r.minSize={width:3,height:3},r.settings=i({},(0,x.columnSettings)({getColumns:function(e,t){var n=o(e,1)[0].data.cols;return[C.default.find(n,function(e){return e.name===t["scalar.field"]})||n[0]]}}),{"progress.goal":{section:(0,b.t)(p),title:(0,b.t)(m),widget:"number",default:0},"progress.color":{section:(0,b.t)(p),title:(0,b.t)(h),widget:"color",default:(0,S.color)("accent1")}}),a);j.displayName="Progress",t.default=j},637:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestTable=t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=K(["Unset"],["Unset"]),s=K(["Table"],["Table"]),c=K(["Columns"],["Columns"]),d=K(["Pivot the table"],["Pivot the table"]),f=K(["Pivot column"],["Pivot column"]),p=K(["Cell column"],["Cell column"]),m=K(["Visible columns"],["Visible columns"]),h=K(["Conditional Formatting"],["Conditional Formatting"]),v=K(["Column title"],["Column title"]),y=K(["Show a mini bar chart"],["Show a mini bar chart"]),g=K(["Off"],["Off"]),b=K(["Link"],["Link"]),_=K(["Email link"],["Email link"]),E=K(["Image"],["Image"]),w=K(["Automatic"],["Automatic"]),O=K(["View as link or image"],["View as link or image"]),S=K(["Link text"],["Link text"]),C=n(0),x=Y(C),k=Y(n(638)),A=Y(n(640)),T=n(1),P=Q(n(642)),j=n(33),N=n(118),M=n(24),R=n(10),D=n(28),L=Q(n(129)),I=n(13),F=Y(n(643)),z=n(644),q=Y(z),B=n(645),U=n(53),V=Y(n(3)),G=Y(n(4)),H=Y(n(177)),W=n(11);function Q(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function Y(e){return e&&e.__esModule?e:{default:e}}function K(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Z=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getColumnTitle=function(e){var t=n.state.data&&n.state.data.cols;if(!t)return null;var r=n.props.settings,a=r["table.pivot"],i=t[e];return a?(0,R.formatColumn)(i)||(0!==e?(0,T.t)(l):null):r.column(i)._column_title_full||(0,R.formatColumn)(i)},n.state={data:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,C.Component),u(t,null,[{key:"isSensible",value:function(e){e.cols,e.rows;return!0}},{key:"isLiveResizable",value:function(e){return!1}},{key:"checkRenderable",value:function(e){var t=o(e,1)[0].data;t.cols,t.rows}}]),u(t,[{key:"componentWillMount",value:function(){this._updateData(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.series===this.props.series&&V.default.isEqual(e.settings,this.props.settings)||this._updateData(e)}},{key:"_updateData",value:function(e){var t=o(e.series,1)[0].data,n=e.settings;if(n["table.pivot"]){var r=V.default.findIndex(t.cols,function(e){return e.name===n["table.pivot_column"]}),a=V.default.findIndex(t.cols,function(e){return e.name===n["table.cell_column"]}),i=V.default.findIndex(t.cols,function(e,t){return t!==r&&t!==a});this.setState({data:P.pivot(t,i,r,a,n)})}else{var u=t.cols,l=t.rows,s=n["table.columns"].filter(function(e){return e.enabled}).map(function(e){return(0,j.findColumnIndexForColumnSetting)(u,e)}).filter(function(e){return e>=0&&e<u.length});this.setState({data:{cols:s.map(function(e){return u[e]}),rows:l.map(function(e){return s.map(function(t){return e[t]})})}})}}},{key:"render",value:function(){var e=this.props,t=o(e.series,1)[0].card,n=e.isDashboard,r=e.settings,a=this.state.data,u=(0,W.getIn)(t,["dataset_query","query","order-by"])||null,l=r["table.pivot"],s=(r["table.columns"]||[]).filter(function(e){return e.enabled}).length<1,c=n?A.default:k.default;return a?s?x.default.createElement("div",{className:(0,G.default)("flex-full px1 pb1 text-centered flex flex-column layout-centered",{"text-slate-light":n,"text-slate":!n})},x.default.createElement(H.default,{width:99,src:"app/assets/img/hidden-field.png",forceOriginalDimensions:!1,className:"mb2"}),x.default.createElement("span",{className:"h4 text-bold"},"Every field is hidden right now")):x.default.createElement(c,i({},this.props,{data:a,isPivoted:l,sort:u,getColumnTitle:this.getColumnTitle})):null}}]),t}(),r.uiName=(0,T.t)(s),r.identifier="table",r.iconName="table",r.minSize={width:4,height:3},r.settings=i({},(0,U.columnSettings)({hidden:!0}),{"table.pivot":{section:(0,T.t)(c),title:(0,T.t)(d),widget:"toggle",getHidden:function(e){var t=o(e,1)[0],n=(t.card,t.data);return n&&3!==n.cols.length},getDefault:function(e){var t=o(e,1)[0],n=t.card,r=t.data;return r&&3===r.cols.length&&L.isStructured(n.dataset_query)&&1===r.cols.filter(I.isMetric).length&&2===r.cols.filter(I.isDimension).length}},"table.pivot_column":{section:(0,T.t)(c),title:(0,T.t)(f),widget:"field",getDefault:function(e,t){var n=o(e,1)[0].data,r=n.cols,a=n.rows,i=V.default.min(r.filter(I.isDimension),function(e){return(0,M.getColumnCardinality)(r,a,r.indexOf(e))});return i&&i.name},getProps:function(e,t){return{options:o(e,1)[0].data.cols.filter(I.isDimension).map(N.getOptionFromColumn)}},getHidden:function(e,t){return!t["table.pivot"]},readDependencies:["table.pivot"],persistDefault:!0},"table.cell_column":{section:(0,T.t)(c),title:(0,T.t)(p),widget:"field",getDefault:function(e,t){var n=o(e,1)[0].data,r=t["table.pivot_column"],a=n.cols.filter(function(e){return e.name!==r}),i=a[a.length-1];return(a.find(I.isMetric)||i||{}).name},getProps:function(e,t){return{options:o(e,1)[0].data.cols.map(N.getOptionFromColumn)}},getHidden:function(e,t){o(e,1)[0].data.cols;return!t["table.pivot"]},readDependencies:["table.pivot","table.pivot_column"],persistDefault:!0},"table.columns":{section:(0,T.t)(c),title:(0,T.t)(m),widget:F.default,getHidden:function(e,t){return t["table.pivot"]},isValid:function(e){var t=o(e,1)[0],n=t.card,r=t.data;return V.default.all(n.visualization_settings["table.columns"],function(e){return(0,j.findColumnIndexForColumnSetting)(r.cols,e)>=0})},getDefault:function(e){return o(e,1)[0].data.cols.map(function(e){return{name:e.name,fieldRef:e.field_ref,enabled:"details-only"!==e.visibility_type}})},getProps:function(e){return{columns:o(e,1)[0].data.cols}}},"table.column_widths":{},"table.column_formatting":{section:(0,T.t)(h),widget:q.default,default:[],getProps:function(e,t){return{cols:o(e,1)[0].data.cols.filter(z.isFormattable),isPivoted:t["table.pivot"]}},getHidden:function(e,t){return 0===o(e,1)[0].data.cols.filter(z.isFormattable).length},readDependencies:["table.pivot"]},"table._cell_background_getter":{getValue:function(e,t){var n=o(e,1)[0].data,r=n.rows,a=n.cols;return(0,B.makeCellBackgroundGetter)(r,a,t)},readDependencies:["table.column_formatting","table.pivot"]}}),r.columnSettings=function(e){var t={column_title:{title:(0,T.t)(v),widget:"input",getDefault:function(e){return(0,R.formatColumn)(e)}}};if((0,I.isNumber)(e)&&(t.show_mini_bar={title:(0,T.t)(y),widget:"toggle"}),(0,I.isString)(e)){var n=null,r=[{name:(0,T.t)(g),value:null}];e.special_type&&!(0,I.isURL)(e)||(n="link",r.push({name:(0,T.t)(b),value:"link"})),e.special_type&&!(0,I.isEmail)(e)||(n="email_link",r.push({name:(0,T.t)(_),value:"email_link"})),(!e.special_type||(0,I.isImageURL)(e)||(0,I.isAvatarURL)(e))&&(n=(0,I.isAvatarURL)(e)?"image":"link",r.push({name:(0,T.t)(E),value:"image"})),e.special_type||(n="auto",r.push({name:(0,T.t)(w),value:"auto"})),r.length>1&&(t.view_as={title:(0,T.t)(O),widget:"select",default:n,props:{options:r}}),t.link_text={title:(0,T.t)(S),widget:"input",default:null,getHidden:function(e,t){return"link"!==t.view_as&&"email_link"!==t.view_as}}}var a=!0,i=!1,o=void 0;try{for(var u,l=D.PLUGIN_TABLE_COLUMN_SETTINGS[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value;Object.assign(t,s(e))}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return t},a);Z.displayName="Table",t.default=Z;var J=t.TestTable=function(e){return x.default.createElement(Z,i({},e,{isDashboard:!0}))};J.displayName="TestTable",J.uiName=Z.uiName,J.identifier=Z.identifier,J.iconName=Z.iconName,J.minSize=Z.minSize,J.settings=Z.settings},638:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=T(s),d=T(n(2)),f=T(n(15));n(639);var p=T(n(5)),m=T(n(116)),h=n(10),v=n(13),y=n(82),g=n(334),b=n(24),_=n(33),E=T(n(31)),w=T(n(3)),O=T(n(4)),S=T(n(52)),C=T(n(335)),x=n(257),k=T(n(443)),A=T(n(67));function T(e){return e&&e.__esModule?e:{default:e}}function P(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var j=36,N=j,M=5,R=5,D=0;var L=(0,S.default)()((o=i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.recomputeGridSize=function(){n.header&&n.grid&&(n.header.recomputeGridSize(),n.grid.recomputeGridSize())},n.recomputeColumnSizes=w.default.debounce(function(){n.setState({contentWidths:null})},100),n.cellRenderer=function(e){var t=e.key,r=e.style,a=e.rowIndex,i=e.columnIndex,o=n.props,l=o.data,s=o.settings,d=n.state.dragColIndex,f=l.rows,p=l.cols,h=p[i],y=f[a][i],_=s.column(h),E=n.getCellClickedObject(a,i),w=_.show_mini_bar?c.default.createElement(C.default,{value:y,options:_,extent:(0,b.getColumnExtent)(l.cols,l.rows,i),cellHeight:j}):n.getCellFormattedValue(y,_,E),S=!(w&&w.type===m.default)&&n.visualizationIsClickable(E),x=n.getCellBackgroundColor(s,y,a,h.name);return c.default.createElement("div",{key:t,style:u({},r,{left:n.getColumnLeft(r,i),transition:null!=d?"left 200ms":null,backgroundColor:x}),className:(0,O.default)("TableInteractive-cellWrapper text-dark",{"TableInteractive-cellWrapper--firstColumn":0===i,"TableInteractive-cellWrapper--lastColumn":i===p.length-1,"TableInteractive-emptyCell":null==y,"cursor-pointer":S,"justify-end":(0,g.isColumnRightAligned)(h),"Table-ID":null!=y&&(0,v.isID)(h),"Table-FK":null!=y&&(0,v.isFK)(h),link:S&&(0,v.isID)(h)}),onMouseUp:S?function(e){n.onVisualizationClick(E,e.currentTarget)}:void 0},n.props.renderTableCellWrapper(w))},n.tableHeaderRenderer=function(e){e.key;var t=e.style,r=e.columnIndex,a=n.props,i=a.data,o=a.sort,l=a.isPivoted,s=a.getColumnTitle,d=a.renderTableHeaderWrapper,f=n.state.dragColIndex,m=i.cols,h=m[r],v=s(r),y=n.getHeaderClickedObject(r),b=!l,S=f===r,C=n.visualizationIsClickable(y),x=C&&h.source&&!l,T=(0,g.isColumnRightAligned)(h),P=(0,_.fieldRefForColumn)(h),j=w.default.findIndex(o,function(e){return e[1]&&E.default.isEqual(e[1],P)}),N=j>=0,L=N&&"asc"===o[j][0];return c.default.createElement(k.default,{key:r+h.name+D,axis:"x",disabled:!b,onStart:function(e,a){n.setState({columnPositions:n.getColumnPositions(),dragColIndex:r,dragColStyle:t,dragColNewIndex:r})},onDrag:function(e,t){var r=n.getDragColNewIndex(t);null!=r&&r!==n.state.dragColNewIndex&&n.setState({dragColNewIndex:r,dragColNewLefts:n.getNewColumnLefts(r)})},onStop:function(e,t){var a=n.state,i=a.dragColIndex,o=a.dragColNewIndex;D++,null!=i&&null!=o&&i!==o?n.onColumnReorder(i,o):Math.abs(t.x)+Math.abs(t.y)<R&&setTimeout(function(){n.onVisualizationClick(y,n.headerRefs[r])}),n.setState({columnPositions:null,dragColIndex:null,dragColStyle:null,dragColNewIndex:null,dragColNewLefts:null})}},c.default.createElement("div",{ref:function(e){return n.headerRefs[r]=e},style:u({},t,{overflow:"visible",left:S?t.left:n.getColumnLeft(t,r)}),className:(0,O.default)("TableInteractive-cellWrapper TableInteractive-headerCellData text-medium text-brand-hover",{"TableInteractive-cellWrapper--firstColumn":0===r,"TableInteractive-cellWrapper--lastColumn":r===m.length-1,"TableInteractive-cellWrapper--active":S,"TableInteractive-headerCellData--sorted":N,"cursor-pointer":C,"justify-end":T}),onClick:C&&!b?function(e){n.onVisualizationClick(y,e.currentTarget)}:void 0},d(c.default.createElement(A.default,{tooltip:v},x&&T&&c.default.createElement(p.default,{className:"Icon mr1",name:L?"chevronup":"chevrondown",size:8}),v,x&&!T&&c.default.createElement(p.default,{className:"Icon ml1",name:L?"chevronup":"chevrondown",size:8})),h,r),c.default.createElement(k.default,{axis:"x",bounds:{left:M},position:{x:n.getColumnWidth({index:r}),y:0},onStart:function(e){e.stopPropagation(),n.setState({dragColIndex:r})},onStop:function(e,t){var a=t.x;e.stopPropagation(),n.onColumnResize(r,a),n.setState({dragColIndex:null})}},c.default.createElement("div",{className:"bg-brand-hover bg-brand-active",style:{zIndex:99,position:"absolute",width:M,top:0,bottom:0,left:-M-1,cursor:"ew-resize"}}))))},n.getColumnWidth=function(e){var t=e.index,r=n.props.settings,a=n.state.columnWidths;return(r["table.column_widths"]||[])[t]||a[t]||N},n.handleOnMouseEnter=function(){n._previousOverscrollBehaviorX=document.body.style.overscrollBehaviorX,document.body.style.overscrollBehaviorX="none"},n.handleOnMouseLeave=function(){document.body.style.overscrollBehaviorX=n._previousOverscrollBehaviorX},n.state={columnWidths:[],contentWidths:null},n.columnHasResized={},n.headerRefs=[],window.METABASE_TABLE=n,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),l(t,[{key:"componentWillMount",value:function(){this._div=document.createElement("div"),this._div.className="TableInteractive",this._div.style.display="inline-block",this._div.style.position="absolute",this._div.style.visibility="hidden",this._div.style.zIndex="-1",document.body.appendChild(this._div),this._measure()}},{key:"componentWillUnmount",value:function(){this._div&&this._div.parentNode&&this._div.parentNode.removeChild(this._div)}},{key:"componentWillReceiveProps",value:function(e){this.props.data&&e.data&&!w.default.isEqual(this.props.data.cols,e.data.cols)&&this.resetColumnWidths();var t=this._getColumnSettings(this.props),n=this._getColumnSettings(e);w.default.isEqual(t,n)||this.remeasureColumnWidths()}},{key:"_getColumnSettings",value:function(e){return e.data&&e.data.cols.map(function(t){return e.settings.column(t)})}},{key:"shouldComponentUpdate",value:function(e,t){var n=["width","height","settings","data"];return!w.default.isEqual(w.default.pick.apply(w.default,[this.props].concat(n)),w.default.pick.apply(w.default,[e].concat(n)))||!w.default.isEqual(this.state,t)}},{key:"componentDidUpdate",value:function(){if(this.state.contentWidths){if(this.props.onContentWidthChange){var e=this.state.columnWidths.reduce(function(e,t){return e+t});this._totalContentWidth!==e&&(this.props.onContentWidthChange(e,this.state.columnWidths),this._totalContentWidth=e)}}else this._measure()}},{key:"remeasureColumnWidths",value:function(){this.setState({columnWidths:[],contentWidths:null}),this.columnHasResized={}}},{key:"resetColumnWidths",value:function(){this.remeasureColumnWidths(),this.props.onUpdateVisualizationSettings({"table.column_widths":void 0})}},{key:"_measure",value:function(){var e=this,t=this.props.data,n=t.cols,r=t.rows;f.default.render(c.default.createElement("div",{style:{display:"flex"}},n.map(function(t,n){return c.default.createElement("div",{className:"fake-column",key:"column-"+n},e.tableHeaderRenderer({columnIndex:n,rowIndex:0,key:"header",style:{}}),function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=[],a=0;a<e.length&&r.length<n;a++)null!=e[a][t]&&r.push(a);return r}(r,n).map(function(t){return e.cellRenderer({rowIndex:t,columnIndex:n,key:"row-"+t,style:{}})}))})),this._div,function(){var t=[].map.call(e._div.getElementsByClassName("fake-column"),function(e){return e.offsetWidth}),r=n.map(function(n,r){return e.columnNeedsResize?e.columnNeedsResize[r]&&!e.columnHasResized[r]?(e.columnHasResized[r]=!0,t[r]+1):e.state.columnWidths[r]?e.state.columnWidths[r]:0:t[r]+1});f.default.unmountComponentAtNode(e._div),delete e.columnNeedsResize,e.setState({contentWidths:t,columnWidths:r},e.recomputeGridSize)})}},{key:"onCellResize",value:function(e){this.columnNeedsResize=this.columnNeedsResize||{},this.columnNeedsResize[e]=!0,this.recomputeColumnSizes()}},{key:"onColumnResize",value:function(e,t){var n=this,r=this.props.settings,a=r["table.column_widths"]?r["table.column_widths"].slice():[];a[e]=Math.max(N,t),this.props.onUpdateVisualizationSettings({"table.column_widths":a}),setTimeout(function(){return n.recomputeGridSize()},1)}},{key:"onColumnReorder",value:function(e,t){var n=this.props,r=n.settings,a=n.onUpdateVisualizationSettings,i=r["table.columns"].slice();i.splice(t,0,i.splice(e,1)[0]),a({"table.columns":i})}},{key:"onVisualizationClick",value:function(e,t){var n=this.props.onVisualizationClick;this.visualizationIsClickable(e)&&n(u({},e,{element:t}))}},{key:"getCellClickedObject",value:function(e,t){try{return this._getCellClickedObjectCached(this.props.data,e,t,this.props.isPivoted)}catch(e){console.error(e)}}},{key:"_getCellClickedObjectCached",value:function(e,t,n,r){return(0,g.getTableCellClickedObject)(e,t,n,r)}},{key:"getHeaderClickedObject",value:function(e){try{return this._getHeaderClickedObjectCached(this.props.data,e,this.props.isPivoted)}catch(e){console.error(e)}}},{key:"_getHeaderClickedObjectCached",value:function(e,t,n){return(0,g.getTableHeaderClickedObject)(e,t,n)}},{key:"visualizationIsClickable",value:function(e){try{var t=this.props,n=t.onVisualizationClick,r=t.visualizationIsClickable;if((null==this.state.dragColIndex||e&&void 0===e.value)&&n&&r&&e)return this._visualizationIsClickableCached(r,e)}catch(e){console.error(e)}}},{key:"_visualizationIsClickableCached",value:function(e,t){return e(t)}},{key:"getCellBackgroundColor",value:function(e,t,n,r){try{return e["table._cell_background_getter"](t,n,r)}catch(e){console.error(e)}}},{key:"getCellFormattedValue",value:function(e,t,n){try{return(0,h.formatValue)(e,u({},t,{type:"cell",jsx:!0,rich:!0,clicked:n}))}catch(e){console.error(e)}}},{key:"getDragColNewIndex",value:function(e){var t=this.state,n=t.columnPositions,r=t.dragColNewIndex,a=t.dragColStyle;if(a)if(e.x<0){var i=a.left+e.x,o=w.default.findIndex(n,function(e){return i<e.center});if(o>=0)return o}else if(e.x>0){var u=a.left+a.width+e.x,l=w.default.findLastIndex(n,function(e){return u>e.center});if(l>=0)return l}return r}},{key:"getColumnPositions",value:function(){var e=this,t=0;return this.props.data.cols.map(function(n,r){var a=e.getColumnWidth({index:r}),i={left:t,right:t+a,center:t+a/2,width:a};return t+=a,i})}},{key:"getNewColumnLefts",value:function(e){var t=this.state,n=t.dragColIndex,r=t.columnPositions,a=this.props.data.cols.map(function(e,t){return t});a.splice(e,0,a.splice(n,1)[0]);var i=0,o=a.map(function(e){var t=i;return i+=r[e].width,{index:e,left:t}});return o.sort(function(e,t){return e.index-t.index}),o.map(function(e){return e.left})}},{key:"getColumnLeft",value:function(e,t){var n=this.state,r=n.dragColNewIndex,a=n.dragColNewLefts;return null!=r&&a?a[t]:e.left}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,a=t.data,i=a.cols,o=a.rows,u=t.className;if(!n||!r)return c.default.createElement("div",{className:u});var l=this.props.tableHeaderHeight||36;return c.default.createElement(x.ScrollSync,null,function(t){var a=t.onScroll,s=t.scrollLeft;t.scrollTop;return c.default.createElement("div",{className:(0,O.default)(u,"TableInteractive relative",{"TableInteractive--pivot":e.props.isPivoted,"TableInteractive--ready":e.state.contentWidths,"TableInteractive--noHover":null!=e.state.dragColIndex}),onMouseEnter:e.handleOnMouseEnter,onMouseLeave:e.handleOnMouseLeave},c.default.createElement("canvas",{className:"spread",style:{pointerEvents:"none",zIndex:999},width:n,height:r}),c.default.createElement(x.Grid,{ref:function(t){return e.header=t},style:{top:0,left:0,right:0,height:l,position:"absolute",overflow:"hidden"},className:"TableInteractive-header scroll-hide-all",width:n||0,height:l,rowCount:1,rowHeight:l,columnCount:i.length+1,columnWidth:function(t){return t.index<i.length?e.getColumnWidth(t):50},cellRenderer:function(t){return t.columnIndex<i.length?e.tableHeaderRenderer(t):null},onScroll:function(e){var t=e.scrollLeft;return a({scrollLeft:t})},scrollLeft:s,tabIndex:null}),c.default.createElement(x.Grid,{ref:function(t){return e.grid=t},style:{top:l,left:0,right:0,bottom:0,position:"absolute"},className:"",width:n,height:r-l,columnCount:i.length,columnWidth:e.getColumnWidth,rowCount:o.length,rowHeight:j,cellRenderer:e.cellRenderer,onScroll:function(t){var n=t.scrollLeft;return e.props.onActionDismissal(),a({scrollLeft:n})},scrollLeft:s,tabIndex:null,overscanRowCount:20}))})}},{key:"_benchmark",value:function(){var e=f.default.findDOMNode(this.grid),t=e.scrollHeight;console.log("height",t);var n=0,r=Date.now();!function a(){e.scrollTop=n,setTimeout(function(){var e=Date.now();console.log(e-r),r=e,(n+=t/10)<t-t/10&&a()},40)}()}}]),t}(),i.propTypes={data:d.default.object.isRequired,isPivoted:d.default.bool.isRequired,sort:d.default.array},i.defaultProps={isPivoted:!1,renderTableHeaderWrapper:function(e){return c.default.createElement("div",{className:"cellData"},e)},renderTableCellWrapper:function(e){return c.default.createElement("div",{className:"cellData"},e)}},P((a=o).prototype,"_getCellClickedObjectCached",[y.memoize],Object.getOwnPropertyDescriptor(a.prototype,"_getCellClickedObjectCached"),a.prototype),P(a.prototype,"_getHeaderClickedObjectCached",[y.memoize],Object.getOwnPropertyDescriptor(a.prototype,"_getHeaderClickedObjectCached"),a.prototype),P(a.prototype,"_visualizationIsClickableCached",[y.memoize],Object.getOwnPropertyDescriptor(a.prototype,"_visualizationIsClickableCached"),a.prototype),P(a.prototype,"getCellBackgroundColor",[y.memoize],Object.getOwnPropertyDescriptor(a.prototype,"getCellBackgroundColor"),a.prototype),P(a.prototype,"getCellFormattedValue",[y.memoize],Object.getOwnPropertyDescriptor(a.prototype,"getCellFormattedValue"),a.prototype),r=a))||r;L.displayName="TableInteractive",t.default=L},639:function(e,t){},64:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DELETE=t.PUT=t.POST=t.GET=t.Api=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=s(n(134)),o=s(n(405)),u=n(112),l=n(25);function s(e){return e&&e.__esModule?e:{default:e}}function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var d="X-Metabase-Anti-CSRF-Token",f=null,p={json:!0,hasBody:!1,noEvent:!1,transformResponse:function(e){return e},raw:{},headers:{},retry:!1,retryCount:10,retryDelayIntervals:Array.from(new Array(10).keys()).map(function(e){return 1e3*Math.pow(2,e)}).reverse()},m=new(t.Api=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.basename="",e.GET=e._makeMethod("GET",{retry:!0}),e.DELETE=e._makeMethod("DELETE",{}),e.POST=e._makeMethod("POST",{hasBody:!0,retry:!0}),e.PUT=e._makeMethod("PUT",{hasBody:!0}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"_makeMethod",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(a){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"function"==typeof o&&(o={transformResponse:o});var u,s=r({},p,n,o);return u=c(regeneratorRuntime.mark(function n(o){var u,c,p,m,h,v,y,g,b,_,E,w,O,S,C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:for(u=r({},s,C),c=a,o=r({},o),p=!0,m=!1,h=void 0,n.prev=6,v=(c.match(/:\w+/g)||[])[Symbol.iterator]();!(p=(y=v.next()).done);p=!0)g=y.value,b=g.slice(1),_=o[b],delete o[b],void 0===_&&(console.warn("Warning: calling",e,"without",g),_=""),u.raw&&u.raw[b]||(_=encodeURIComponent(_)),c=c.replace(g,_);n.next=14;break;case 10:n.prev=10,n.t0=n.catch(6),m=!0,h=n.t0;case 14:n.prev=14,n.prev=15,!p&&v.return&&v.return();case 17:if(n.prev=17,!m){n.next=20;break}throw h;case 20:return n.finish(17);case 21:return n.finish(14);case 22:for(E in o)void 0===o[E]&&delete o[E];if(w=u.json?{Accept:"application/json","Content-Type":"application/json"}:{},l.IFRAMED&&(w["X-Metabase-Embedded"]="true"),f&&(w[d]=f),O=void 0,u.hasBody?O=JSON.stringify(null!=u.bodyParamName?o[u.bodyParamName]:o):(S=i.default.stringify(o))&&(c+=(c.indexOf("?")>=0?"&":"?")+S),Object.assign(w,u.headers),!u.retry){n.next=33;break}return n.abrupt("return",t._makeRequestWithRetries(e,c,w,O,o,u));case 33:return n.abrupt("return",t._makeRequest(e,c,w,O,o,u));case 34:case"end":return n.stop()}},n,t,[[6,10,14,22],[15,,17,21]])})),function(e){return u.apply(this,arguments)}}}},{key:"_makeRequestWithRetries",value:function(){var e=c(regeneratorRuntime.mark(function e(t,n,r,a,i,o){var l,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l=o.retryDelayIntervals.slice(),s=0,c=o.retryCount+1;case 3:return e.prev=3,e.next=6,this._makeRequest(t,n,r,a,i,o);case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),s++,!(503===e.t0.status&&s<c)){e.next=17;break}return e.next=15,(0,u.delay)(l.pop());case 15:e.next=18;break;case 17:throw e.t0;case 18:if(s<c){e.next=3;break}case 19:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t,n,r,a,i,o){return e.apply(this,arguments)}}()},{key:"_makeRequest",value:function(e,t,n,r,a,i){var o=this;return new Promise(function(u,l){var s=!1,c=new XMLHttpRequest;c.open(e,o.basename+t);for(var p in n)c.setRequestHeader(p,n[p]);c.onreadystatechange=function(){if(c.readyState===XMLHttpRequest.DONE){var e=c.getResponseHeader(d);e&&(f=e);var n=c.responseText;if(i.json)try{n=JSON.parse(n)}catch(e){}var r=c.status;202===r&&n&&n._status>0&&(r=n._status),r>=200&&r<=299?(i.transformResponse&&(n=i.transformResponse(n,{data:a})),u(n)):l({status:r,data:n,isCancelled:s}),i.noEvent||o.emit(r,t)}},c.send(r),i.cancelled&&i.cancelled.then(function(){s=!0,c.abort()})})}}]),t}());t.default=m;var h=m.GET,v=m.POST,y=m.PUT,g=m.DELETE;t.GET=h,t.POST=v,t.PUT=y,t.DELETE=g},640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=(o=["Rows ","-"," of ",""],u=["Rows ","-"," of ",""],Object.freeze(Object.defineProperties(o,{raw:{value:Object.freeze(u)}}))),d=n(0),f=A(d),p=A(n(2)),m=A(n(15)),h=A(n(641)),v=A(n(52)),y=A(n(67)),g=A(n(5)),b=A(n(335)),_=A(n(116)),E=n(10),w=n(334),O=n(24),S=n(1),C=A(n(4)),x=A(n(3)),k=n(13);function A(e){return e&&e.__esModule?e:{default:e}}var T=(0,v.default)()((i=a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={page:0,pageSize:1,sortColumn:null,sortDescending:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),s(t,[{key:"setSort",value:function(e){this.state.sortColumn===e?this.setState({sortDescending:!this.state.sortDescending}):this.setState({sortColumn:e})}},{key:"componentDidUpdate",value:function(){var e=m.default.findDOMNode(this.refs.header).getBoundingClientRect().height,t=this.refs.footer?m.default.findDOMNode(this.refs.footer).getBoundingClientRect().height:0,n=m.default.findDOMNode(this.refs.firstRow).getBoundingClientRect().height+1,r=Math.max(1,Math.floor((this.props.height-e-t)/n));this.state.pageSize!==r&&this.setState({pageSize:r})}},{key:"visualizationIsClickable",value:function(e){var t=this.props,n=t.onVisualizationClick,r=t.visualizationIsClickable;return n&&r&&r(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.onVisualizationClick,a=t.isPivoted,i=t.settings,o=t.getColumnTitle,u=n.rows,s=n.cols,d=i["table._cell_background_getter"],p=this.state,m=p.page,v=p.pageSize,A=p.sortColumn,T=p.sortDescending,P=v*m,j=Math.min(u.length-1,v*(m+1)-1),N=x.default.range(0,u.length);return null!=A&&(N=x.default.sortBy(N,function(e){var t=u[e][A];return"string"==typeof t&&(t=t.toLowerCase()),t}),T&&N.reverse()),f.default.createElement("div",{className:(0,C.default)(this.props.className,"relative flex flex-column")},f.default.createElement("div",{className:"flex-full relative"},f.default.createElement("div",{className:"absolute top bottom left right scroll-x scroll-show scroll-show--hover",style:{overflowY:"hidden"}},f.default.createElement("table",{className:(0,C.default)(h.default.Table,h.default.TableSimple,"fullscreen-normal-text","fullscreen-night-text")},f.default.createElement("thead",{ref:"header"},f.default.createElement("tr",null,s.map(function(t,n){return f.default.createElement("th",{key:n,className:(0,C.default)("TableInteractive-headerCellData cellData text-brand-hover text-medium",{"TableInteractive-headerCellData--sorted":A===n,"text-right":(0,w.isColumnRightAligned)(t)}),onClick:function(){return e.setSort(n)}},f.default.createElement("div",{className:"relative"},f.default.createElement(g.default,{name:T?"chevrondown":"chevronup",width:8,height:8,style:{position:"absolute",right:"100%",marginRight:3}}),f.default.createElement(y.default,null,o(n))))}))),f.default.createElement("tbody",null,N.slice(P,j+1).map(function(t,o){return f.default.createElement("tr",{key:t,ref:0===o?"firstRow":null},u[t].map(function(o,c){var p=s[c],m=(0,w.getTableCellClickedObject)(n,t,c,a),h=i.column(p),v=null==o?"-":h.show_mini_bar?f.default.createElement(b.default,{value:o,options:h,extent:(0,O.getColumnExtent)(s,u,c)}):(0,E.formatValue)(o,l({},h,{clicked:m,type:"cell",jsx:!0,rich:!0})),y=!(v&&v.type===_.default)&&e.visualizationIsClickable(m);return f.default.createElement("td",{key:c,style:{whiteSpace:"nowrap",backgroundColor:d&&d(o,t,p.name)},className:(0,C.default)("px1 border-bottom text-dark fullscreen-normal-text fullscreen-night-text text-bold",{"text-right":(0,w.isColumnRightAligned)(p),"Table-ID":null!=o&&(0,k.isID)(p),"Table-FK":null!=o&&(0,k.isFK)(p),link:y&&(0,k.isID)(p)})},f.default.createElement("span",{className:(0,C.default)("cellData inline-block",{"cursor-pointer text-brand-hover":y}),onClick:y?function(e){r(l({},m,{element:e.currentTarget}))}:void 0},v))}))}))))),v<u.length?f.default.createElement("div",{ref:"footer",className:"p1 flex flex-no-shrink flex-align-right fullscreen-normal-text fullscreen-night-text"},f.default.createElement("span",{className:"text-bold"},(0,S.t)(c,P+1,j+1,u.length)),f.default.createElement("span",{className:(0,C.default)("text-brand-hover px1 cursor-pointer",{disabled:0===P}),onClick:function(){return e.setState({page:m-1})}},f.default.createElement(g.default,{name:"triangle_left",size:10})),f.default.createElement("span",{className:(0,C.default)("text-brand-hover pr1 cursor-pointer",{disabled:j+1>=u.length}),onClick:function(){return e.setState({page:m+1})}},f.default.createElement(g.default,{name:"triangle_right",size:10}))):null)}}]),t}(),a.propTypes={data:p.default.object.isRequired},a.defaultProps={className:""},r=i))||r;T.displayName="TableSimple",t.default=T},641:function(e,t){e.exports={Table:"CtorL",TableSimple:"ipoXK"}},642:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.pivot=function(e,t,n,r){var u=o(e.rows,n,t),l=u.pivotValues,s=u.normalValues;l.unshift(e.cols[t].display_name);for(var c=s.map(function(n,r){var a=l.map(function(){return null});return a._dimension={value:n,column:e.cols[t]},a}),d=0;d<e.rows.length;d++){var f=s.lastIndexOf(e.rows[d][t]),p=l.lastIndexOf(e.rows[d][n]);c[f][0]=e.rows[d][t],c[f][p]=e.rows[d][r]}return{cols:l.map(function(o,u){return 0===u?e.cols[t]:a({},e.cols[r],{display_name:(0,i.formatValue)(o,{column:e.cols[n]})||"",_dimension:{value:o,column:e.cols[n]}})}),columns:l,rows:c}},t.distinctValuesSorted=o;var i=n(10);function o(e,t,n){var r=new Set,a=new Set,i=new l,o=new l,u=!0,s=!1,c=void 0;try{for(var d,f=e[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var p=d.value,m=p[t],h=p[n];r.add(h),a.add(m),i.update(h,m),o.update(m,h)}}catch(e){s=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw c}}var v=Array.from(r),y=Array.from(a);return i.sort(v),o.sort(y),{normalValues:v,pivotValues:y}}var u=function(e,t){return e<t?-1:e>t?1:0},l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.compare=t,this.asc=!0,this.desc=!0,this.lastValue=void 0,this.groupAsc=!0,this.groupDesc=!0,this.lastGroupKey=void 0,this.isGrouped=!1}return r(e,[{key:"update",value:function(e,t){if(void 0!==this.lastValue){var n=this.compare(e,this.lastValue);this.asc=this.asc&&n>=0,this.desc=this.desc&&n<=0,0!==n&&void 0!==this.lastGroupKey&&this.lastGroupKey===t&&(this.groupAsc=this.groupAsc&&n>=0,this.groupDesc=this.groupDesc&&n<=0,this.isGrouped=!0)}this.lastValue=e,this.lastGroupKey=t}},{key:"sort",value:function(e){var t=this;this.isGrouped&&(this.groupAsc&&this.groupDesc?console.warn("This shouldn't happen"):this.groupAsc&&!this.asc?e.sort(this.compare):this.groupDesc&&!this.desc&&e.sort(function(e,n){return t.compare(n,e)}))}}]),e}()},643:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=g(["Click and drag to change their order"],["Click and drag to change their order"]),u=g(["Add fields from the list below"],["Add fields from the list below"]),l=n(0),s=y(l),c=n(1),d=y(n(332)),f=n(253),p=y(n(26)),m=n(33),h=n(24),v=y(n(3));function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=(0,f.SortableElement)(function(e){var t=e.columnSetting,n=e.getColumnName,r=e.onEdit,a=e.onRemove;return s.default.createElement(d.default,{title:n(t),onEdit:r?function(){return r(t)}:null,onRemove:a?function(){return a(t)}:null,draggable:!0})}),w=(0,f.SortableContainer)(function(e){var t=e.columnSettings,n=e.getColumnName,r=e.onEdit,a=e.onRemove;return s.default.createElement("div",null,t.map(function(e,t){return s.default.createElement(E,{key:"item-"+t,index:e.index,columnSetting:e,getColumnName:n,onEdit:r,onRemove:a})}))}),O=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),u=0;u<i;u++)o[u]=arguments[u];return n=r=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleEnable=function(e){var t=[].concat(b(r.props.value)),n=e.index;t[n]=a({},t[n],{enabled:!0}),r.props.onChange(t)},r.handleDisable=function(e){var t=[].concat(b(r.props.value)),n=e.index;t[n]=a({},t[n],{enabled:!1}),r.props.onChange(t)},r.handleSortEnd=function(e){var t=e.oldIndex,n=e.newIndex,a=[].concat(b(r.props.value));a.splice(n,0,a.splice(t,1)[0]),r.props.onChange(a)},r.handleEdit=function(e){var t=(0,m.findColumnForColumnSetting)(r.props.columns,e);t&&r.props.onShowWidget({id:"column_settings",props:{initialKey:(0,m.keyForColumn)(t)}})},r.handleAddNewField=function(e){var t=r.props,n=t.value;(0,t.onChange)([].concat(b(n),[{fieldRef:e,enabled:!0}]))},r.getColumnName=function(e){return(0,h.getFriendlyName)((0,m.findColumnForColumnSetting)(r.props.columns,e)||{display_name:"[Unknown]"})},_(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,i=t.question,l=t.columns,f=i&&i.query(),h={count:0};l&&f instanceof p.default&&(h=f.fieldsOptions(function(e){return!v.default.find(l,function(t){return e.isSameBaseDimension(t.field_ref)})}));var y=v.default.partition(n.filter(function(e){return(0,m.findColumnForColumnSetting)(l,e)}).map(function(e,t){return a({},e,{index:t})}),function(e){return e.enabled}),g=r(y,2),b=g[0],_=g[1];return s.default.createElement("div",{className:"list"},s.default.createElement("div",null,(0,c.t)(o)),b.length>0?s.default.createElement(w,{columnSettings:b,getColumnName:this.getColumnName,onEdit:this.handleEdit,onRemove:this.handleDisable,onSortEnd:this.handleSortEnd,distance:5,helperClass:"z5"}):s.default.createElement("div",{className:"my2 p2 flex layout-centered bg-grey-0 text-light text-bold rounded"},(0,c.t)(u)),_.length>0||h.count>0?s.default.createElement("h4",{className:"mb2 mt4 pt4 border-top"},"More columns"):null,_.map(function(t,n){return s.default.createElement(d.default,{key:n,title:e.getColumnName(t),onAdd:function(){return e.handleEnable(t)},onClick:function(){return e.handleEnable(t)}})}),h.count>0&&s.default.createElement("div",null,h.dimensions.map(function(t,n){return s.default.createElement(d.default,{key:n,title:t.displayName(),onAdd:function(){return e.handleAddNewField(t.mbql())}})}),h.fks.map(function(t){return s.default.createElement("div",null,s.default.createElement("div",{className:"my2 text-medium text-bold text-uppercase text-small"},t.name||(t.field.target?t.field.target.table.display_name:t.field.display_name)),t.dimensions.map(function(t,n){return s.default.createElement(d.default,{key:n,title:t.displayName(),onAdd:function(){return e.handleAddNewField(t.mbql())}})}))})))}}]),t}();O.displayName="ChartSettingOrderedColumns",t.default=O},644:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.isFormattable=t.ALL_OPERATOR_NAMES=void 0;var r,a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=he(["is less than"],["is less than"]),l=he(["is greater than"],["is greater than"]),s=he(["is less than or equal to"],["is less than or equal to"]),c=he(["is greater than or equal to"],["is greater than or equal to"]),d=he(["is equal to"],["is equal to"]),f=he(["is not equal to"],["is not equal to"]),p=he(["is null"],["is null"]),m=he(["is not null"],["is not null"]),h=he(["contains"],["contains"]),v=he(["does not contain"],["does not contain"]),y=he(["starts with"],["starts with"]),g=he(["ends with"],["ends with"]),b=he(["Conditional formatting"],["Conditional formatting"]),_=he(["You can add rules to make the cells in this table change color if\n    they meet certain conditions."],["You can add rules to make the cells in this table change color if\n    they meet certain conditions."]),E=he(["Add a rule"],["Add a rule"]),w=he(["Rules will be applied in this order"],["Rules will be applied in this order"]),O=he(["Click and drag to reorder."],["Click and drag to reorder."]),S=he(["No columns selected"],["No columns selected"]),C=he(["Cells in this column will be tinted based on their values."],["Cells in this column will be tinted based on their values."]),x=he(["When a cell in these columns "," it will be tinted this color."],["When a cell in these columns "," it will be tinted this color."]),k=he(["Which columns should be affected?"],["Which columns should be affected?"]),A=he(["Formatting style"],["Formatting style"]),T=he(["Single color"],["Single color"]),P=he(["Color range"],["Color range"]),j=he(["When a cell in this column…"],["When a cell in this column…"]),N=he(["…turn its background this color:"],["…turn its background this color:"]),M=he(["Highlight the whole row"],["Highlight the whole row"]),R=he(["Colors"],["Colors"]),D=he(["Start the range at"],["Start the range at"]),L=he(["Smallest value in this column"],["Smallest value in this column"]),I=he(["Smallest value in each column"],["Smallest value in each column"]),F=he(["Smallest value in all of these columns"],["Smallest value in all of these columns"]),z=he(["Custom value"],["Custom value"]),q=he(["End the range at"],["End the range at"]),B=he(["Largest value in this column"],["Largest value in this column"]),U=he(["Largest value in each column"],["Largest value in each column"]),V=he(["Largest value in all of these columns"],["Largest value in all of these columns"]),G=he(["Cancel"],["Cancel"]),H=he(["Delete"],["Delete"]),W=he(["Add rule"],["Add rule"]),Q=he(["Update rule"],["Update rule"]),Y=fe(n(0)),K=n(1),Z=fe(n(19)),J=fe(n(5)),X=n(42),$=fe(X),ee=fe(n(103)),te=fe(n(86)),ne=fe(n(114)),re=n(336),ae=fe(re),ie=fe(n(135)),oe=n(253),ue=fe(n(16)),le=n(13),se=fe(n(3)),ce=fe(n(4)),de=n(7);function fe(e){return e&&e.__esModule?e:{default:e}}function pe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function me(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function he(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ve={"<":(0,K.t)(u),">":(0,K.t)(l),"<=":(0,K.t)(s),">=":(0,K.t)(c),"=":(0,K.t)(d),"!=":(0,K.t)(f),"is-null":(0,K.t)(p),"not-null":(0,K.t)(m)},ye={"=":(0,K.t)(d),"!=":(0,K.t)(f),"is-null":(0,K.t)(p),"not-null":(0,K.t)(m),contains:(0,K.t)(h),"does-not-contain":(0,K.t)(v),"starts-with":(0,K.t)(y),"ends-with":(0,K.t)(g)},ge=t.ALL_OPERATOR_NAMES=o({},ve,ye),be=Object.values(de.desaturated),_e=(r=[]).concat.apply(r,me(be.map(function(e){return[["white",e],[e,"white"]]})).concat([[[(0,de.color)("error"),"white",(0,de.color)("success")],[(0,de.color)("success"),"white",(0,de.color)("error")],[(0,de.color)("error"),(0,de.color)("warning"),(0,de.color)("success")],[(0,de.color)("success"),(0,de.color)("warning"),(0,de.color)("error")]]])),Ee={single:{columns:[],type:"single",operator:"=",value:"",color:be[0],highlight_row:!1},range:{columns:[],type:"range",colors:_e[0],min_type:null,max_type:null,min_value:0,max_value:100}},we=(t.isFormattable=function(e){return(0,le.isNumeric)(e)||(0,le.isString)(e)},"AdminSelect input mt1 full"),Oe=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=pe(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={editingRule:null,editingRuleIsNew:null},pe(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Y.default.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.value,r=t.onChange,a=t.cols,i=this.state,u=i.editingRule,l=i.editingRuleIsNew;return null!==u&&n[u]?Y.default.createElement(je,{rule:n[u],cols:a,isNew:l,onChange:function(e){return r([].concat(me(n.slice(0,u)),[e],me(n.slice(u+1))))},onRemove:function(){r([].concat(me(n.slice(0,u)),me(n.slice(u+1)))),e.setState({editingRule:null,editingRuleIsNew:null})},onDone:function(){e.setState({editingRule:null,editingRuleIsNew:null})}}):Y.default.createElement(xe,{rules:n,cols:a,onEdit:function(t){e.setState({editingRule:t,editingRuleIsNew:!1})},onAdd:function(){r([o({},Ee.single,{columns:1===a.length?[a[0].name]:[]})].concat(me(n))),e.setState({editingRule:0,editingRuleIsNew:!0})},onRemove:function(e){r([].concat(me(n.slice(0,e)),me(n.slice(e+1)))),ue.default.trackEvent("Chart Settings","Table Formatting","Remove Rule")},onMove:function(e,t){var a=[].concat(me(n));a.splice(t,0,a.splice(e,1)[0]),r(a),ue.default.trackEvent("Chart Settings","Table Formatting","Move Rule")}})}}]),t}();Oe.displayName="ChartSettingsTableFormatting",t.default=Oe;var Se=(0,oe.SortableElement)(function(e){var t=e.rule,n=e.cols,r=e.onEdit,a=e.onRemove;return Y.default.createElement(ke,{rule:t,cols:n,onClick:r,onRemove:a})}),Ce=(0,oe.SortableContainer)(function(e){var t=e.rules,n=e.cols,r=e.onEdit,a=e.onRemove;return Y.default.createElement("div",null,t.map(function(e,t){return Y.default.createElement(Se,{key:"item-"+t,index:t,rule:e,cols:n,onEdit:function(){return r(t)},onRemove:function(){return a(t)}})}))}),xe=function(e){var t=e.rules,n=e.cols,r=e.onEdit,a=e.onAdd,i=e.onRemove,o=e.onMove;return Y.default.createElement("div",null,Y.default.createElement("h3",null,(0,K.t)(b)),Y.default.createElement("div",{className:"mt2"},(0,K.t)(_)),Y.default.createElement("div",{className:"mt2"},Y.default.createElement(Z.default,{borderless:!0,icon:"add",onClick:a,"data-metabase-event":"Chart Settings;Table Formatting;Add Rule"},(0,K.t)(E))),t.length>0?Y.default.createElement("div",{className:"mt2"},Y.default.createElement("h3",null,(0,K.t)(w)),Y.default.createElement("div",{className:"mt2"},(0,K.t)(O)),Y.default.createElement(Ce,{rules:t,cols:n,onEdit:r,onRemove:i,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;return o(t,n)},distance:10,helperClass:"z5"})):null)};xe.displayName="RuleListing";var ke=function(e){var t=e.rule,n=e.cols,r=e.onClick,a=e.onRemove;return Y.default.createElement("div",{className:"my2 bordered rounded shadowed cursor-pointer bg-white",onClick:r},Y.default.createElement("div",{className:"p1 border-bottom relative bg-light"},Y.default.createElement("div",{className:"px1 flex align-center relative"},Y.default.createElement("span",{className:"h4 flex-auto text-dark text-wrap"},t.columns.length>0?t.columns.map(function(e){return(se.default.findWhere(n,{name:e})||{}).display_name||e}).join(", "):Y.default.createElement("span",{style:{fontStyle:"oblique"}},(0,K.t)(S))),Y.default.createElement(J.default,{name:"close",className:"cursor-pointer text-light text-medium-hover",onClick:function(e){e.stopPropagation(),a()}}))),Y.default.createElement("div",{className:"p2 flex align-center"},Y.default.createElement(Ae,{rule:t,className:(0,ce.default)("mr2 flex-no-shrink rounded",{bordered:"range"===t.type}),style:{width:40,height:40}}),Y.default.createElement(Pe,{rule:t})))};ke.displayName="RulePreview";var Ae=function(e){var t=e.rule,n=e.className,r=e.style;return"range"===t.type?Y.default.createElement(re.ColorRangePreview,{colors:t.colors,className:n,style:r}):"single"===t.type?Y.default.createElement(Te,{color:t.color,className:n,style:r}):null},Te=function(e){var t=e.color,n=e.className,r=e.style,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["color","className","style"]);return Y.default.createElement("div",o({className:n,style:o({},r,{background:t})},a))};Te.displayName="SinglePreview";var Pe=function(e){var t=e.rule;return Y.default.createElement("span",null,"range"===t.type?(0,K.t)(C):"single"===t.type?(0,K.jt)(x,Y.default.createElement("span",{className:"text-bold"},ge[t.operator]," ",t.value)):null)};Pe.displayName="RuleDescription";var je=function(e){var t=e.rule,n=e.cols,r=e.isNew,i=e.onChange,u=e.onDone,l=e.onRemove,s=t.columns.map(function(e){return se.default.findWhere(n,{name:e})}),c=s.length>0&&se.default.all(s,le.isString),d=s.length>0&&se.default.all(s,le.isNumeric),f="is-null"!==t.operator&&"not-null"!==t.operator;return Y.default.createElement("div",null,Y.default.createElement("h3",{className:"mb1"},(0,K.t)(k)),Y.default.createElement($.default,{value:t.columns,onChange:function(e){return i(o({},t,{columns:e.target.value}))},isInitiallyOpen:0===t.columns.length,placeholder:"Choose a column",multiple:!0},n.map(function(e){return Y.default.createElement(X.Option,{value:e.name,disabled:c&&!(0,le.isString)(e)||d&&!(0,le.isNumeric)(e)},e.display_name)})),d&&Y.default.createElement("div",null,Y.default.createElement("h3",{className:"mt3 mb1"},(0,K.t)(A)),Y.default.createElement(ee.default,{value:t.type,options:[{name:(0,K.t)(T),value:"single"},{name:(0,K.t)(P),value:"range"}],onChange:function(e){return i(o({},Ee[e],t,{type:e}))},vertical:!0})),"single"===t.type?Y.default.createElement("div",null,Y.default.createElement("h3",{className:"mt3 mb1"},(0,K.t)(j)),Y.default.createElement($.default,{value:t.operator,onChange:function(e){return i(o({},t,{operator:e.target.value}))}},Object.entries(d?ve:ye).map(function(e){var t=a(e,2),n=t[0],r=t[1];return Y.default.createElement(X.Option,{value:n},r)})),f&&d?Y.default.createElement(ie.default,{className:we,type:"number",value:t.value,onChange:function(e){return i(o({},t,{value:e}))}}):f?Y.default.createElement("input",{className:we,value:t.value,onChange:function(e){return i(o({},t,{value:e.target.value}))}}):null,Y.default.createElement("h3",{className:"mt3 mb1"},(0,K.t)(N)),Y.default.createElement(ne.default,{value:t.color,colors:be,onChange:function(e){return i(o({},t,{color:e}))}}),Y.default.createElement("h3",{className:"mt3 mb1"},(0,K.t)(M)),Y.default.createElement(te.default,{value:t.highlight_row,onChange:function(e){return i(o({},t,{highlight_row:e}))}})):"range"===t.type?Y.default.createElement("div",null,Y.default.createElement("h3",{className:"mt3 mb1"},(0,K.t)(R)),Y.default.createElement(ae.default,{value:t.colors,onChange:function(e){ue.default.trackEvent("Chart Settings","Table Formatting","Select Range  Colors",e),i(o({},t,{colors:e}))},ranges:_e}),Y.default.createElement("h3",{className:"mt3 mb1"},(0,K.t)(D)),Y.default.createElement(ee.default,{value:t.min_type,onChange:function(e){return i(o({},t,{min_type:e}))},options:(t.columns.length<=1?[{name:(0,K.t)(L),value:null}]:[{name:(0,K.t)(I),value:null},{name:(0,K.t)(F),value:"all"}]).concat([{name:(0,K.t)(z),value:"custom"}]),vertical:!0}),"custom"===t.min_type&&Y.default.createElement(ie.default,{className:we,type:"number",value:t.min_value,onChange:function(e){return i(o({},t,{min_value:e}))}}),Y.default.createElement("h3",{className:"mt3 mb1"},(0,K.t)(q)),Y.default.createElement(ee.default,{value:t.max_type,onChange:function(e){return i(o({},t,{max_type:e}))},options:(t.columns.length<=1?[{name:(0,K.t)(B),value:null}]:[{name:(0,K.t)(U),value:null},{name:(0,K.t)(V),value:"all"}]).concat([{name:(0,K.t)(z),value:"custom"}]),vertical:!0}),"custom"===t.max_type&&Y.default.createElement(ie.default,{className:we,type:"number",value:t.max_value,onChange:function(e){return i(o({},t,{max_value:e}))}})):null,Y.default.createElement("div",{className:"mt4"},0===t.columns.length?Y.default.createElement(Z.default,{primary:!0,onClick:l,"data-metabase-event":"Chart Settings;Table Formatting;"},r?(0,K.t)(G):(0,K.t)(H)):Y.default.createElement(Z.default,{primary:!0,onClick:u,"data-metabase-event":"Chart Setttings;Table Formatting;"+(r?"Add Rule":"Update Rule")+";Rule Type "+t.type+" Color"},r?(0,K.t)(W):(0,K.t)(Q))))};je.displayName="RuleEditor"},645:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPERATOR_FORMATTER_FACTORIES=void 0,t.makeCellBackgroundGetter=function(e,t,n){var r=n["table.column_formatting"]||[],a=n["table.pivot"],i={},o=[],u=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].name]=n;return t}(t);try{var l=(p=e,m=u,h={},r.forEach(function(e){e.columns.forEach(function(e){if(!h[e]){var t=m[e];h[e]=function(e,t){for(var n=1/0,r=-1/0,a=e.length,i=0;i<a;i++){var o=e[i][t];o<n&&(n=o),o>r&&(r=o)}return[n,r]}(p,t)}})}),h);d=l,f={},r.forEach(function(e){e.columns.forEach(function(t){f[t]=f[t]||[],f[t].push(s(e,t,d,!1))})}),i=f,c=[],r.filter(function(e){return"single"===e.type&&e.highlight_row}).forEach(function(e){var t=s(e,null,null,!0);t&&e.columns.forEach(function(e){c.push(function(n,r){return t(n[r[e]])})})}),o=c}catch(e){console.error("Unexpected error compiling column formatters: ",e)}var c;var d,f;var p,m,h;return 0===Object.keys(i).length&&0===o.length?function(){return null}:function(t,n,r){if(i[r])for(var l=0;l<i[r].length;l++){var s=i[r][l],c=s(t);if(null!=c)return c}if(!a)for(var d=0;d<o.length;d++){var f=o[d],p=f(e[n],u);if(null!=p)return p}return null}},t.compileFormatter=s;var r=n(7);function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var i=.65,o=.2,u=.75;var l=t.OPERATOR_FORMATTER_FACTORIES={"<":function(e,t){return function(n){return"number"==typeof e&&n<e?t:null}},"<=":function(e,t){return function(n){return"number"==typeof e&&n<=e?t:null}},">=":function(e,t){return function(n){return"number"==typeof e&&n>=e?t:null}},">":function(e,t){return function(n){return"number"==typeof e&&n>e?t:null}},"=":function(e,t){return function(n){return n===e?t:null}},"!=":function(e,t){return function(n){return n!==e?t:null}},"is-null":function(e,t){return function(e){return null===e?t:null}},"not-null":function(e,t){return function(e){return null!==e?t:null}},contains:function(e,t){return function(n){return"string"==typeof e&&"string"==typeof n&&n.indexOf(e)>=0?t:null}},"does-not-contain":function(e,t){return function(n){return"string"==typeof e&&"string"==typeof n&&n.indexOf(e)<0?t:null}},"starts-with":function(e,t){return function(n){return"string"==typeof e&&"string"==typeof n&&n.startsWith(e)?t:null}},"ends-with":function(e,t){return function(n){return"string"==typeof e&&"string"==typeof n&&n.endsWith(e)?t:null}}};function s(e,t,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("single"===e.type){var c=e.operator,d=e.value,f=e.color;f=(0,r.alpha)(f,s?o:i);var p=l[c];return p?p(d,f):(console.error("Unsupported formatting operator:",c),function(){return null})}if("range"===e.type){var m=function(e){return n&&n[e]&&n[e][0]},h=function(e){return n&&n[e]&&n[e][1]},v="custom"===e.min_type?parseFloat(e.min_value):"all"===e.min_type?Math.min.apply(Math,a(e.columns.map(m))):m(t),y="custom"===e.max_type?parseFloat(e.max_value):"all"===e.max_type?Math.max.apply(Math,a(e.columns.map(h))):h(t);if("number"!=typeof y||"number"!=typeof v)return console.warn("Invalid range min/max",v,y),function(){return null};var g=(0,r.getColorScale)([v,y],e.colors.map(function(e){return(0,r.alpha)(e,u)})).clamp(!0);return function(e){return(0,r.roundColor)(g(e))}}return console.warn("Unknown format type",e.type),function(){return null}}},646:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=C(["Write here, and use Markdown if you'd like"],["Write here, and use Markdown if you'd like"]),u=C(["Display"],["Display"]),l=C(["Vertical Alignment"],["Vertical Alignment"]),s=C(["Top"],["Top"]),c=C(["Middle"],["Middle"]),d=C(["Bottom"],["Bottom"]),f=C(["Horizontal Alignment"],["Horizontal Alignment"]),p=C(["Left"],["Left"]),m=C(["Center"],["Center"]),h=C(["Right"],["Right"]),v=C(["Show background"],["Show background"]),y=n(0),g=S(y),b=S(n(428)),_=S(n(647)),E=S(n(5)),w=S(n(4)),O=n(1);function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var x={padding:4},k=function(e){return{"align-center":"center"===e["text.align_horizontal"],"align-end":"right"===e["text.align_horizontal"],"justify-center":"middle"===e["text.align_vertical"],"justify-end":"bottom"===e["text.align_vertical"]}},A=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isShowingRenderedOutput:!1,text:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,y.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){!this.props.isEditing&&e.isEditing&&this.onEdit()}},{key:"handleTextChange",value:function(e){this.props.onUpdateVisualizationSettings({text:e})}},{key:"onEdit",value:function(){this.setState({isShowingRenderedOutput:!1})}},{key:"onPreview",value:function(){this.setState({isShowingRenderedOutput:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.actionButtons,a=t.gridSize,i=t.settings,u=t.isEditing,l=a&&a.width<4;return u?g.default.createElement("div",{className:(0,w.default)(n,_.default.Text,_.default[l?"small":"large"],_.default["dashboard-is-editing"])},g.default.createElement(T,{actionButtons:r,isShowingRenderedOutput:this.state.isShowingRenderedOutput,onEdit:this.onEdit.bind(this),onPreview:this.onPreview.bind(this)}),this.state.isShowingRenderedOutput?g.default.createElement(b.default,{className:(0,w.default)("full flex-full flex flex-column text-card-markdown",_.default["text-card-markdown"],k(i)),source:i.text}):g.default.createElement("textarea",{className:(0,w.default)("full flex-full flex flex-column bg-light bordered drag-disabled",_.default["text-card-textarea"]),name:"text",placeholder:(0,O.t)(o),value:i.text,onChange:function(t){return e.handleTextChange(t.target.value)}})):g.default.createElement("div",{className:(0,w.default)(n,_.default.Text,_.default[l?"small":"large"],{pl0:!i["dashcard.background"]})},g.default.createElement(b.default,{className:(0,w.default)("full flex-full flex flex-column text-card-markdown",_.default["text-card-markdown"],k(i)),source:i.text}))}}],[{key:"checkRenderable",value:function(){}}]),t}(),r.uiName="Text",r.identifier="text",r.iconName="text",r.disableSettingsConfig=!1,r.noHeader=!0,r.supportsSeries=!1,r.hidden=!0,r.minSize={width:4,height:1},r.settings={"card.title":{dashboard:!1},"card.description":{dashboard:!1},text:{value:"",default:""},"text.align_vertical":{section:(0,O.t)(u),title:(0,O.t)(l),widget:"select",props:{options:[{name:(0,O.t)(s),value:"top"},{name:(0,O.t)(c),value:"middle"},{name:(0,O.t)(d),value:"bottom"}]},default:"top"},"text.align_horizontal":{section:(0,O.t)(u),title:(0,O.t)(f),widget:"select",props:{options:[{name:(0,O.t)(p),value:"left"},{name:(0,O.t)(m),value:"center"},{name:(0,O.t)(h),value:"right"}]},default:"left"},"dashcard.background":{section:(0,O.t)(u),title:(0,O.t)(v),dashboard:!0,widget:"toggle",default:!0}},a);A.displayName="Text",t.default=A;var T=function(e){var t=e.actionButtons,n=e.isShowingRenderedOutput,r=e.onEdit,a=e.onPreview;return g.default.createElement("div",{className:"Card-title"},g.default.createElement("div",{className:"absolute top left p1 px2"},g.default.createElement("span",{className:"DashCard-actions-persistent flex align-center",style:{lineHeight:1}},g.default.createElement("a",{"data-metabase-event":"Dashboard;Text;edit",className:(0,w.default)("cursor-pointer h3 flex-no-shrink relative mr1 drag-disabled",{"text-light text-medium-hover":n,"text-brand":!n}),onClick:r,style:x},g.default.createElement("span",{className:"flex align-center"},g.default.createElement("span",{className:"flex"},g.default.createElement(E.default,{name:"edit_document",style:{top:0,left:0},size:16})))),g.default.createElement("a",{"data-metabase-event":"Dashboard;Text;preview",className:(0,w.default)("cursor-pointer h3 flex-no-shrink relative mr1 drag-disabled",{"text-light text-medium-hover":!n,"text-brand":n}),onClick:a,style:x},g.default.createElement("span",{className:"flex align-center"},g.default.createElement("span",{className:"flex"},g.default.createElement(E.default,{name:"eye",style:{top:0,left:0},size:20})))))),g.default.createElement("div",{className:"absolute top right p1 px2"},t))};T.displayName="TextActionButtons"},647:function(e,t){e.exports={Text:"_3yC8D","dashboard-is-editing":"_3Nt-8","text-card-textarea":"_3KwDU","text-card-markdown":"_1J_Mq"}},648:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=h(["Line"],["Line"]),l=h(["line chart"],["line chart"]),s=n(1),c=n(119),d=(i=c)&&i.__esModule?i:{default:i},f=n(144),p=n(121),m=n(28);function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default),t}(),r.uiName=(0,s.t)(u),r.identifier="line",r.iconName="line",r.noun=(0,s.t)(l),r.settings=o({},p.LINE_SETTINGS,p.GRAPH_GOAL_SETTINGS,p.GRAPH_COLORS_SETTINGS,p.GRAPH_AXIS_SETTINGS,m.PLUGIN_CHART_SETTINGS,p.GRAPH_DISPLAY_VALUES_SETTINGS,p.GRAPH_DATA_SETTINGS),r.renderer=f.lineRenderer,a);t.default=v},649:function(e,t){},650:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.getClickHoverObject=f,t.setupTooltips=function(e,t,n,r){var a=e.settings,o=e.series,u=e.isScalarSeries,c=e.onHoverChange,d=e.onVisualizationClick,p=r.isBrushing,m=(0,l.isStacked)(a,t),h=(0,l.isNormalized)(a,t),v=function(e,r){var l=(0,s.determineSeriesIndexFromElement)(e,m),c=n.settings.series(o[l]),d=c&&c.title,v=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.classList.values()));return p()?null:v.includes("line")?null:f(r,{classList:v,seriesTitle:d,seriesIndex:l,series:o,datas:t,isNormalized:h,isScalarSeries:u,isStacked:m,event:i.default.event,element:e,settings:a})};n.on("renderlet.tooltips",function(e){if(e.selectAll("title").remove(),c&&e.selectAll(".bar, .dot, .area, .line, .bubble").on("mousemove",function(e){var t=v(this,e);c(t)}).on("mouseleave",function(){c(null)}),d){var t=function(e){var t=v(this,e);t&&d(t)};e.selectAll(".dot, .bubble").style({cursor:"pointer"}).on("click",t),e.selectAll(".bar").style({cursor:"pointer"}).on("mousedown",t)}})};var i=d(n(36)),o=d(n(8)),u=n(10),l=n(120),s=n(651),c=n(24);function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n=t.series,i=t.datas,s=t.isNormalized,d=t.seriesIndex,f=t.seriesTitle,m=t.classList,h=t.event,v=t.element,y=t.settings,g=n[0].data.cols,b=n[d].card,_=n.length>1,E=_&&b._breakoutColumn,w=m.includes("bar")&&!_;function O(e){return e===g[1]&&!E&&f?f:(0,c.getFriendlyName)(e)}var S=[],C=[],x=void 0;if(Array.isArray(e.key)){if(x=e.key[2],S=e.key._origin?e.key._origin.row.map(function(t,n){var r=e.key._origin.cols[n];return{key:O(r),value:t,col:r}}):e.key.map(function(e,t){return{key:O(g[t]),value:e,col:g[t]}}),C=[{value:e.key[0],column:g[0]},{value:e.key[1],column:g[1]}],E){var k=b._breakoutValue,A=b._breakoutColumn;C.push({value:k,column:A})}}else if(e.data){x=e.data.value,w||(g=n[d].data.cols);var T=(n[d].data||{})._rawCols||g,P=e.data.key,j=i[d].find(function(e){var t=a(e,1)[0];return P===t||o.default.isMoment(P)&&P.isSame(t)}),N=j&&j._origin&&j._origin.row||j;N&&(S=T.map(function(t,n){return s&&g[1].field_ref===t.field_ref?{key:O(g[1]),value:(0,u.formatValue)(e.data.value,{number_style:"percent",column:g[1],decimals:g[1].decimals}),col:t}:{key:O(t),value:(0,l.formatNull)(N[n]),col:t}})),C=T.map(function(e,t){return{column:e,value:N[t]}})}else if(E){var M=b._breakoutValue,R=b._breakoutColumn;S=[{key:O(R),col:R,value:M}],C=[{column:R,value:M}]}S=S.map(function(e){return e.col===b._breakoutColumn?r({},e,{value:f||b._breakoutValue,col:f?null:b._breakoutColumn}):e}),C=C.filter(function(e){var t=e.column;return"aggregation"!==t.source&&"query-transform"!==t.source});var D=!0,L=!1,I=void 0;try{for(var F,z=C[Symbol.iterator]();!(D=(F=z.next()).done);D=!0){var q=F.value;q.value=p(q)}}catch(e){L=!0,I=e}finally{try{!D&&z.return&&z.return()}finally{if(L)throw I}}var B=n[d].data.cols[1];x=p({column:B,value:x});var U=m.includes("dot"),V=m.includes("area"),G="mousemove"===h.type?V:!U;return{index:w?-1:d,element:G?null:v,event:G?h:null,data:S.length>0?S:null,dimensions:C,value:x,column:B,settings:y}}function p(e){var t=e.column,n=e.value;if(t&&"type/Boolean"===t.base_type){if("true"===n)return!0;if("false"===n)return!1}return n}},651:function(e,t,n){"use strict";function r(e){return e&&[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.classList)).map(function(e){return e.match(/^_(\d+)$/)}).filter(function(e){return e}).map(function(e){return parseInt(e[1],10)})[0]}function a(e,t){for(;e;){if(e.classList&&e.classList.contains(t))return e;e=e.parentNode}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.determineSeriesIndexFromElement=function(e,t){return t?e.classList.contains("dot")?r(a(e,"dc-tooltip")):r(a(e,"stack")):r(a(e,"sub"))}},652:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.compileExpression=c,t.getTrendDataPointsFromInsight=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=i.default.isMoment(t[0]),u=void 0;u=e["best-fit"]?c(e["best-fit"]):function(t){return t*e.slope+e.offset};var l=o?t.map(function(e){return+e}):t,s=r(l,2),f=s[0],p=s[1],m=(h=f,v=p,y=n,g=(v-h)/(y-1),a.default.range(h,v,g).concat([v]));var h,v,y,g;return o?m.map(function(e){return[(0,i.default)(e),u(d(e))]}):m.map(function(e){return[e,u(e)]})};var a=o(n(3)),i=o(n(8));function o(e){return e&&e.__esModule?e:{default:e}}var u=new Map([["+",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"("+t.join(" + ")+")"}],["-",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"("+t.join(" - ")+")"}],["*",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"("+t.join(" * ")+")"}],["/",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"("+t.join(" / ")+")"}],["log",function(e){return"Math.log("+e+")"}],["pow",function(e,t){return"Math.pow("+e+", "+t+")"}],["exp",function(e){return"Math.pow(Math.E, "+e+")"}]]),l=new Set(["x"]);function s(e){if(Array.isArray(e)){var t=(a=e,Array.isArray(a)?a:Array.from(a)),n=t[0],r=t.slice(1);if(u.has(n))return u.get(n).apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r.map(s)))}else{if("number"==typeof e)return e;if("string"==typeof e&&l.has(e))return e}var a;throw new Error("Invalid expression: "+e)}function c(e){var t=s(e);return new Function("x","return "+t+";")}var d=function(e){return e/864e5}},653:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=(r=["xValues missing!"],a=["xValues missing!"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}})));t.default=function(e,t,n){var r=t.xValues,a=t.xDomain,d=t.xInterval;return n.map(function(t,n){return function(e,t,n,r){var a=t.xValues,d=t.xDomain,m=t.xInterval,h=e.settings,v=h.series(n)["line.missing"];if("zero"!==v&&"none"!==v)return r;var y=void 0,g="zero"===v?0:null;if((0,s.isTimeseries)(h)){var b=Math.abs(d[1].diff(d[0],m.interval)/m.count);if(b>p)return r;a=(0,c.default)(m).domain(d).ticks(),y=function(e){return e.toISOString()}}else if((0,s.isQuantitative)(h)||(0,s.isHistogram)(h)){var _=Math.abs((d[1]-d[0])/m);if(_>p)return r;var E=i(d,2),w=E[0],O=E[1];(0,s.isHistogramBar)(e)?O+=1.5*m:O+=.5*m,a=l.default.range(w,O,m),y=function(e){return Math.round(e/m)}}return function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e};try{var a=e[0].slice(1).map(function(e){return n}),i=new Map,l=!0,s=!1,c=void 0;try{for(var d,p=e[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var m=d.value;i.set(r(m[0]),m)}}catch(e){s=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(s)throw c}}var h=t.map(function(e){var t=r(e),n=i.get(t);if(n){i.delete(t);var o=[e].concat(f(n.slice(1)));return o._origin=n._origin,o}return[e].concat(f(a))});return i.size>0&&console.warn((0,u.t)(o),i,h),h}catch(t){return console.warn(t),e}}(r,a,g,y)}(e,{xValues:r,xDomain:a,xInterval:d},e.series[n],t)})};var u=n(1),l=d(n(36)),s=n(120),c=d(n(340));function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var p=1e4},654:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(0)),i=s(n(114)),o=s(n(323)),u=s(n(5)),l=s(n(384));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){var e=this.props,t=e.objects,n=e.getObjectKey,r=e.onChangeEditingObject,s=e.onChangeObjectSettings,c=e.objectSettingsWidgets,d=e.object,f=e.allComputedSettings,p=e.settings,m=d&&n(d),h=function(e){return m===n(e)},v=d&&d.card.display,y=["line","area","bar","combo"].includes(v),g=null!=p["stackable.stack_type"];return a.default.createElement("div",null,t.length<100&&t.map(function(e){var d=n(e),p=f[d]||{};return a.default.createElement("div",{key:d,className:"px4 pt2 mt2 border-top align-self-stretch"},a.default.createElement("div",{className:"flex align-center"},a.default.createElement(i.default,{value:p.color,triggerSize:21,onChange:function(t){return s(e,{color:t})}}),a.default.createElement("input",{className:"input flex-full ml1 align-self-stretch",style:{paddingTop:0,paddingBottom:0},size:1,value:p.title,onChange:function(t){return s(e,{title:t.target.value})}}),y&&!g?a.default.createElement(o.default,{className:"ml1 align-self-stretch",value:p.display,options:["line","area","bar"],optionValueFn:function(e){return e},optionNameFn:function(e){return a.default.createElement(u.default,{name:e})},onChange:function(t){return s(e,{display:t})}}):null,t.length>1?a.default.createElement(l.default,{className:"ml1 p1"},a.default.createElement(u.default,{className:"text-medium cursor-pointer text-brand-hover",name:h(e)?"chevronup":"chevrondown",tooltip:h(e)?"Hide options":"More options",onClick:function(){return r(h(e)?null:e)}})):null),c&&c.length>0&&h(e)?a.default.createElement("div",{className:"mt3"},c):null)}))}}]),t}();c.displayName="ChartNestedSettingSeries",t.default=c},655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.onRenderValueLabels=function(e,t){var n=t.formatYValue,i=(t.xInterval,t.yAxisSplit),o=t.datas,d=o.map(function(t,n){return e.settings.series(e.series[n])}),f=d.map(function(t){var n=t.show_series_values,r=void 0===n?e.settings["graph.show_values"]:n;return r});if(f.every(function(e){return!1===e})||"normalized"===e.settings["stackable.stack_type"])return;var p=d.map(function(e){return e.display});"stacked"===e.settings["stackable.stack_type"]&&(o=[o.flat()],p=[e.settings["stackable.stack_display"]],f=[!0]);var m="all"===e.settings["graph.label_value_frequency"],h=void 0,v=p.filter(function(e){return"bar"===e}).length;v>0&&(h=parseFloat(e.svg().select("rect.bar")[0][0].getAttribute("width")));var y=e.x();o=o.map(function(e,t){if(!f[t])return[];var n=p[t];return(e=u.default.chain(e).groupBy(function(e){var t=a(e,1),n=t[0];return y(n)}).values().map(function(e){var t=a(e,1),n=a(t[0],1),r=n[0],i=e.reduce(function(e,t){var n=a(t,2),r=n[1];return e+r},0);return[r,i]}).value()).map(function(r,i){var o=a(r,2),u=o[0],l=o[1],s=(0===i||e[i-1][1]>l)&&(i===e.length-1||e[i+1][1]>l),c=s&&"line"===n,d=v>1&&"bar"===n&&h<40,f=!m&&v>1&&"bar"===n&&h<20;return{x:u,y:l,showLabelBelow:c,seriesIndex:t,rotated:d,hidden:f}}).filter(function(e){return!("bar"===n&&0===e.y)})});var g=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o.map(function(e){return e.length}))),b=e.settings["graph.label_value_formatting"],_=o.map(function(e){if("compact"===b)return!0;if("full"===b)return!1;var t=function(t){var a=r({compact:t},l.COMPACT_CURRENCY_OPTIONS,{_numberFormatter:void 0}),i=e.map(function(e){return n(e.y,a).length});return i.reduce(function(e,t){return e+t},0)/i.length};return t(!0)<t(!1)-3}),E=e.svg().select(".chart-body"),w=p.map(function(t,n){if("bar"!==t)return 0;var r=p.slice(0,n).filter(function(e){return"bar"===e}).length,i=0;if(y.rangeBand){if("bar"===t){var o=y.rangeBand()/v;i+=(r+.5)*o}else i+=y.rangeBand()/2;p.some(function(e){return"bar"===e})&&p.some(function(e){return"bar"!==e})&&(i+=e._rangeBandPadding()*y.rangeBand()/2)}else if(h){var u=h<4?0:h<8?1:2,l=(h+u)*v;i-=l/2;var s=l/v;i+=(r+.5)*s}if((0,c.isHistogramBar)({settings:e.settings,chartType:t})&&1===p.length){var d=e.svg().selectAll("rect").flat().map(function(e){return parseFloat(e.getAttribute("x"))}),f=a(d,2),m=f[0],g=f[1],b=g-m;i+=b/2}return i}),O=function(t){var n,r=t.x,o=t.y,u=t.showLabelBelow,l=t.seriesIndex,s=(n=l,i[0].includes(n)?e.y():e.rightY()),c=w[l]+y(r),d=s(o)+(u?18:-8),f=s.range(),p=a(f,1),m=p[0];return d>m&&(d=s(o)-8),{xPos:c,yPos:d,yHeight:m-d}},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;E.select(".value-labels").remove(),e=e.map(function(e){return r({},e,O(e))}).filter(function(e){return!(e.rotated&&e.yHeight<50)});var a=E.append("svg:g").classed("value-labels",!0).selectAll("g").data(e).enter().append("g").attr("text-anchor",function(e){return e.rotated?"end":"middle"}).attr("transform",function(e){var t=["translate("+e.xPos+", "+e.yPos+")"];return e.rotated&&t.push("rotate(-90)","translate(-15, 4)"),t.join(" ")});["value-label-outline","value-label","value-label-white"].forEach(function(e){return a.append("text").filter(function(t){return!(t.rotated^"value-label-white"===e)}).attr("class",e).text(function(e){var r=e.y,a=e.seriesIndex;return n(r,{compact:null===t?_[a]:t})})})},C=o.map(function(t,n){if(m||v>1&&"bar"===p[n])return 1;var r=Math.ceil(g/30),a=t.filter(function(e,t){return t%r==0});S(a,_[n]);var i=e.svg().selectAll(".value-label-outline").flat().reduce(function(e,t){return e+t.getBoundingClientRect().width},0),o=i/a.length+6,u=e.svg().select(".axis.x").node().getBoundingClientRect(),l=u.width;return Math.ceil(o*g/l)});u.default.chain(o).flatten().filter(function(e){return"line"===p[e.seriesIndex]||"bar"===p[e.seriesIndex]}).map(function(e){return r({d:e},O(e))}).groupBy(function(e){var t=e.xPos;return t}).values().each(function(e){var t=u.default.sortBy(e,function(e){var t=e.yPos;return t}),n=void 0,a=!0,i=!1,o=void 0;try{for(var l,s=t[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var c=l.value,d=c.d,f=c.yPos;if(null==n||f-n>20)n=f;else{if(!d.showLabelBelow&&"line"===p[d.seriesIndex]){var m=O(r({},d,{showLabelBelow:!0})).yPos;if(m-n>20){d.showLabelBelow=!0,n=m;continue}}d.hidden=!0}}}catch(e){i=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(i)throw o}}}),S(o.flatMap(function(e){return e.filter(function(e,t){return t%C[e.seriesIndex]==0&&!e.hidden})})),(0,s.moveToFront)(e.svg().select(".value-labels").node().parentNode)};var i,o=n(3),u=(i=o)&&i.__esModule?i:{default:i},l=n(10),s=n(25),c=n(120)},656:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.lineAddons=void 0;var r=i(n(220)),a=i(n(8));function i(e){return e&&e.__esModule?e:{default:e}}t.lineAddons=function(e){return e.fadeDeselectedArea=function(){var t=e.chartBodyG().selectAll(".dot"),n=e.brush().extent();if(e.isOrdinal())e.hasFilter()?(t.classed(r.default.constants.SELECTED_CLASS,function(t){return e.hasFilter(t.x)}),t.classed(r.default.constants.DESELECTED_CLASS,function(t){return!e.hasFilter(t.x)})):(t.classed(r.default.constants.SELECTED_CLASS,!1),t.classed(r.default.constants.DESELECTED_CLASS,!1));else if(e.brushIsEmpty(n))t.classed(r.default.constants.DESELECTED_CLASS,!1),t.classed(r.default.constants.SELECTED_CLASS,!1);else{var i=n[0],o=n[1],u=function(e){return a.default.isDate(i)?!((0,a.default)(e.x).isBefore(i)||(0,a.default)(e.x).isAfter(o)):!(e.x<i||e.x>=o)};t.classed(r.default.constants.DESELECTED_CLASS,function(e){return!u(e)}),t.classed(r.default.constants.SELECTED_CLASS,function(e){return u(e)})}},e}},657:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initBrush=function(e,t,n,i){if(!e.brushOn||!t.brushOn)return;e.brushOn(!0),t.brushOn(!0),t.xyTipsOn&&t.xyTipsOn("always");var o=!1,u=null;e.brush().on("brushstart.custom",function(){u=null,o=!1,e.svg().classed("dragging",!0),(0,a.moveToFront)(e.select(".brush").node()),window.addEventListener("keydown",l,!0)}),t.addFilterHandler(function(t,r){return n(u=r),e.fadeDeselectedArea(),t}),e.brush().on("brushend.custom",function(){e.svg().classed("dragging",!1),e.select(".brush").style("opacity",1),(0,a.moveToBack)(e.select(".brush").node()),window.removeEventListener("keydown",l,!0),t.filterAll(),e.redraw(),i(o?null:u),u=null});var l=function(e){e.keyCode===r.KEYCODE_ESCAPE&&(o=!0,window.dispatchEvent(new MouseEvent("mouseup")))};e.on("pretransition.custom",function(e){(0,a.moveToBack)(e.select(".brush").node()),e.selectAll(".brush .resize").remove()})};var r=n(104),a=n(25)},658:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=v(["Row"],["Row"]),u=v(["row chart"],["row chart"]),l=v(["X-axis"],["X-axis"]),s=v(["Y-axis"],["Y-axis"]),c=n(1),d=h(n(119)),f=h(n(659)),p=n(121),m=n(28);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default),t}(),r.uiName=(0,c.t)(o),r.identifier="row",r.iconName="horizontal_bar",r.noun=(0,c.t)(u),r.supportsSeries=!1,r.renderer=f.default,r.settings=i({},p.GRAPH_COLORS_SETTINGS,m.PLUGIN_CHART_SETTINGS,p.GRAPH_DATA_SETTINGS),a);t.default=y,y.settings["graph.metrics"]=i({},y.settings["graph.metrics"],{title:(0,c.t)(l)}),y.settings["graph.dimensions"]=i({},y.settings["graph.dimensions"],{title:(0,c.t)(s)})},659:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.default=function(e,t){var n=t.settings,d=t.series,h=t.onHoverChange,v=t.onVisualizationClick,y=(t.height,d[0].data.cols);if(d.length>1)throw new Error("Row chart does not support multiple series");var g=o.default.rowChart(e);g.onClick=function(){};var b=d[0].data.rows.map(function(e){var t,n=(t=e,Array.isArray(t)?t:Array.from(t)),r=n[0],a=n.slice(1);return[(0,l.formatNull)(r)].concat(f(a))}),_=b.map(function(e){var t=r(e,2),n=t[0],a=t[1];return[(0,u.formatValue)(n,{column:y[0],type:"axis"}),a]}),E=new Map(_.map(function(e,t){var n=r(e,1),a=n[0];return[a,b[t][0]]})),w=(0,a.default)(_).dimension(function(e){return e[0]}),O=w.group().reduceSum(function(e){return e[1]}),S=i.default.extent(_,function(e){return e[1]}),C=_.map(function(e){return e[0]});(0,l.forceSortedGroup)(O,(0,l.makeIndexMap)(C)),(0,l.initChart)(g,e),g.on("renderlet.tooltips",function(e){h&&e.selectAll(".row rect").on("mousemove",function(e,t){h&&h({index:-1,event:i.default.event,data:[{key:(0,s.getFriendlyName)(y[0]),value:E.get(e.key),col:y[0]},{key:(0,s.getFriendlyName)(y[1]),value:e.value,col:y[1]}]})}).on("mouseleave",function(){h&&h(null)}),v&&e.selectAll(".row rect").on("click",function(e){v({value:e.value,column:y[1],dimensions:[{value:E.get(e.key),column:y[0]}],element:this,settings:n})})}),g.ordinalColors([n.series(d[0]).color]).x(i.default.scale.linear().domain(S)).elasticX(!0).dimension(w).group(O).ordering(function(e){return e.index});var x=!1;g.on("renderlet.bar-labels",function(e){e.selectAll("g.row text").attr("text-anchor",x?"end":"start").attr("x",x?-5:5).classed(x?"outside":"inside",!0)}),n["graph.y_axis.labels_enabled"]&&g.on("renderlet.axis-labels",function(e){e.svg().append("text").attr("class","x-axis-label").attr("text-anchor","middle").attr("x",e.width()/2).attr("y",e.height()-10).text(n["graph.y_axis.title_text"])});g.gap(p),g.render();var k=0;n["graph.y_axis.labels_enabled"]&&(k=g.select(".x-axis-label").node().getBoundingClientRect().height,g.margins().bottom+=k);var A=g.selectAll(".row rect")[0],T=A[A.length-1].getBoundingClientRect().bottom-A[0].getBoundingClientRect().top,P=Math.max.apply(Math,f(g.selectAll("g.row text")[0].map(function(e){return e.getBoundingClientRect().height})))+g.gap()+2,j=Math.max(1,Math.floor(T/P));g.cap(j),g.select("g.row")[0][0].getBoundingClientRect().height>m&&g.fixedBarHeight(m);g.render();var N=0,M=!0,R=!1,D=void 0;try{for(var L,I=g.selectAll("g.row")[0][Symbol.iterator]();!(M=(L=I.next()).done);M=!0){var F=L.value,z=F.querySelector("rect").getBoundingClientRect(),q=F.querySelector("text").getBoundingClientRect();N=Math.max(N,q.width),z.width<q.width+10&&(x=!0)}}catch(e){R=!0,D=e}finally{try{!M&&I.return&&I.return()}finally{if(R)throw D}}x&&(g.margins().left+=N,g.render());(0,c.checkXAxisLabelOverlap)(g,".axis text")&&g.selectAll(".tick text")[0].slice(1,-1).forEach(function(e){return e.remove()});return g.svg().classed("rowChart",!0),function(){o.default.chartRegistry.deregister(g)}};var a=d(n(273)),i=d(n(36)),o=d(n(220)),u=n(10),l=n(120),s=n(24),c=n(342);function d(e){return e&&e.__esModule?e:{default:e}}function f(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var p=5,m=30},66:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=(i=u)&&i.__esModule?i:{default:i};n(515);var s=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.borderWidth,r=e.className,a=e.spinnerClassName;return l.default.createElement("div",{className:r},l.default.createElement("div",{className:a,style:{width:t,height:t,borderWidth:n}}))}}]),t}(),r.defaultProps={size:32,borderWidth:4,fill:"currentcolor",spinnerClassName:"LoadingSpinner"},a);s.displayName="LoadingSpinner",t.default=s},660:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=I(["Total"],["Total"]),s=I(["Which columns do you want to use?"],["Which columns do you want to use?"]),c=I(["Pie"],["Pie"]),d=I(["Data"],["Data"]),f=I(["Dimension"],["Dimension"]),p=I(["Measure"],["Measure"]),m=I(["Display"],["Display"]),h=I(["Show legend"],["Show legend"]),v=I(["Show percentages in legend"],["Show percentages in legend"]),y=I(["Minimum slice percentage"],["Minimum slice percentage"]),g=I(["Colors"],["Colors"]),b=n(0),_=L(b),E=L(n(15)),w=L(n(661)),O=n(1),S=L(n(320)),C=L(n(344)),x=n(83),k=n(24),A=n(118),T=n(53),P=n(28),j=n(10),N=n(7),M=L(n(4)),R=L(n(36)),D=L(n(3));function L(e){return e&&e.__esModule?e:{default:e}}function I(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var F=Math.PI/180*1,z=/percent/i,q=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,b.Component),u(t,[{key:"componentDidUpdate",value:function(){var e=E.default.findDOMNode(this.refs.group),t=E.default.findDOMNode(this.refs.detail);e.getBoundingClientRect().width<120?t.classList.add("hide"):t.classList.remove("hide")}},{key:"render",value:function(){var e=this.props,t=e.series,n=e.hovered,r=e.onHoverChange,a=e.visualizationIsClickable,u=e.onVisualizationClick,s=e.className,c=e.gridSize,d=e.settings,f=o(t,1)[0].data,p=f.cols,m=f.rows,h=d["pie._dimensionIndex"],v=d["pie._metricIndex"],y=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,j.formatValue)(e,i({},d.column(p[h]),{jsx:t,majorWidth:0}))},g=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,j.formatValue)(e,i({},d.column(p[v]),{jsx:t,majorWidth:0}))},b=m.reduce(function(e,t){return e+t[v]},0),E=!z.test(p[v].name)&&!z.test(p[v].display_name),x="number"==typeof d["pie.slice_threshold"]?d["pie.slice_threshold"]/100:.025,A=D.default.chain(m).map(function(e,t){return{key:e[h],value:e[v],displayValue:e[v],percentage:e[v]/b,color:d["pie._colors"][e[h]]}}).partition(function(e){return e.percentage>x}).value(),T=o(A,2),P=T[0],L=T[1],I=L.reduce(function(e,t){return e+t.value},0),q=1===L.length?L[0]:{key:"Other",value:I,percentage:I/b,color:(0,N.color)("text-light")};q.value>0&&(q.percentage<.003&&(q.value=.003*b),P.push(q));var B=(0,k.computeMaxDecimalsForValues)(P.map(function(e){return e.percentage}),{style:"percent",maximumSignificantDigits:3}),U=function(e){return(0,j.formatValue)(e,{column:p[v],jsx:!0,majorWidth:0,number_style:"percent",decimals:B})},V=P.map(function(e){return["Other"===e.key?e.key:y(e.key,!0),d["pie.show_legend_perecent"]?U(e.percentage):void 0]}),G=P.map(function(e){return e.color});0===P.length&&(q={value:1,color:(0,N.color)("text-light"),noHover:!0},P.push(q));var H=R.default.layout.pie().sort(null).padAngle(F).value(function(e){return e.value}),W=R.default.svg.arc().outerRadius(50).innerRadius(30);function Q(e,t){var n=P[e];return!n||n.noHover?null:n===q&&L.length>1?{index:e,event:t&&t.nativeEvent,data:L.map(function(e){return{key:y(e.key,!1),value:g(e.displayValue,!1)}})}:{index:e,event:t&&t.nativeEvent,data:[{key:(0,k.getFriendlyName)(p[h]),value:y(n.key)},{key:(0,k.getFriendlyName)(p[v]),value:g(n.displayValue)}].concat(E&&null!=n.percentage?[{key:"Percentage",value:U(n.percentage)}]:[])}}var Y=void 0,K=void 0;n&&null!=n.index&&P[n.index]!==q?(K=y(P[n.index].key),Y=g(P[n.index].value)):(K=(0,O.t)(l),Y=g(b));var Z=function(e){return{value:P[e].value,column:p[v],dimensions:[{value:P[e].key,column:p[h]}],settings:d}},J=u&&a(Z(0)),X=function(e){return J&&P[e]!==q};return _.default.createElement(C.default,{className:s,legendTitles:V,legendColors:G,gridSize:c,hovered:n,onHoverChange:function(e){return r&&r(e&&i({},e,Q(e.index)))},showLegend:d["pie.show_legend"],isDashboard:this.props.isDashboard},_.default.createElement("div",{className:w.default.ChartAndDetail},_.default.createElement("div",{ref:"detail",className:w.default.Detail},_.default.createElement("div",{className:(0,M.default)(w.default.Value,"fullscreen-normal-text fullscreen-night-text")},Y),_.default.createElement("div",{className:w.default.Title},K)),_.default.createElement("div",{className:(0,M.default)(w.default.Chart,"layout-centered")},_.default.createElement("svg",{className:(0,M.default)(w.default.Donut,"m1"),viewBox:"0 0 100 100",style:{maxWidth:550,maxHeight:550}},_.default.createElement("g",{ref:"group",transform:"translate(50,50)"},H(P).map(function(e,t){return _.default.createElement("path",{key:t,d:W(e),fill:P[t].color,opacity:n&&null!=n.index&&n.index!==t?.3:1,onMouseMove:function(e){return r&&r(Q(t,e))},onMouseLeave:function(){return r&&r(null)},className:(0,M.default)({"cursor-pointer":X(t)}),onClick:X(t)&&function(e){return u(i({},Z(t),{event:e.nativeEvent}))}})}))))),_.default.createElement(S.default,{series:t,hovered:n}))}}],[{key:"isSensible",value:function(e){var t=e.cols;e.rows;return 2===t.length}},{key:"checkRenderable",value:function(e,t){var n=o(e,1)[0].data;n.cols;if(n.rows.length<1)throw new x.MinRowsError(1,0);if(!t["pie.dimension"]||!t["pie.metric"])throw new x.ChartSettingsError((0,O.t)(s),{section:"Data"})}}]),t}(),r.uiName=(0,O.t)(c),r.identifier="pie",r.iconName="pie",r.minSize={width:4,height:4},r.placeholderSeries=[{card:{display:"pie",visualization_settings:{"pie.show_legend":!1},dataset_query:{type:"null"}},data:{rows:[["Doohickey",3976],["Gadget",4939],["Gizmo",4784],["Widget",5061]],cols:[{name:"Category",base_type:"type/Category"},{name:"Count",base_type:"type/Integer"}]}}],r.settings=i({},(0,T.columnSettings)({hidden:!0}),(0,A.dimensionSetting)("pie.dimension",{section:(0,O.t)(d),title:(0,O.t)(f),showColumnSetting:!0}),(0,A.metricSetting)("pie.metric",{section:(0,O.t)(d),title:(0,O.t)(p),showColumnSetting:!0}),{"pie.show_legend":{section:(0,O.t)(m),title:(0,O.t)(h),widget:"toggle"},"pie.show_legend_perecent":{section:(0,O.t)(m),title:(0,O.t)(v),widget:"toggle",default:!0},"pie.slice_threshold":{section:(0,O.t)(m),title:(0,O.t)(y),widget:"number",default:2.5},"pie.colors":{section:(0,O.t)(m),title:(0,O.t)(g),widget:"colors",getDefault:function(e,t){return t["pie._dimensionValues"]?(0,N.getColorsForValues)(t["pie._dimensionValues"]):[]},getProps:function(e,t){return{seriesTitles:t["pie._dimensionValues"]||[]}},getDisabled:function(e,t){return!t["pie._dimensionValues"]},readDependencies:["pie._dimensionValues"]},"pie._colors":{getValue:function(e,t){return(0,N.getColorsForValues)(t["pie._dimensionValues"],t["pie.colors"])},readDependencies:["pie._dimensionValues","pie.colors"]},"pie._metricIndex":{getValue:function(e,t){var n=o(e,1)[0].data.cols;return D.default.findIndex(n,function(e){return e.name===t["pie.metric"]})},readDependencies:["pie.metric"]},"pie._dimensionIndex":{getValue:function(e,t){var n=o(e,1)[0].data.cols;return D.default.findIndex(n,function(e){return e.name===t["pie.dimension"]})},readDependencies:["pie.dimension"]},"pie._dimensionValues":{getValue:function(e,t){var n=o(e,1)[0].data.rows,r=t["pie._dimensionIndex"];return r>=0?n.map(function(e){return String(e[r])}):null},readDependencies:["pie._dimensionIndex"]}},P.PLUGIN_CHART_SETTINGS),a);q.displayName="PieChart",t.default=q},661:function(e,t){e.exports={ChartAndDetail:"_2I4qY",Chart:"_1rcAr",Detail:"n71oW",Donut:"_2Gb1p",Value:"_2tU5X",Title:"-GCLu"}},662:function(e,t){e.exports={ChartWithLegend:"_3qyVV",Legend:"_1ABjV",LegendSpacer:"l0pij",LegendWrapper:"_3H3W-",Chart:"_2luIt",small:"_1CAv1",vertical:"_1rOS_",flexChart:"_168j7",horizontal:"_32nW-"}},663:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(i=["more"],o=["more"],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),s=n(0),c=y(s),d=y(n(15)),f=y(n(235)),p=n(1),m=y(n(29)),h=y(n(236)),v=y(n(4));function y(e){return e&&e.__esModule?e:{default:e}}var g=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={overflowCount:0,size:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),u(t,[{key:"componentDidUpdate",value:function(e,t){var n=d.default.findDOMNode(this).getBoundingClientRect();if(this.state.size&&n.height!==this.state.size.height&&t.overflowCount===this.state.overflowCount)this.setState({overflowCount:0,size:n});else if(0===this.state.overflowCount){for(var r=0,a=0;a<this.props.titles.length;a++){var i=d.default.findDOMNode(this.refs["item"+a]).getBoundingClientRect();(n.top>i.top||n.bottom<i.bottom)&&r++}this.state.overflowCount!==r&&this.setState({overflowCount:r,size:n})}}},{key:"render",value:function(){var e=this,n=this.props,r=n.className,a=n.titles,i=n.colors,o=n.hovered,u=n.onHoverChange,s=this.state.overflowCount,y=void 0,g=void 0,b=void 0;return s>0?(y=a.slice(0,-s-1),g=a.slice(-s-1),b=i.slice(-s-1).concat(i.slice(0,-s-1))):y=a,c.default.createElement("ol",{ref:"container",className:(0,v.default)(r,f.default.Legend,f.default.vertical)},y.map(function(t,n){return c.default.createElement("li",{key:n,ref:"item"+n,className:"flex flex-no-shrink",onMouseEnter:function(t){return u&&u({index:n,element:d.default.findDOMNode(e.refs["legendItem"+n])})},onMouseLeave:function(e){return u&&u()}},c.default.createElement(h.default,{ref:"legendItem"+n,title:Array.isArray(t)?t[0]:t,color:i[n%i.length],isMuted:o&&null!=o.index&&n!==o.index,showTooltip:!1}),Array.isArray(t)&&c.default.createElement("span",{className:(0,v.default)("LegendItem","flex-align-right pl1",{muted:o&&null!=o.index&&n!==o.index})},t[1]))}),s>0?c.default.createElement("li",{key:"extra",className:"flex flex-no-shrink"},c.default.createElement(m.default,{tooltip:c.default.createElement(t,{className:"p2",titles:g,colors:b})},c.default.createElement(h.default,{title:s+1+" "+(0,p.t)(l),color:"gray",showTooltip:!1}))):null)}}]),t}(),r.propTypes={},r.defaultProps={},a);g.displayName="LegendVertical",t.default=g},664:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=c(a),o=c(n(15)),u=c(n(235)),l=c(n(236)),s=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.titles,a=t.colors,c=t.hovered,d=t.onHoverChange;return i.default.createElement("ol",{ref:"container",className:(0,s.default)(n,u.default.Legend,u.default.horizontal)},r.map(function(t,n){return i.default.createElement("li",{key:n},i.default.createElement(l.default,{ref:"legendItem"+n,title:t,color:a[n%a.length],isMuted:c&&null!=c.index&&n!==c.index,showTooltip:!1,onMouseEnter:function(){return d&&d({index:n,element:o.default.findDOMNode(e.refs["legendItem"+n])})},onMouseLeave:function(){return d&&d(null)}}))}))}}]),t}();d.displayName="LegendHorizontal",t.default=d},665:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=v(["Area"],["Area"]),l=v(["area chart"],["area chart"]),s=n(1),c=n(119),d=(i=c)&&i.__esModule?i:{default:i},f=n(144),p=n(11),m=n(121),h=n(28);function v(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default),t}(),r.uiName=(0,s.t)(u),r.identifier="area",r.iconName="area",r.noun=(0,s.t)(l),r.settings=o({},m.LINE_SETTINGS,m.STACKABLE_SETTINGS,m.GRAPH_GOAL_SETTINGS,m.GRAPH_COLORS_SETTINGS,m.GRAPH_AXIS_SETTINGS,h.PLUGIN_CHART_SETTINGS,m.GRAPH_DISPLAY_VALUES_SETTINGS,m.GRAPH_DATA_SETTINGS),r.renderer=f.areaRenderer,r.placeholderSeries=(0,p.assocIn)(d.default.placeholderSeries,[0,"card","display"],"area"),a);t.default=y},666:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=h(["Combo"],["Combo"]),l=h(["line and bar chart"],["line and bar chart"]),s=n(1),c=n(119),d=(i=c)&&i.__esModule?i:{default:i},f=n(144),p=n(121),m=n(28);function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default),t}(),r.uiName=(0,s.t)(u),r.identifier="combo",r.iconName="lineandbar",r.noun=(0,s.t)(l),r.settings=o({},p.LINE_SETTINGS,p.GRAPH_GOAL_SETTINGS,p.GRAPH_COLORS_SETTINGS,p.GRAPH_AXIS_SETTINGS,m.PLUGIN_CHART_SETTINGS,p.GRAPH_DISPLAY_VALUES_SETTINGS,p.GRAPH_DATA_SETTINGS),r.renderer=f.comboRenderer,a);t.default=v},667:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=H(["Please select longitude and latitude columns in the chart settings."],["Please select longitude and latitude columns in the chart settings."]),s=H(["Data"],["Data"]),c=H(["Please select a region map."],["Please select a region map."]),d=H(["Please select region and metric columns in the chart settings."],["Please select region and metric columns in the chart settings."]),f=H(["Map"],["Map"]),p=H(["Map type"],["Map type"]),m=H(["Region map"],["Region map"]),h=H(["Pin map"],["Pin map"]),v=H(["Pin type"],["Pin type"]),y=H(["Tiles"],["Tiles"]),g=H(["Markers"],["Markers"]),b=H(["Latitude field"],["Latitude field"]),_=H(["Longitude field"],["Longitude field"]),E=H(["Metric field"],["Metric field"]),w=H(["Region field"],["Region field"]),O=H(["Color"],["Color"]),S=H(["Radius"],["Radius"]),C=H(["Blur"],["Blur"]),x=H(["Min Opacity"],["Min Opacity"]),k=H(["Max Zoom"],["Max Zoom"]),A=n(0),T=G(A),P=n(1),j=n(668),N=G(j),M=G(n(670)),R=n(83),D=n(13),L=n(24),I=n(118),F=n(53),z=n(28),q=G(n(14)),B=G(n(3)),U=n(7),V=G(n(336));function G(e){return e&&e.__esModule?e:{default:e}}function H(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var W=new Set(["pin","heat","grid"]),Q=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,A.Component),u(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.props.width===e.width&&this.props.height===e.height,r=(0,L.isSameSeries)(this.props.series,e.series);return!(n&&r)}},{key:"render",value:function(){var e=this.props.settings["map.type"];return W.has(e)?T.default.createElement(M.default,this.props):"region"===e?T.default.createElement(N.default,this.props):void 0}}],[{key:"isSensible",value:function(e){var t=e.cols,n=e.rows;return M.default.isSensible({cols:t,rows:n})||N.default.isSensible({cols:t,rows:n})}},{key:"checkRenderable",value:function(e,t){o(e,1)[0].data;if(W.has(t["map.type"])){if(!t["map.longitude_column"]||!t["map.latitude_column"])throw new R.ChartSettingsError((0,P.t)(l),{section:(0,P.t)(s)})}else if("region"===t["map.type"]){if(!t["map.region"])throw new R.ChartSettingsError((0,P.t)(c),{section:(0,P.t)(s)});if(!t["map.dimension"]||!t["map.metric"])throw new R.ChartSettingsError((0,P.t)(d),{section:(0,P.t)(s)})}}}]),t}(),r.uiName=(0,P.t)(f),r.identifier="map",r.iconName="pinmap",r.aliases=["state","country","pin_map"],r.minSize={width:4,height:4},r.placeholderSeries=[{card:{display:"map"},data:{rows:[["AK",68],["AL",56],["AR",49],["AZ",20],["CA",90],["CO",81],["CT",7],["DE",4],["FL",39],["GA",78],["IA",104],["ID",30],["IL",68],["IN",61],["KS",53],["KY",50],["LA",41],["MA",15],["MD",10],["ME",19],["MI",71],["MN",96],["MO",81],["MS",54],["MT",108],["NC",74],["ND",73],["NE",76],["NH",7],["NJ",10],["NM",22],["NV",7],["NY",74],["OH",65],["OK",37],["OR",40],["PA",57],["RI",1],["SC",43],["SD",62],["TN",47],["TX",194],["UT",13],["VA",49],["VT",10],["WA",41],["WI",87],["WV",21],["WY",37]],cols:[{special_type:"type/State",name:"STATE",source:"breakout",display_name:"State",base_type:"type/Text"},{base_type:"type/Integer",special_type:"type/Number",name:"count",display_name:"count",source:"aggregation"}]}}],r.settings=i({},(0,F.columnSettings)({hidden:!0}),{"map.type":{title:(0,P.t)(p),widget:"select",props:{options:[{name:(0,P.t)(m),value:"region"},{name:(0,P.t)(h),value:"pin"},{name:"Grid map",value:"grid"}]},getDefault:function(e,t){var n=o(e,1)[0],r=n.card,a=n.data;switch(r.display){case"state":case"country":return"region";case"pin_map":return"pin";default:if((0,D.hasLatitudeAndLongitudeColumns)(a.cols)){var i=B.default.findWhere(a.cols,{name:t["map.latitude_column"]}),u=B.default.findWhere(a.cols,{name:t["map.longitude_column"]});return i&&u&&i.binning_info&&u.binning_info?"grid":"pin"}return"region"}},readDependencies:["map.latitude_column","map.longitude_column","map.metric_column"]},"map.pin_type":{title:(0,P.t)(v),props:{options:[{name:(0,P.t)(y),value:"tiles"},{name:(0,P.t)(g),value:"markers"},{name:"Grid",value:"grid"}]},getDefault:function(e,t){var n=o(e,1)[0].data;return"heat"===t["map.type"]?"heat":"grid"===t["map.type"]?"grid":n.rows.length>=1e3?"tiles":"markers"},getHidden:function(e,t){return!W.has(t["map.type"])}}},(0,I.fieldSetting)("map.latitude_column",{title:(0,P.t)(b),fieldFilter:D.isNumeric,getDefault:function(e){var t=o(e,1)[0].data;return(B.default.find(t.cols,D.isLatitude)||{}).name},getHidden:function(e,t){return!W.has(t["map.type"])}}),(0,I.fieldSetting)("map.longitude_column",{title:(0,P.t)(_),fieldFilter:D.isNumeric,getDefault:function(e){var t=o(e,1)[0].data;return(B.default.find(t.cols,D.isLongitude)||{}).name},getHidden:function(e,t){return!W.has(t["map.type"])}}),(0,I.fieldSetting)("map.metric_column",{title:(0,P.t)(E),fieldFilter:D.isMetric,getHidden:function(e,t){return!W.has(t["map.type"])||"heat"!==t["map.pin_type"]&&"grid"!==t["map.pin_type"]}}),{"map.region":{title:(0,P.t)(m),widget:"select",getDefault:function(e){var t=o(e,1)[0],n=t.card,r=t.data;return"state"===n.display||B.default.any(r.cols,D.isState)?"us_states":"country"===n.display||B.default.any(r.cols,D.isCountry)?"world_countries":null},getProps:function(){return{options:Object.entries(q.default.get("custom-geojson",{})).map(function(e){var t=o(e,2),n=t[0];return{name:t[1].name,value:n}})}},getHidden:function(e,t){return"region"!==t["map.type"]}}},(0,I.metricSetting)("map.metric",{title:(0,P.t)(E),getHidden:function(e,t){return"region"!==t["map.type"]}}),(0,I.dimensionSetting)("map.dimension",{title:(0,P.t)(w),getHidden:function(e,t){return"region"!==t["map.type"]}}),{"map.colors":{title:(0,P.t)(O),widget:V.default,props:{ranges:Object.values(U.desaturated).map(function(e){return(0,j.getColorplethColorScale)(e)}),quantile:!0,columns:1},default:(0,j.getColorplethColorScale)(Object.values(U.desaturated)[0]),getHidden:function(e,t){return"region"!==t["map.type"]}},"map.zoom":{},"map.center_latitude":{},"map.center_longitude":{},"map.heat.radius":{title:(0,P.t)(S),widget:"number",default:30,getHidden:function(e,t){return"heat"!==t["map.type"]}},"map.heat.blur":{title:(0,P.t)(C),widget:"number",default:60,getHidden:function(e,t){return"heat"!==t["map.type"]}},"map.heat.min-opacity":{title:(0,P.t)(x),widget:"number",default:0,getHidden:function(e,t){return"heat"!==t["map.type"]}},"map.heat.max-zoom":{title:(0,P.t)(k),widget:"number",default:1,getHidden:function(e,t){return"heat"!==t["map.type"]}}},z.PLUGIN_CHART_SETTINGS),a);Q.displayName="Map",t.default=Q},668:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=(i=["unknown map"],o=["unknown map"],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}})));t.getColorplethColorScale=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.lightness,r=void 0===n?92:n,a=t.darken,i=void 0===a?.2:a,o=t.darkenLast,u=void 0===o?.3:o,l=t.saturate,s=void 0===l?.1:l,c=(0,x.default)(e).lightness(r).saturate(s),d=(0,x.default)(e).darken(i).saturate(s),f=O.default.scale.linear().domain([0,1]).range([c.string(),d.string()]),p=O.default.range(0,1.25,.25).map(function(e){return f(e)});u&&(p[p.length-1]=(0,x.default)(e).darken(u).saturate(s).string());return p},t.getLegendTitles=P;var d=n(0),f=k(d),p=n(1),m=k(n(66)),h=n(13),v=n(83),y=k(n(14)),g=n(10),b=k(n(344)),_=k(n(669)),E=k(n(445)),w=n(345),O=k(n(36)),S=k(n(954)),C=k(n(3)),x=k(n(263));function k(e){return e&&e.__esModule?e:{default:e}}var A=["#C4E4FF","#81C5FF","#51AEFF","#1E96FF","#0061B5"];var T=new Map;function P(e,t){var n,r,a,i,o,u=function(e,n){return(0,g.formatValue)(e,s({},t,{compact:n}))},c=(r=u,a=(n=e).map(function(e){var t=l(e,1),n=t[0];return n}),i=n.slice(0,-1).map(function(e){return e[e.length-1]}),(o=a.concat(i).map(function(e){return r(e,!1)})).reduce(function(e,t){var n=t.length;return e+n},0)/o.length>j);return e.map(function(t,n){var r=u(t[0],c),a=u(t[t.length-1],c);return n===e.length-1?r+" +":r!==a?r+" - "+a:r})}var j=5;var N=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={geoJson:null,geoJsonPath:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.Component),u(t,null,[{key:"isSensible",value:function(e){var t=e.cols;e.rows;return t.length>1&&(0,h.isString)(t[0])}},{key:"checkRenderable",value:function(e){var t=l(e,1)[0].data,n=t.cols;t.rows;if(n.length<2)throw new v.MinColumnsError(2,n.length)}}]),u(t,[{key:"componentWillMount",value:function(){this.componentWillReceiveProps(this.props)}},{key:"_getDetails",value:function(e){return y.default.get("custom-geojson",{})[e.settings["map.region"]]}},{key:"componentWillReceiveProps",value:function(e){var t,n,r=this,a=this._getDetails(e);if(a){var i=void 0;i=a.builtin?a.url:"api/geojson/"+e.settings["map.region"],this.state.geoJsonPath!==i&&(this.setState({geoJson:null,geoJsonPath:i}),t=i,n=function(e){r.setState({geoJson:e,geoJsonPath:i,minimalBounds:(0,w.computeMinimalBounds)(e.features)})},T.has(t)?setTimeout(function(){return n(T.get(t))},0):O.default.json(t,function(e){T.set(t,e),n(e)}))}}},{key:"render",value:function(){var e=this._getDetails(this.props);if(!e)return f.default.createElement("div",null,(0,p.t)(c));var t=this.props,n=t.series,r=t.className,a=t.gridSize,i=t.hovered,o=t.onHoverChange,u=t.visualizationIsClickable,d=t.onVisualizationClick,h=t.settings,v=this.state,y=v.geoJson,g=v.minimalBounds,x=void 0,k=void 0;"us_states"===h["map.region"]?(x=O.default.geo.albersUsa(),k=[[-135,46.6],[-69.1,21.7]]):"world_countries"===h["map.region"]?(x=O.default.geo.mercator(),k=[[-170,78],[180,-60]]):x=null;var T=e.region_name,j=e.region_key;if(!y)return f.default.createElement("div",{className:r+" flex layout-centered"},f.default.createElement(m.default,null));var N=l(n,1)[0].data,M=N.cols,R=N.rows,D=C.default.findIndex(M,function(e){return e.name===h["map.dimension"]}),L=C.default.findIndex(M,function(e){return e.name===h["map.metric"]}),I=function(e){return(0,w.getCanonicalRowKey)(e[D],h["map.region"])},F=function(e){return String(e.properties[j]).toLowerCase()},z=new Map(R.map(function(e){return[I(e),e]})),q=function(e,t){return{value:e[L],column:M[L],dimensions:[{value:null!=t?(n=t,String(n.properties[T])):e[D],column:M[D]}],origin:{row:e,cols:M},settings:h};var n},B=d&&u(q(R[0]))&&function(e){var t=z.get(F(e.feature));t&&d&&d(s({},q(t),{event:e.event}))},U=o&&function(e){var t=e&&z.get(F(e.feature));t&&o?o(s({},q(t,e.feature),{event:e.event})):o&&o(null)},V={},G=!0,H=!1,W=void 0;try{for(var Q,Y=R[Symbol.iterator]();!(G=(Q=Y.next()).done);G=!0){var K=Q.value,Z=I(K),J=K[L]||0;V[Z]=(V[Z]||0)+J}}catch(e){H=!0,W=e}finally{try{!G&&Y.return&&Y.return()}finally{if(H)throw W}}var X=new Set(Object.values(V)),$=Array.from(X),ee=(h["map.colors"]||A).slice(-$.length),te=S.default.ckmeans($,ee.length),ne=te.slice(1).map(function(e){return e[0]}),re=O.default.scale.threshold().domain(ne).range(ee),ae=P(te,h.column(M[L])),ie=function(e){var t=V[F(e)];return null==t?"#CCC":re(t)},oe=void 0;if(x){var ue=k.map(x),le=l(ue,2),se=l(le[0],2),ce=se[0],de=se[1],fe=l(le[1],2);oe=(fe[0]-ce)/(fe[1]-de)}else oe=(g.getEast()-g.getWest())/(g.getNorth()-g.getSouth());return f.default.createElement(b.default,{className:r,aspectRatio:oe,legendTitles:ae,legendColors:ee,gridSize:a,hovered:i,onHoverChange:o,isDashboard:this.props.isDashboard},x?f.default.createElement(_.default,{series:n,geoJson:y,getColor:ie,onHoverFeature:U,onClickFeature:B,projection:x,projectionFrame:k,onRenderError:this.props.onRenderError}):f.default.createElement(E.default,{series:n,geoJson:y,getColor:ie,onHoverFeature:U,onClickFeature:B,minimalBounds:g,onRenderError:this.props.onRenderError}))}}]),t}(),r.propTypes={},r.minSize={width:4,height:4},a);N.displayName="ChoroplethMap",t.default=N},669:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=n(0),o=c(i),u=n(24),l=c(n(36)),s=c(n(4));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=e.series,n=e.geoJson,r=e.projection,i=e.projectionFrame,c=e.getColor,d=e.onHoverFeature,p=e.onClickFeature,m=l.default.geo.path().projection(r),h=i.map(r),v=a(h,2),y=a(v[0],2),g=y[0],b=y[1],_=a(v[1],2),E=_[0],w=_[1],O=E-g,S=w-b;return o.default.createElement("div",{className:"absolute top bottom left right flex layout-centered"},o.default.createElement(f,{series:t,shouldUpdate:function(e,t){return!(0,u.isSameSeries)(e.series,t.series)}},function(){return o.default.createElement("svg",{className:"flex-full m1",viewBox:g+" "+b+" "+O+" "+S},n.features.map(function(e,t){return o.default.createElement("path",{d:m(e,t),stroke:"white",strokeWidth:1,fill:c(e),onMouseMove:function(t){return d({feature:e,event:t.nativeEvent})},onMouseLeave:function(){return d(null)},className:(0,s.default)({"cursor-pointer":!!p}),onClick:p&&function(t){return p({feature:e,event:t.nativeEvent})}})}))}))};d.displayName="LegacyChoropleth";var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"shouldComponentUpdate",value:function(e){return!e.shouldUpdate||e.shouldUpdate(this.props,e)}},{key:"render",value:function(){var e=this.props.children;return"function"==typeof e?e():e}}]),t}();f.displayName="ShouldUpdate",t.default=d},67:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=d(u),s=d(n(29)),c=d(n(427));function d(e){return e&&e.__esModule?e:{default:e}}var f=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={isTruncated:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"componentDidMount",value:function(){var e=this;this._ro=new c.default(function(t,n){e._updateTruncated()}),this._ro.observe(this._content),this._updateTruncated()}},{key:"componentWillUnmount",value:function(){this._ro.disconnect()}},{key:"_updateTruncated",value:function(){var e=this._content.offsetWidth<this._content.scrollWidth;this.state.isTruncated!==e&&this.setState({isTruncated:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.showTooltip,r=t.children,a=t.style,o=t.className,u=t.tooltip,c=t.alwaysShowTooltip,d=t.tooltipMaxWidth,f=this.state.isTruncated;return l.default.createElement(s.default,{tooltip:u||r||" ",verticalAttachments:["top","bottom"],isEnabled:n&&(f||c)||!1,maxWidth:d},l.default.createElement("div",{ref:function(t){return e._content=t},className:o,style:i({},a,{overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"})},r))}}]),t}(),r.propTypes={},r.defaultProps={style:{},className:"",showTooltip:!0},a);f.displayName="Ellipsified",t.default=f},670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=k(["We filtered out "," row(s) containing null values."],["We filtered out "," row(s) containing null values."]),s=k(["Save as default view"],["Save as default view"]),c=k(["Draw box to filter"],["Draw box to filter"]),d=k(["Cancel filter"],["Cancel filter"]),f=k(["Pin Map"],["Pin Map"]),p=n(0),m=x(p),h=n(1),v=n(13),y=n(83),g=x(n(671)),b=x(n(673)),_=x(n(674)),E=x(n(675)),w=x(n(3)),O=x(n(4)),S=x(n(36)),C=x(n(92));function x(e){return e&&e.__esModule?e:{default:e}}function k(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var A={markers:g.default,tiles:b.default,heat:_.default,grid:E.default},T=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._map=null,n.updateSettings=function(){var e={};null!=n.state.lat&&(e["map.center_latitude"]=n.state.lat),null!=n.state.lng&&(e["map.center_longitude"]=n.state.lng),null!=n.state.zoom&&(e["map.zoom"]=n.state.zoom),n.props.onUpdateVisualizationSettings(e),n.setState({lat:null,lng:null,zoom:null})},n.onMapCenterChange=function(e,t){n.setState({lat:e,lng:t})},n.onMapZoomChange=function(e){n.setState({zoom:e})},n.state=i({lat:null,lng:null,zoom:null,filtering:!1},n._getPoints(e)),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.Component),u(t,null,[{key:"isSensible",value:function(e){var t=e.cols;e.rows;return(0,v.hasLatitudeAndLongitudeColumns)(t)}},{key:"checkRenderable",value:function(e){var t=o(e,1)[0].data,n=t.cols;t.rows;if(!(0,v.hasLatitudeAndLongitudeColumns)(n))throw new y.LatitudeLongitudeError}}]),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=["map.latitude_column","map.longitude_column","map.metric_column"];e.series[0].data===this.props.series[0].data&&w.default.isEqual(w.default.pick.apply(w.default,[e.settings].concat(t)),w.default.pick.apply(w.default,[this.props.settings].concat(t)))||this.setState(this._getPoints(e))}},{key:"_getPoints",value:function(e){var t=e.settings,n=o(e.series,1)[0].data,r=n.cols,a=n.rows,i=e.onUpdateWarnings,u=w.default.findIndex(r,function(e){return e.name===t["map.latitude_column"]}),s=w.default.findIndex(r,function(e){return e.name===t["map.longitude_column"]}),c=w.default.findIndex(r,function(e){return e.name===t["map.metric_column"]}),d=a.map(function(e){return[e[u],e[s],c>=0?e[c]:1]}),f=d.filter(function(e){var t=o(e,3),n=t[0],r=t[1],a=t[2];return null!=n&&null!=r&&null!=a}),p=[],m=d.length-f.length;m>0&&p.push((0,h.t)(l,m)),i&&p&&i(p);var v=C.default.latLngBounds(f),y=S.default.min(f,function(e){return e[2]}),g=S.default.max(f,function(e){return e[2]}),b=r[s]&&r[s].binning_info&&r[s].binning_info.bin_width,_=r[u]&&r[u].binning_info&&r[u].binning_info.bin_width;return null!=b&&(v._northEast.lng+=b),null!=_&&(v._northEast.lat+=_),{points:f,bounds:v,min:y,max:g,binWidth:b,binHeight:_}}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.settings,a=t.isEditing,o=t.isDashboard,u=this.state,l=u.lat,f=u.lng,p=u.zoom,v=null==l&&null==f&&null==p,y=A[r["map.pin_type"]],g=this.state,b=g.points,_=g.bounds,E=g.min,w=g.max,S=g.binHeight,C=g.binWidth;return m.default.createElement("div",{className:(0,O.default)(n,"PinMap relative hover-parent hover--visibility"),onMouseDownCapture:function(e){return e.stopPropagation()}},y?m.default.createElement(y,i({},this.props,{ref:function(t){return e._map=t},className:"absolute top left bottom right z1",onMapCenterChange:this.onMapCenterChange,onMapZoomChange:this.onMapZoomChange,lat:l,lng:f,zoom:p,points:b,bounds:_,min:E,max:w,binWidth:C,binHeight:S,onFiltering:function(t){return e.setState({filtering:t})}})):null,m.default.createElement("div",{className:"absolute top right m1 z2 flex flex-column hover-child"},a||!o?m.default.createElement("div",{className:(0,O.default)("PinMapUpdateButton Button Button--small mb1",{"PinMapUpdateButton--disabled":v}),onClick:this.updateSettings},(0,h.t)(s)):null,!o&&m.default.createElement("div",{className:(0,O.default)("PinMapUpdateButton Button Button--small mb1"),onClick:function(){!e.state.filtering&&e._map&&e._map.startFilter?e._map.startFilter():e.state.filtering&&e._map&&e._map.stopFilter&&e._map.stopFilter()}},this.state.filtering?(0,h.t)(d):(0,h.t)(c))))}}]),t}(),r.uiName=(0,h.t)(f),r.identifier="pin_map",r.iconName="pinmap",a);T.displayName="PinMap",t.default=T},671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(r):void 0},o=c(n(193)),u=c(n(92)),l=n(13),s=c(n(3));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=u.default.icon({iconUrl:"app/assets/img/pin.png",iconSize:[28,32],iconAnchor:[15,24],popupAnchor:[0,-13]}),p=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),c=0;c<i;c++)o[c]=arguments[c];return n=a=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a._createMarker=function(e){var t=u.default.marker([0,0],{icon:f}),n=a.props,i=n.onHoverChange,o=n.onVisualizationClick,c=n.settings;return i&&(t.on("mousemove",function(n){var o=r(a.props.series,1)[0].data,u=o.cols,l=o.rows,s={dimensions:u.map(function(t,n){return{value:l[e][n],column:t}}),element:t._icon};i(s)}),t.on("mouseout",function(){i(null)})),o&&t.on("click",function(){var n=r(a.props.series,1)[0].data,i=n.cols,u=n.rows,d=s.default.findIndex(i,l.isPK);d>=0&&o({value:u[e][d],column:i[d],element:t._icon,origin:{row:u[e],cols:i},settings:c})}),t},d(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"componentDidMount",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.pinMarkerLayer=u.default.layerGroup([]).addTo(this.map),this.componentDidUpdate({},{})}},{key:"componentDidUpdate",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this,e,n);try{for(var r=this.pinMarkerLayer,a=this.props.points,o=r.getLayers(),u=Math.max(a.length,o.length),l=0;l<u;l++){if(l>=a.length&&r.removeLayer(o[l]),l>=o.length){var s=this._createMarker(l);r.addLayer(s),o.push(s)}if(l<a.length){var c=o[l].getLatLng(),d=c.lat;c.lng===a[l][0]&&d===a[l][1]||o[l].setLatLng(a[l])}}}catch(e){console.error(e),this.props.onRenderError(e.message||e)}}}]),t}();t.default=p},672:function(e,t){},673:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(r):void 0},o=l(n(193)),u=l(n(92));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var c=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),u=0;u<i;u++)o[u]=arguments[u];return n=a=s(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a._getTileUrl=function(e,t){var n=r(a.props.series,1)[0],i=n.card.dataset_query,o=n.data.cols,u=a._getLatLonIndexes(),l=u.latitudeIndex,s=u.longitudeIndex,c=o[l],d=o[s];if(c&&d)return"api/tiles/"+t+"/"+e.x+"/"+e.y+"/"+c.id+"/"+d.id+"/"+l+"/"+s+"/?query="+encodeURIComponent(JSON.stringify(i))},s(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),a(t,[{key:"componentDidMount",value:function(){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.pinTileLayer=u.default.tileLayer("",{}).addTo(this.map),this.componentDidUpdate({},{})}},{key:"componentDidUpdate",value:function(e,n){i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this,e,n);try{var r=this.pinTileLayer,a=this._getTileUrl({x:"{x}",y:"{y}"},"{z}");a!==r._url&&r.setUrl(a)}catch(e){console.error(e),this.props.onRenderError(e.message||e)}}}]),t}();t.default=c},674:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(r):void 0},i=u(n(193)),o=u(n(92));function u(e){return e&&e.__esModule?e:{default:e}}n(961);var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"componentDidMount",value:function(){var e=this;a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),setTimeout(function(){e.pinMarkerLayer=o.default.layerGroup([]).addTo(e.map),e.heatLayer=o.default.heatLayer([],{radius:25}).addTo(e.map),e.componentDidUpdate({},{})})}},{key:"componentDidUpdate",value:function(e,n){a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this,e,n);try{var r=this.heatLayer,i=this.props,o=i.points,u=i.max,l=i.settings;r.setOptions({max:u,maxZoom:l["map.heat.max-zoom"],minOpacity:l["map.heat.min-opacity"],radius:l["map.heat.radius"],blur:l["map.heat.blur"]}),r.setLatLngs(o)}catch(e){console.error(e),this.props.onRenderError(e.message||e)}}}]),t}();t.default=l},675:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in a)return a.value;var o=a.get;return void 0!==o?o.call(r):void 0},l=(r=["Grid map requires binned longitude/latitude."],a=["Grid map requires binned longitude/latitude."],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),s=h(n(193)),c=h(n(92)),d=n(1),f=h(n(36)),p=n(33),m=n(7);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=v(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r._createGridSquare=function(e){var t=c.default.rectangle([[54.559322,-5.767822],[56.1210604,-3.02124]],{color:"red",weight:1,stroke:!0,fillOpacity:.5,strokeOpacity:1});return t.on("click",r._onVisualizationClick.bind(r,e)),t.on("mousemove",r._onHoverChange.bind(r,e)),t.on("mouseout",r._onHoverChange.bind(r,null)),t},v(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),o(t,[{key:"componentDidMount",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidMount",this).call(this),this.gridLayer=c.default.layerGroup([]).addTo(this.map),this.componentDidUpdate({},{})}},{key:"componentDidUpdate",value:function(e,n){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentDidUpdate",this).call(this,e,n);try{var r=this.gridLayer,a=this.props,o=a.points,s=a.min,c=a.max,h=this._getLatLonColumns(),v=h.latitudeColumn,y=h.longitudeColumn;if(!v.binning_info||!y.binning_info)throw new Error((0,d.t)(l));for(var g=f.default.scale.linear().domain([s,c]).interpolate(f.default.interpolateHcl).range([f.default.rgb((0,m.color)("success")),f.default.rgb((0,m.color)("error"))]),b=r.getLayers(),_=Math.max(o.length,b.length),E=0;E<_;E++){if(E>=o.length&&r.removeLayer(b[E]),E>=b.length){var w=this._createGridSquare(E);r.addLayer(w),b.push(w)}if(E<o.length){b[E].setStyle({color:g(o[E][2])});var O=(0,p.rangeForValue)(o[E][0],v),S=i(O,2),C=S[0],x=S[1],k=(0,p.rangeForValue)(o[E][1],y),A=i(k,2),T=A[0],P=A[1];b[E].setBounds([[C,T],[x,P]])}}}catch(e){console.error(e),this.props.onRenderError(e.message||e)}}},{key:"_clickForPoint",value:function(e,t){var n=this.props,r=n.points,a=n.settings,o=i(n.series,1)[0].data,u=o.rows,l=o.cols,s=r[e],c=this._getMetricColumn(),d=this._getLatLonColumns(),f=d.latitudeColumn,p=d.longitudeColumn;return{value:s[2],column:c,dimensions:[{value:s[0],column:f},{value:s[1],column:p}],event:t.originalEvent,origin:{row:u[e],cols:l},settings:a}}},{key:"_onVisualizationClick",value:function(e,t){var n=this.props.onVisualizationClick;n&&n(this._clickForPoint(e,t))}},{key:"_onHoverChange",value:function(e,t){var n=this.props.onHoverChange;n&&n(null==e?null:this._clickForPoint(e,t))}}]),t}();t.default=y},676:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=h(["Scatter"],["Scatter"]),l=h(["scatter plot"],["scatter plot"]),s=n(1),c=n(119),d=(i=c)&&i.__esModule?i:{default:i},f=n(144),p=n(121),m=n(28);function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default),t}(),r.uiName=(0,s.t)(u),r.identifier="scatter",r.iconName="bubble",r.noun=(0,s.t)(l),r.renderer=f.scatterRenderer,r.settings=o({},p.GRAPH_BUBBLE_SETTINGS,p.GRAPH_GOAL_SETTINGS,p.GRAPH_COLORS_SETTINGS,p.GRAPH_AXIS_SETTINGS,m.PLUGIN_CHART_SETTINGS,p.GRAPH_DATA_SETTINGS),a);t.default=v},677:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=N(["Which fields do you want to use?"],["Which fields do you want to use?"]),s=N(["Data"],["Data"]),c=N(["Choose fields"],["Choose fields"]),d=N(["Funnel"],["Funnel"]),f=N(["Step"],["Step"]),p=N(["Measure"],["Measure"]),m=N(["Funnel type"],["Funnel type"]),h=N(["Display"],["Display"]),v=N(["Bar chart"],["Bar chart"]),y=n(0),g=j(y),b=n(1),_=n(83),E=n(10),w=n(101),O=n(118),S=n(53),C=j(n(678)),x=j(n(680)),k=j(n(188)),A=j(n(3)),T=j(n(4)),P=n(338);function j(e){return e&&e.__esModule?e:{default:e}}function N(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var M=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,y.Component),u(t,[{key:"render",value:function(){var e=this.props.settings,t=e["card.title"];if("bar"===e["funnel.type"])return g.default.createElement(x.default,this.props);var n=this.props,r=n.actionButtons,a=n.className,i=n.onChangeCardAndRun,u=n.series;return g.default.createElement("div",{className:(0,T.default)(a,"flex flex-column p1")},t&&g.default.createElement(P.TitleLegendHeader,{series:u,settings:e,onChangeCardAndRun:i,actionButtons:r}),!t&&r&&g.default.createElement(k.default,{className:"flex-no-shrink",series:u._raw||u,actionButtons:r,onChangeCardAndRun:i}),g.default.createElement(C.default,o({},this.props,{className:"flex-full"})))}}],[{key:"isSensible",value:function(e){var t=e.cols;e.rows;return 2===t.length}},{key:"checkRenderable",value:function(e,t){var n=i(e,1)[0].data.rows;if(!(e.length>1)){if(n.length<1)throw new _.MinRowsError(1,n.length);if(!t["funnel.dimension"]||!t["funnel.metric"])throw new _.ChartSettingsError((0,b.t)(l),{section:(0,b.t)(s)},(0,b.t)(c))}}},{key:"transformSeries",value:function(e){var t=i(e,1)[0],n=t.card,r=t.data,a=r.rows,u=r.cols,l=(0,w.getComputedSettingsForSeries)(e),s=A.default.findIndex(u,function(e){return e.name===l["funnel.dimension"]}),c=A.default.findIndex(u,function(e){return e.name===l["funnel.metric"]});return!n._transformed&&1===e.length&&a.length>1&&s>=0&&c>=0?a.map(function(e){return{card:o({},n,{name:(0,E.formatValue)(e[s],{column:u[s]}),_transformed:!0}),data:{rows:[[e[s],e[c]]],cols:[u[s],u[c]]}}}):e}}]),t}(),r.uiName=(0,b.t)(d),r.identifier="funnel",r.iconName="funnel",r.noHeader=!0,r.minSize={width:5,height:4},r.placeholderSeries=[["Homepage",1e3],["Product Page",850],["Tiers Page",700],["Trial Form",200],["Trial Confirmation",40]].map(function(e){return{card:{display:"funnel",visualization_settings:{"funnel.type":"funnel","funnel.dimension":"Total Sessions"},dataset_query:{type:"null"}},data:{rows:[e],cols:[{name:"Total Sessions",base_type:"type/Text"},{name:"Sessions",base_type:"type/Integer"}]}}}),r.settings=o({},(0,S.columnSettings)({hidden:!0}),(0,O.dimensionSetting)("funnel.dimension",{section:(0,b.t)(s),title:(0,b.t)(f),dashboard:!1,useRawSeries:!0,showColumnSetting:!0}),(0,O.metricSetting)("funnel.metric",{section:(0,b.t)(s),title:(0,b.t)(p),dashboard:!1,useRawSeries:!0,showColumnSetting:!0}),{"funnel.type":{title:(0,b.t)(m),section:(0,b.t)(h),widget:"select",props:{options:[{name:(0,b.t)(d),value:"funnel"},{name:(0,b.t)(v),value:"bar"}]},getDefault:function(e){return e.length>1?"bar":"funnel"},useRawSeries:!0}}),a);M.displayName="Funnel",t.default=M},678:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=p(i),u=p(n(4)),l=p(n(679)),s=p(n(67)),c=n(10),d=n(24),f=n(7);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=Object.values(f.normal),v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.series,i=t.gridSize,f=t.hovered,p=t.onHoverChange,h=t.onVisualizationClick,v=t.visualizationIsClickable,g=t.settings,b=a[0].data.cols,_=a.map(function(e){return e.data.rows[0]}),E=i&&(i.width<7||i.height<=5),w=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,c.formatValue)(e,r({},g.column(b[0]),{jsx:t,majorWidth:0}))},O=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,c.formatValue)(e,r({},g.column(b[1]),{jsx:t,majorWidth:0}))},S=function(e){return(100*e).toFixed(2)+" %"},C=[{value:_[0][1],graph:{startBottom:0,startTop:1,endBottom:0,endTop:1}}],x=_[0][1];_.map(function(e,t){x-=C[t].value-e[1],C[t+1]={value:e[1],graph:{startBottom:C[t].graph.endBottom,startTop:C[t].graph.endTop,endTop:.5+x/C[0].value/2,endBottom:.5-x/C[0].value/2},hovered:{index:t,data:[{key:"Step",value:e[0],col:b[0]},{key:(0,d.getFriendlyName)(b[1]),value:e[1],col:b[1]},{key:"Retained",value:S(e[1]/C[0].value)}]},clicked:{value:e[1],column:b[1],dimensions:[{value:e[0],column:b[0]}]}}});var k=(C=C.slice(1))[0],A=v(C[0].clicked);return o.default.createElement("div",{className:(0,u.default)(n,l.default.Funnel,"flex",(e={},m(e,l.default.Small,E),m(e,"p1",E),m(e,"p2",!E),e))},o.default.createElement("div",{className:(0,u.default)(l.default.FunnelStep,l.default.Initial,"flex flex-column")},o.default.createElement(s.default,{className:l.default.Head},w(_[0][0])),o.default.createElement("div",{className:l.default.Start},o.default.createElement("div",{className:l.default.Title},O(_[0][1])),o.default.createElement("div",{className:l.default.Subtitle},(0,d.getFriendlyName)(b[0]))),o.default.createElement("div",{className:l.default.Infos},o.default.createElement("div",{className:l.default.Title}," "),o.default.createElement("div",{className:l.default.Subtitle}," "))),C.slice(1).map(function(e,t){return o.default.createElement("div",{key:t,className:(0,u.default)(l.default.FunnelStep,"flex flex-column")},o.default.createElement(s.default,{className:l.default.Head},w(_[t+1][0])),o.default.createElement(y,{className:(0,u.default)({"cursor-pointer":A}),index:t,info:e,infos:C,hovered:f,onHoverChange:p,onVisualizationClick:A?h:null}),o.default.createElement("div",{className:l.default.Infos},o.default.createElement("div",{className:l.default.Title},S(e.value/k.value)),o.default.createElement("div",{className:l.default.Subtitle},O(_[t+1][1]))))}))}}]),t}();v.displayName="FunnelNormal",t.default=v;var y=function(e){var t=e.index,n=e.info,a=e.infos,i=(e.hovered,e.onHoverChange),s=e.onVisualizationClick,c=e.className;return o.default.createElement("svg",{className:(0,u.default)(c,l.default.Graph),onMouseMove:function(e){i&&n.hovered&&i(r({},n.hovered,{event:e.nativeEvent}))},onMouseLeave:function(){return i&&i(null)},onClick:function(e){s&&n.clicked&&s(r({},n.clicked,{event:e.nativeEvent}))},viewBox:"0 0 1 1",preserveAspectRatio:"none"},o.default.createElement("polygon",{opacity:1-t*(.9/(a.length+1)),fill:h[0],points:"0 "+n.graph.startBottom+", 0 "+n.graph.startTop+", 1 "+n.graph.endTop+", 1 "+n.graph.endBottom}))};y.displayName="GraphSection"},679:function(e,t){e.exports={Funnel:"PS5df",FunnelStep:"_2vUMz",Initial:"_2N5af",Start:"_2Wc6M",Title:"_1o3km",Subtitle:"_2N341",Head:"_cker",Graph:"GvdI5",Infos:"_129--",Small:"_2Xb73"}},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(181);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})}),t.formatIdentifier=l,t.parseIdentifierString=function(e){return f(e)},t.isReservedWord=s,t.parseMetric=function(e,t){return t.query.table().metrics.find(function(t){return t.name.toLowerCase()===e.toLowerCase()})},t.formatMetricName=function(e,t){return l(e.name,t)},t.parseSegment=function(e,t){return t.query.table().segments.find(function(t){return t.name.toLowerCase()===e.toLowerCase()})},t.formatSegmentName=function(e,t){return l(e.name,t)},t.parseDimension=function(e,t){return t.query.dimensionOptions().all().find(function(t){return r.EDITOR_FK_SYMBOLS.symbols.some(function(n){return c(t,n)===e})})},t.formatDimensionName=function(e,t){return l(c(e),t)},t.getDimensionName=c,t.formatStringLiteral=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).quotes,n=void 0===t?r.EDITOR_QUOTES:t;return d(e,n.literalQuoteDefault)},t.parseStringLiteral=function(e){return f(e)},t.isExpression=m,t.isLiteral=h,t.isStringLiteral=v,t.isNumberLiteral=y,t.isOperator=g,t.hasOptions=b,t.isFunction=_,t.isDimension=E,t.isMetric=w,t.isSegment=O,t.isCase=S;var a,i=n(31),o=(a=i)&&a.__esModule?a:{default:a},u=n(10);function l(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).quotes,n=void 0===t?r.EDITOR_QUOTES:t;return n.identifierAlwaysQuoted||!/^\w+$/.test(e)||s(e)?d(e,n.identifierQuoteDefault):e}function s(e){return!!(0,r.getMBQLName)(e)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.EDITOR_FK_SYMBOLS.default;return e.render().replace(" "+u.FK_SYMBOL+" ",t)}function d(e,t){if('"'===t)return JSON.stringify(e);if("'"===t)return p(JSON.stringify(p(e)));if("["===t){if(e.match(/\[|\]/))throw new Error("String currently can't contain brackets: "+e);return"["+e+"]"}if(""===t)return e;throw new Error("Unknown quoting: "+t)}function f(e){var t=e.charAt(0);if('"'===t)return JSON.parse(e);if("'"===t)return p(JSON.parse(p(e)));if("["===t)return e.slice(1,-1);throw new Error("Unknown quoting: "+e)}function p(e){return e.replace(/['"]/g,function(e){return"'"===e?'"':"'"})}function m(e){return h(e)||g(e)||_(e)||E(e)||w(e)||O(e)||S(e)}function h(e){return v(e)||y(e)}function v(e){return"string"==typeof e}function y(e){return"number"==typeof e}function g(e){return Array.isArray(e)&&r.OPERATORS.has(e[0])&&e.slice(1,b(e)?-1:0).every(m)}function b(e){return(t=e[e.length-1])&&Object.getPrototypeOf(t)===Object.prototype;var t}function _(e){return Array.isArray(e)&&r.FUNCTIONS.has(e[0])&&e.slice(1,b(e)?-1:0).every(m)}function E(e){return!!o.default.parseMBQL(e)}function w(e){return Array.isArray(e)&&"metric"===e[0]&&2===e.length&&"number"==typeof e[1]}function O(e){return Array.isArray(e)&&"segment"===e[0]&&2===e.length&&"number"==typeof e[1]}function S(e){return Array.isArray(e)&&"case"===e[0]}},680:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=c(i),u=c(n(343)),l=n(101),s=n(11);function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"render",value:function(){return o.default.createElement(u.default,r({},this.props,{isScalarSeries:!0,settings:r({},this.props.settings,(0,l.getComputedSettingsForSeries)((0,s.assocIn)(this.props.series,[0,"card","display"],"bar")),{"bar.scalar_series":!0})}))}}]),t}();d.displayName="FunnelBar",t.default=d},681:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=S(["Gauge visualization requires a number."],["Gauge visualization requires a number."]),s=S(["Gauge"],["Gauge"]),c=S(["Gauge ranges"],["Gauge ranges"]),d=n(0),f=O(d),p=O(n(15)),m=n(1),h=O(n(36)),v=O(n(4)),y=O(n(3)),g=n(7),b=n(10),_=n(13),E=n(53),w=O(n(682));function O(e){return e&&e.__esModule?e:{default:e}}function S(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function C(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var T=2.5*(45-33.3)/4/Math.tan(64/180*Math.PI),P=(0,g.color)("bg-medium"),j=(0,g.color)("text-dark"),N=(0,g.color)("text-dark"),M=(0,g.color)("text-medium"),R=function(e){return!isNaN(e.min)&&!isNaN(e.max)},D=(a=r=function(e){function t(){var e,n,r;x(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=k(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={mounted:!1},k(r,n)}return A(t,d.Component),u(t,[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),this._updateLabelSize()}},{key:"componentDidUpdate",value:function(){this._updateLabelSize()}},{key:"_updateLabelSize",value:function(){var e=this._label&&p.default.findDOMNode(this._label);if(e){var t=e.getBBox().width,n=parseFloat(e.style.fontSize.replace("em","")),r=Math.max(.5,Math.min(.7,n*(66.6*.95/t)));Math.abs(1-n/r)>.05&&(e.style.fontSize=r+"em")}}},{key:"render",value:function(){var e=this,t=this.props,n=o(t.series,1)[0].data,r=n.rows,a=n.cols,i=t.settings,u=t.className,l=t.isSettings,s=this.props.width,c=this.props.height-10,d=50+50*Math.sin(135*Math.PI/180),p=d/100,m=void 0,y=(m=c/s<p?Math.min(500,c/p):Math.min(500,s))*p,g=m>250,_=i["gauge.range"],E=i["gauge.segments"].filter(R),w=h.default.scale.linear().domain(_).range([1.5*-Math.PI/2,1.5*Math.PI/2]).clamp(!0),O=r[0][0],S=a[0],x=function(e,t){return[Math.cos(w(e)-Math.PI/2)*t,Math.sin(w(e)-Math.PI/2)*t]},k=Array.from(new Set(_.concat.apply(_,C(E.map(function(e){return[e.min,e.max]}))))),A=E.filter(function(e){return e.label}).map(function(e){return{label:e.label,value:e.min+(e.max-e.min)/2}}),T=s/m;return f.default.createElement("div",{className:(0,v.default)(u,"relative")},f.default.createElement("div",{className:"absolute overflow-hidden",style:{width:m*T,height:y,top:(c-y)/2,left:(s-m)/2-(m*T-m)/2}},f.default.createElement("svg",{viewBox:"0 0 "+100*T+" "+d},f.default.createElement("g",{transform:"translate("+100*T/2+",50)"},f.default.createElement(L,{start:w(_[0]),end:w(_[1]),fill:P}),E.map(function(t,n){return f.default.createElement(L,{key:n,start:w(t.min),end:w(t.max),fill:t.color,segment:t,column:S,settings:i,onHoverChange:g?null:e.props.onHoverChange})}),f.default.createElement(I,{angle:w(this.state.mounted?O:0),isAnimated:!l}),g&&k.map(function(e,t){return f.default.createElement(F,{position:x(e,45*1.025)},(0,b.formatValue)(e,i.column(S)))}),g&&A.map(function(e,t){var n=e.label,r=e.value;return f.default.createElement(z,null,f.default.createElement(F,{position:x(r,45*1.025),style:{fill:j}},n))}),f.default.createElement("text",{ref:function(t){return e._label=t},x:0,y:0,style:{fill:N,fontSize:"1em",fontWeight:"bold",textAnchor:"middle",transform:"translate(0,0.2em)"}},(0,b.formatValue)(O,i.column(S)))))))}}],[{key:"isSensible",value:function(e){var t=e.cols;return 1===e.rows.length&&1===t.length}},{key:"checkRenderable",value:function(e){var t=o(e,1)[0].data,n=t.cols;t.rows;if(!(0,_.isNumeric)(n[0]))throw new Error((0,m.t)(l))}}]),t}(),r.uiName=(0,m.t)(s),r.identifier="gauge",r.iconName="gauge",r.minSize={width:4,height:4},r.settings=i({},(0,E.columnSettings)({getColumns:function(e,t){var n=o(e,1)[0].data.cols;return[y.default.find(n,function(e){return e.name===t["scalar.field"]})||n[0]]}}),{"gauge.range":{getDefault:function(e,t){var n=t["gauge.segments"].filter(R),r=[].concat(C(n.map(function(e){return e.max})),C(n.map(function(e){return e.min})));return r.length>0?[Math.min.apply(Math,C(r)),Math.max.apply(Math,C(r))]:[0,1]},readDependencies:["gauge.segments"]},"gauge.segments":{section:"Display",title:(0,m.t)(c),getDefault:function(e){var t=100;try{t=e[0].data.rows[0][0]}catch(e){}return[{min:0,max:t/2,color:(0,g.color)("error"),label:""},{min:t/2,max:t,color:(0,g.color)("warning"),label:""},{min:t,max:2*t,color:(0,g.color)("success"),label:""}]},widget:w.default,persistDefault:!0}}),a);D.displayName="Gauge",t.default=D;var L=function(e){var t=e.start,n=e.end,r=e.fill,a=e.segment,i=e.onHoverChange,o=e.settings,u=e.column,l=h.default.svg.arc().outerRadius(45).innerRadius(33.3);return f.default.createElement("path",{d:l({startAngle:t,endAngle:n}),fill:r,onMouseMove:function(e){if(i){var t=o&&o.column&&u?o.column(u):{};i({data:[{key:a.label,value:[a.min,a.max].map(function(e){return(0,b.formatValue)(e,t)}).join(" - ")}],event:e.nativeEvent})}},onMouseLeave:function(){i&&i(null)}})};L.displayName="GaugeArc";var I=function(e){var t,n=e.angle,r=e.isAnimated,a=void 0===r||r;return f.default.createElement("path",{d:"M-"+T+" 0 L0 -"+2.5*(45-33.3)/4+" L"+T+" 0 Z",transform:"translate(0,-33.3) rotate("+(t=n,180*t/Math.PI)+", 0, 33.3)",style:a?{transition:"transform 1.5s ease-in-out"}:null,stroke:"white",strokeWidth:1.25,fill:M})};I.displayName="GaugeNeedle";var F=function(e){var t=o(e.position,2),n=t[0],r=t[1],a=e.style,u=void 0===a?{}:a,l=e.children;return f.default.createElement("text",{x:n,y:r,style:i({fill:(0,g.color)("text-medium"),fontSize:"0.25em",textAnchor:Math.abs(n)<5?"middle":n>0?"start":"end",transform:r>0?"translate(0,0.25em)":void 0},u)},l)};F.displayName="GaugeSegmentLabel";var z=function(e){function t(){return x(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return A(t,f.default.Component),u(t,[{key:"componentDidMount",value:function(){this._hideIfClipped()}},{key:"componentDidUpdate",value:function(){this._hideIfClipped()}},{key:"_hideIfClipped",value:function(){var e=p.default.findDOMNode(this);if(e){for(var t=e;"svg"!==t.nodeName.toLowerCase();)t=t.parentNode;var n=t.getBoundingClientRect(),r=e.getBoundingClientRect();r.left>=n.left&&r.right<=n.right&&r.top>=n.top&&r.bottom<=n.bottom?e.classList.remove("hidden"):e.classList.add("hidden")}}},{key:"render",value:function(){return this.props.children}}]),t}();z.displayName="HideIfOverlowingSVG"},682:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=y(["Min"],["Min"]),i=y(["Max"],["Max"]),o=y(["Label for this range (optional)"],["Label for this range (optional)"]),u=y(["Add a range"],["Add a range"]),l=v(n(0)),s=n(1),c=v(n(3)),d=n(7),f=v(n(114)),p=v(n(19)),m=v(n(5)),h=v(n(135));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function g(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var b=function(e){var t=e.value,n=e.onChange,d=function(e,a,i){return n([].concat(g(t.slice(0,e)),[r({},t[e],(o={},u=a,l=i,u in o?Object.defineProperty(o,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[u]=l,o))],g(t.slice(e+1))));var o,u,l};return l.default.createElement("div",null,l.default.createElement("table",null,l.default.createElement("thead",null,l.default.createElement("tr",null,l.default.createElement("th",null,"Color"),l.default.createElement("th",null,"Min"),l.default.createElement("th",null,"Max"))),l.default.createElement("tbody",null,t.map(function(e,r){return[l.default.createElement("tr",null,l.default.createElement("td",null,l.default.createElement(f.default,{value:e.color,onChange:function(e){return d(r,"color",e)},triggerSize:28,padding:2,colors:_()})),l.default.createElement("td",null,l.default.createElement(h.default,{type:"number",className:"input full",value:e.min,onChange:function(e){return d(r,"min",e)},placeholder:(0,s.t)(a)})),l.default.createElement("td",null,l.default.createElement(h.default,{type:"number",className:"input full",value:e.max,onChange:function(e){return d(r,"max",e)},placeholder:(0,s.t)(i)})),l.default.createElement("td",null,t.length>1&&l.default.createElement(m.default,{name:"close",className:"cursor-pointer text-grey-2 text-grey-4-hover ml2",onClick:function(){return n(t.filter(function(e,t){return t!==r}))}}))),l.default.createElement("tr",null,l.default.createElement("td",{colSpan:3,className:"pb2"},l.default.createElement("input",{type:"text",className:"input full",value:e.label,onChange:function(e){return d(r,"label",e.target.value)},placeholder:(0,s.t)(o)})))]}))),l.default.createElement(p.default,{borderless:!0,icon:"add",onClick:function(){return n(t.concat((e=t,r=_(),a=e[e.length-1],i=a?c.default.findIndex(r,function(e){return e===a.color}):-1,o=i>=0?r[i+1%r.length]:r[0],{min:a?a.max:0,max:a?2*a.max:1,color:o,label:""})));var e,r,a,i,o}},(0,s.t)(u)))};function _(){return[(0,d.color)("error"),(0,d.color)("warning"),(0,d.color)("success")].concat(g(Object.values(d.normal).slice(0,9)),[(0,d.color)("bg-medium")])}b.displayName="ChartSettingGaugeSegments",t.default=b},683:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectDetail=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=D(["Empty"],["Empty"]),s=D(["No relationships found."],["No relationships found."]),c=D(["via ",""],["via ",""]),d=D(["Unknown"],["Unknown"]),f=D(["This "," is connected to:"],["This "," is connected to:"]),p=D(["Object Detail"],["Object Detail"]),m=D(["object"],["object"]),h=n(0),v=R(h),y=n(6),g=n(1),b=R(n(684)),_=R(n(685)),E=R(n(5)),w=R(n(219)),O=R(n(66)),S=n(13),C=n(41),x=n(160),k=n(10),A=R(n(99)),T=n(147),P=n(217),j=n(53),N=R(n(4)),M=R(n(3));function R(e){return e&&e.__esModule?e:{default:e}}function D(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var I=t.ObjectDetail=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=L(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.foreignKeyClicked=function(e){r.props.followForeignKey(e)},r.onKeyDown=function(e){"ArrowLeft"===e.key&&r.props.viewPreviousObjectDetail(),"ArrowRight"===e.key&&r.props.viewNextObjectDetail()},L(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,h.Component),u(t,[{key:"componentDidMount",value:function(){var e=this.props.table;e&&null==e.fks&&this.props.fetchTableFks(e.id),this.props.tableForeignKeys&&this.props.loadObjectDetailFKReferences(),window.addEventListener("keydown",this.onKeyDown,!0)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.onKeyDown,!0)}},{key:"componentWillReceiveProps",value:function(e){var t=e.tableForeignKeys&&!this.props.tableForeignKeys;(this.props.data!==e.data||t)&&this.props.loadObjectDetailFKReferences()}},{key:"getIdValue",value:function(){if(!this.props.data)return null;var e=this.props.data,t=e.cols,n=e.rows,r=M.default.findIndex(t,function(e){return(0,S.isPK)(e)});return n[0][r]}},{key:"cellRenderer",value:function(e,t,n){var r=this.props,a=r.settings,u=r.onVisualizationClick,s=r.visualizationIsClickable,c=void 0,d=void 0,f=void 0;if(n)c=null!==e?(0,k.formatColumn)(e):null,d={column:e},f=!1;else{if(null===t||void 0===t||""===t)c=v.default.createElement("span",{className:"text-light"},(0,g.t)(l));else if((0,C.isa)(e.special_type,C.TYPE.SerializedJSON)){var p=JSON.stringify(JSON.parse(t),null,2);c=v.default.createElement("pre",{className:"ObjectJSON"},p)}else if("object"===(void 0===t?"undefined":o(t))){var m=JSON.stringify(t,null,2);c=v.default.createElement("pre",{className:"ObjectJSON"},m)}else"string"==typeof(c=(0,k.formatValue)(t,i({},a.column(e),{jsx:!0,rich:!0})))&&(c=v.default.createElement(_.default,{str:c,length:140}));d={column:e,value:t},f=(0,S.isID)(e)}var h=u&&s(d);return v.default.createElement("div",null,v.default.createElement("span",{className:(0,N.default)({"cursor-pointer":h,link:h&&f}),onClick:h&&function(e){u(i({},d,{element:e.currentTarget}))}},c))}},{key:"renderDetailsTable",value:function(){var e=this,t=this.props.data,n=t.cols,r=t.rows;return n.map(function(t,n){return v.default.createElement("div",{className:"Grid Grid--1of2 mb2",key:n},v.default.createElement("div",{className:"Grid-cell"},e.cellRenderer(t,r[0][n],!0)),v.default.createElement("div",{style:{wordWrap:"break-word"},className:"Grid-cell text-bold text-dark"},e.cellRenderer(t,r[0][n],!1)))})}},{key:"renderRelationships",value:function(){var e=this,t=this.props,n=t.tableForeignKeys,r=t.tableForeignKeyReferences;if(!n)return null;if(n.length<1)return v.default.createElement("p",{className:"my4 text-centered"},(0,g.t)(s));var a=(0,S.foreignKeyCountsByOriginTable)(n),i=n.sort(function(e,t){return e.origin.table.display_name.localeCompare(t.origin.table.display_name)}).map(function(t){var n=v.default.createElement(O.default,{size:25}),i=0,o=!1;if(r){var u=r[t.origin.id];u&&1===u.status&&(n=v.default.createElement("span",null,u.value),u.value&&(i=u.value,o=!0))}var l=v.default.createElement(w.default,{className:"flex-align-right"},v.default.createElement(E.default,{name:"chevronright",size:10})),s=(0,x.inflect)(t.origin.table.display_name,i),d=a[t.origin.table.id]>1?v.default.createElement("span",{className:"text-medium text-normal"}," ",(0,g.t)(c,t.origin.display_name)):null,f=v.default.createElement("div",null,v.default.createElement("h2",null,n),v.default.createElement("h5",{className:"block"},s,d)),p=void 0,m=(0,N.default)("flex align-center my2 pb2 border-bottom",{"text-brand-hover cursor-pointer text-dark":o,"text-medium":!o});return p=o?v.default.createElement("div",{className:m,key:t.id,onClick:e.foreignKeyClicked.bind(null,t)},f,l):v.default.createElement("div",{className:m,key:t.id},f),v.default.createElement("li",null,p)});return v.default.createElement("ul",{className:"px4"},i)}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.table;if(!t)return!1;var r=n?n.objectName():(0,g.t)(d),a=this.getIdValue();return v.default.createElement("div",{className:"scroll-y pt2 px4"},v.default.createElement("div",{className:"ObjectDetail bordered rounded"},v.default.createElement("div",{className:"Grid border-bottom relative"},v.default.createElement("div",{className:"Grid-cell border-right px4 py3 ml2 arrow-right"},v.default.createElement("div",{className:"text-brand text-bold"},v.default.createElement("span",null,r),v.default.createElement("h1",null,a))),v.default.createElement("div",{className:"Grid-cell flex align-center Cell--1of3 bg-alt"},v.default.createElement("div",{className:"p4 flex align-center text-bold text-medium"},v.default.createElement(E.default,{name:"connections",size:17}),v.default.createElement("div",{className:"ml2"},(0,g.jt)(f,v.default.createElement("span",{className:"text-dark"},r))))),v.default.createElement("div",{className:(0,N.default)("absolute left cursor-pointer text-brand-hover lg-ml2",{disabled:a<=1}),style:{top:"50%",transform:"translate(-50%, -50%)"}},v.default.createElement(b.default,{direction:"left",onClick:this.props.viewPreviousObjectDetail})),v.default.createElement("div",{className:"absolute right cursor-pointer text-brand-hover lg-ml2",style:{top:"50%",transform:"translate(50%, -50%)"}},v.default.createElement(b.default,{direction:"right",onClick:this.props.viewNextObjectDetail}))),v.default.createElement("div",{className:"Grid"},v.default.createElement("div",{className:"Grid-cell p4",style:{marginLeft:"2.4rem",fontSize:"1rem"}},this.renderDetailsTable()),v.default.createElement("div",{className:"Grid-cell Cell--1of3 bg-alt"},this.renderRelationships()))))}}]),t}(),r.uiName=(0,g.t)(p),r.identifier="object",r.iconName="document",r.noun=(0,g.t)(m),r.hidden=!0,r.settings=i({},(0,j.columnSettings)({hidden:!0})),a);I.displayName="ObjectDetail",t.default=(0,y.connect)(function(e){return{table:(0,P.getTableMetadata)(e),tableForeignKeys:(0,P.getTableForeignKeys)(e),tableForeignKeyReferences:(0,P.getTableForeignKeyReferences)(e)}},function(e){return{fetchTableFks:function(t){return e(A.default.objectActions.fetchForeignKeys({id:t}))},loadObjectDetailFKReferences:function(){return e(T.loadObjectDetailFKReferences.apply(void 0,arguments))},followForeignKey:function(){return e(T.followForeignKey.apply(void 0,arguments))},viewPreviousObjectDetail:function(){return e(T.viewPreviousObjectDetail.apply(void 0,arguments))},viewNextObjectDetail:function(){return e(T.viewNextObjectDetail.apply(void 0,arguments))}}})(I)},684:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),a=o(n(5)),i=n(7);function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.direction,n=void 0===t?"left":t,o=e.onClick;return r.default.createElement("div",{className:"shadowed cursor-pointer text-brand-hover text-medium flex align-center circle p2 bg-white transition-background transition-color",onClick:o,style:{border:"1px solid "+(0,i.color)("border"),boxShadow:"0 2px 4px 0 "+(0,i.color)("shadow")}},r.default.createElement(a.default,{name:"arrow_"+n}))};u.displayName="DirectionalButton",t.default=u},685:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=p(["View less"],["View less"]),u=p(["View more"],["View more"]),l=n(0),s=f(l),c=n(1),d=f(n(271));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var m=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.toggleExpansion=r.toggleExpansion.bind(r),r.state={expanded:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){void 0!==e.expanded&&this.setState({expanded:e.expanded})}},{key:"toggleExpansion",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){if(!this.props.str)return!1;var e=d.default.truncate(this.props.str||"",140);return this.state.expanded?s.default.createElement("span",null,this.props.str," ",s.default.createElement("span",{className:"block mt1 link",onClick:this.toggleExpansion},(0,c.t)(o))):e!==this.props.str?s.default.createElement("span",null,e," ",s.default.createElement("span",{className:"block mt1 link",onClick:this.toggleExpansion},(0,c.t)(u))):s.default.createElement("span",null,this.props.str)}}]),t}(),r.defaultProps={length:140},a);m.displayName="ExpandableString",t.default=m},686:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thunkWithDispatchAction=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getStore=function(e,t,n){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},m=(0,a.combineReducers)(r({},e,{form:i.reducer,routing:o.routerReducer})),h=[f,u.default].concat(d(s.DEBUG?[l.default]:[]),d(t?[(0,o.routerMiddleware)(t)]:[]));return(0,a.createStore)(m,n,(0,a.compose)(a.applyMiddleware.apply(void 0,d(h)),p,c))};var a=n(150),i=n(143),o=n(30),u=c(n(962)),l=c(n(963)),s=n(300);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var f=t.thunkWithDispatchAction=function(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){return"function"==typeof r?r(Object.assign(t,{action:function(e,n){return t({type:e,payload:n})}}),n):e(r)}}},p=window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}},688:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=_(["Edit"],["Edit"]),u=_(["Remove"],["Remove"]),l=n(0),s=b(l),c=b(n(2)),d=n(1),f=b(n(448)),p=b(n(5)),m=b(n(348)),h=b(n(4)),v=b(n(3)),y=b(n(281)),g=n(104);function b(e){return e&&e.__esModule?e:{default:e}}function _(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={isEditingName:!1,editingNameValue:void 0,isFocused:!1},r.focusChanged=function(e){r.setState({isFocused:e})},E(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),i(t,[{key:"renderPopover",value:function(e,t,n,r){var a=this.props,i=a.parameter,o=a.editingParameter,u=a.commitImmediately,l=!(!o||o.id!==i.id);return s.default.createElement(f.default,{parameter:i,name:name,value:e,setValue:t,isEditing:l,placeholder:n,focusChanged:this.focusChanged,isFullscreen:r,commitImmediately:u})}},{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.className,i=r.parameter,l=r.parameters,c=r.isEditing,f=r.isFullscreen,b=r.editingParameter,_=r.setEditingParameter,E=r.setName,w=r.setValue,O=r.setDefaultValue,S=r.remove,C=r.children,x=c,k=b&&b.id===i.id,A=function(){var e=null!=i.value||n.state.isFocused,t=e?i.name:"";return s.default.createElement(y.default,{legend:t,noPadding:!0,className:(0,h.default)(a,m.default.container,{"border-brand":e})},n.renderPopover(i.value,function(e){return w(e)},i.name,f),C)};return f?null!=i.value?s.default.createElement("div",{style:{fontSize:"0.833em"}},A()):s.default.createElement("span",{className:"hide"}):x&&_?k?this.state.isEditingName?s.default.createElement(y.default,{legend:"",noPadding:!0,className:(0,h.default)(a,m.default.container)},s.default.createElement("input",{type:"text",className:(0,h.default)(m.default.nameInput,{"border-error":v.default.any(l,function(e){return e.name===i.name&&e.id!==i.id})}),value:n.state.editingNameValue,onChange:function(e){return n.setState({editingNameValue:e.target.value})},onBlur:function(){E(n.state.editingNameValue),n.setState({isEditingName:!1,editingNameValue:void 0})},onKeyUp:function(e){e.keyCode!==g.KEYCODE_ESCAPE&&e.keyCode!==g.KEYCODE_ENTER||e.target.blur()},autoFocus:!0}),C):(e=s.default.createElement("span",{className:m.default.editNameIconContainer},s.default.createElement(p.default,{name:"pencil",size:12,className:"text-brand cursor-pointer",onClick:function(){n.setState({isEditingName:!0,editingNameValue:i.name})}})),t=s.default.createElement("span",null,i.name," ",e),s.default.createElement(y.default,{legend:t,noPadding:!0,className:(0,h.default)(a,m.default.container)},n.renderPopover(i.default,function(e){return O(e)},i.name,f),C)):s.default.createElement(y.default,{legend:i.name,noPadding:!0,className:(0,h.default)(a,m.default.container)},s.default.createElement("div",{className:(0,h.default)(m.default.parameter,m.default.parameterButtons)},s.default.createElement("div",{className:m.default.editButton,onClick:function(){return _(i.id)}},s.default.createElement(p.default,{name:"pencil"}),s.default.createElement("span",{className:"ml1"},(0,d.t)(o))),s.default.createElement("div",{className:m.default.removeButton,onClick:function(){return S()}},s.default.createElement(p.default,{name:"close"}),s.default.createElement("span",{className:"ml1"},(0,d.t)(u)))),C):A()}}]),t}(),r.propTypes={parameter:c.default.object,commitImmediately:c.default.bool},r.defaultProps={parameter:null,commitImmediately:!1},a);w.displayName="ParameterWidget",t.default=w},689:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(0)),a=o(n(171)),i=o(n(8));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.value,n=e.setValue,o=e.onClose;return t=t?(0,i.default)(t):(0,i.default)(),r.default.createElement(a.default,{initial:t,selected:t,selectedEnd:t,isRangePicker:!1,onChange:function(e){n(e),o()}})};u.displayName="DateSingleWidget",u.format=function(e){return e?(0,i.default)(e).format("MMMM D, YYYY"):""},t.default=u},69:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FETCH_DATABASE_IDFIELDS=t.FETCH_DATABASE_SCHEMAS=t.FETCH_DATABASE_METADATA=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(128),i=h(n(3)),o=n(34),u=n(18),l=n(17),s=n(58),c=h(n(130)),d=h(n(232)),f=n(27),p=n(32),m=h(n(552));function h(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var y=t.FETCH_DATABASE_METADATA="metabase/entities/database/FETCH_DATABASE_METADATA",g=(t.FETCH_DATABASE_SCHEMAS="metabase/entities/database/FETCH_DATABASE_SCHEMAS",t.FETCH_DATABASE_IDFIELDS="metabase/entities/database/FETCH_DATABASE_IDFIELDS"),b=(0,o.createEntity)({name:"databases",path:"/api/database",schema:s.DatabaseSchema,nameOne:"database",nameMany:"databases",objectActions:{fetchDatabaseMetadata:(0,u.createThunkAction)(y,function(e){var t=e.id,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.reload,o=void 0!==i&&i,c=n.params;return function(e,n){return(0,u.fetchData)({dispatch:e,getState:n,requestStatePath:["metadata","databases",t],existingStatePath:["metadata","databases",t],getData:(i=v(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.MetabaseApi.db_metadata(r({dbId:t},c));case 2:return n=e.sent,e.abrupt("return",(0,a.normalize)(n,s.DatabaseSchema));case 4:case"end":return e.stop()}},e,void 0)})),function(){return i.apply(this,arguments)}),reload:o});var i}}),fetchIdfields:(0,u.createThunkAction)(g,function(e){var t=e.id;return v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=a.normalize,e.next=3,l.MetabaseApi.db_idfields({dbId:t});case 3:return e.t1=e.sent,e.t2=[c.default.schema],e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}},e,void 0)}))}),fetchSchemas:function(e){var t=e.id;return d.default.actions.fetchList({dbId:t})}},selectors:{getObject:function(e,t){var n=t.entityId;return(0,f.getMetadata)(e).database(n)},getHasSampleDataset:function(e){return i.default.any(b.selectors.getList(e),function(e){return e.is_sample})},getIdfields:(0,p.createSelector)([function(e){return(0,f.getFields)(e)},function(e,t){return t.databaseId}],function(e,t){return Object.values(e).filter(function(e){return(e.table||{}).db_id===t&&e.isPK()})})},forms:m.default});t.default=b},690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=n(0),l=f(u),s=f(n(2)),c=f(n(171)),d=f(n(8));function f(e){return e&&e.__esModule?e:{default:e}}var p="~";function m(e){var t=(e||"").split(p),n=o(t,2);return{start:n[0],end:n[1]}}var h=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state=m(e.value),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState(m(e.value))}},{key:"render",value:function(){var e=this,t=this.state,n=t.start,r=t.end;return l.default.createElement(c.default,{initial:n?(0,d.default)(n):null,selected:n?(0,d.default)(n):null,selectedEnd:r?(0,d.default)(r):null,onChange:function(t,n){var r;null==n?e.setState({start:t,end:n}):e.props.setValue([(r={start:t,end:n}).start,r.end].join(p))}})}}]),t}(),r.propTypes={value:s.default.string,setValue:s.default.func.isRequired},r.defaultProps={},r.format=function(e){var t=m(e),n=t.start,r=t.end;return n&&r?(0,d.default)(n).format("MMMM D, YYYY")+" - "+(0,d.default)(r).format("MMMM D, YYYY"):""},a);h.displayName="DateRangeWidget",t.default=h},691:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PredefinedRelativeDatePicker=void 0;var r,a,i,o,u,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=I(["Today"],["Today"]),c=I(["Yesterday"],["Yesterday"]),d=I(["Past 7 days"],["Past 7 days"]),f=I(["Past 30 days"],["Past 30 days"]),p=I(["Last"],["Last"]),m=I(["Week"],["Week"]),h=I(["Month"],["Month"]),v=I(["Year"],["Year"]),y=I(["This"],["This"]),g=I(["Past 7 Days"],["Past 7 Days"]),b=I(["Past 30 Days"],["Past 30 Days"]),_=I(["Last Week"],["Last Week"]),E=I(["Last Month"],["Last Month"]),w=I(["Last Year"],["Last Year"]),O=I(["This Week"],["This Week"]),S=I(["This Month"],["This Month"]),C=I(["This Year"],["This Year"]),x=n(0),k=N(x),A=N(n(2)),T=n(1),P=N(n(4)),j=N(n(3));function N(e){return e&&e.__esModule?e:{default:e}}function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var F=[{name:(0,T.t)(s),operator:["=","<",">"],values:[["relative-datetime","current"]]},{name:(0,T.t)(c),operator:["=","<",">"],values:[["relative-datetime",-1,"day"]]},{name:(0,T.t)(d),operator:"time-interval",values:[-7,"day"]},{name:(0,T.t)(f),operator:"time-interval",values:[-30,"day"]}],z=(L(r={},(0,T.t)(p),[{name:(0,T.t)(m),operator:"time-interval",values:["last","week"]},{name:(0,T.t)(h),operator:"time-interval",values:["last","month"]},{name:(0,T.t)(v),operator:"time-interval",values:["last","year"]}]),L(r,(0,T.t)(y),[{name:(0,T.t)(m),operator:"time-interval",values:["current","week"]},{name:(0,T.t)(h),operator:"time-interval",values:["current","month"]},{name:(0,T.t)(v),operator:"time-interval",values:["current","year"]}]),r),q=t.PredefinedRelativeDatePicker=(i=a=function(e){function t(e,n){M(this,t);var r=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return j.default.bindAll(r,"isSelectedShortcut","onSetShortcut"),r}return D(t,x.Component),l(t,[{key:"isSelectedShortcut",value:function(e){var t=this.props.filter;return(Array.isArray(e.operator)?j.default.contains(e.operator,t[0]):t[0]===e.operator)&&j.default.isEqual(t.slice(2),e.values)}},{key:"onSetShortcut",value:function(e){var t=this.props.filter,n=void 0;n=Array.isArray(e.operator)?j.default.contains(e.operator,t[0])?t[0]:e.operator[0]:e.operator,this.props.onFilterChange([n,t[1]].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.values)))}},{key:"render",value:function(){var e=this;return k.default.createElement("div",{className:"p1 pt2"},k.default.createElement("section",null,F.map(function(t,n){return k.default.createElement("span",{key:n,className:(0,P.default)("inline-block half pb1",{pr1:n%2==0})},k.default.createElement("button",{key:n,className:(0,P.default)("Button Button-normal Button--medium text-normal text-centered full",{"Button--purple":e.isSelectedShortcut(t)}),onClick:function(){return e.onSetShortcut(t)}},t.name))})),Object.keys(z).map(function(t){return k.default.createElement("section",{key:t},k.default.createElement("div",{style:{},className:"border-bottom text-uppercase flex layout-centered mb2"},k.default.createElement("h6",{style:{position:"relative",backgroundColor:"white",top:"6px"},className:"px2"},t)),k.default.createElement("div",{className:"flex"},z[t].map(function(n,r){return k.default.createElement("button",{key:r,"data-ui-tag":"relative-date-shortcut-"+t.toLowerCase()+"-"+n.name.toLowerCase(),className:(0,P.default)("Button Button-normal Button--medium flex-full mb1",{"Button--purple":e.isSelectedShortcut(n),mr1:r!==z[t].length-1}),onClick:function(){return e.onSetShortcut(n)}},n.name)})))}))}}]),t}(),a.propTypes={filter:A.default.array.isRequired,onFilterChange:A.default.func.isRequired},i);q.displayName="PredefinedRelativeDatePicker";var B={today:{name:(0,T.t)(s),mapping:["=",null,["relative-datetime","current"]]},yesterday:{name:(0,T.t)(c),mapping:["=",null,["relative-datetime",-1,"day"]]},past7days:{name:(0,T.t)(g),mapping:["time-interval",null,-7,"day"]},past30days:{name:(0,T.t)(b),mapping:["time-interval",null,-30,"day"]},lastweek:{name:(0,T.t)(_),mapping:["time-interval",null,"last","week"]},lastmonth:{name:(0,T.t)(E),mapping:["time-interval",null,"last","month"]},lastyear:{name:(0,T.t)(w),mapping:["time-interval",null,"last","year"]},thisweek:{name:(0,T.t)(O),mapping:["time-interval",null,"current","week"]},thismonth:{name:(0,T.t)(S),mapping:["time-interval",null,"current","month"]},thisyear:{name:(0,T.t)(C),mapping:["time-interval",null,"current","year"]}},U=(u=o=function(e){function t(e,n){M(this,t);var r=R(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={},r}return D(t,x.Component),l(t,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.setValue,r=e.onClose;return k.default.createElement("div",{className:"px1",style:{maxWidth:300}},k.default.createElement(q,{filter:B[t]?B[t].mapping:[null,null],onFilterChange:function(e){n(j.default.findKey(B,function(t){return j.default.isEqual(t.mapping,e)})),r()}}))}}]),t}(),o.propTypes={},o.defaultProps={},o.format=function(e){return B[e]?B[e].name:""},u);U.displayName="DateRelativeWidget",t.default=U},692:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(0)),u=f(n(347)),l=n(20),s=f(n(8)),c=f(n(3)),d=f(n(4));function f(e){return e&&e.__esModule?e:{default:e}}var p=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=(0,s.default)(r.props.value,"YYYY-MM");return a.isValid()?r.state={month:a.month(),year:a.year()}:r.state={month:null,year:(0,s.default)().year()},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"componentWillUnmount",value:function(){var e=this.state,t=e.month,n=e.year;if(null!=t&&null!=n){var r=(0,s.default)().year(n).month(t).format("YYYY-MM");this.props.value!==r&&this.props.setValue(r)}}},{key:"render",value:function(){var e=this,t=this.props.onClose,n=this.state,r=n.month,a=n.year;return o.default.createElement("div",{style:{maxWidth:320}},o.default.createElement("div",{className:"border-bottom flex justify-center py1"},o.default.createElement(u.default,{value:a,onChange:function(t){return e.setState({year:t})}})),o.default.createElement(l.Flex,{flexWrap:"wrap",w:"100%",p:1},c.default.range(0,12).map(function(n){return o.default.createElement(l.Flex,{w:1/3,align:"center",justifyContent:"center"},o.default.createElement(m,{key:n,month:n,selected:n===r,onClick:function(){return e.setState({month:n},t)}}))})))}}]),t}(),r.propTypes={},r.defaultProps={},r.format=function(e){var t=(0,s.default)(e,"YYYY-MM");return t.isValid()?t.format("MMMM, YYYY"):""},a);p.displayName="DateMonthYearWidget",t.default=p;var m=function(e){var t=e.month,n=e.selected,r=e.onClick;return o.default.createElement("div",{className:(0,d.default)("cursor-pointer text-bold full text-centered py1 px2 circular my1",{"bg-light-hover":!n,"text-white bg-brand":n}),onClick:r},(0,s.default)().month(t).format("MMMM"))};m.displayName="Month"},693:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(i=["[Q]Q"],o=["[Q]Q"],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),s=n(0),c=h(s),d=h(n(347)),f=h(n(8)),p=h(n(3)),m=h(n(4));function h(e){return e&&e.__esModule?e:{default:e}}var v=(0,n(1).t)(l),y=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),a=(0,f.default)(r.props.value,"[Q]Q-YYYY");return a.isValid()?r.state={quarter:a.quarter(),year:a.year()}:r.state={quarter:null,year:(0,f.default)().year()},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),u(t,[{key:"componentWillUnmount",value:function(){var e=this.state,t=e.quarter,n=e.year;if(null!=t&&null!=n){var r=(0,f.default)().year(n).quarter(t).format("[Q]Q-YYYY");this.props.value!==r&&this.props.setValue(r)}}},{key:"render",value:function(){var e=this,t=this.props.onClose,n=this.state,r=n.quarter,a=n.year;return c.default.createElement("div",{className:"py2"},c.default.createElement("div",{className:"flex flex-column align-center px1"},c.default.createElement(d.default,{value:a,onChange:function(t){return e.setState({year:t})}})),c.default.createElement("ol",{className:"flex flex-wrap bordered mx2 text-bold rounded",style:{width:150}},p.default.range(1,5).map(function(n){return c.default.createElement(g,{quarter:n,selected:n===r,onClick:function(){return e.setState({quarter:n},t)}})})))}}]),t}(),r.propTypes={},r.defaultProps={},r.format=function(e){var t=(0,f.default)(e,"[Q]Q-YYYY");return t.isValid()?t.format("[Q]Q, YYYY"):""},a);y.displayName="DateQuarterYearWidget",t.default=y;var g=function(e){var t=e.quarter,n=e.selected,r=e.onClick;return c.default.createElement("li",{className:(0,m.default)("cursor-pointer bg-brand-hover text-white-hover flex layout-centered",{"bg-brand text-white":n}),style:{width:75,height:75},onClick:r},(0,f.default)().quarter(t).format(v))};g.displayName="Quarter"},694:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o,u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=(i=["Update filter"],o=["Update filter"],Object.freeze(Object.defineProperties(i,{raw:{value:Object.freeze(o)}}))),s=n(0),c=g(s),d=g(n(4)),f=n(1),p=n(141),m=g(p),h=g(n(317)),v=n(78),y=n(100);function g(e){return e&&e.__esModule?e:{default:e}}var b=null;function _(e){return function(t){return e(t[2],t[3],t[4]||{})}}var E={previous:_(function(e,t){return"past"+-e+t+"s"+((arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})["include-current"]?"~":"")}),next:_(function(e,t){return"next"+e+t+"s"+((arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})["include-current"]?"~":"")}),current:_(function(e,t){return"this"+t}),before:_(function(e){return"~"+e}),after:_(function(e){return e+"~"}),on:_(function(e){return""+e}),between:_(function(e,t){return e+"~"+t})};function w(e){return p.DATE_OPERATORS.find(function(t){return t.test(e)})}var O=new Set(["before","after","on","empty","not-empty"]);var S=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.commitAndClose=function(){var e,t;n.props.setValue((e=n.state.filter,(t=w(e))?E[t.name](e):null)),n.props.onClose()},n.setFilter=function(e){n.setState({filter:e})},n.state={filter:null!=e.value?(0,y.dateParameterValueToMBQL)(e.value,b)||[]:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),u(t,[{key:"isValid",value:function(){return this.state.filter.slice(2).every(function(e){return null!=e})}},{key:"render",value:function(){var e=this.state.filter;return c.default.createElement("div",{style:{minWidth:"300px"}},c.default.createElement(m.default,{className:"m2",filter:this.state.filter,onFilterChange:this.setFilter,hideEmptinessOperators:!0,hideTimeSelectors:!0}),c.default.createElement("div",{className:"FilterPopover-footer border-top flex align-center p2"},c.default.createElement(h.default,{filter:e,onFilterChange:this.setFilter,operator:(0,p.getOperator)(e)}),c.default.createElement("button",{className:(0,d.default)("Button Button--purple ml-auto",{disabled:!this.isValid()}),onClick:this.commitAndClose},(0,f.t)(l))))}}]),t}(),r.propTypes={},r.defaultProps={},r.format=function(e){if(null==e)return null;var t,n,r,a=(0,y.dateParameterValueToMBQL)(e,b);return a?(t=a,n=(0,v.generateTimeFilterValuesDescriptions)(t).join(" - "),((r=w(t))&&O.has(r.name)?r.displayName+" ":"")+n):null},a);S.displayName="DateAllOptionsWidget",t.default=S},695:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=v(["Enter a value..."],["Enter a value..."]),u=v(["Enter a default value..."],["Enter a default value..."]),l=n(0),s=h(l),c=h(n(15)),d=h(n(2)),f=n(25),p=n(1),m=n(104);function h(e){return e&&e.__esModule?e:{default:e}}function v(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var y=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={value:e.value,isFocused:!1},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.value!==e.value&&this.setState({value:e.value},function(){(0,f.forceRedraw)(c.default.findDOMNode(t))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.setValue,r=t.className,a=t.isEditing,i=t.focusChanged,l=this.state.isFocused?"":this.props.placeholder||(0,p.t)(o),c=function(t){i&&i(t),e.setState({isFocused:t})};return s.default.createElement("input",{className:r,type:"text",value:this.state.value||"",onChange:function(t){e.setState({value:t.target.value}),e.props.commitImmediately&&e.props.setValue(t.target.value||null)},onKeyUp:function(t){t.keyCode===m.KEYCODE_ESCAPE?t.target.blur():t.keyCode===m.KEYCODE_ENTER&&(n(e.state.value||null),t.target.blur())},onFocus:function(){c(!0)},onBlur:function(){c(!1),e.setState({value:e.props.value})},placeholder:a?(0,p.t)(u):l})}}]),t}(),r.propTypes={value:d.default.any,setValue:d.default.func.isRequired,className:d.default.string,isEditing:d.default.bool,commitImmediately:d.default.bool,placeholder:d.default.string,focusChanged:d.default.func},r.defaultProps={commitImmediately:!1},r.noPopover=!0,r.format=function(e){return e},a);y.displayName="TextWidget",t.default=y},696:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=y(["Enter a value..."],["Enter a value..."]),u=y([""," selection"],[""," selection"]),l=n(0),s=v(l),c=v(n(15)),d=n(1),f=v(n(316)),p=v(n(60)),m=v(n(19)),h=v(n(275));v(n(77));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=function(e){return Array.isArray(e)?e:null!=e?[e]:[]},b=(a=r=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isFocused:!1,value:e.value,widgetWidth:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),i(t,[{key:"componentWillReceiveProps",value:function(e){this.props.value!==e.value&&this.setState({value:e.value})}},{key:"componentDidUpdate",value:function(){var e=c.default.findDOMNode(this._unfocusedElement);if(!this.state.isFocused&&e){var t=e.parentNode.parentNode.parentNode;t.clientWidth!==this.state.widgetWidth&&this.setState({widgetWidth:t.clientWidth})}}},{key:"render",value:function(){var e=this,n=this.props,r=n.setValue,a=n.isEditing,i=n.fields,u=n.parentFocusChanged,l=this.state.isFocused,c=g(this.props.value),h=g(this.state.value),v=l?"":this.props.placeholder||(0,d.t)(o),y=function(t){u&&u(t),e.setState({isFocused:t})},b=a?"Enter a default value...":v;return l?s.default.createElement(p.default,{horizontalAttachments:["left","right"],verticalAttachments:["top"],alignHorizontalEdge:!0,alignVerticalEdge:!0,targetOffsetY:-19,targetOffsetX:33,hasArrow:!1,onClose:function(){return y(!1)}},s.default.createElement(f.default,{value:h,onChange:function(t){e.setState({value:t})},placeholder:b,fields:i,multi:!0,autoFocus:!0,color:"brand",style:{borderWidth:1,minWidth:this.state.widgetWidth?this.state.widgetWidth+2:null},className:"border-bottom",minWidth:400,maxWidth:400}),s.default.createElement("div",{className:"flex p1"},s.default.createElement(m.default,{primary:!0,className:"ml-auto",disabled:0===c.length&&0===h.length,onClick:function(){r(h.length>0?h:null),y(!1)}},c.length>0?"Update filter":"Add filter"))):s.default.createElement("div",{ref:function(t){return e._unfocusedElement=t},className:"flex-full cursor-pointer",onClick:function(){return y(!0)}},c.length>0?t.format(c,i):s.default.createElement("span",null,b))}}],[{key:"format",value:function(e,t){if((e=g(e)).length>1){var n=e.length;return(0,d.ngettext)((0,d.msgid)(u,n),n+" selections",n)}return s.default.createElement(h.default,{remap:1===t.length,value:e[0],column:t[0]})}}]),t}(),r.noPopover=!0,a);b.displayName="ParameterFieldWidget",t.default=b},697:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(0)),i=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.isNightMode,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["isNightMode"]);return a.default.createElement(i.default,r({name:t?"sun":"moon"},n))};u.displayName="NightModeIcon",t.default=u},698:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=o(n(0)),i=o(n(5));function o(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.isFullscreen,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["isFullscreen"]);return a.default.createElement(i.default,r({name:t?"contract":"expand"},n))};u.displayName="FullscreenIcon",t.default=u},699:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=C(["Off"],["Off"]),i=C(["1 minute"],["1 minute"]),o=C(["5 minutes"],["5 minutes"]),u=C(["10 minutes"],["10 minutes"]),l=C(["15 minutes"],["15 minutes"]),s=C(["30 minutes"],["30 minutes"]),c=C(["60 minutes"],["60 minutes"]),d=C(["Auto-refresh"],["Auto-refresh"]),f=C(["Refreshing in"],["Refreshing in"]),p=n(0),m=O(p),h=O(n(700)),v=O(n(37)),y=O(n(29)),g=O(n(5)),b=O(n(701)),_=O(n(702)),E=n(1),w=O(n(4));function O(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var x=[{name:(0,E.t)(a),period:null},{name:(0,E.t)(i),period:60},{name:(0,E.t)(o),period:300},{name:(0,E.t)(u),period:600},{name:(0,E.t)(l),period:900},{name:(0,E.t)(s),period:1800},{name:(0,E.t)(c),period:3600}],k=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=S(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={elapsed:null},S(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.Component),r(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.setRefreshElapsedHook;t&&t(function(t){return e.setState({elapsed:t})})}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.setRefreshElapsedHook;n&&e.setRefreshElapsedHook!==n&&n(function(e){return t.setState({elapsed:e})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.period,r=t.onChangePeriod,a=t.className,i=this.state.elapsed,o=n-i;return m.default.createElement(v.default,{ref:"popover",triggerElement:null==i?m.default.createElement(y.default,{tooltip:(0,E.t)(d)},m.default.createElement(b.default,{width:18,height:18,className:a})):m.default.createElement(y.default,{tooltip:(0,E.t)(f)+" "+Math.floor(o/60)+":"+(o%60<10?"0":"")+Math.round(o%60)},m.default.createElement(_.default,{width:18,height:18,className:"text-green",percent:Math.min(.95,(n-i)/n)})),targetOffsetY:10},m.default.createElement("div",{className:h.default.popover},m.default.createElement("div",{className:h.default.title},"Auto Refresh"),m.default.createElement(A,null,x.map(function(t){return m.default.createElement(T,{key:t.period,name:t.name,period:t.period,selected:t.period===n,onClick:function(){e.refs.popover.close(),r(t.period)}})}))))}}]),t}();k.displayName="RefreshWidget",t.default=k;var A=function(e){var t=e.children;return m.default.createElement("ul",null,t)};A.displayName="RefreshOptionList";var T=function(e){var t,n,r,a=e.name,i=e.period,o=e.selected,u=e.onClick;return m.default.createElement("li",{className:(0,w.default)(h.default.option,h.default[null==i?"off":"on"],(t={},n=h.default.selected,r=o,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),onClick:u},m.default.createElement(g.default,{name:"check",size:14}),m.default.createElement("span",{className:h.default.name},a.split(" ")[0]),m.default.createElement("span",{className:h.default.nameSuffix}," ",a.split(" ")[1]))};T.displayName="RefreshOption"},7:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.getColorScale=t.getRandomColor=t.HARMONY_GROUP_SIZE=t.desaturated=t.saturated=t.normal=t.harmony=t.aliases=void 0;var a=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.syncColors=y,t.roundColor=function(e){return e.replace(/rgba\((\d+(?:\.\d+)),\s*(\d+(?:\.\d+)),\s*(\d+(?:\.\d+)),\s*(\d+\.\d+)\)/,function(e,t,n,r,a){return"rgba("+Math.round(t)+","+Math.round(n)+","+Math.round(r)+","+a+")"})},t.color=g,t.alpha=function(e,t){return(0,o.default)(g(e)).alpha(t).string()},t.darken=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25;return(0,o.default)(g(e)).darken(t).string()},t.lighten=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;return(0,o.default)(g(e)).lighten(t).string()},t.getColorsForValues=C,t.getColorForValue=function(e){return C([e])[e]};var i=s(n(36)),o=s(n(263)),u=n(849),l=n(486);function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={brand:"#509EE3",accent1:"#88BF4D",accent2:"#A989C5",accent3:"#EF8C8C",accent4:"#F9D45C",accent5:"#F2A86F",accent6:"#98D9D9",accent7:"#7172AD","admin-navbar":"#7172AD",white:"#FFFFFF",black:"#2E353B",success:"#84BB4C",error:"#ED6E6E",warning:"#F9CF48","text-dark":"#2E353B","text-medium":"#74838f","text-light":"#C7CFD4","text-white":"#FFFFFF","bg-black":"#2E353B","bg-dark":"#93A1AB","bg-medium":"#EDF2F5","bg-light":"#F9FBFC","bg-white":"#FFFFFF","bg-yellow":"#FFFCF2",shadow:"rgba(0,0,0,0.08)",border:"#F0F0F0","saturated-blue":"#2D86D4","saturated-green":"#70A63A","saturated-purple":"#885AB1","saturated-red":"#ED6E6E","saturated-yellow":"#F9CF48"};t.default=d;var f=t.aliases={summarize:"accent1",filter:"accent7",database:"accent2",dashboard:"brand",pulse:"accent4",nav:"brand"},p=t.harmony=[],m=t.normal={},h=t.saturated={},v=t.desaturated={};function y(){!function(){var e=new u.Harmonizer,t=[d.brand,d.accent1,d.accent2,d.accent3,d.accent4,d.accent5,d.accent6,d.accent7];p.splice(0,p.length),p.push.apply(p,t);for(var n=t.slice(0,5).map(function(t){return e.harmonize(t,"fiveToneD")}),r=1;r<5;r++)for(var a=0;a<n.length;a++)p.push(n[a][r])}(),m.blue=h.blue=v.blue=d.brand,m.green=h.green=v.green=d.accent1,m.purple=h.purple=v.purple=d.accent2,m.red=h.red=v.red=d.accent3,m.yellow=h.yellow=v.yellow=d.accent4,m.orange=d.accent5,m.teal=d.accent6,m.indigo=d.accent7,m.gray=d["text-medium"],m.grey1=d["text-light"],m.grey2=d["text-medium"],m.grey3=d["text-dark"],m.text=d["text-dark"]}y();t.HARMONY_GROUP_SIZE=8;t.getRandomColor=function(e){var t=Object.values(e);return t[Math.floor(Math.random()*t.length)]},t.getColorScale=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return i.default.scale.quantile().domain(e).range(t);var n=a(e,2),r=n[0],o=n[1];return i.default.scale.linear().domain(3===t.length?[r,r+(o-r)/2,o]:[r,o]).range(t)};function g(e){return e in d?d[e]:e in f?d[f[e]]:e}var b=(c(r={},d.success,["success","succeeded","pass","passed","valid","complete","completed","accepted","active","profit"]),c(r,d.error,["error","fail","failed","failure","failures","invalid","rejected","inactive","loss","cost","deleted","pending"]),c(r,d.warning,["warn","warning","incomplete","unstable"]),c(r,d.brand,["count"]),c(r,d.accent1,["sum"]),c(r,d.accent2,["average"]),r),_={};for(var E in b)if(b.hasOwnProperty(E))for(var w=b[E],O=0;O<w.length;O++)_[w[O]]=E;function S(e){return _[e.toLowerCase()]}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.values(p),r=n.slice(0,8),a=n.slice(8);return(0,l.deterministicAssign)(e,r,t,S,[a])}},700:function(e,t){e.exports={popover:"_1PJaB",title:"_3oZM_",option:"_3sT2c _1a-AI",valueLabel:"UY_RI",on:"_1YWy_",selected:"BoMv1"}},701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),i=(r=a)&&r.__esModule?r:{default:r};var o=function(e){var t=e.hour,n=void 0===t?12:t,r=e.minute,a=void 0===r?40:r,o=e.width,u=void 0===o?20:o,l=e.height,s=void 0===l?20:l,c=e.className;return i.default.createElement("svg",{width:u,height:s,className:c,viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},i.default.createElement("circle",{cx:"10",cy:"10",r:"10",fill:"currentColor"}),i.default.createElement("line",{x1:"10",y1:"10",x2:"10",y2:"5",stroke:"white",strokeWidth:2,strokeLinecap:"round",transform:"rotate("+n%12/12*360+" 10 10)"}),i.default.createElement("line",{x1:"10",y1:"10",x2:"10",y2:"6",stroke:"white",strokeWidth:2,strokeLinecap:"round",transform:"rotate("+a%60/60*360+" 10 10)"}))};o.displayName="ClockIcon",t.default=o},702:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(0),i=(r=a)&&r.__esModule?r:{default:r};var o=function(e){var t=e.percent,n=void 0===t?.75:t,r=e.width,a=void 0===r?20:r,o=e.height,u=void 0===o?20:o,l=e.className;return i.default.createElement("svg",{width:a,height:u,className:l,viewBox:"0 0 32 32",style:{transform:"rotate(-"+(360*n+90)+"deg)",borderRadius:"50%"}},i.default.createElement("circle",{r:"16",cx:"16",cy:"16",fill:"currentColor",stroke:"currentColor",fillOpacity:"0.5",strokeWidth:"32",strokeDasharray:100*n+" 100"}))};o.displayName="CountdownIcon",t.default=o},703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(0),o=d(i),u=d(n(15)),l=d(n(704)),s=d(n(3)),c=n(7);function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={width:0,layout:e.layout,dragging:!1,resizing:!1,placeholderLayout:null},s.default.bindAll(r,"onDrag","onDragStart","onDragStop","onResize","onResizeStart","onResizeStop"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),a(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state,n=t.dragging,r=t.resizing;n||r||this.state.layout===e.layout||this.setState({layout:e.layout})}},{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=u.default.findDOMNode(this).parentNode.offsetWidth;this.state.width!==e&&this.setState({width:e})}},{key:"onDragStart",value:function(e,t){t.position}},{key:"layoutsOverlap",value:function(e,t){return e.x<t.x+t.w&&t.x<e.x+e.w&&e.y<t.y+t.h&&t.y<e.y+e.h}},{key:"onDrag",value:function(e,t){var n=t.position,a=r({},this.computeDraggedLayout(e,n),{i:"placeholder"});this.setState({dragging:!0,placeholderLayout:a}),this.props.onDrag()}},{key:"onDragStop",value:function(e,t){t.position;var n=this.state.placeholderLayout,a=void 0;if(n){var i=n.x,o=n.y,u=n.w,l=n.h;a=this.state.layout.map(function(t){return t.i===e?r({},t,{x:i,y:o,w:u,h:l}):t})}this.setState({dragging:!1,placeholderLayout:null}),a&&this.props.onLayoutChange(a),this.props.onDragStop()}},{key:"computeDraggedLayout",value:function(e,t){var n=this.getCellSize(),r=this.getLayoutForItem(e),a=this.getStyleForLayout(r);a.top+=t.y,a.left+=t.x;var i=this.props.cols-r.w,o={w:r.w,h:r.h,x:Math.min(i,Math.max(0,Math.round(a.left/n.width))),y:Math.min(1/0,Math.max(0,Math.round(a.top/n.height)))},u=!0,l=!1,s=void 0;try{for(var c,d=this.state.layout[Symbol.iterator]();!(u=(c=d.next()).done);u=!0){var f=c.value;if(r!==f&&this.layoutsOverlap(o,f))return this.state.placeholderLayout||r}}catch(e){l=!0,s=e}finally{try{!u&&d.return&&d.return()}finally{if(l)throw s}}return o}},{key:"onResizeStart",value:function(e,t){var n=t.size;this.setState({resizing:!0}),this.onResize(e,{size:n})}},{key:"onResize",value:function(e,t){var n=t.size,a=r({},this.computeResizedLayout(e,n),{i:"placeholder"});this.setState({placeholderLayout:a})}},{key:"onResizeStop",value:function(e,t){var n=this,a=(t.size,this.state.placeholderLayout),i=a.x,o=a.y,u=a.w,l=a.h,s=this.state.layout.map(function(t){return t.i===e?r({},t,{x:i,y:o,w:u,h:l}):t});this.setState({resizing:!1,placeholderLayout:null},function(){return n.props.onLayoutChange(s)})}},{key:"computeResizedLayout",value:function(e,t){var n=this.getCellSize(),r=this.getLayoutForItem(e),a=r.minSize.width,i=r.minSize.height,o=this.props.cols-r.x,u={w:Math.min(o,Math.max(a,Math.round(t.width/n.width))),h:Math.min(1/0,Math.max(i,Math.round(t.height/n.height))),x:r.x,y:r.y},l=!0,s=!1,c=void 0;try{for(var d,f=this.state.layout[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p=d.value;if(r!==p&&this.layoutsOverlap(u,p))return this.state.placeholderLayout||r}}catch(e){s=!0,c=e}finally{try{!l&&f.return&&f.return()}finally{if(s)throw c}}return u}},{key:"getLayoutForItem",value:function(e){return s.default.findWhere(this.state.layout,{i:e})}},{key:"getCellSize",value:function(){var e=this.props.margin;return{width:(this.state.width+e)/this.props.cols,height:this.props.rowHeight}}},{key:"getMinSizeForLayout",value:function(e){var t=this.props.margin,n=this.getCellSize();return{width:n.width*e.minSize.width-t,height:n.height*e.minSize.height-t}}},{key:"getStyleForLayout",value:function(e){var t=this.props.margin,n=this.getCellSize();return{width:n.width*e.w-t,height:n.height*e.h-t,left:n.width*e.x+t/2,top:n.height*e.y+t/2}}},{key:"renderChild",value:function(e){var t=this.getLayoutForItem(e.key),n=this.getStyleForLayout(t);return o.default.createElement(l.default,r({},t,n,{key:t.i,onDragStart:this.onDragStart,onDrag:this.onDrag,onDragStop:this.onDragStop,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,minSize:this.getMinSizeForLayout(t)}),e)}},{key:"renderPlaceholder",value:function(){if(this.state.placeholderLayout){var e=r({},this.getStyleForLayout(this.state.placeholderLayout));return o.default.createElement("div",{className:"react-grid-placeholder absolute",style:e})}}},{key:"getGridBackground",value:function(){var e=this.props,t=e.margin,n=e.cols,r=this.getCellSize(),a="<svg xmlns='http://www.w3.org/2000/svg' width='"+r.width*n+"' height='"+r.height+"'>"+(0,s.default)(n).times(function(e){return"<rect stroke='"+(0,c.color)("border")+"' stroke-width='1' fill='none' x='"+(Math.round(t/2+e*r.width)+1.5)+"' y='"+(t/2+1.5)+"' width='"+Math.round(r.width-t-3)+"' height='"+(r.height-t-3)+"'/>"}).join("")+"</svg>";return'url("data:image/svg+xml;utf8,'+encodeURIComponent(a)+'")'}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.layout,a=t.cols,i=t.margin,u=t.isEditing,l=this.getCellSize(),s=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(r.map(function(e){return e.y+e.h}))),c=void 0;u&&(c=this.getGridBackground(),s+=Math.ceil(window.innerHeight/l.height));var d=l.width*a,f=l.height*s;return o.default.createElement("div",{className:n,style:{position:"relative",width:d,height:f,backgroundImage:c,marginLeft:-i/2,marginRight:-i/2}},this.props.children.map(function(t){return e.renderChild(t)}),this.renderPlaceholder())}}]),t}();f.displayName="GridLayout",t.default=f},704:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),i=s(a),o=n(443),u=n(791),l=s(n(4));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.state={dragging:null,resizing:null},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),r(t,[{key:"onDragHandler",value:function(e){var t=this;return function(n,r){var a=r.node,i=r.x,o=r.y;if(!isNaN(i)&&!isNaN(o)){var u=t.state,l=u.dragStartPosition,s=u.dragStartScrollTop;"onDragStart"===e&&(l={x:i,y:o},s=document.body.scrollTop,t.setState({dragStartPosition:l,dragStartScrollTop:s}));var c=document.body.scrollTop-s,d={x:i-l.x,y:o-l.y+c};"onDragStop"===e?t.setState({dragging:null}):t.setState({dragging:d}),t.props[e](t.props.i,{e:n,node:a,position:d})}}}},{key:"onResizeHandler",value:function(e){var t=this;return function(n,r){var a=r.element,i=r.size;"onResize"===e&&t.setState({resizing:i}),"onResizeStop"===e&&t.setState({resizing:null}),t.props[e](t.props.i,{e:n,element:a,size:i})}}},{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.top,a=e.left,s=e.minSize;this.state.dragging&&(a+=this.state.dragging.x,r+=this.state.dragging.y),this.state.resizing&&(t=Math.max(s.width,this.state.resizing.width),n=Math.max(s.height,this.state.resizing.height));var c={width:t,height:n,top:r,left:a,position:"absolute"},d=i.default.Children.only(this.props.children);return i.default.createElement(o.DraggableCore,{cancel:".react-resizable-handle, .drag-disabled",onStart:this.onDragHandler("onDragStart"),onDrag:this.onDragHandler("onDrag"),onStop:this.onDragHandler("onDragStop")},i.default.createElement(u.Resizable,{width:t,height:n,onResizeStart:this.onResizeHandler("onResizeStart"),onResize:this.onResizeHandler("onResize"),onResizeStop:this.onResizeHandler("onResizeStop")},i.default.cloneElement(d,{style:c,className:(0,l.default)(d.props.className,{dragging:!!this.state.dragging,resizing:!!this.state.resizing})})))}}]),t}();c.displayName="GridItem",t.default=c},705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=P(["Edit"],["Edit"]),l=P(["Add"],["Add"]),s=n(0),c=T(s),d=T(n(2)),f=T(n(15)),p=n(1),m=n(47),h=T(m),v=n(122),y=T(v),g=T(n(282)),b=T(n(153)),_=n(450),E=T(n(5)),w=T(n(707)),O=n(226),S=T(n(4)),C=T(n(3)),x=n(11),k=n(100),A=T(n(35));function T(e){return e&&e.__esModule?e:{default:e}}function P(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var j={padding:4},N=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),o(t,[{key:"componentDidMount",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.dashcard,r=t.markNewCardSeen,n.justAdded&&((a=f.default.findDOMNode(this))&&a.scrollIntoView&&a.scrollIntoView({block:"nearest"}),r(n.id));case 2:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})});return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.clearInterval(this.visibilityTimer)}},{key:"render",value:function(){var e=this.props,t=e.dashcard,n=e.dashcardData,r=e.slowCards,a=e.isEditing,o=e.isEditingParameter,u=e.isFullscreen,l=e.onAddSeries,s=e.onRemove,d=e.navigateToNewCardFromDashboard,f=e.metadata,p=e.dashboard,m=e.parameterValues,h=e.mode,b=i({},t.card,{visualization_settings:i({},t.card.visualization_settings,t.visualization_settings)}),_=[b].concat(t.series||[]),E=t.dashboard_id,T=A.default.isJWT(E),P=_.map(function(e){return i({},(0,x.getIn)(n,[t.id,e.id]),{card:e,isSlow:r[e.id],isUsuallyFast:e.query_average_duration&&e.query_average_duration<15e3})}),j=!(P.length>0&&C.default.every(P,function(e){return e.data})),N=Math.max.apply(Math,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(P.map(function(e){return e.card.query_average_duration||0}))),R=C.default.every(P,function(e){return e.isUsuallyFast}),D=j&&C.default.some(P,function(e){return e.isSlow})&&(R?"usually-fast":"usually-slow"),L=P.map(function(e){return e.error}).filter(function(e){return e}),I=void 0,F=void 0;C.default.any(L,function(e){return e&&403===e.status})?(I=v.ERROR_MESSAGE_PERMISSION,F="key"):L.length>0&&(I=O.IS_EMBED_PREVIEW?L[0]&&L[0].data||v.ERROR_MESSAGE_GENERIC:v.ERROR_MESSAGE_GENERIC,F="warning");var z=(0,k.getParametersBySlug)(p.parameters,m),q=!a&&!1===b.visualization_settings["dashcard.background"];return c.default.createElement("div",{className:(0,S.default)("Card bordered rounded flex flex-column hover-parent hover--visibility",{"Card--recent":t.isAdded,"Card--slow":"usually-slow"===D}),style:q?{border:0,background:"transparent",boxShadow:"none"}:null},c.default.createElement(y.default,{className:"flex-full",classNameWidgets:T&&"text-light text-medium-hover",error:I,errorIcon:F,isSlow:D,expectedDuration:N,rawSeries:P,showTitle:!0,isFullscreen:u,isDashboard:!0,isEditing:a,gridSize:this.props.isMobile?void 0:{width:t.sizeX,height:t.sizeY},actionButtons:a&&!o?c.default.createElement(M,{series:P,onRemove:s,onAddSeries:l,onReplaceAllVisualizationSettings:this.props.onReplaceAllVisualizationSettings}):T?c.default.createElement(g.default,{className:"m1 text-brand-hover text-light",classNameClose:"hover-child",card:t.card,params:z,dashcardId:t.id,token:t.dashboard_id,icon:"download"}):void 0,onUpdateVisualizationSettings:this.props.onUpdateVisualizationSettings,replacementContent:o&&c.default.createElement(w.default,{dashcard:t}),metadata:f,mode:h,onChangeCardAndRun:d?function(e){var n=e.nextCard,r=e.previousCard;d({nextCard:n,previousCard:r,dashcard:t})}:null,onChangeLocation:this.props.onChangeLocation}))}}]),t}(),r.propTypes={dashcard:d.default.object.isRequired,dashcardData:d.default.object.isRequired,slowCards:d.default.object.isRequired,parameterValues:d.default.object.isRequired,markNewCardSeen:d.default.func.isRequired,fetchCardData:d.default.func.isRequired,navigateToNewCardFromDashboard:d.default.func.isRequired},a);N.displayName="DashCard",t.default=N;var M=function(e){var t=e.series,n=e.onRemove,r=e.onAddSeries,a=e.onReplaceAllVisualizationSettings;return c.default.createElement("span",{className:"DashCard-actions flex align-center",style:{lineHeight:1}},(0,m.getVisualizationRaw)(t).visualization.supportsSeries&&c.default.createElement(L,{series:t,onAddSeries:r}),a&&!(0,m.getVisualizationRaw)(t).visualization.disableSettingsConfig&&c.default.createElement(R,{series:t,onReplaceAllVisualizationSettings:a}),c.default.createElement(D,{onRemove:n}))};M.displayName="DashCardActionButtons";var R=function(e){var t=e.series,n=e.onReplaceAllVisualizationSettings;return c.default.createElement(b.default,{wide:!0,tall:!0,triggerElement:c.default.createElement(E.default,{name:"gear",size:16,style:j}),triggerClasses:"text-light text-medium-hover cursor-pointer flex align-center flex-no-shrink mr1 drag-disabled"},c.default.createElement(_.ChartSettingsWithState,{className:"spread",series:t,onChange:n,isDashboard:!0}))};R.displayName="ChartSettingsButton";var D=function(e){var t=e.onRemove;return c.default.createElement("a",{className:"text-light text-medium-hover drag-disabled","data-metabase-event":"Dashboard;Remove Card Modal",onClick:t,style:j},c.default.createElement(E.default,{name:"close",size:16}))};D.displayName="RemoveButton";var L=function(e){var t=e.series,n=e.onAddSeries;return c.default.createElement("a",{"data-metabase-event":"Dashboard;Edit Series Modal;open",className:"text-light text-medium-hover cursor-pointer h3 flex-no-shrink relative mr1 drag-disabled",onClick:n,style:j},c.default.createElement("span",{className:"flex align-center"},c.default.createElement("span",{className:"flex"},c.default.createElement(E.default,{className:"absolute",name:"add",style:{top:0,left:0},size:8}),c.default.createElement(E.default,{name:function(e){try{var t=e[0].card.display;return h.default.get("scalar"===t?"bar":t).iconName}catch(e){return"bar"}}(t),size:16})),c.default.createElement("span",{className:"flex-no-shrink text-bold"}," ",t.length>1?(0,p.t)(u):(0,p.t)(l))))};L.displayName="AddSeriesButton"},706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=f(n(0)),o=f(n(2)),u=n(20),l=n(7),s=n(23),c=f(n(5)),d=f(n(385));function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){var t=e.children,n=e.method,r=e.url,o=e.params,f=e.extensions,p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children","method","url","params","extensions"]);return i.default.createElement(u.Box,null,i.default.createElement("form",{method:n,action:r},o&&(0,s.extractQueryParams)(o).map(m),i.default.createElement(u.Flex,a({is:"button",className:"text-white-hover bg-brand-hover rounded cursor-pointer full hover-parent hover--inherit",align:"center",px:1,onClick:function(e){window.OSX&&(e.preventDefault(),window.OSX.download(n,r,o,f))}},p),i.default.createElement(c.default,{name:t,size:32,mr:1,color:function(e){switch(e){case"csv":return(0,l.color)("accent7");case"xlsx":return(0,l.color)("accent1");case"json":return(0,l.color)("bg-dark");default:return(0,l.color)("brand")}}(t)}),i.default.createElement(d.default,{className:"text-bold"},".",t))))};p.displayName="DownloadButton";var m=function(e){var t=r(e,2),n=t[0],a=t[1];return i.default.createElement("input",{type:"hidden",name:n,value:a})};m.displayName="getInput",p.propTypes={url:o.default.string.isRequired,method:o.default.string,params:o.default.object,extensions:o.default.array},p.defaultProps={method:"POST",params:{},extensions:[]},t.default=p},707:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["Make sure to make a selection for each series, or the filter won't work on this card."],a=["Make sure to make a selection for each series, or the filter won't work on this card."],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=c(n(0)),u=n(1),l=c(n(708)),s=n(7);function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=e.dashcard;return o.default.createElement("div",{className:"relative flex-full flex flex-column layout-centered"},t.series&&t.series.length>0&&o.default.createElement("div",{className:"mx4 my1 p1 rounded",style:{backgroundColor:(0,s.color)("bg-light"),color:(0,s.color)("text-medium"),marginTop:-10}},(0,u.t)(i)),o.default.createElement("div",{className:"flex mx4 z1",style:{justifyContent:"space-around"}},[t.card].concat(t.series||[]).map(function(e){return o.default.createElement(l.default,{key:t.id+","+e.id,dashcard:t,card:e})})))};d.displayName="DashCardParameterMapper",t.default=d},708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=k(["This field only accepts a single value because it's used in a SQL query."],["This field only accepts a single value because it's used in a SQL query."]),l=k(["No valid fields"],["No valid fields"]),s=k(["Select…"],["Select…"]),c=n(0),d=C(c),f=C(n(2)),p=n(6),m=n(1),h=C(n(709)),v=C(n(5)),y=C(n(29)),g=C(n(710)),b=n(21),_=n(194),E=n(166),w=C(n(4)),O=n(11),S=C(n(138));function C(e){return e&&e.__esModule?e:{default:e}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function A(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var T={setParameterMapping:E.setParameterMapping,fetchDatabaseMetadata:b.fetchDatabaseMetadata},P=(0,p.connect)(function(){var e=(0,_.makeGetParameterMappingOptions)();return function(t,n){return{parameter:(0,_.getEditingParameter)(t,n),mappingOptions:e(t,n),target:(0,_.getParameterTarget)(t,n),mappingsByParameter:(0,_.getMappingsByParameter)(t,n)}}},T)((i=a=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=A(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleChangeTarget=function(e){var t=r.props,n=t.setParameterMapping,a=t.parameter,i=t.dashcard,o=t.card;n(a.id,i.id,o.id,e)},A(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.Component),o(t,[{key:"componentDidMount",value:function(){var e=this.props.card;e.dataset_query instanceof S.default&&this.props.fetchDatabaseMetadata(e.dataset_query.database)}},{key:"render",value:function(){var e=this,t=this.props,n=t.mappingOptions,r=t.target,a=t.mappingsByParameter,i=t.parameter,o=t.dashcard,c=t.card,f=(0,O.getIn)(a,[i.id,o.id,c.id]),p=!!(f&&f.mappingsWithValues>1&&1===f.overlapMax),b=null;return r&&"variable"===r[0]&&!i.type.startsWith("date/")&&(b=(0,m.t)(u)),d.default.createElement("div",{className:"mx1 flex flex-column align-center drag-disabled"},o.series&&o.series.length>0&&d.default.createElement("div",{className:"h5 mb1 text-bold",style:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflowX:"hidden",maxWidth:100}},c.name),d.default.createElement(g.default,{target:r,onChange:this.handleChangeTarget,mappingOptions:n},function(t){var n,r=t.selected,a=t.disabled;return d.default.createElement(y.default,{tooltip:a?"This card doesn't have any fields or parameters that can be mapped to this parameter type.":p?"The values in this field don't overlap with the values of any other fields you've chosen.":null,verticalAttachments:["bottom","top"]},d.default.createElement("div",{className:(0,w.default)(h.default.button,(n={},x(n,h.default.mapped,!!r),x(n,h.default.warn,p),x(n,h.default.disabled,a),n))},d.default.createElement("span",{className:"text-centered mr1"},a?(0,m.t)(l):r?r.name:(0,m.t)(s)),r?d.default.createElement(v.default,{className:"flex-align-right",name:"close",size:16,onClick:function(t){e.handleChangeTarget(null),t.stopPropagation()}}):a?null:d.default.createElement(v.default,{className:"flex-align-right",name:"chevrondown",size:16})))}),b&&d.default.createElement("span",{style:{height:0},className:"mt1 mbn1 px4 text-centered"},b))}}]),t}(),a.propTypes={dashcard:f.default.object.isRequired,card:f.default.object.isRequired},a.defaultProps={},r=i))||r;P.displayName="DashCardCardParameterMapper",t.default=P},709:function(e,t){e.exports={button:"_31Acd _38618 _3Dqep eTBAP _3TD8R _1a-AI",mapped:"_1cuH0",warn:"_2bBGA",disabled:"_3fcMT _1f32L"}},710:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(0)),u=f(n(37)),l=f(n(711)),s=f(n(124)),c=f(n(3)),d=f(n(4));function f(e){return e&&e.__esModule?e:{default:e}}var p=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.target,r=t.onChange,a=t.mappingOptions,i=t.placeholder,s=t.children,f=0===a.length,p=c.default.find(a,function(e){return c.default.isEqual(e.target,n)});return o.default.createElement(u.default,{ref:"popover",triggerClasses:(0,d.default)({disabled:f}),sizeToFit:!0,triggerElement:"function"==typeof s?s({selected:p,disabled:f,placeholder:i}):s},o.default.createElement(l.default,{onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){r(t),e.refs.popover.close()}),target:n,mappingOptions:a}))}}]),t}(),r.defaultProps={children:function(e){var t=e.selected,n=e.placeholder;return o.default.createElement(s.default,{hasValue:!!t,className:"border-med"},t?t.name:n||"Select a target")}},a);p.displayName="ParameterTargetWidget",t.default=p},711:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=l(n(0)),i=l(n(170)),o=l(n(5)),u=l(n(3));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.Component),r(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.target,r=t.mappingOptions,l=u.default.groupBy(r,"sectionName"),s=u.default.any(r,function(e){return!!e.isForeign}),c=u.default.map(l,function(e){return{name:e[0].sectionName,items:e}});return a.default.createElement(i.default,{className:"text-brand",maxHeight:this.props.maxHeight||600,sections:c,onChange:function(t){return e.props.onChange(t.target)},itemIsSelected:function(e){return u.default.isEqual(e.target,n)},renderItemIcon:function(e){return a.default.createElement(o.default,{name:e.icon||"unknown",size:18})},alwaysExpanded:!0,hideSingleSectionTitle:!s})}}]),t}();s.displayName="ParameterTargetList",t.default=s},712:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=y(["Remove this question?"],["Remove this question?"]),u=y(["Cancel"],["Cancel"]),l=y(["Remove"],["Remove"]),s=n(0),c=v(s),d=v(n(2)),f=n(1),p=v(n(16)),m=v(n(19)),h=v(n(45));function v(e){return e&&e.__esModule?e:{default:e}}function y(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var g=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),i(t,[{key:"onRemove",value:function(){this.props.removeCardFromDashboard({dashId:this.props.dashboard.id,dashcardId:this.props.dashcard.id}),this.props.onClose(),p.default.trackEvent("Dashboard","Remove Card")}},{key:"render",value:function(){var e=this,t=this.props.onClose;return c.default.createElement(h.default,{title:(0,f.t)(o),onClose:function(){return t()}},c.default.createElement("div",{className:"flex-align-right"},c.default.createElement(m.default,{onClick:t},(0,f.t)(u)),c.default.createElement(m.default,{danger:!0,ml:2,onClick:function(){return e.onRemove()}},(0,f.t)(l))))}}]),t}(),r.propTypes={dashcard:d.default.object.isRequired,dashboard:d.default.object.isRequired,removeCardFromDashboard:d.default.func.isRequired,onClose:d.default.func.isRequired},a);g.displayName="RemoveFromDashboardModal",t.default=g},713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=D(["Applying Question"],["Applying Question"]),s=D(["That question isn't compatible"],["That question isn't compatible"]),c=D(["Done"],["Done"]),d=D(["Cancel"],["Cancel"]),f=D(["Search for a question"],["Search for a question"]),p=D(["We're not sure if this question is compatible"],["We're not sure if this question is compatible"]),m=n(0),h=R(m),v=R(n(2)),y=n(1),g=R(n(4)),b=n(11),_=n(6),E=n(32),w=R(n(122)),O=R(n(38)),S=R(n(5)),C=R(n(29)),x=R(n(110)),k=R(n(16)),A=n(7),T=R(n(102)),P=n(27),j=n(21),N=R(n(39)),M=n(47);function R(e){return e&&e.__esModule?e:{default:e}}function D(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var F=(0,E.createSelector)([P.getMetadata,function(e,t){return t.questions}],function(e,t){return t&&t.map(function(t){return new N.default(t,e)})}),z=T.default.loadList({query:{f:"all"}})(r=(0,_.connect)(function(e,t){return{questions:F(e,t)}},{loadMetadataForQueries:j.loadMetadataForQueries})((i=a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.handleSearchFocus=function(){k.default.trackEvent("Dashboard","Edit Series Modal","search")},r.handleSearchChange=function(e){r.setState({searchValue:e.target.value.toLowerCase()})},r.handleDone=function(){r.props.setDashCardAttributes({id:r.props.dashcard.id,attributes:{series:r.state.series}}),r.props.onClose(),k.default.trackEvent("Dashboard","Edit Series Modal","done")},r.filteredQuestions=function(){var e=r.props,t=e.questions,n=e.dashcard,a=e.dashcardData,i=r.state.searchValue,o={card:n.card,data:(0,b.getIn)(a,[n.id,n.card.id,"data"])},u=(0,M.getVisualizationRaw)([{card:n.card}]).visualization;return t.filter(function(e){try{return e.id()!==n.card.id&&(!(e.isStructured()&&!u.seriesAreCompatible(o,{card:e.card(),data:{cols:e.query().columns(),rows:[]}}))&&!(i&&e.displayName().toLowerCase().indexOf(i)<0))}catch(e){return console.warn(e),!1}})},r.state={searchValue:"",error:null,series:e.dashcard.series||[],badQuestions:{}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m.Component),u(t,[{key:"componentWillMount",value:function(){var e=I(regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.questions,r=t.loadMetadataForQueries,e.prev=1,e.next=4,r(n.map(function(e){return e.query()}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("AddSeriesModal loadMetadataForQueries",e.t0),this.setState({error:e.t0});case 10:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleQuestionSelectedChange",value:function(){var e=I(regeneratorRuntime.mark(function e(t,n){var r,a,i,u,l,s,c,d,f=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.dashcard,i=r.dashcardData,u=(0,M.getVisualizationRaw)([{card:a.card}]),l=u.visualization,s=t.card(),e.prev=3,!n){e.next=14;break}if(void 0!==(0,b.getIn)(i,[a.id,s.id])){e.next=9;break}return this.setState({state:"loading"}),e.next=9,this.props.fetchCardData(s,a,{reload:!1,clear:!0});case 9:c=(0,b.getIn)(this.props.dashcardData,[a.id,a.card.id]),d=(0,b.getIn)(this.props.dashcardData,[a.id,s.id]),l.seriesAreCompatible({card:a.card,data:c.data},{card:s,data:d.data})?(this.setState({state:null,series:this.state.series.concat(s)}),k.default.trackEvent("Dashboard","Add Series",s.display+", success")):(this.setState({state:"incompatible",badQuestions:o({},this.state.badQuestions,L({},s.id,!0))}),setTimeout(function(){return f.setState({state:null})},2e3),k.default.trackEvent("Dashboard","Add Series",s.dataset_query.type+", "+s.display+", fail")),e.next=16;break;case 14:this.setState({series:this.state.series.filter(function(e){return e.id!==s.id})}),k.default.trackEvent("Dashboard","Remove Series");case 16:e.next=23;break;case 18:e.prev=18,e.t0=e.catch(3),console.error("AddSeriesModal handleQuestionChange",e.t0),this.setState({state:"incompatible",badQuestions:o({},this.state.badQuestions,L({},s.id,!0))}),setTimeout(function(){return f.setState({state:null})},2e3);case 23:case"end":return e.stop()}},e,this,[[3,18]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleRemoveSeries",value:function(e){this.setState({series:this.state.series.filter(function(t){return t.id!==e.id})}),k.default.trackEvent("Dashboard","Remove Series")}},{key:"render",value:function(){var e=this,t=this.props,n=t.dashcard,r=t.dashcardData,a=t.questions,i=this.state.badQuestions,o=this.state.error,u=void 0;!o&&a&&(0===(u=this.filteredQuestions()).length&&(o=new Error("Whoops, no compatible questions match your search.")),u.sort(function(e,t){return e.isNative()?t.isNative()?0:-1:1}));var m={},v=!0,_=!1,E=void 0;try{for(var k,T=this.state.series[Symbol.iterator]();!(v=(k=T.next()).done);v=!0){var P=k.value;m[P.id]=!0}}catch(e){_=!0,E=e}finally{try{!v&&T.return&&T.return()}finally{if(_)throw E}}var j=[n.card].concat(this.state.series).map(function(e){return{card:e,data:(0,b.getIn)(r,[n.id,e.id,"data"])}}).filter(function(e){return!!e.data});return h.default.createElement("div",{className:"spread flex"},h.default.createElement("div",{className:"flex flex-column flex-full"},h.default.createElement("div",{className:"flex-no-shrink h3 pl4 pt4 pb2 text-bold"},"Edit data"),h.default.createElement("div",{className:"flex-full ml2 mr1 relative"},h.default.createElement(w.default,{className:"spread",rawSeries:j,showTitle:!0,isDashboard:!0,isMultiseries:!0,onRemoveSeries:this.handleRemoveSeries}),this.state.state&&h.default.createElement("div",{className:"spred flex layout-centered",style:{backgroundColor:(0,A.color)("bg-white")}},"loading"===this.state.state?h.default.createElement("div",{className:"h3 rounded bordered p3 bg-white shadowed"},(0,y.t)(l)):"incompatible"===this.state.state?h.default.createElement("div",{className:"h3 rounded bordered p3 bg-error border-error text-white"},(0,y.t)(s)):null)),h.default.createElement("div",{className:"flex-no-shrink pl4 pb4 pt1"},h.default.createElement("button",{className:"Button Button--primary",onClick:this.handleDone},(0,y.t)(c)),h.default.createElement("button",{"data-metabase-event":"Dashboard;Edit Series Modal;cancel",className:"Button ml2",onClick:this.props.onClose},(0,y.t)(d)))),h.default.createElement("div",{className:"border-left flex flex-column",style:{width:370,backgroundColor:(0,A.color)("bg-light"),borderColor:(0,A.color)("border")}},h.default.createElement("div",{className:"flex-no-shrink border-bottom flex flex-row align-center",style:{borderColor:(0,A.color)("border")}},h.default.createElement(S.default,{className:"ml2",name:"search",size:16}),h.default.createElement("input",{className:"h4 input full pl1",style:{border:"none",backgroundColor:"transparent"},type:"search",placeholder:(0,y.t)(f),onFocus:this.handleSearchFocus,onChange:this.handleSearchChange})),h.default.createElement(O.default,{className:"flex flex-full",loading:!u,error:o,noBackground:!0},function(){return h.default.createElement("ul",{className:"flex-full scroll-y scroll-show pr1"},u.map(function(t){return h.default.createElement("li",{key:t.id(),className:(0,g.default)("my1 pl2 py1 flex align-center",{disabled:i[t.id()]})},h.default.createElement("span",{className:"px1 flex-no-shrink"},h.default.createElement(x.default,{checked:m[t.id()],onChange:function(n){return e.handleQuestionSelectedChange(t,n.target.checked)}})),h.default.createElement("span",{className:"px1"},t.displayName()),!t.isStructured()&&h.default.createElement(C.default,{tooltip:(0,y.t)(p)},h.default.createElement(S.default,{className:"px1 flex-align-right text-light text-medium-hover cursor-pointer flex-no-shrink",name:"warning",size:20})))}))})))}}]),t}(),a.propTypes={dashcard:v.default.object.isRequired,questions:v.default.array,dashcardData:v.default.object.isRequired,fetchCardData:v.default.func.isRequired,fetchDatabaseMetadata:v.default.func.isRequired,setDashCardAttributes:v.default.func.isRequired,onClose:v.default.func.isRequired},a.defaultProps={},r=i))||r)||r;z.displayName="AddSeriesModal",t.default=z},719:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=w(o),l=n(6),s=w(n(122)),c=w(n(282)),d=w(n(38)),f=w(n(52)),p=w(n(223)),m=n(100),h=n(80),v=n(17),y=n(131),g=n(21),b=n(27),_=w(n(355)),E=n(11);function w(e){return e&&e.__esModule?e:{default:e}}function O(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var S={setErrorPage:y.setErrorPage,addParamValues:g.addParamValues,addFields:g.addFields},C=(0,l.connect)(function(e){return{metadata:(0,b.getMetadata)(e)}},S)(r=(0,f.default)()(r=function(e){function t(e){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.setParameterValue=function(e,t){var n,i,o;r.setState({parameterValues:a({},r.state.parameterValues,(n={},i=e,o=t,i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n))},r.run)},r.run=O(regeneratorRuntime.mark(function e(){var t,i,o,u,l,s,c,d,f,p,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props,i=t.setErrorPage,o=t.params,u=o.uuid,l=o.token,s=r.state,c=s.card,d=s.parameterValues,c){e.next=4;break}return e.abrupt("return");case 4:if(f=(0,h.getParameters)(c),e.prev=5,r.setState({result:null}),p=void 0,!l){e.next=14;break}return e.next=11,v.EmbedApi.cardQuery(a({token:l},(0,m.getParametersBySlug)(f,d)));case 11:p=e.sent,e.next=22;break;case 14:if(!u){e.next=21;break}return y=(0,h.applyParameters)(c,f,d),e.next=18,v.PublicApi.cardQuery({uuid:u,parameters:JSON.stringify(y.parameters)});case 18:p=e.sent,e.next=22;break;case 21:throw{status:404};case 22:r.setState({result:p}),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(5),console.error("error",e.t0),i(e.t0);case 29:case"end":return e.stop()}},e,n,[[5,25]])})),r.state={card:null,result:null,parameterValues:{}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"componentWillMount",value:function(){var e=O(regeneratorRuntime.mark(function e(){var t,n,r,a,i,o,u,l,s,c,d,f,p,m;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.setErrorPage,r=t.params,a=r.uuid,i=r.token,o=t.location.query,a?(0,v.setPublicQuestionEndpoints)(a):i&&(0,v.setEmbedQuestionEndpoints)(i),e.prev=2,u=void 0,!i){e.next=10;break}return e.next=7,v.EmbedApi.card({token:i});case 7:u=e.sent,e.next=17;break;case 10:if(!a){e.next=16;break}return e.next=13,v.PublicApi.card({uuid:a});case 13:u=e.sent,e.next=17;break;case 16:throw{status:404};case 17:for(u.param_values&&this.props.addParamValues(u.param_values),u.param_fields&&this.props.addFields(u.param_fields),l={},s=!0,c=!1,d=void 0,e.prev=23,f=(0,h.getParameters)(u)[Symbol.iterator]();!(s=(p=f.next()).done);s=!0)m=p.value,l[String(m.id)]=o[m.slug];e.next=31;break;case 27:e.prev=27,e.t0=e.catch(23),c=!0,d=e.t0;case 31:e.prev=31,e.prev=32,!s&&f.return&&f.return();case 34:if(e.prev=34,!c){e.next=37;break}throw d;case 37:return e.finish(34);case 38:return e.finish(31);case 39:this.setState({card:u,parameterValues:l},this.run),e.next=46;break;case 42:e.prev=42,e.t1=e.catch(2),console.error("error",e.t1),n(e.t1);case 46:case"end":return e.stop()}},e,this,[[2,42],[23,27,31,39],[32,,34,38]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.params,n=t.uuid,r=t.token,i=this.state,o=i.card,l=i.result,f=i.parameterValues,m=l&&u.default.createElement(c.default,{className:"m1 text-medium-hover",uuid:n,token:r,result:l}),v=o&&(0,h.getParametersWithExtras)(o);return u.default.createElement(p.default,{name:o&&o.name,description:o&&o.description,parameters:v,actionButtons:m,parameterValues:f,setParameterValue:this.setParameterValue},u.default.createElement(d.default,{className:"flex-full",loading:!l,error:"string"==typeof l?l:null,noWrapper:!0},function(){return u.default.createElement(s.default,{error:l&&l.error,rawSeries:[{card:o,data:l&&l.data}],className:"full flex-full z1",onUpdateVisualizationSettings:function(t){return e.setState({result:(0,E.updateIn)(l,["card","visualization_settings"],function(e){return a({},e,t)})})},gridUnit:12,showTitle:!1,isDashboard:!0,mode:_.default,metadata:e.props.metadata,onChangeCardAndRun:function(){}})}))}}]),t}())||r)||r;C.displayName="PublicQuestion",t.default=C},720:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(["Powered by ",""],["Powered by ",""]),a=s(["Metabase"],["Metabase"]),i=l(n(0)),o=l(n(221)),u=n(1);function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var c=function(e){var t=e.dark;return i.default.createElement("a",{href:"https://metabase.com/",target:"_blank",className:"h4 flex text-bold align-center no-decoration"},i.default.createElement(o.default,{height:28,dark:t}),i.default.createElement("span",{className:"text-small"},i.default.createElement("span",{className:"ml1 md-ml2 text-medium"},(0,u.jt)(r,i.default.createElement("span",{className:t?"text-white":"text-brand"},(0,u.t)(a))))))};c.displayName="LogoBadge",t.default=c},721:function(e,t){},722:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(0),u=C(o),l=n(6),s=n(30),c=C(n(4)),d=n(25),f=C(n(38)),p=C(n(387)),m=C(n(452)),h=n(449),v=C(n(223)),y=n(21),g=n(131),b=n(27),_=C(n(355)),E=n(194),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(166)),O=n(17),S=C(n(3));function C(e){return e&&e.__esModule?e:{default:e}}var x=i({},w,{fetchDatabaseMetadata:y.fetchDatabaseMetadata,setErrorPage:g.setErrorPage,onChangeLocation:s.push}),k=(0,l.connect)(function(e,t){return{metadata:(0,b.getMetadata)(e,t),dashboardId:t.params.dashboardId||t.params.uuid||t.params.token,dashboard:(0,E.getDashboardComplete)(e,t),dashcardData:(0,E.getCardData)(e,t),slowCards:(0,E.getSlowCards)(e,t),parameters:(0,E.getParameters)(e,t),parameterValues:(0,E.getParameterValues)(e,t)}},x)(r=(0,m.default)(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentWillMount",value:function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t,n,r,a,i,o,u,l,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.initialize,r=t.fetchDashboard,a=t.fetchDashboardCardData,i=t.setErrorPage,o=t.location,u=t.params,l=u.uuid,s=u.token,l?(0,O.setPublicDashboardEndpoints)(l):s&&(0,O.setEmbedDashboardEndpoints)(s),n(),e.prev=3,e.next=6,r(l||s,o.query);case 6:return e.next=8,a({reload:!1,clear:!0});case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0),i(e.t0);case 14:case"end":return e.stop()}},e,this,[[3,10]])}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})});return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.cancelFetchDashboardCardData()}},{key:"componentWillReceiveProps",value:function(e){S.default.isEqual(this.props.parameterValues,e.parameterValues)||this.props.fetchDashboardCardData({reload:!1,clear:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.dashboard,r=t.parameters,a=t.parameterValues,o=t.isFullscreen,l=t.isNightMode,s=d.IFRAMED?[]:(0,h.getDashboardActions)(this.props);return u.default.createElement(v.default,{name:n&&n.name,description:n&&n.description,parameters:r,parameterValues:a,setParameterValue:this.props.setParameterValue,actionButtons:s.length>0&&u.default.createElement("div",null,s.map(function(e,t){return u.default.createElement("span",{key:t,className:"m1"},e)}))},u.default.createElement(f.default,{className:(0,c.default)("Dashboard p1 flex-full",{"Dashboard--fullscreen":o,"Dashboard--night":l}),loading:!n},function(){return u.default.createElement(p.default,i({},e.props,{className:"spread",mode:_.default,metadata:e.props.metadata,navigateToNewCardFromDashboard:function(){}}))}))}}]),t}())||r)||r;k.displayName="PublicDashboard",t.default=k},723:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(165)),a=d(n(131)),i=d(n(176)),o=d(n(191)),u=d(n(151)),l=n(459),s=d(l),c=n(241);function d(e){return e&&e.__esModule?e:{default:e}}t.default={app:a.default,auth:r.default,currentUser:c.currentUser,requests:(0,l.enhanceRequestsReducer)(i.default),settings:o.default,undo:u.default,entities:s.default}},724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a,i=(r=["Not found"],a=["Not found"],Object.freeze(Object.defineProperties(r,{raw:{value:Object.freeze(a)}}))),o=s(n(0)),u=n(1),l=s(n(223));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){return o.default.createElement(l.default,{className:"spread"},o.default.createElement("div",{className:"flex layout-centered flex-full flex-column"},o.default.createElement("div",{className:"QueryError-image QueryError-image--noRows"}),o.default.createElement("div",{className:"mt1 h4 sm-h3 md-h2 text-bold"},(0,u.t)(i))))};c.displayName="PublicNotFound",t.default=c},73:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=d(u),s=d(n(2)),c=d(n(3));function d(e){return e&&e.__esModule?e:{default:e}}var f=(a=r=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.onBlur=r.onBlur.bind(r),r.onChange=r.onChange.bind(r),r.state={value:e.value},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"onChange",value:function(e){this.setState({value:e.target.value}),this.props.onChange&&this.props.onChange(e)}},{key:"onBlur",value:function(e){this.props.onBlurChange&&(this.props.value||"")!==e.target.value&&this.props.onBlurChange(e)}},{key:"render",value:function(){var e=c.default.omit(this.props,"onBlurChange","value","onBlur","onChange");return l.default.createElement("input",i({},e,{value:this.state.value,onBlur:this.onBlur,onChange:this.onChange}))}}]),t}(),r.propTypes={type:s.default.string,value:s.default.string,placeholder:s.default.string,onChange:s.default.func,onBlurChange:s.default.func},r.defaultProps={type:"text"},a);f.displayName="InputBlurChange",t.default=f},77:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=p(n(96)),u=(p(n(57)),p(n(8))),l=n(82),s=p(n(31)),c=n(10),d=n(183),f=n(13);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var h=(m((r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"parent",value:function(){return this.metadata?this.metadata.field(this.parent_id):null}},{key:"path",value:function(){var e=[],t=this;do{e.unshift(t)}while(t=t.parent());return e}},{key:"displayName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.includeSchema,n=e.includeTable,r=e.includePath,a=void 0===r||r,i="";return n&&this.table&&(i+=this.table.displayName({includeSchema:t})+" → "),i+=a?this.path().map(c.formatField).join(": "):(0,c.formatField)(this),i}},{key:"targetObjectName",value:function(){return(0,c.stripId)(this.displayName())}},{key:"isDate",value:function(){return(0,f.isDate)(this)}},{key:"isTime",value:function(){return(0,f.isTime)(this)}},{key:"isNumber",value:function(){return(0,f.isNumber)(this)}},{key:"isNumeric",value:function(){return(0,f.isNumeric)(this)}},{key:"isBoolean",value:function(){return(0,f.isBoolean)(this)}},{key:"isString",value:function(){return(0,f.isString)(this)}},{key:"isAddress",value:function(){return(0,f.isAddress)(this)}},{key:"isCity",value:function(){return(0,f.isCity)(this)}},{key:"isZipCode",value:function(){return(0,f.isZipCode)(this)}},{key:"isState",value:function(){return(0,f.isState)(this)}},{key:"isCountry",value:function(){return(0,f.isCountry)(this)}},{key:"isCoordinate",value:function(){return(0,f.isCoordinate)(this)}},{key:"isLocation",value:function(){return(0,f.isLocation)(this)}},{key:"isSummable",value:function(){return(0,f.isSummable)(this)}},{key:"isCategory",value:function(){return(0,f.isCategory)(this)}},{key:"isMetric",value:function(){return(0,f.isMetric)(this)}},{key:"isDimension",value:function(){return(0,f.isDimension)(this)}},{key:"isID",value:function(){return(0,f.isPK)(this)||(0,f.isFK)(this)}},{key:"isPK",value:function(){return(0,f.isPK)(this)}},{key:"isFK",value:function(){return(0,f.isFK)(this)}},{key:"isEntityName",value:function(){return(0,f.isEntityName)(this)}},{key:"isCompatibleWith",value:function(e){return this.isDate()===e.isDate()||this.isNumeric()===e.isNumeric()||this.id===e.id}},{key:"fieldValues",value:function(){return(0,d.getFieldValues)(this._object)}},{key:"icon",value:function(){return(0,f.getIconForField)(this)}},{key:"dimension",value:function(){return Array.isArray(this.id)?s.default.parseMBQL(this.id,this.metadata,this.query):s.default.parseMBQL(["field-id",this.id],this.metadata,this.query)}},{key:"sourceField",value:function(){var e=this.dimension().sourceDimension();return e&&e.field()}},{key:"filterOperators",value:function(e){return(0,f.getFilterOperators)(this,this.table,e)}},{key:"filterOperatorsLookup",value:function(){return(0,l.createLookupByProperty)(this.filterOperators(),"name")}},{key:"filterOperator",value:function(e){return this.filterOperatorsLookup()[e]}},{key:"aggregationOperators",value:function(){var e=this;return this.table?this.table.aggregationOperators().filter(function(t){return t.validFieldsFilters[0]&&1===t.validFieldsFilters[0]([e]).length}):null}},{key:"aggregationOperatorsLookup",value:function(){return(0,l.createLookupByProperty)(this.aggregationOperators(),"short")}},{key:"aggregationOperator",value:function(e){return this.aggregationOperatorsLookup()[e]}},{key:"getDefaultBreakout",value:function(){return this.dimension().defaultBreakout()}},{key:"getDefaultDateTimeUnit",value:function(){try{var e=this.fingerprint.type["type/DateTime"],t=(0,u.default)(e.latest).diff((0,u.default)(e.earliest),"day");return t<1?"minute":t<31?"day":t<365?"week":"month"}catch(e){return"day"}}},{key:"remappedField",value:function(){var e=this.dimensions&&this.dimensions.human_readable_field_id;return null!=e?this.metadata.field(e):this.name_field?this.name_field:null}},{key:"remappedValue",value:function(e){return this.isNumeric()&&"number"!=typeof e&&(e=parseFloat(e)),this.remapping&&this.remapping.get(e)}},{key:"hasRemappedValue",value:function(e){return this.isNumeric()&&"number"!=typeof e&&(e=parseFloat(e)),this.remapping&&this.remapping.has(e)}},{key:"isSearchable",value:function(){return this.isString()}},{key:"column",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.dimension().column(a({source:"fields"},e))}},{key:"foreign",value:function(e){return this.dimension().foreign(e.dimension())}},{key:"filter_operators",get:function(){return this.filterOperators()}},{key:"filter_operators_lookup",get:function(){return this.filterOperatorsLookup()}},{key:"aggregation_operators",get:function(){return this.aggregationOperators()}},{key:"aggregation_operators_lookup",get:function(){return this.aggregationOperatorsLookup()}}]),t}()).prototype,"filterOperators",[l.memoize],Object.getOwnPropertyDescriptor(r.prototype,"filterOperators"),r.prototype),m(r.prototype,"filterOperatorsLookup",[l.memoize],Object.getOwnPropertyDescriptor(r.prototype,"filterOperatorsLookup"),r.prototype),m(r.prototype,"aggregationOperators",[l.memoize],Object.getOwnPropertyDescriptor(r.prototype,"aggregationOperators"),r.prototype),m(r.prototype,"aggregationOperatorsLookup",[l.memoize],Object.getOwnPropertyDescriptor(r.prototype,"aggregationOperatorsLookup"),r.prototype),r);t.default=h},78:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DATETIME_UNITS=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=F(["Today"],["Today"]),i=F(["Tomorrow"],["Tomorrow"]),o=F(["Yesterday"],["Yesterday"]),u=F(["This ",""],["This ",""]),l=F(["Next ",""],["Next ",""]),s=F(["Previous ",""],["Previous ",""]),c=F(["Previous "," ",""],["Previous "," ",""]),d=F(["Next "," ",""],["Next "," ",""]),f=F(["Now"],["Now"]),p=F([""," "," ago"],[""," "," ago"]),m=F([""," "," from now"],[""," "," from now"]),h=F(["Unknown"],["Unknown"]),v=F(["Default period"],["Default period"]),y=F(["Minute"],["Minute"]),g=F(["Hour"],["Hour"]),b=F(["Day"],["Day"]),_=F(["Week"],["Week"]),E=F(["Month"],["Month"]),w=F(["Quarter"],["Quarter"]),O=F(["Year"],["Year"]),S=F(["Minute of hour"],["Minute of hour"]),C=F(["Hour of day"],["Hour of day"]),x=F(["Day of week"],["Day of week"]),k=F(["Day of month"],["Day of month"]),A=F(["Day of year"],["Day of year"]),T=F(["Week of year"],["Week of year"]),P=F(["Month of year"],["Month of year"]),j=F(["Quarter of year"],["Quarter of year"]);t.computeFilterTimeRange=function(e){var t=void 0;t="time-interval"===e[0]?q(e):e;var n=z(t),r=n[0],a=n[1],i=n.slice(2),o=H(a,"day"),u=void 0,l=void 0;if("="===r&&i[0]){var s=G(i[0]);u=s.clone().startOf(o),l=s.clone().endOf(o)}else">"===r&&i[0]?(u=G(i[0]).endOf(o),l=(0,N.default)(new Date(864e12))):"<"===r&&i[0]?(u=(0,N.default)(new Date(-864e12)),l=G(i[0]).startOf(o)):"between"===r&&i[0]&&i[1]&&(u=G(i[0]).startOf(o),l=G(i[1]).endOf(o));return[u,l]},t.expandTimeIntervalFilter=q,t.generateTimeFilterValuesDescriptions=function(e){var t=z(e),n=t[0],a=t[1],i=t.slice(2),o=H(a);if("time-interval"===n){var u=r(i,2),l=u[0],s=u[1];return B(l,s)}return i.map(function(e){return U(e,o)})},t.generateTimeIntervalDescription=B,t.generateTimeValueDescription=U,t.formatBucketing=V,t.absolute=G,t.parseFieldBucketing=H,t.parseFieldTarget=function(e){return"datetime-field"===e[0]?e[1]:e},t.parseFieldTargetId=function e(t){if(Number.isInteger(t))return t;if(Array.isArray(t)){if("field-id"===t[0])return t[1];if("fk->"===t[0])return e(t[1]);if("datetime-field"===t[0])return e(t[1]);if("field-literal"===t[0])return t}console.warn("Unknown field format",t);return t};var N=I(n(8)),M=I(n(160)),R=n(10),D=n(117),L=n(1);function I(e){return e&&e.__esModule?e:{default:e}}function F(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function z(e){return Array.isArray(e)?e:Array.from(e)}t.DATETIME_UNITS=["minute","hour","day","week","month","quarter","year","hour-of-day","day-of-week","day-of-month","week-of-year","month-of-year","quarter-of-year"];function q(e){var t=r(e,4),n=t[0],a=t[1],i=t[2],o=t[3];if("time-interval"!==n)throw new Error("translateTimeInterval expects operator 'time-interval'");return"current"===i?i=0:"last"===i?i=-1:"next"===i&&(i=1),a=["datetime-field",a,o],i<-1?["between",a,["relative-datetime",i-1,o],["relative-datetime",-1,o]]:i>1?["between",a,["relative-datetime",1,o],["relative-datetime",i,o]]:0===i?["=",a,["relative-datetime","current"]]:["=",a,["relative-datetime",i,o]]}function B(e,t){if("day"===t)switch(e){case"current":case 0:return[(0,L.t)(a)];case"next":case 1:return[(0,L.t)(i)];case"last":case-1:return[(0,L.t)(o)]}if(!t&&0===e)return(0,L.t)(a);switch(e){case"current":case 0:return[(0,L.t)(u,V(t))];case"next":case 1:return[(0,L.t)(l,V(t))];case"last":case-1:return[(0,L.t)(s,V(t))]}return e<0?[(0,L.t)(c,-e,V(t,-e))]:e>0?[(0,L.t)(d,e,V(t,e))]:[(0,L.t)(u,V(t))]}function U(e,t){if("string"==typeof e){var n=(0,D.parseTimestamp)(e,t);return t?(0,R.formatDateTimeWithUnit)(e,t):n.hours()||n.minutes()?n.format("MMMM D, YYYY hh:mm a"):n.format("MMMM D, YYYY")}if(Array.isArray(e)&&"relative-datetime"===e[0]){var r=e[1],a=e[2];return"current"===r&&(r=0,a=t),t===a?B(r,a):0===r?(0,L.t)(f):r<0?(0,L.t)(p,-r,V(a,-r).toLowerCase()):(0,L.t)(m,r,V(a,r).toLowerCase())}return console.warn("Unknown datetime format",e),"["+(0,L.t)(h)+"]"}function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!e)return"";switch(e){case"default":return(0,L.ngettext)((0,L.msgid)(v),"Default periods",t);case"minute":return(0,L.ngettext)((0,L.msgid)(y),"Minutes",t);case"hour":return(0,L.ngettext)((0,L.msgid)(g),"Hours",t);case"day":return(0,L.ngettext)((0,L.msgid)(b),"Days",t);case"week":return(0,L.ngettext)((0,L.msgid)(_),"Weeks",t);case"month":return(0,L.ngettext)((0,L.msgid)(E),"Months",t);case"quarter":return(0,L.ngettext)((0,L.msgid)(w),"Quarters",t);case"year":return(0,L.ngettext)((0,L.msgid)(O),"Years",t);case"minute-of-hour":return(0,L.ngettext)((0,L.msgid)(S),"Minutes of hour",t);case"hour-of-day":return(0,L.ngettext)((0,L.msgid)(C),"Hours of day",t);case"day-of-week":return(0,L.ngettext)((0,L.msgid)(x),"Days of week",t);case"day-of-month":return(0,L.ngettext)((0,L.msgid)(k),"Days of month",t);case"day-of-year":return(0,L.ngettext)((0,L.msgid)(A),"Days of year",t);case"week-of-year":return(0,L.ngettext)((0,L.msgid)(T),"Weeks of year",t);case"month-of-year":return(0,L.ngettext)((0,L.msgid)(P),"Months of year",t);case"quarter-of-year":return(0,L.ngettext)((0,L.msgid)(j),"Quarters of year",t)}var n=e.split("-");return n[0]=M.default.capitalize(n[0]),n.join(" ")}function G(e){return"string"==typeof e?(0,N.default)(e):Array.isArray(e)&&"relative-datetime"===e[0]?(0,N.default)().add(e[1],e[2]):void console.warn("Unknown datetime format",e)}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Array.isArray(e)){if("datetime-field"===e[0])return 4===e.length?e[3]:e[2];if("fk->"===e[0]||"field-id"===e[0])return t;if("field-literal"===e[0])return t;console.warn("Unknown field format",e)}return t}},79:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(39)),u=c(n(96)),l=(c(n(57)),c(n(182)),n(82)),s=n(58);function c(e){return e&&e.__esModule?e:{default:e}}var d,f,p,m,h,v,y=(r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.default),i(t,[{key:"displayName",value:function(){return this.name}},{key:"schema",value:function(e){return this.metadata.schema((0,s.generateSchemaId)(this.id,e))}},{key:"schemaNames",value:function(){return this.schemas.map(function(e){return e.name}).sort(function(e,t){return e.localeCompare(t)})}},{key:"tablesLookup",value:function(){return(0,l.createLookupByProperty)(this.tables,"id")}},{key:"hasFeature",value:function(e){if(!e)return!0;var t=new Set(this.features);return"join"===e?t.has("left-join")||t.has("right-join")||t.has("inner-join")||t.has("full-join"):t.has(e)}},{key:"newQuestion",value:function(){return this.question().setDefaultQuery().setDefaultDisplay()}},{key:"question",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"source-table":null};return o.default.create({metadata:this.metadata,dataset_query:{database:this.id,type:"query",query:e}})}},{key:"nativeQuestion",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.create({metadata:this.metadata,dataset_query:{database:this.id,type:"native",native:a({query:"","template-tags":{}},e)}})}},{key:"nativeQuery",value:function(e){return this.nativeQuestion(e).query()}},{key:"savedQuestionsDatabase",value:function(){return this.metadata.databasesList().find(function(e){return e.is_saved_questions})}},{key:"tables_lookup",get:function(){return this.tablesLookup()}}]),t}(),d=r.prototype,f="tablesLookup",p=[l.memoize],m=Object.getOwnPropertyDescriptor(r.prototype,"tablesLookup"),h=r.prototype,v={},Object.keys(m).forEach(function(e){v[e]=m[e]}),v.enumerable=!!v.enumerable,v.configurable=!!v.configurable,("value"in v||v.initializer)&&(v.writable=!0),v=p.slice().reverse().reduce(function(e,t){return t(d,f,e)||e},v),h&&void 0!==v.initializer&&(v.value=v.initializer?v.initializer.call(h):void 0,v.initializer=void 0),void 0===v.initializer&&(Object.defineProperty(d,f,v),v=null),r);t.default=y},80:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NATIVE_QUERY_TEMPLATE=t.STRUCTURED_QUERY_TEMPLATE=void 0,t.isStructured=f,t.isNative=function(e){return"native"===e.dataset_query.type},t.cardVisualizationIsEquivalent=p,t.cardQueryIsEquivalent=m,t.cardIsEquivalent=function(e,t){return m(e,t)&&p(e,t)},t.getQuery=h,t.getTableMetadata=function(e,t){var n=h(e);if(n&&null!=n["source-table"])return t.table(n["source-table"])||null;return null},t.getTemplateTagsForParameters=v,t.getParameters=y,t.getParametersWithExtras=function(e,t){return y(e).map(function(n){t&&n.id in t&&(n=(0,s.assoc)(n,"value",t[n.id]));var a=(0,r.getParameterTargetFieldId)(n.target,e.dataset_query);return null!=a&&(n=(0,s.assoc)(n,"field_id",a)),n=(0,s.assoc)(n,"hasOnlyFieldTargets",null!=a)})},t.applyParameters=g,t.isTransientId=b,t.questionUrlWithParameters=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!e.dataset_query)return u.question(e.id);var p=y(e=o.default.copy(e)),m=g(e,n,i,c);if(!d&&!b(e.id)&&m.parameters&&0===m.parameters.length)return u.question(e.id);var h={},v=!0,_=!1,E=void 0;try{for(var w,O=function(){var n=w.value,i=l.default.find(p,function(e){return o.default.equals(e.target,n.target)});if(i)h[i.slug]=n.value;else if(f(e)){var u=(0,r.parameterToMBQLFilter)(n,t);u?e=(0,s.updateIn)(e,["dataset_query","query"],function(e){return a.addFilter(e,u)}):console.warn("UNHANDLED PARAMETER",n)}else console.warn("UNHANDLED PARAMETER",n)},S=(m.parameters||[])[Symbol.iterator]();!(v=(w=S.next()).done);v=!0)O()}catch(e){_=!0,E=e}finally{try{!v&&S.return&&S.return()}finally{if(_)throw E}}b(e.id)&&(e=(0,s.assoc)(e,"id",null));b(e.original_card_id)&&(e=(0,s.assoc)(e,"original_card_id",null));return u.question(null,e.dataset_query?e:void 0,h)};var r=n(100),a=d(n(109)),i=d(n(129)),o=c(n(35)),u=d(n(23)),l=c(n(3)),s=n(11);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.STRUCTURED_QUERY_TEMPLATE={type:"query",database:null,query:{"source-table":null,aggregation:void 0,breakout:void 0,filter:void 0}},t.NATIVE_QUERY_TEMPLATE={type:"native",database:null,native:{query:"","template-tags":{}}};function f(e){return"query"===e.dataset_query.type}function p(e,t){return l.default.isEqual(l.default.pick(e,"display","visualization_settings"),l.default.pick(t,"display","visualization_settings"))}function m(e,t){return e=(0,s.updateIn)(e,["dataset_query","parameters"],function(e){return e||[]}),t=(0,s.updateIn)(t,["dataset_query","parameters"],function(e){return e||[]}),l.default.isEqual(l.default.pick(e,"dataset_query"),l.default.pick(t,"dataset_query"))}function h(e){return"query"===e.dataset_query.type?e.dataset_query.query:null}function v(e){return(e&&e.dataset_query&&"native"===e.dataset_query.type&&e.dataset_query.native["template-tags"]?Object.values(e.dataset_query.native["template-tags"]):[]).filter(function(e){return"card"!==e.type&&"snippet"!==e.type})}function y(e){if(e&&e.parameters)return e.parameters;var t=v(e);return(0,r.getTemplateTagParameters)(t)}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=o.default.copy(e.dataset_query);"query"===a.type&&(a.query=i.cleanQuery(a.query)),a.parameters=[];var u=!0,s=!1,c=void 0;try{for(var d,f=(t||[])[Symbol.iterator]();!(u=(d=f.next()).done);u=!0){var p=d.value,m=n[p.id];if(null!=m){var h=e.id||e.original_card_id,v=l.default.findWhere(r,null!=h?{card_id:h,parameter_id:p.id}:{parameter_id:p.id});v?a.parameters.push({type:p.type,target:v.target,value:m}):p.target&&a.parameters.push({type:p.type,target:p.target,value:m})}}}catch(e){s=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw c}}return a}function b(e){return null!=e&&"string"==typeof e&&isNaN(parseInt(e))}},82:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t,n){if(e.has(t))return e.get(t);var r=n();return e.set(t,r),r}t.nyi=function(e,t,n){var r=n.value;return n.value=function(){return console.warn("Method not yet implemented: "+e.constructor.name+"::"+t),r.apply(this,arguments)},n},t.memoize=function(e,t,n){var r=e[t];n.value=function(){for(var e=this,t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];var l=[this,r,n.length].concat(n),s=l.pop(),c=l.reduce(function(e,t){return i(e,t,u)},o);return i(c,s,function(){return r.apply(e,n)})}},t.sortObject=function e(t){if(null===t||"object"!==(void 0===t?"undefined":a(t)))return t;if(Array.isArray(t))return t.map(e);var n=Object.entries(t).sort(function(e,t){var n=r(e,1),a=n[0],i=r(t,1),o=i[0];return a.localeCompare(o)});var i={};var o=!0;var u=!1;var l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=r(s.value,2),f=d[0],p=d[1];i[f]=e(p)}}catch(e){u=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(u)throw l}}return i},t.createLookupByProperty=function(e,t){var n={},r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;n[l[t]]=l}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n};var o=new WeakMap;var u=function(){return new Map}},83:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChartSettingsError=t.NoBreakoutError=t.LatitudeLongitudeError=t.MinRowsError=t.MinColumnsError=void 0;var r=v(["Doh! The data from your query doesn't fit the chosen display choice. This visualization requires at least "," "," of data."],["Doh! The data from your query doesn't fit the chosen display choice. This visualization requires at least "," "," of data."]),a=v(["column"],["column"]),i=v(["No dice. We have "," data "," to show and that's not enough for this visualization."],["No dice. We have "," data "," to show and that's not enough for this visualization."]),o=v(["point"],["point"]),u=v(["Bummer. We can't actually do a pin map for this data because we require both a latitude and longitude column."],["Bummer. We can't actually do a pin map for this data because we require both a latitude and longitude column."]),l=v(["This visualization requires you to group by a field."],["This visualization requires you to group by a field."]),s=v(["Please configure this chart in the chart settings"],["Please configure this chart in the chart settings"]),c=v(["Edit Settings"],["Edit Settings"]),d=n(1);function f(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}function p(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}function m(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}function h(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}function v(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}t.MinColumnsError=function(e){function t(e,n){return y(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,d.t)(r,n,(0,d.ngettext)((0,d.msgid)(a),"columns",n))))}return b(t,_(Error)),t}(),t.MinRowsError=function(e){function t(e,n){return y(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,d.t)(i,n,(0,d.ngettext)((0,d.msgid)(o),"points",n))))}return b(t,h(Error)),t}(),t.LatitudeLongitudeError=function(e){function t(){return y(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,d.t)(u)))}return b(t,m(Error)),t}(),t.NoBreakoutError=function(e){function t(e){return y(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e||(0,d.t)(l)))}return b(t,p(Error)),t}(),t.ChartSettingsError=function(e){function t(e,n,r){y(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e||(0,d.t)(s)));return a.initial=n,a.buttonText=r||(0,d.t)(c),a}return b(t,f(Error)),t}()},837:function(e,t){},838:function(e,t){},84:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TestModal=t.FullPageModal=t.WindowModal=void 0;var r,a,i,o,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=E(s),d=E(n(2)),f=E(n(15)),p=E(n(4)),m=n(25),h=n(629),v=n(205),y=E(n(214)),g=E(n(45)),b=E(n(3)),_=E(n(630));function E(e){return e&&e.__esModule?e:{default:e}}function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function S(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function C(e){return c.default.Children.count(e.children)>1||null!=e.title||null!=e.footer?c.default.createElement(g.default,b.default.omit(e,"className","style")):c.default.Children.only(e.children)}var x=t.WindowModal=(a=r=function(e){function t(){return w(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,s.Component),l(t,[{key:"componentWillMount",value:function(){this._modalElement=document.createElement("span"),this._modalElement.className="ModalContainer",document.querySelector("body").appendChild(this._modalElement)}},{key:"componentDidMount",value:function(){this._renderPopover()}},{key:"componentDidUpdate",value:function(){this._renderPopover()}},{key:"componentWillUnmount",value:function(){f.default.unmountComponentAtNode(this._modalElement),this._modalElement.parentNode&&this._modalElement.parentNode.removeChild(this._modalElement)}},{key:"handleDismissal",value:function(){this.props.onClose&&this.props.onClose()}},{key:"_modalComponent",value:function(){var e=this,t=p.default.apply(void 0,[this.props.className].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(["small","medium","wide","tall"].filter(function(t){return e.props[t]}).map(function(e){return"Modal--"+e}))));return c.default.createElement(y.default,{handleDismissal:this.handleDismissal.bind(this)},c.default.createElement("div",{className:(0,p.default)(t,"relative bg-white rounded")},C(u({},this.props,{fullPageModal:!1,formModal:!!this.props.form||this.props.formModal}))))}},{key:"_renderPopover",value:function(){var e=this.props,t=e.backdropClassName,n=e.isOpen,r=e.style;f.default.unstable_renderSubtreeIntoContainer(this,c.default.createElement(h.CSSTransitionGroup,{transitionName:"Modal",transitionAppear:!0,transitionAppearTimeout:250,transitionEnterTimeout:250,transitionLeaveTimeout:250},n&&c.default.createElement("div",{key:"modal",className:(0,p.default)(t,"flex justify-center align-center fixed top left bottom right"),style:r},this._modalComponent())),this._modalElement)}},{key:"render",value:function(){return null}}]),t}(),r.propTypes={isOpen:d.default.bool},r.defaultProps={className:"Modal",backdropClassName:"Modal-backdrop"},a);x.displayName="WindowModal";var k=t.FullPageModal=function(e){function t(){return w(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,s.Component),l(t,[{key:"componentDidMount",value:function(){this._modalElement=document.createElement("div"),this._modalElement.className="ModalContainer",document.querySelector("body").appendChild(this._modalElement),this._scrollX=(0,m.getScrollX)(),this._scrollY=(0,m.getScrollY)(),window.scrollTo(0,0),document.body.style.overflow="hidden",this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e=document.body.querySelector(".Nav");e&&(this._modalElement.style.top=e.getBoundingClientRect().bottom+"px"),this._renderModal(!0)}},{key:"componentWillUnmount",value:function(){var e=this;this._renderModal(!1),document.body.style.overflow="",setTimeout(function(){window.scrollTo(e._scrollX,e._scrollY)},0),setTimeout(function(){f.default.unmountComponentAtNode(e._modalElement),e._modalElement.parentNode.removeChild(e._modalElement)},300)}},{key:"_renderModal",value:function(e){var t=this;f.default.unstable_renderSubtreeIntoContainer(this,c.default.createElement(v.Motion,{defaultStyle:{opacity:0,top:20},style:e?{opacity:(0,v.spring)(1),top:(0,v.spring)(0)}:{opacity:(0,v.spring)(0),top:(0,v.spring)(20)}},function(e){return c.default.createElement("div",{className:"Modal--full"},c.default.createElement(y.default,null,c.default.createElement("div",{className:"full-height relative scroll-y",style:e},C(u({},t.props,{fullPageModal:!0,formModal:!!t.props.form})))))}),this._modalElement)}},{key:"render",value:function(){return null}}]),t}();k.displayName="FullPageModal",(t.TestModal=(o=i=function(e){function t(){return w(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return S(t,s.Component),l(t,[{key:"render",value:function(){return this.props.isOpen?c.default.createElement("div",{className:"test-modal",onClick:function(e){return e.stopPropagation()}},C(u({},this.props,{fullPageModal:!0,formModal:!!this.props.form}))):null}}]),t}(),i.defaultProps={isOpen:!0},o)).displayName="TestModal";var A=(0,_.default)(k),T=function(e){var t=e.full,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["full"]);return t?n.isOpen?c.default.createElement(A,n):null:c.default.createElement(x,n)};T.defaultProps={isOpen:!0},t.default=T},845:function(e,t){},846:function(e,t){},86:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=f(u),s=f(n(2)),c=f(n(524)),d=f(n(4));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=(a=r=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),o=0;o<a;o++)i[o]=arguments[o];return n=r=m(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.handleClick=function(){r.props.onChange&&r.props.onChange(!r.props.value)},m(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,u.Component),o(t,[{key:"render",value:function(){var e,t=this.props,n=t.value,r=t.small,a=t.className,o=t.color,u=t.onChange,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["value","small","className","color","onChange"]);return l.default.createElement("a",i({},s,{className:(0,d.default)(c.default.toggle,"no-decoration",(e={},p(e,c.default.selected,n),p(e,c.default.small,r),e),a),style:{color:o||null},onClick:u?this.handleClick:null}))}}]),t}(),r.propTypes={value:s.default.bool.isRequired,onChange:s.default.func,small:s.default.bool},a);h.displayName="Toggle",t.default=h},88:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.isRegularField=s,t.isLocalField=c,t.isForeignKeyField=d,t.isDatetimeField=f,t.isBinningStrategy=p,t.isFieldLiteral=m,t.isExpressionField=h,t.isAggregateField=v,t.isJoinedField=y,t.isValidField=function e(t){return s(t)||c(t)||d(t)&&(c(t[1])||s(t[1]))&&(c(t[2])||s(t[2]))||f(t)&&e(t[1])&&(4===t.length?"as"===t[2]&&"string"==typeof t[3]:"string"==typeof t[2])||h(t)&&a.default.isString(t[1])||v(t)&&"number"==typeof t[1]||y(t)&&"string"==typeof t[1]&&e(t[2])||m(t)},t.isSameField=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?a.default.isEqual(e,t):g(e)===g(t)},t.getFieldTargetId=g,t.getFieldTarget=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(s(t))return{table:n,field:o.getField(n,t),path:a};if(c(t))return e(t[1],n,a);if(d(t)){var l=g(t[1]),v=o.getField(n,l),y=v&&v.target.table;return e(t[2],y,a.concat(v))}if(f(t))return r({},e(t[1],n,a),{unit:b(t)});if(p(t))return e(t[1],n,a);if(h(t)){var _=new i.default({display_name:t[1],name:t[1],expression_name:t[1],table:n,metadata:n.metadata,base_type:u.TYPE.Float});return{table:n,field:_,path:a}}if(m(t))return{table:n,field:o.getField(n,t),path:a};console.warn("Unknown field type: ",t)},t.getDatetimeUnit=b;var a=l(n(3)),i=l(n(77)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(600)),u=n(41);function l(e){return e&&e.__esModule?e:{default:e}}function s(e){return"number"==typeof e}function c(e){return Array.isArray(e)&&"field-id"===e[0]}function d(e){return Array.isArray(e)&&"fk->"===e[0]}function f(e){return Array.isArray(e)&&"datetime-field"===e[0]}function p(e){return Array.isArray(e)&&"binning-strategy"===e[0]}function m(e){return Array.isArray(e)&&"field-literal"===e[0]}function h(e){return Array.isArray(e)&&"expression"===e[0]}function v(e){return Array.isArray(e)&&"aggregation"===e[0]}function y(e){return Array.isArray(e)&&"joined-field"===e[0]}function g(e){return s(e)?e:c(e)?e[1]:d(e)?g(e[2]):f(e)?g(e[1]):p(e)?g(e[1]):m(e)?e:y(e)?g(e[2]):void console.warn("Unknown field type: ",e)}function b(e){return 4===e.length?e[3]:e[2]}},93:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),u=m(o),l=m(n(2)),s=n(22),c=m(n(526)),d=m(n(5)),f=m(n(67)),p=m(n(4));function m(e){return e&&e.__esModule?e:{default:e}}var h=(a=r=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.crumbs,r=e.inSidebar,a=e.placeholder,i=r?c.default.sidebarBreadcrumb:c.default.breadcrumb,o=r?c.default.sidebarBreadcrumbs:c.default.breadcrumbs;return u.default.createElement("section",{className:(0,p.default)(t,o)},n.length<=1&&a?u.default.createElement("span",{className:(0,p.default)(i,c.default.breadcrumbPage)},a):n.map(function(e){return Array.isArray(e)?e:[e]}).map(function(e,t){return u.default.createElement(f.default,{key:t,tooltip:e[0],tooltipMaxWidth:"100%",className:(0,p.default)(i,e.length>1?c.default.breadcrumbPath:c.default.breadcrumbPage)},e.length>1&&"string"==typeof e[1]?u.default.createElement(s.Link,{to:e[1]},e[0]):u.default.createElement("span",{onClick:e[1]},e[0]))}).map(function(e,t,n){return t<n.length-1?[e,u.default.createElement(d.default,{key:t+"-separator",name:"chevronright",className:c.default.breadcrumbDivider,width:12,height:12})]:e}))}}]),t}(),r.propTypes={className:l.default.string,crumbs:l.default.array,inSidebar:l.default.bool,placeholder:l.default.string},r.defaultProps={crumbs:[],inSidebar:!1,placeholder:null},a);h.displayName="Breadcrumbs",t.default=h},96:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._plainObject=null,this._plainObject=t;for(var n in t)this[n]=t[n]}return r(e,[{key:"getPlainObject",value:function(){return this._plainObject}}]),e}();t.default=a},97:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NATIVE_QUERY_TEMPLATE=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(h(n(79)),h(n(57)),n(249)),o=n(10),u=h(n(35)),l=n(432),s=n(11),c=h(n(3)),d=h(n(138)),f=n(31),p=(h(f),n(308)),m=(h(p),h(n(137)));function h(e){return e&&e.__esModule?e:{default:e}}var v=t.NATIVE_QUERY_TEMPLATE={database:null,type:"native",native:{query:"","template-tags":{}}},y=/^#([0-9]*)$/;function g(e){var t=e.match(y);return t&&t[1].length>0?parseInt(t[1]):null}function b(e){return y.test(e)}function _(e){return e.slice("snippet:".length).trim()}function E(e){return e.startsWith("snippet:")}var w=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._nativeDatasetQuery=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default),a(t,[{key:"hasData",value:function(){return null!=this.databaseId()&&(!this.requiresTable()||this.collection())}},{key:"canRun",value:function(){return this.hasData()&&this.queryText().length>0&&this.allTemplateTagsAreValid()}},{key:"isEmpty",value:function(){return null==this.databaseId()||0===this.queryText().length}},{key:"clean",value:function(){return this.setDatasetQuery((0,s.updateIn)(this.datasetQuery(),["native","template-tags"],function(e){return e||{}}))}},{key:"tables",value:function(){var e=this.database();return e&&e.tables||null}},{key:"databaseId",value:function(){return this._nativeDatasetQuery.database}},{key:"database",value:function(){var e=this.databaseId();return null!=e?this._metadata.database(e):null}},{key:"engine",value:function(){var e=this.database();return e&&e.engine}},{key:"readOnly",value:function(){var e=this.database();return!e||"write"!==e.native_permissions}},{key:"setDatabase",value:function(e){return this.setDatabaseId(e.id)}},{key:"setDatabaseId",value:function(e){return e!==this.databaseId()?new t(this._originalQuestion,(0,s.assoc)(this.datasetQuery(),"database",e)):this}},{key:"setDefaultCollection",value:function(){if(this.requiresTable()){var e=this.tables();if(e&&e.length>0)return this.setCollectionName(e[0].name)}return this}},{key:"hasWritePermission",value:function(){var e=this.database();return null!=e&&"write"===e.native_permissions}},{key:"supportsNativeParameters",value:function(){var e=this.database();return null!=e&&c.default.contains(e.features,"native-parameters")}},{key:"table",value:function(){var e=this.database(),t=this.collection();return e&&t?c.default.findWhere(e.tables,{name:t})||null:null}},{key:"queryText",value:function(){return(0,s.getIn)(this.datasetQuery(),["native","query"])||""}},{key:"setQueryText",value:function(e){return new t(this._originalQuestion,(0,s.chain)(this._datasetQuery).assocIn(["native","query"],e).assocIn(["native","template-tags"],this._getUpdatedTemplateTags(e)).value())}},{key:"collection",value:function(){return(0,s.getIn)(this.datasetQuery(),["native","collection"])}},{key:"setCollectionName",value:function(e){return new t(this._originalQuestion,(0,s.assocIn)(this._datasetQuery,["native","collection"],e))}},{key:"setParameterIndex",value:function(e,n){return new t(this._originalQuestion,(0,s.updateIn)(this._datasetQuery,["native","template_tags"],function(t){var r=Array.from(Object.entries(t)),a=c.default.findIndex(r,function(t){return t[1].id===e});return r.splice(n,0,r.splice(a,1)[0]),c.default.object(r)}))}},{key:"lineCount",value:function(){var e=this.queryText();return e?(0,i.countLines)(e):0}},{key:"aceMode",value:function(){return(0,l.getEngineNativeAceMode)(this.engine())}},{key:"nativeQueryLanguage",value:function(){return(0,l.getEngineNativeType)(this.engine()).toUpperCase()}},{key:"requiresTable",value:function(){return(0,l.getEngineNativeRequiresTable)(this.engine())}},{key:"templateTags",value:function(){return Object.values(this.templateTagsMap())}},{key:"templateTagsWithoutSnippets",value:function(){return this.templateTags().filter(function(e){return"snippet"!==e.type})}},{key:"templateTagsMap",value:function(){return(0,s.getIn)(this.datasetQuery(),["native","template-tags"])||{}}},{key:"allTemplateTagsAreValid",value:function(){return this.templateTags().every(function(e){return!("dimension"===e.type&&null==e.dimension)})}},{key:"setTemplateTag",value:function(e,t){return this.setDatasetQuery((0,s.assocIn)(this.datasetQuery(),["native","template-tags",e],t))}},{key:"setDatasetQuery",value:function(e){return new t(this._originalQuestion,e)}},{key:"replaceCardId",value:function(e,t){var n=new RegExp("{{\\s*#"+e+"\\s*}}","g"),r=this.queryText().replace(n,function(){return"{{#"+t+"}}"});return this.setQueryText(r)}},{key:"dimensionOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0},n=this.templateTags().filter(function(e){return"dimension"===e.type}).map(function(t){return new f.TemplateTagDimension(null,[t.name],e.metadata(),e)}).filter(t);return new m.default({dimensions:n,count:n.length})}},{key:"variables",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return this.templateTags().filter(function(e){return"dimension"!==e.type}).map(function(t){return new p.TemplateTagVariable([t.name],e.metadata(),e)}).filter(t)}},{key:"updateSnippetsWithIds",value:function(e){var t=c.default.chain(this.templateTags()).filter(function(e){return"snippet"===e.type&&null==e["snippet-id"]}).groupBy(function(e){return e["snippet-name"]}).value();if(0===Object.keys(t).length)return this;var n=this,a=!0,i=!1,o=void 0;try{for(var u,l=e[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s=u.value,d=!0,f=!1,p=void 0;try{for(var m,h=(t[s.name]||[])[Symbol.iterator]();!(d=(m=h.next()).done);d=!0){var v=m.value;n=n.setTemplateTag(v.name,r({},v,{"snippet-id":s.id}))}}catch(e){f=!0,p=e}finally{try{!d&&h.return&&h.return()}finally{if(f)throw p}}}}catch(e){i=!0,o=e}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}return n}},{key:"updateQueryTextWithNewSnippetNames",value:function(e){var t=c.default.chain(this.templateTags()).filter(function(e){return"snippet"===e.type}).groupBy(function(e){return e["snippet-id"]}).value();if(0===Object.keys(t).length)return this;var n=this.queryText(),r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value,s=!0,d=!1,f=void 0;try{for(var p,m=(t[l.id]||[])[Symbol.iterator]();!(s=(p=m.next()).done);s=!0){var h=p.value;h["snippet-name"]!==l.name&&(n=n.replace(new RegExp("{{\\s*"+h.name+"\\s*}}","g"),"{{snippet: "+l.name+"}}"))}}catch(e){d=!0,f=e}finally{try{!s&&m.return&&m.return()}finally{if(d)throw f}}}}catch(e){a=!0,i=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw i}}return n!==this.queryText()?this.setQueryText(n).updateSnippetsWithIds(e):this}},{key:"_getUpdatedTemplateTags",value:function(e){if(e&&this.supportsNativeParameters()){for(var t=[],n=void 0,a=/\{\{\s*((snippet:\s*[^}]+)|[A-Za-z0-9_]+?|#[0-9]*)\s*\}\}/g;null!=(n=a.exec(e));)t.push(n[1]);t=c.default.uniq(t);var i=this.templateTagsMap(),l=Object.keys(i);if(t.length>0||l.length>0){var s=c.default.difference(t,l),d=c.default.difference(l,t),f=r({},i);if(1===d.length&&1===s.length){var p=r({},f[d[0]]);p["display-name"]===(0,o.humanize)(d[0])&&(p["display-name"]=(0,o.humanize)(s[0])),p.name=s[0],b(p.name)?(p.type="card",p["card-id"]=g(p.name)):E(p.name)&&(p.type="snippet",p["snippet-name"]=_(p.name)),f[p.name]=p,delete f[d[0]]}else{var m=!0,h=!1,v=void 0;try{for(var y,w=d[Symbol.iterator]();!(m=(y=w.next()).done);m=!0){delete f[y.value]}}catch(e){h=!0,v=e}finally{try{!m&&w.return&&w.return()}finally{if(h)throw v}}var O=!0,S=!1,C=void 0;try{for(var x,k=s[Symbol.iterator]();!(O=(x=k.next()).done);O=!0){var A=x.value;f[A]={id:u.default.uuid(),name:A,"display-name":(0,o.humanize)(A),type:"text"},b(A)?f[A]=Object.assign(f[A],{type:"card","card-id":g(A)}):E(A)&&(f[A]=Object.assign(f[A],{type:"snippet","snippet-name":_(A)}))}}catch(e){S=!0,C=e}finally{try{!O&&k.return&&k.return()}finally{if(S)throw C}}}var T=!0,P=!1,j=void 0;try{for(var N,M=Object.values(f)[Symbol.iterator]();!(T=(N=M.next()).done);T=!0){var R=N.value;null==R.id&&(R.id=u.default.uuid())}}catch(e){P=!0,j=e}finally{try{!T&&M.return&&M.return()}finally{if(P)throw j}}return f}}return{}}}],[{key:"isDatasetQueryType",value:function(e){return e&&e.type===v.type}}]),t}();t.default=w},98:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultDrills=void 0;var r=p(n(536)),a=p(n(312)),i=p(n(537)),o=p(n(538)),u=p(n(571)),l=p(n(572)),s=p(n(573)),c=p(n(574)),d=p(n(576)),f=n(28);function p(e){return e&&e.__esModule?e:{default:e}}t.getDefaultDrills=function(){return[c.default,r.default,a.default,i.default,o.default,u.default,l.default,s.default,d.default].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(f.PLUGIN_DRILLS))}},99:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FETCH_TABLE_FOREIGN_KEYS=t.FETCH_TABLE_METADATA=t.FETCH_METADATA=t.TABLES_BULK_UPDATE=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(34),i=n(18),o=y(n(3)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(23)),l=n(7),s=n(32),c=n(17),d=n(58),f=y(n(184)),p=y(n(185)),m=y(n(130)),h=n(64),v=n(27);function y(e){return e&&e.__esModule?e:{default:e}}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function _(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function r(a,i){try{var o=t[a](i),u=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}var E,w,O=(0,h.GET)("/api/table"),S=(E=_(regeneratorRuntime.mark(function e(){var t=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.GET)("/api/database/:dbId/metadata").apply(void 0,t);case 2:return e.abrupt("return",e.sent.tables);case 3:case"end":return e.stop()}},e,void 0)})),function(){return E.apply(this,arguments)}),C=(0,h.GET)("/api/database/:dbId/schema/:schemaName"),x=(0,h.PUT)("/api/table/:id/fields/order"),k=(0,h.PUT)("/api/table"),A=t.TABLES_BULK_UPDATE="metabase/entities/TABLES_BULK_UPDATE",T=t.FETCH_METADATA="metabase/entities/FETCH_METADATA",P=t.FETCH_TABLE_METADATA="metabase/entities/FETCH_TABLE_METADATA",j=t.FETCH_TABLE_FOREIGN_KEYS="metabase/entities/FETCH_TABLE_FOREIGN_KEYS",N=(0,a.createEntity)({name:"tables",nameOne:"table",path:"/api/table",schema:d.TableSchema,api:{list:(w=_(regeneratorRuntime.mark(function e(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.dbId||!t.schemaName){e.next=4;break}return e.abrupt("return",C.apply(void 0,[t].concat(r)));case 4:if(!t.dbId){e.next=8;break}return e.abrupt("return",S.apply(void 0,[t].concat(r)));case 8:return e.abrupt("return",O.apply(void 0,[t].concat(r)));case 9:case"end":return e.stop()}},e,void 0)})),function(e){return w.apply(this,arguments)})},actions:{bulkUpdate:(0,i.compose)((0,i.withAction)(A),(0,i.withNormalize)([d.TableSchema]))(function(e){return t=_(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",k(e));case 1:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t})},objectActions:{fetchMetadata:(0,i.compose)((0,i.withAction)(T),(0,i.withCachedDataAndRequestState)(function(e){var t=e.id;return[].concat(b(N.getObjectStatePath(t)))},function(e){var t=e.id;return[].concat(b(N.getObjectStatePath(t)),["fetchMetadata"])}),(0,i.withNormalize)(d.TableSchema))(function(e){var t=e.id,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,a){return c.MetabaseApi.table_query_metadata(r({tableId:t},n.params))}}),fetchMetadataAndForeignTables:(0,i.createThunkAction)(P,function(e){var t,n=e.id,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=_(regeneratorRuntime.mark(function e(t,a){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(N.actions.fetchMetadata({id:n},r));case 2:return i=N.selectors[r.selectorName||"getObject"](a(),{entityId:n}),e.next=5,Promise.all((u=i,o.default.chain(u.fields).filter(function(e){return e.target}).map(function(e){return e.target.table_id}).uniq().value()).map(function(e){return t(N.actions.fetchMetadata({id:e},r))}));case 5:case"end":return e.stop()}var u},e,void 0)})),function(e,n){return t.apply(this,arguments)}}),fetchForeignKeys:(0,i.compose)((0,i.withAction)(j),(0,i.withCachedDataAndRequestState)(function(e){var t=e.id;return[].concat(b(N.getObjectStatePath(t)))},function(e){var t=e.id;return[].concat(b(N.getObjectStatePath(t)),["fetchForeignKeys"])}),(0,i.withNormalize)(d.TableSchema))(function(e){return t=_(regeneratorRuntime.mark(function t(n,r){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.MetabaseApi.table_fks({tableId:e.id});case 2:return a=t.sent,t.abrupt("return",{id:e.id,fks:a});case 4:case"end":return t.stop()}},t,void 0)})),function(e,n){return t.apply(this,arguments)};var t}),setFieldOrder:(0,i.compose)((0,i.withAction)("metabase/entities/UPDATE_TABLE_FIELD_ORDER"))(function(e,t){var n=e.id;return function(e,r){return x({id:n,fieldOrder:t},{bodyParamName:"fieldOrder"})}})},form:{fields:[{name:"name"},{name:"description",type:"text"}]},reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=t.type,a=t.payload;t.error;if(n===p.default.actionTypes.CREATE){var i=a.segment,o=i.table_id,u=i.id,l=e[o];if(l)return r({},e,g({},o,r({},l,{segments:[u].concat(b(l.segments))})))}if(n===f.default.actionTypes.CREATE){var s=a.metric,c=s.table_id,d=s.id,m=e[c];if(m)return r({},e,g({},c,r({},m,{metrics:[d].concat(b(m.metrics))})))}if(n===p.default.actionTypes.UPDATE){var h=a.segment,v=h.table_id,y=h.archived,_=h.id,E=e[v];if(y&&E&&E.segments)return r({},e,g({},v,r({},E,{segments:E.segments.filter(function(e){return e!==_})})))}if(n===f.default.actionTypes.UPDATE){var w=a.metric,O=w.table_id,S=w.archived,C=w.id,x=e[O];if(S&&x&&x.metrics)return r({},e,g({},O,r({},x,{metrics:x.metrics.filter(function(e){return e!==C})})))}return e},objectSelectors:{getUrl:function(e){return u.tableRowsQuery(e.database_id,e.table_id,null)},getIcon:function(e){return"table"},getColor:function(e){return(0,l.color)("accent2")}},selectors:{getObject:function(e,t){var n=t.entityId;return(0,v.getMetadata)(e).table(n)},getObjectUnfiltered:function(e,t){var n=t.entityId,a=e.entities.tables[n];return a&&r({},a,{fields:(a.fields||[]).map(function(t){return m.default.selectors.getObjectUnfiltered(e,{entityId:t})}),metrics:(a.metrics||[]).map(function(t){return e.entities.metrics[t]}),segments:(a.segments||[]).map(function(t){return e.entities.segments[t]})})},getListUnfiltered:function(e,t){var n=e.entities,r=t.entityQuery;return(n.tables_list[JSON.stringify(r)]||[]).map(function(e){return n.tables[e]})},getTable:(0,s.createSelector)([function(e){return(0,v.getMetadata)(e)},function(e,t){return t.entityId}],function(e,t){return e.table(t)})}});t.default=N}},[3025]);